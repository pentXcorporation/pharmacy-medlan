
D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\App.jsx"   & echo.
/**
 * App Component
 * Root application component with all providers
 */

import { useEffect } from "react";
import { RouterProvider } from "react-router-dom";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { ReactQueryDevtools } from "@tanstack/react-query-devtools";
import { Toaster } from "@/components/ui/sonner";
import { TooltipProvider } from "@/components/ui/tooltip";
import { ErrorBoundary, GlobalConfirmDialog } from "@/components/common";
import { useAuthStore, useUiStore } from "@/store";
import router from "@/routes";

// Create React Query client
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5 minutes
      gcTime: 10 * 60 * 1000, // 10 minutes
      retry: 1,
      refetchOnWindowFocus: false,
    },
    mutations: {
      retry: 0,
    },
  },
});

/**
 * Theme Provider - applies theme class to document
 */
const ThemeProvider = ({ children }) => {
  const { theme, preferences } = useUiStore();

  useEffect(() => {
    const root = window.document.documentElement;
    root.classList.remove("light", "dark");

    if (theme === "system") {
      const systemTheme = window.matchMedia("(prefers-color-scheme: dark)")
        .matches
        ? "dark"
        : "light";
      root.classList.add(systemTheme);
    } else {
      root.classList.add(theme);
    }

    // Apply color theme
    root.setAttribute("data-theme", preferences.colorTheme);

    // Apply accessibility settings
    root.classList.toggle("high-contrast", preferences.highContrast);
    root.classList.toggle("reduce-motion", preferences.reduceMotion);
    root.classList.toggle("large-text", preferences.largeText);
    root.classList.toggle("screen-reader", preferences.screenReader);
    root.setAttribute("data-keyboard-nav", preferences.keyboardNav);
    root.classList.toggle("compact-tables", preferences.compactTables);
  }, [theme, preferences]);

  return children;
};

/**
 * Auth Initializer - restores auth state on app load
 */
const AuthInitializer = ({ children }) => {
  const { initializeAuth } = useAuthStore();

  useEffect(() => {
    initializeAuth();
  }, [initializeAuth]);

  return children;
};

/**
 * Main App Component
 */
function App() {
  return (
    <ErrorBoundary>
      <QueryClientProvider client={queryClient}>
        <ThemeProvider>
          <AuthInitializer>
            <TooltipProvider>
              <RouterProvider router={router} />

              {/* Global Toaster */}
              <Toaster
                position="top-right"
                expand={false}
                richColors
                closeButton
              />

              {/* Global Confirm Dialog */}
              <GlobalConfirmDialog />
            </TooltipProvider>
          </AuthInitializer>
        </ThemeProvider>

        {/* React Query Devtools (dev only) */}
        {import.meta.env.DEV && (
          <ReactQueryDevtools initialIsOpen={false} position="bottom-right" />
        )}
      </QueryClientProvider>
    </ErrorBoundary>
  );
}

export default App;


D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\main.jsx"   & echo.
/**
 * Main Entry Point
 * React application bootstrap
 */

import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import App from "./App.jsx";
import "./index.css";

createRoot(document.getElementById("root")).render(
  <StrictMode>
    <App />
  </StrictMode>
);


D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\AccessibilityWidget.jsx"   & echo.. 
/**
 * Accessibility Widget Component
 * Floating widget providing quick access to accessibility features
 */

import { useState, useEffect } from "react";
import {
  Accessibility,
  ZoomIn,
  ZoomOut,
  Eye,
  MousePointer2,
  Type,
  Sun,
  Moon,
  X,
  RotateCcw,
} from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  Popover,
  PopoverContent,
  PopoverTrigger,
} from "@/components/ui/popover";
import { Slider } from "@/components/ui/slider";
import { Switch } from "@/components/ui/switch";
import { Label } from "@/components/ui/label";
import { Separator } from "@/components/ui/separator";
import { cn } from "@/lib/utils";

// Default accessibility settings
const defaultSettings = {
  fontSize: 100,
  highContrast: false,
  reduceMotion: false,
  largeText: false,
  highlightLinks: false,
  readableFont: false,
  cursorSize: "normal",
  darkMode: false,
};

const AccessibilityWidget = () => {
  const [open, setOpen] = useState(false);
  const [settings, setSettings] = useState(() => {
    const saved = localStorage.getItem("accessibility-settings");
    return saved ? JSON.parse(saved) : defaultSettings;
  });

  // Apply settings to document
  const applySettings = (newSettings) => {
    const root = document.documentElement;

    // Font size
    root.style.fontSize = `${newSettings.fontSize}%`;

    // High contrast
    root.classList.toggle("high-contrast", newSettings.highContrast);

    // Reduce motion
    root.classList.toggle("reduce-motion", newSettings.reduceMotion);

    // Large text
    root.classList.toggle("large-text", newSettings.largeText);

    // Highlight links
    root.classList.toggle("highlight-links", newSettings.highlightLinks);

    // Readable font
    root.classList.toggle("readable-font", newSettings.readableFont);

    // Cursor size
    root.setAttribute("data-cursor-size", newSettings.cursorSize);

    // Dark mode
    if (newSettings.darkMode) {
      root.classList.add("dark");
    } else {
      root.classList.remove("dark");
    }
  };

  // Apply settings on mount and when settings change
  useEffect(() => {
    applySettings(settings);
    localStorage.setItem("accessibility-settings", JSON.stringify(settings));
  }, [settings]);

  // Update a single setting
  const updateSetting = (key, value) => {
    setSettings((prev) => ({ ...prev, [key]: value }));
  };

  // Reset all settings
  const resetSettings = () => {
    setSettings(defaultSettings);
  };

  // Quick font size adjustments
  const increaseFontSize = () => {
    setSettings((prev) => ({
      ...prev,
      fontSize: Math.min(prev.fontSize + 10, 150),
    }));
  };

  const decreaseFontSize = () => {
    setSettings((prev) => ({
      ...prev,
      fontSize: Math.max(prev.fontSize - 10, 80),
    }));
  };

  return (
    <div className="fixed bottom-6 right-6 z-50">
      <Popover open={open} onOpenChange={setOpen}>
        <PopoverTrigger asChild>
          <Button
            size="icon"
            className={cn(
              "h-14 w-14 rounded-full shadow-lg transition-all hover:scale-110",
              "bg-primary text-primary-foreground hover:bg-primary/90"
            )}
            aria-label="Accessibility options"
          >
            <Accessibility className="h-6 w-6" />
          </Button>
        </PopoverTrigger>
        <PopoverContent
          className="w-80 p-0"
          align="end"
          side="top"
          sideOffset={16}
        >
          <div className="p-4">
            <div className="flex items-center justify-between mb-4">
              <h3 className="font-semibold text-lg flex items-center gap-2">
                <Accessibility className="h-5 w-5" />
                Accessibility
              </h3>
              <div className="flex gap-1">
                <Button
                  variant="ghost"
                  size="icon"
                  onClick={resetSettings}
                  className="h-8 w-8"
                  title="Reset to defaults"
                >
                  <RotateCcw className="h-4 w-4" />
                </Button>
                <Button
                  variant="ghost"
                  size="icon"
                  onClick={() => setOpen(false)}
                  className="h-8 w-8"
                >
                  <X className="h-4 w-4" />
                </Button>
              </div>
            </div>

            {/* Text Size Section */}
            <div className="space-y-4">
              <div className="space-y-2">
                <Label className="text-sm font-medium flex items-center gap-2">
                  <Type className="h-4 w-4" />
                  Text Size: {settings.fontSize}%
                </Label>
                <div className="flex items-center gap-2">
                  <Button
                    variant="outline"
                    size="icon"
                    className="h-8 w-8 shrink-0"
                    onClick={decreaseFontSize}
                    disabled={settings.fontSize <= 80}
                  >
                    <ZoomOut className="h-4 w-4" />
                  </Button>
                  <Slider
                    value={[settings.fontSize]}
                    onValueChange={([value]) => updateSetting("fontSize", value)}
                    min={80}
                    max={150}
                    step={5}
                    className="flex-1"
                  />
                  <Button
                    variant="outline"
                    size="icon"
                    className="h-8 w-8 shrink-0"
                    onClick={increaseFontSize}
                    disabled={settings.fontSize >= 150}
                  >
                    <ZoomIn className="h-4 w-4" />
                  </Button>
                </div>
              </div>

              <Separator />

              {/* Toggle Options */}
              <div className="space-y-3">
                {/* Dark Mode */}
                <div className="flex items-center justify-between">
                  <Label className="text-sm flex items-center gap-2 cursor-pointer">
                    {settings.darkMode ? (
                      <Moon className="h-4 w-4" />
                    ) : (
                      <Sun className="h-4 w-4" />
                    )}
                    Dark Mode
                  </Label>
                  <Switch
                    checked={settings.darkMode}
                    onCheckedChange={(checked) =>
                      updateSetting("darkMode", checked)
                    }
                  />
                </div>

                {/* High Contrast */}
                <div className="flex items-center justify-between">
                  <Label className="text-sm flex items-center gap-2 cursor-pointer">
                    <Eye className="h-4 w-4" />
                    High Contrast
                  </Label>
                  <Switch
                    checked={settings.highContrast}
                    onCheckedChange={(checked) =>
                      updateSetting("highContrast", checked)
                    }
                  />
                </div>

                {/* Reduce Motion */}
                <div className="flex items-center justify-between">
                  <Label className="text-sm flex items-center gap-2 cursor-pointer">
                    <MousePointer2 className="h-4 w-4" />
                    Reduce Motion
                  </Label>
                  <Switch
                    checked={settings.reduceMotion}
                    onCheckedChange={(checked) =>
                      updateSetting("reduceMotion", checked)
                    }
                  />
                </div>

                {/* Highlight Links */}
                <div className="flex items-center justify-between">
                  <Label className="text-sm flex items-center gap-2 cursor-pointer">
                    <span className="h-4 w-4 flex items-center justify-center font-bold underline text-xs">
                      A
                    </span>
                    Highlight Links
                  </Label>
                  <Switch
                    checked={settings.highlightLinks}
                    onCheckedChange={(checked) =>
                      updateSetting("highlightLinks", checked)
                    }
                  />
                </div>

                {/* Readable Font */}
                <div className="flex items-center justify-between">
                  <Label className="text-sm flex items-center gap-2 cursor-pointer">
                    <Type className="h-4 w-4" />
                    Readable Font
                  </Label>
                  <Switch
                    checked={settings.readableFont}
                    onCheckedChange={(checked) =>
                      updateSetting("readableFont", checked)
                    }
                  />
                </div>

                {/* Large Cursor */}
                <div className="flex items-center justify-between">
                  <Label className="text-sm flex items-center gap-2 cursor-pointer">
                    <MousePointer2 className="h-4 w-4" />
                    Large Cursor
                  </Label>
                  <Switch
                    checked={settings.cursorSize === "large"}
                    onCheckedChange={(checked) =>
                      updateSetting("cursorSize", checked ? "large" : "normal")
                    }
                  />
                </div>
              </div>
            </div>
          </div>

          {/* Quick Actions Footer */}
          <div className="border-t bg-muted/50 p-3">
            <div className="flex gap-2">
              <Button
                variant="outline"
                size="sm"
                className="flex-1 text-xs"
                onClick={() => updateSetting("fontSize", 80)}
              >
                Small
              </Button>
              <Button
                variant="outline"
                size="sm"
                className="flex-1 text-xs"
                onClick={() => updateSetting("fontSize", 100)}
              >
                Normal
              </Button>
              <Button
                variant="outline"
                size="sm"
                className="flex-1 text-xs"
                onClick={() => updateSetting("fontSize", 125)}
              >
                Large
              </Button>
              <Button
                variant="outline"
                size="sm"
                className="flex-1 text-xs"
                onClick={() => updateSetting("fontSize", 150)}
              >
                XL
              </Button>
            </div>
          </div>
        </PopoverContent>
      </Popover>
    </div>
  );
};

export default AccessibilityWidget;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\ConfirmDialog.jsx"   & echo.. 
/**
 * ConfirmDialog Component
 * Reusable confirmation dialog with customizable actions
 */

import { AlertTriangle, Trash2, LogOut, AlertCircle, Info } from "lucide-react";
import { cn } from "@/lib/utils";
import { useUiStore } from "@/store";
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
} from "@/components/ui/alert-dialog";
import { Button } from "@/components/ui/button";

/**
 * Dialog variant icons
 */
const VARIANT_ICONS = {
  danger: Trash2,
  warning: AlertTriangle,
  info: Info,
  logout: LogOut,
  default: AlertCircle,
};

/**
 * Dialog variant styles
 */
const VARIANT_STYLES = {
  danger: {
    iconBg: "bg-destructive/10",
    iconColor: "text-destructive",
    buttonVariant: "destructive",
  },
  warning: {
    iconBg: "bg-amber-100",
    iconColor: "text-amber-600",
    buttonVariant: "default",
  },
  info: {
    iconBg: "bg-blue-100",
    iconColor: "text-blue-600",
    buttonVariant: "default",
  },
  logout: {
    iconBg: "bg-destructive/10",
    iconColor: "text-destructive",
    buttonVariant: "destructive",
  },
  default: {
    iconBg: "bg-muted",
    iconColor: "text-muted-foreground",
    buttonVariant: "default",
  },
};

/**
 * Standalone ConfirmDialog component
 */
const ConfirmDialog = ({
  open,
  onOpenChange,
  title = "Are you sure?",
  description,
  variant = "default",
  confirmLabel = "Confirm",
  cancelLabel = "Cancel",
  onConfirm,
  onCancel,
  isLoading = false,
  icon: CustomIcon,
}) => {
  const Icon = CustomIcon || VARIANT_ICONS[variant] || VARIANT_ICONS.default;
  const styles = VARIANT_STYLES[variant] || VARIANT_STYLES.default;

  const handleConfirm = () => {
    onConfirm?.();
    if (!isLoading) {
      onOpenChange?.(false);
    }
  };

  const handleCancel = () => {
    onCancel?.();
    onOpenChange?.(false);
  };

  return (
    <AlertDialog open={open} onOpenChange={onOpenChange}>
      <AlertDialogContent className="top-[20%] translate-y-0">
        <AlertDialogHeader>
          <div className="flex items-start gap-4">
            <div className={cn("rounded-full p-2", styles.iconBg)}>
              <Icon className={cn("h-6 w-6", styles.iconColor)} />
            </div>
            <div>
              <AlertDialogTitle>{title}</AlertDialogTitle>
              {description && (
                <AlertDialogDescription className="mt-2">
                  {description}
                </AlertDialogDescription>
              )}
            </div>
          </div>
        </AlertDialogHeader>
        <AlertDialogFooter>
          <AlertDialogCancel onClick={handleCancel} disabled={isLoading}>
            {cancelLabel}
          </AlertDialogCancel>
          <AlertDialogAction
            onClick={handleConfirm}
            disabled={isLoading}
            className={cn(
              styles.buttonVariant === "destructive" &&
                "bg-destructive text-destructive-foreground hover:bg-destructive/90"
            )}
          >
            {isLoading ? "Processing..." : confirmLabel}
          </AlertDialogAction>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  );
};

/**
 * Global ConfirmDialog connected to UI store
 */
export const GlobalConfirmDialog = () => {
  const { confirmDialog, hideConfirmDialog } = useUiStore();

  if (!confirmDialog) return null;

  return (
    <ConfirmDialog
      open={confirmDialog.open}
      onOpenChange={(open) => {
        if (!open) hideConfirmDialog();
      }}
      title={confirmDialog.title}
      description={confirmDialog.description}
      variant={confirmDialog.variant}
      confirmLabel={confirmDialog.confirmLabel}
      cancelLabel={confirmDialog.cancelLabel}
      onConfirm={confirmDialog.onConfirm}
      onCancel={confirmDialog.onCancel}
      isLoading={confirmDialog.isLoading}
    />
  );
};

/**
 * useConfirm hook for imperative dialog usage
 */
export const useConfirm = () => {
  const { showConfirmDialog, hideConfirmDialog } = useUiStore();

  const confirm = (options) => {
    return new Promise((resolve) => {
      showConfirmDialog({
        ...options,
        onConfirm: () => {
          hideConfirmDialog();
          resolve(true);
        },
        onCancel: () => {
          hideConfirmDialog();
          resolve(false);
        },
      });
    });
  };

  return { confirm };
};

export default ConfirmDialog;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\DataTable.jsx"   & echo.. 
/**
 * DataTable Component
 * Reusable data table with sorting, filtering, pagination using shadcn components
 */

import { useState, useMemo } from "react";
import {
  ArrowUpDown,
  ArrowUp,
  ArrowDown,
  ChevronLeft,
  ChevronRight,
  ChevronsLeft,
  ChevronsRight,
} from "lucide-react";
import { cn } from "@/lib/utils";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Skeleton } from "@/components/ui/skeleton";
import {
  Pagination,
  PaginationContent,
  PaginationItem,
} from "@/components/ui/pagination";

/**
 * Sortable header component
 */
const SortableHeader = ({
  column,
  sortKey,
  sortDirection,
  onSort,
  children,
}) => {
  const isActive = column === sortKey;

  return (
    <Button
      variant="ghost"
      size="sm"
      className="-ml-3 h-8 data-[state=open]:bg-accent"
      onClick={() => onSort(column)}
    >
      <span>{children}</span>
      {isActive && sortDirection === "asc" ? (
        <ArrowUp className="ml-2 h-4 w-4" />
      ) : isActive && sortDirection === "desc" ? (
        <ArrowDown className="ml-2 h-4 w-4" />
      ) : (
        <ArrowUpDown className="ml-2 h-4 w-4 opacity-50" />
      )}
    </Button>
  );
};

/**
 * Loading skeleton for table
 */
const TableSkeleton = ({ columns, rows = 5 }) => (
  <TableBody>
    {Array.from({ length: rows }).map((_, rowIndex) => (
      <TableRow key={rowIndex}>
        {Array.from({ length: columns }).map((_, colIndex) => (
          <TableCell key={colIndex}>
            <Skeleton className="h-4 w-full" />
          </TableCell>
        ))}
      </TableRow>
    ))}
  </TableBody>
);

/**
 * Pagination controls using shadcn Pagination
 */
const DataTablePagination = ({
  currentPage,
  pageCount,
  pageSize,
  totalItems,
  onPageChange,
  onPageSizeChange,
}) => {
  const canGoPrevious = currentPage > 0;
  const canGoNext = currentPage < pageCount - 1;

  return (
    <div className="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between px-2 py-4">
      {/* Results count - hidden on very small screens */}
      <div className="hidden sm:flex items-center gap-2 text-xs sm:text-sm text-muted-foreground">
        <span>
          {Math.min(currentPage * pageSize + 1, totalItems)}-
          {Math.min((currentPage + 1) * pageSize, totalItems)} of {totalItems}
        </span>
      </div>

      <div className="flex flex-wrap items-center justify-between sm:justify-end gap-2 sm:gap-4">
        {/* Rows per page - hidden on mobile */}
        <div className="hidden md:flex items-center gap-2 text-sm text-muted-foreground">
          <span>Rows:</span>
          <Select
            value={`${pageSize}`}
            onValueChange={(value) => onPageSizeChange(Number(value))}
          >
            <SelectTrigger className="h-8 w-[65px]">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              {[10, 20, 30, 50, 100].map((size) => (
                <SelectItem key={size} value={`${size}`}>
                  {size}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>
        </div>

        {/* Page indicator */}
        <span className="text-xs sm:text-sm text-muted-foreground whitespace-nowrap">
          Page {currentPage + 1}/{pageCount || 1}
        </span>

        {/* Navigation buttons using shadcn Pagination */}
        <Pagination className="mx-0 w-auto">
          <PaginationContent className="gap-1">
            <PaginationItem>
              <Button
                variant="outline"
                size="icon"
                className="h-8 w-8"
                onClick={() => onPageChange(0)}
                disabled={!canGoPrevious}
              >
                <ChevronsLeft className="h-4 w-4" />
              </Button>
            </PaginationItem>
            <PaginationItem>
              <Button
                variant="outline"
                size="icon"
                className="h-8 w-8"
                onClick={() => onPageChange(currentPage - 1)}
                disabled={!canGoPrevious}
              >
                <ChevronLeft className="h-4 w-4" />
              </Button>
            </PaginationItem>
            <PaginationItem>
              <Button
                variant="outline"
                size="icon"
                className="h-8 w-8"
                onClick={() => onPageChange(currentPage + 1)}
                disabled={!canGoNext}
              >
                <ChevronRight className="h-4 w-4" />
              </Button>
            </PaginationItem>
            <PaginationItem>
              <Button
                variant="outline"
                size="icon"
                className="h-8 w-8"
                onClick={() => onPageChange(pageCount - 1)}
                disabled={!canGoNext}
              >
                <ChevronsRight className="h-4 w-4" />
              </Button>
            </PaginationItem>
          </PaginationContent>
        </Pagination>
      </div>
    </div>
  );
};

/**
 * Get nested value from object using accessor key
 */
const getNestedValue = (obj, path) => {
  if (!path) return undefined;
  if (typeof path === "function") return path(obj);
  return path.split(".").reduce((acc, key) => acc?.[key], obj);
};

/**
 * Main DataTable component
 */
const DataTable = ({
  columns,
  data = [],
  isLoading = false,
  isFetching = false,
  searchPlaceholder = "Search...",
  searchColumn,
  showSearch = false,
  showPagination = true,
  pageSize: defaultPageSize = 10,
  onRowClick,
  emptyMessage = "No data available.",
  className,
  // Server-side pagination props
  pagination: externalPagination,
  onPaginationChange,
  // Server-side sorting props
  sorting: externalSorting,
  onSortingChange,
  // Manual pagination/sorting (server-side mode)
  manualPagination = !!onPaginationChange,
  manualSorting = !!onSortingChange,
}) => {
  // Internal state for client-side operations
  const [internalSorting, setInternalSorting] = useState([]);
  const [globalFilter, setGlobalFilter] = useState("");
  const [internalPageIndex, setInternalPageIndex] = useState(0);
  const [internalPageSize, setInternalPageSize] = useState(defaultPageSize);
  const [rowSelection, setRowSelection] = useState({});

  // Use external state if provided, otherwise use internal state
  const sorting = externalSorting ?? internalSorting;
  const setSorting = onSortingChange ?? setInternalSorting;

  const pageIndex = externalPagination?.pageIndex ?? internalPageIndex;
  const pageSize = externalPagination?.pageSize ?? internalPageSize;

  // Handle sorting
  const handleSort = (columnId) => {
    const currentSort = sorting.find((s) => s.id === columnId);
    let newSorting;

    if (!currentSort) {
      newSorting = [{ id: columnId, desc: false }];
    } else if (!currentSort.desc) {
      newSorting = [{ id: columnId, desc: true }];
    } else {
      newSorting = [];
    }

    setSorting(newSorting);
  };

  // Handle page change
  const handlePageChange = (newPageIndex) => {
    if (onPaginationChange) {
      onPaginationChange({ pageIndex: newPageIndex, pageSize });
    } else {
      setInternalPageIndex(newPageIndex);
    }
  };

  // Handle page size change
  const handlePageSizeChange = (newPageSize) => {
    if (onPaginationChange) {
      onPaginationChange({ pageIndex: 0, pageSize: newPageSize });
    } else {
      setInternalPageSize(newPageSize);
      setInternalPageIndex(0);
    }
  };

  // Process data (filter, sort, paginate) for client-side mode
  const processedData = useMemo(() => {
    // Ensure data is an array
    const safeData = Array.isArray(data) ? data : [];
    let result = [...safeData];

    // Client-side filtering
    if (!manualPagination && globalFilter) {
      result = result.filter((row) =>
        columns.some((col) => {
          const value = getNestedValue(row, col.accessorKey || col.id);
          return String(value ?? "")
            .toLowerCase()
            .includes(globalFilter.toLowerCase());
        })
      );
    }

    // Client-side sorting
    if (!manualSorting && sorting.length > 0) {
      const { id, desc } = sorting[0];
      result.sort((a, b) => {
        const col = columns.find((c) => (c.accessorKey || c.id) === id);
        const aVal = col?.accessorFn
          ? col.accessorFn(a)
          : getNestedValue(a, col?.accessorKey);
        const bVal = col?.accessorFn
          ? col.accessorFn(b)
          : getNestedValue(b, col?.accessorKey);

        if (aVal == null) return 1;
        if (bVal == null) return -1;
        if (aVal < bVal) return desc ? 1 : -1;
        if (aVal > bVal) return desc ? -1 : 1;
        return 0;
      });
    }

    return result;
  }, [data, globalFilter, sorting, columns, manualPagination, manualSorting]);

  // Paginate data for client-side mode
  const paginatedData = useMemo(() => {
    if (manualPagination) return Array.isArray(data) ? data : [];
    const start = pageIndex * pageSize;
    return processedData.slice(start, start + pageSize);
  }, [processedData, data, pageIndex, pageSize, manualPagination]);

  // Calculate pagination info
  const totalItems = externalPagination?.total ?? processedData.length;
  const pageCount =
    externalPagination?.pageCount ?? Math.ceil(totalItems / pageSize);

  // Get current sort info
  const sortKey = sorting[0]?.id;
  const sortDirection = sorting[0]?.desc ? "desc" : "asc";

  // Mock table object for TanStack Table API compatibility
  const mockTable = useMemo(
    () => ({
      getIsAllPageRowsSelected: () => {
        if (paginatedData.length === 0) return false;
        return paginatedData.every((row) => rowSelection[row.id]);
      },
      getIsSomePageRowsSelected: () => {
        if (paginatedData.length === 0) return false;
        const selectedCount = paginatedData.filter(
          (row) => rowSelection[row.id]
        ).length;
        return selectedCount > 0 && selectedCount < paginatedData.length;
      },
      toggleAllPageRowsSelected: (value) => {
        if (value) {
          const newSelection = { ...rowSelection };
          paginatedData.forEach((row) => {
            if (row.id) newSelection[row.id] = true;
          });
          setRowSelection(newSelection);
        } else {
          const newSelection = { ...rowSelection };
          paginatedData.forEach((row) => {
            if (row.id) delete newSelection[row.id];
          });
          setRowSelection(newSelection);
        }
      },
      getSelectedRowModel: () => ({
        rows: paginatedData
          .filter((row) => rowSelection[row.id])
          .map((row) => ({
            original: row,
            id: row.id,
          })),
      }),
    }),
    [paginatedData, rowSelection]
  );

  // Mock row object creator for TanStack Table API compatibility
  const createMockRow = (row) => ({
    original: row,
    getValue: (key) => getNestedValue(row, key),
    getIsSelected: () => !!rowSelection[row.id],
    toggleSelected: (value) => {
      setRowSelection((prev) => {
        const newSelection = { ...prev };
        if (value ?? !prev[row.id]) {
          newSelection[row.id] = true;
        } else {
          delete newSelection[row.id];
        }
        return newSelection;
      });
    },
  });

  return (
    <div className={cn("space-y-4", className)}>
      {/* Search */}
      {showSearch && (
        <div className="flex items-center gap-4">
          <Input
            placeholder={searchPlaceholder}
            value={globalFilter}
            onChange={(e) => setGlobalFilter(e.target.value)}
            className="w-full sm:max-w-sm"
          />
        </div>
      )}

      {/* Table */}
      <div className="w-full overflow-auto">
        <Table>
          <TableHeader>
            <TableRow>
              {columns.map((column) => {
                const columnId = column.accessorKey || column.id;
                const canSort = column.enableSorting !== false;

                return (
                  <TableHead
                    key={columnId}
                    className={cn("whitespace-nowrap", column.meta?.className)}
                    style={{
                      width: column.size ? `${column.size}px` : undefined,
                      maxWidth: column.size ? `${column.size}px` : undefined,
                    }}
                  >
                    {canSort && typeof column.header === "string" ? (
                      <SortableHeader
                        column={columnId}
                        sortKey={sortKey}
                        sortDirection={sortDirection}
                        onSort={handleSort}
                      >
                        {column.header}
                      </SortableHeader>
                    ) : typeof column.header === "function" ? (
                      column.header({ table: mockTable, column })
                    ) : (
                      column.header
                    )}
                  </TableHead>
                );
              })}
            </TableRow>
          </TableHeader>

          {isLoading ? (
            <TableSkeleton columns={columns.length} />
          ) : (
            <TableBody>
              {paginatedData.length > 0 ? (
                paginatedData.map((row, rowIndex) => {
                  const mockRow = createMockRow(row);
                  return (
                    <TableRow
                      key={row.id ?? rowIndex}
                      onClick={() => onRowClick?.(row)}
                      className={cn(
                        onRowClick && "cursor-pointer hover:bg-accent/50",
                        isFetching && "opacity-50",
                        rowSelection[row.id] && "bg-muted/50"
                      )}
                    >
                      {columns.map((column) => {
                        const columnId = column.accessorKey || column.id;
                        const value = column.accessorFn
                          ? column.accessorFn(row)
                          : getNestedValue(row, column.accessorKey);

                        return (
                          <TableCell
                            key={columnId}
                            className={column.meta?.className}
                          >
                            {column.cell
                              ? column.cell({
                                  row: mockRow,
                                  getValue: () => value,
                                  table: mockTable,
                                })
                              : value ?? "-"}
                          </TableCell>
                        );
                      })}
                    </TableRow>
                  );
                })
              ) : (
                <TableRow>
                  <TableCell
                    colSpan={columns.length}
                    className="h-24 text-center text-muted-foreground"
                  >
                    {emptyMessage}
                  </TableCell>
                </TableRow>
              )}
            </TableBody>
          )}
        </Table>
      </div>

      {/* Pagination */}
      {showPagination && (
        <DataTablePagination
          currentPage={pageIndex}
          pageCount={pageCount}
          pageSize={pageSize}
          totalItems={totalItems}
          onPageChange={handlePageChange}
          onPageSizeChange={handlePageSizeChange}
        />
      )}
    </div>
  );
};

// Export sortable header for use in column definitions
DataTable.SortableHeader = SortableHeader;

export default DataTable;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\EmptyState.jsx"   & echo.. 
/**
 * EmptyState Component
 * Placeholder for empty data states with icon and call-to-action
 */

import { Package, Search, FileX, AlertCircle, Plus } from "lucide-react";
import { cn } from "@/lib/utils";
import { Button } from "@/components/ui/button";

/**
 * Default icons for common empty states
 */
const EMPTY_ICONS = {
  default: Package,
  search: Search,
  noData: FileX,
  error: AlertCircle,
};

/**
 * EmptyState component
 */
const EmptyState = ({
  icon: Icon,
  iconType = "default",
  title = "No data found",
  description,
  actionLabel,
  actionIcon: ActionIcon = Plus,
  onAction,
  actionHref,
  className,
  size = "default",
}) => {
  const IconComponent = Icon || EMPTY_ICONS[iconType] || EMPTY_ICONS.default;

  const sizeClasses = {
    sm: "py-8",
    default: "py-16",
    lg: "py-24",
  };

  const iconSizes = {
    sm: "h-10 w-10",
    default: "h-16 w-16",
    lg: "h-24 w-24",
  };

  return (
    <div
      className={cn(
        "flex flex-col items-center justify-center text-center",
        sizeClasses[size],
        className
      )}
    >
      <div className="rounded-full bg-muted p-4 mb-4">
        <IconComponent
          className={cn("text-muted-foreground", iconSizes[size])}
        />
      </div>
      <h3 className="text-lg font-semibold mb-1">{title}</h3>
      {description && (
        <p className="text-muted-foreground max-w-sm mb-4">{description}</p>
      )}
      {(onAction || actionHref) && actionLabel && (
        <Button onClick={onAction} asChild={!!actionHref}>
          {actionHref ? (
            <a href={actionHref}>
              <ActionIcon className="h-4 w-4 mr-2" />
              {actionLabel}
            </a>
          ) : (
            <>
              <ActionIcon className="h-4 w-4 mr-2" />
              {actionLabel}
            </>
          )}
        </Button>
      )}
    </div>
  );
};

/**
 * SearchEmptyState - Specialized empty state for search results
 */
export const SearchEmptyState = ({ searchTerm, onClear, suggestions = [] }) => (
  <EmptyState
    iconType="search"
    title="No results found"
    description={
      searchTerm
        ? `No results found for "${searchTerm}". Try adjusting your search.`
        : "Try searching for something."
    }
    actionLabel={searchTerm && onClear ? "Clear search" : undefined}
    onAction={onClear}
    actionIcon={Search}
  />
);

/**
 * ErrorEmptyState - Specialized empty state for errors
 */
export const ErrorEmptyState = ({
  title = "Something went wrong",
  description = "An error occurred while loading data. Please try again.",
  onRetry,
}) => (
  <EmptyState
    iconType="error"
    title={title}
    description={description}
    actionLabel={onRetry ? "Try again" : undefined}
    onAction={onRetry}
  />
);

export default EmptyState;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\ErrorBoundary.jsx"   & echo.. 
/**
 * ErrorBoundary Component
 * React error boundary for graceful error handling
 */

import { Component } from "react";
import { AlertTriangle, RefreshCw, Home } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardHeader,
  CardTitle,
  CardDescription,
} from "@/components/ui/card";

/**
 * ErrorBoundary class component
 */
class ErrorBoundary extends Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null, errorInfo: null };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }

  componentDidCatch(error, errorInfo) {
    this.setState({ errorInfo });

    // Log error to console in development
    if (import.meta.env.DEV) {
      console.error("ErrorBoundary caught an error:", error, errorInfo);
    }

    // Call onError callback if provided
    this.props.onError?.(error, errorInfo);
  }

  handleReset = () => {
    this.setState({ hasError: false, error: null, errorInfo: null });
    this.props.onReset?.();
  };

  handleHome = () => {
    window.location.href = "/";
  };

  render() {
    if (this.state.hasError) {
      // Custom fallback provided
      if (this.props.fallback) {
        return this.props.fallback;
      }

      // Default error UI
      return (
        <div className="min-h-[400px] flex items-center justify-center p-4">
          <Card className="w-full max-w-md">
            <CardHeader className="text-center">
              <div className="flex justify-center mb-4">
                <div className="rounded-full bg-destructive/10 p-4">
                  <AlertTriangle className="h-8 w-8 text-destructive" />
                </div>
              </div>
              <CardTitle>Something went wrong</CardTitle>
              <CardDescription>
                {this.props.message ||
                  "An unexpected error occurred. Please try refreshing the page or contact support if the problem persists."}
              </CardDescription>
            </CardHeader>
            <CardContent className="flex flex-col gap-4">
              {/* Error details in development */}
              {import.meta.env.DEV && this.state.error && (
                <div className="rounded-md bg-muted p-3 text-sm">
                  <p className="font-mono text-destructive break-all">
                    {this.state.error.toString()}
                  </p>
                  {this.state.errorInfo?.componentStack && (
                    <pre className="mt-2 text-xs text-muted-foreground overflow-auto max-h-32">
                      {this.state.errorInfo.componentStack}
                    </pre>
                  )}
                </div>
              )}

              {/* Action buttons */}
              <div className="flex gap-2 justify-center">
                <Button onClick={this.handleReset} variant="outline">
                  <RefreshCw className="h-4 w-4 mr-2" />
                  Try Again
                </Button>
                <Button onClick={this.handleHome}>
                  <Home className="h-4 w-4 mr-2" />
                  Go Home
                </Button>
              </div>
            </CardContent>
          </Card>
        </div>
      );
    }

    return this.props.children;
  }
}

/**
 * withErrorBoundary HOC for functional components
 */
export const withErrorBoundary = (
  WrappedComponent,
  errorBoundaryProps = {}
) => {
  return function WithErrorBoundary(props) {
    return (
      <ErrorBoundary {...errorBoundaryProps}>
        <WrappedComponent {...props} />
      </ErrorBoundary>
    );
  };
};

export default ErrorBoundary;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\LoadingSpinner.jsx"   & echo.. 
/**
 * LoadingSpinner Component
 * Animated loading indicator with different sizes and variants
 */

import { Loader2 } from "lucide-react";
import { cn } from "@/lib/utils";

/**
 * LoadingSpinner component
 */
const LoadingSpinner = ({
  size = "default",
  className,
  label = "Loading...",
  showLabel = false,
  fullScreen = false,
  overlay = false,
}) => {
  const sizeClasses = {
    xs: "h-3 w-3",
    sm: "h-4 w-4",
    default: "h-6 w-6",
    lg: "h-8 w-8",
    xl: "h-12 w-12",
  };

  const spinner = (
    <div
      className={cn(
        "flex flex-col items-center justify-center gap-2",
        fullScreen && "min-h-screen",
        className
      )}
    >
      <Loader2 className={cn("animate-spin text-primary", sizeClasses[size])} />
      {showLabel && (
        <span className="text-sm text-muted-foreground">{label}</span>
      )}
    </div>
  );

  if (overlay) {
    return (
      <div className="fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm">
        {spinner}
      </div>
    );
  }

  return spinner;
};

/**
 * PageLoader - Full page loading state
 */
export const PageLoader = ({ message = "Loading..." }) => (
  <LoadingSpinner
    size="lg"
    showLabel
    label={message}
    className="min-h-[400px]"
  />
);

/**
 * ButtonSpinner - Inline spinner for buttons
 */
export const ButtonSpinner = ({ className }) => (
  <Loader2 className={cn("h-4 w-4 animate-spin", className)} />
);

/**
 * CardLoader - Loading state for cards
 */
export const CardLoader = () => (
  <div className="flex items-center justify-center p-8">
    <LoadingSpinner size="default" showLabel />
  </div>
);

/**
 * LoadingScreen - Full screen loading overlay
 */
export const LoadingScreen = ({ message = "Loading..." }) => (
  <LoadingSpinner
    size="xl"
    showLabel
    label={message}
    fullScreen
    overlay
  />
);

export default LoadingSpinner;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\PageHeader.jsx"   & echo.. 
/**
 * PageHeader Component
 * Consistent page header with title, description, and actions
 */

import { ArrowLeft } from "lucide-react";
import { Link, useNavigate } from "react-router-dom";
import { cn } from "@/lib/utils";
import { Button } from "@/components/ui/button";
import {
  Breadcrumb,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbList,
  BreadcrumbPage,
  BreadcrumbSeparator,
} from "@/components/ui/breadcrumb";

/**
 * Breadcrumb item type
 * @typedef {Object} BreadcrumbItem
 * @property {string} label - Display label
 * @property {string} href - Link path
 */

/**
 * Breadcrumbs component using shadcn breadcrumb
 */
const Breadcrumbs = ({ items = [] }) => {
  if (items.length === 0) return null;

  return (
    <Breadcrumb className="mb-2">
      <BreadcrumbList>
        {items.map((item, index) => (
          <BreadcrumbItem key={item.href || index}>
            {item.href ? (
              <>
                <BreadcrumbLink asChild>
                  <Link to={item.href}>{item.label}</Link>
                </BreadcrumbLink>
                {index < items.length - 1 && <BreadcrumbSeparator />}
              </>
            ) : (
              <BreadcrumbPage>{item.label}</BreadcrumbPage>
            )}
          </BreadcrumbItem>
        ))}
      </BreadcrumbList>
    </Breadcrumb>
  );
};

/**
 * PageHeader component
 */
const PageHeader = ({
  title,
  description,
  breadcrumbs = [],
  actions,
  backHref,
  showBack = false,
  className,
  children,
}) => {
  const navigate = useNavigate();

  const handleBack = () => {
    if (backHref) {
      navigate(backHref);
    } else {
      navigate(-1);
    }
  };

  return (
    <div className={cn("mb-4 sm:mb-6", className)}>
      {/* Breadcrumbs */}
      {breadcrumbs.length > 0 && <Breadcrumbs items={breadcrumbs} />}

      {/* Header Row */}
      <div className="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
        <div className="flex items-center gap-3 sm:gap-4 min-w-0">
          {/* Back Button */}
          {showBack && (
            <Button
              variant="ghost"
              size="icon"
              onClick={handleBack}
              className="shrink-0 h-8 w-8 sm:h-9 sm:w-9"
            >
              <ArrowLeft className="h-4 w-4 sm:h-5 sm:w-5" />
              <span className="sr-only">Go back</span>
            </Button>
          )}

          {/* Title & Description */}
          <div className="min-w-0">
            <h1 className="text-lg sm:text-xl md:text-2xl font-bold tracking-tight truncate">
              {title}
            </h1>
            {description && (
              <p className="text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1 line-clamp-2">
                {description}
              </p>
            )}
          </div>
        </div>

        {/* Actions */}
        {actions && (
          <div className="flex flex-wrap items-center gap-2 shrink-0">
            {actions}
          </div>
        )}
      </div>

      {/* Additional Content */}
      {children && <div className="mt-4">{children}</div>}
    </div>
  );
};

export default PageHeader;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\SearchInput.jsx"   & echo.. 
/**
 * SearchInput Component
 * Search input with debouncing and clear functionality
 */

import { useState, useEffect } from "react";
import { Search, X, Loader2 } from "lucide-react";
import { cn } from "@/lib/utils";
import { useDebounce } from "@/hooks";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";

/**
 * SearchInput component with debouncing
 */
const SearchInput = ({
  value: controlledValue,
  onChange,
  onSearch,
  placeholder = "Search...",
  debounceMs = 300,
  isLoading = false,
  autoFocus = false,
  className,
  inputClassName,
  size = "default",
  showClear = true,
  ...props
}) => {
  // Internal state for uncontrolled usage
  const [internalValue, setInternalValue] = useState("");

  // Use controlled or uncontrolled value
  const value = controlledValue !== undefined ? controlledValue : internalValue;
  const debouncedValue = useDebounce(value, debounceMs);

  // Trigger search on debounced value change
  useEffect(() => {
    onSearch?.(debouncedValue);
  }, [debouncedValue, onSearch]);

  const handleChange = (e) => {
    const newValue = e.target.value;

    if (controlledValue !== undefined) {
      onChange?.(newValue);
    } else {
      setInternalValue(newValue);
      onChange?.(newValue);
    }
  };

  const handleClear = () => {
    if (controlledValue !== undefined) {
      onChange?.("");
    } else {
      setInternalValue("");
      onChange?.("");
    }
  };

  const sizeClasses = {
    sm: "h-8 text-sm",
    default: "h-10",
    lg: "h-12 text-lg",
  };

  return (
    <div className={cn("relative", className)}>
      {/* Search Icon */}
      <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none" />

      {/* Input */}
      <Input
        type="search"
        value={value}
        onChange={handleChange}
        placeholder={placeholder}
        autoFocus={autoFocus}
        className={cn(
          "pl-9",
          showClear && value && "pr-9",
          sizeClasses[size],
          inputClassName
        )}
        {...props}
      />

      {/* Loading/Clear Button */}
      <div className="absolute right-1 top-1/2 -translate-y-1/2 flex items-center">
        {isLoading ? (
          <Loader2 className="h-4 w-4 animate-spin text-muted-foreground mr-2" />
        ) : (
          showClear &&
          value && (
            <Button
              type="button"
              variant="ghost"
              size="icon"
              className="h-7 w-7"
              onClick={handleClear}
            >
              <X className="h-4 w-4" />
              <span className="sr-only">Clear search</span>
            </Button>
          )
        )}
      </div>
    </div>
  );
};

/**
 * CommandSearch - Search with command palette style
 */
export const CommandSearch = ({
  placeholder = "Type a command or search...",
  shortcutKey = "K",
  ...props
}) => (
  <SearchInput
    placeholder={placeholder}
    className="w-full max-w-md"
    {...props}
  />
);

export default SearchInput;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\StatCard.jsx"   & echo.. 
/**
 * StatCard Component
 * Dashboard statistics card with icon, value, and trend indicator
 */

import * as React from "react";
import { TrendingUp, TrendingDown, Minus } from "lucide-react";
import { cn } from "@/lib/utils";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Skeleton } from "@/components/ui/skeleton";

/**
 * Trend indicator component
 */
const TrendIndicator = ({ value, suffix = "%" }) => {
  if (value === undefined || value === null) return null;

  const isPositive = value > 0;
  const isNeutral = value === 0;

  return (
    <div
      className={cn(
        "flex items-center gap-1 text-sm font-medium",
        isPositive && "text-emerald-600",
        !isPositive && !isNeutral && "text-destructive",
        isNeutral && "text-muted-foreground"
      )}
    >
      {isPositive ? (
        <TrendingUp className="h-4 w-4" />
      ) : isNeutral ? (
        <Minus className="h-4 w-4" />
      ) : (
        <TrendingDown className="h-4 w-4" />
      )}
      <span>
        {isPositive && "+"}
        {value}
        {suffix}
      </span>
    </div>
  );
};

/**
 * Loading skeleton for stat card
 */
const StatCardSkeleton = () => (
  <Card>
    <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
      <Skeleton className="h-4 w-24" />
      <Skeleton className="h-5 w-5 rounded" />
    </CardHeader>
    <CardContent>
      <Skeleton className="h-8 w-32 mb-2" />
      <Skeleton className="h-4 w-20" />
    </CardContent>
  </Card>
);

/**
 * StatCard component for dashboard metrics
 * @param {Object} props
 * @param {string} props.variant - "default" | "success" | "warning" | "destructive"
 * @param {boolean} props.loading - Alias for isLoading
 */
const StatCard = ({
  title,
  value,
  description,
  icon,
  trend,
  trendLabel = "from last month",
  iconColor = "text-muted-foreground",
  iconBgColor = "bg-muted",
  isLoading = false,
  loading, // Alias for isLoading
  variant = "default",
  className,
  onClick,
}) => {
  // Support both isLoading and loading props
  const showLoading = isLoading || loading;
  
  if (showLoading) {
    return <StatCardSkeleton />;
  }

  // Variant styles for the card
  const variantStyles = {
    default: "",
    success: "border-emerald-200 bg-emerald-50/50 dark:border-emerald-800 dark:bg-emerald-900/20",
    warning: "border-amber-200 bg-amber-50/50 dark:border-amber-800 dark:bg-amber-900/20",
    destructive: "border-red-200 bg-red-50/50 dark:border-red-800 dark:bg-red-900/20",
  };

  // Variant colors for the icon
  const variantIconColors = {
    default: iconColor,
    success: "text-emerald-600",
    warning: "text-amber-600",
    destructive: "text-red-600",
  };

  const variantIconBgColors = {
    default: iconBgColor,
    success: "bg-emerald-100 dark:bg-emerald-900/50",
    warning: "bg-amber-100 dark:bg-amber-900/50",
    destructive: "bg-red-100 dark:bg-red-900/50",
  };

  // Render the icon properly based on its type
  const renderIcon = () => {
    if (!icon) return null;
    
    // If icon is a valid React element (JSX), render it directly
    if (React.isValidElement(icon)) {
      return React.cloneElement(icon, {
        className: cn("h-4 w-4", variantIconColors[variant], icon.props?.className),
      });
    }
    
    // If icon is a component reference (function), render it as component
    if (typeof icon === "function") {
      const IconComponent = icon;
      return <IconComponent className={cn("h-4 w-4", variantIconColors[variant])} />;
    }
    
    return null;
  };

  return (
    <Card
      className={cn(
        "transition-all",
        variantStyles[variant],
        onClick && "cursor-pointer hover:shadow-md hover:border-primary/50",
        className
      )}
      onClick={onClick}
    >
      <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        <CardTitle className="text-sm font-medium text-muted-foreground">
          {title}
        </CardTitle>
        {icon && (
          <div className={cn("rounded-md p-2", variantIconBgColors[variant])}>
            {renderIcon()}
          </div>
        )}
      </CardHeader>
      <CardContent>
        <div className="text-2xl font-bold">{value}</div>
        <div className="flex items-center gap-2 mt-1">
          {trend !== undefined && <TrendIndicator value={trend} />}
          {description && (
            <p className="text-xs text-muted-foreground">{description}</p>
          )}
          {trend !== undefined && trendLabel && (
            <p className="text-xs text-muted-foreground">{trendLabel}</p>
          )}
        </div>
      </CardContent>
    </Card>
  );
};

export default StatCard;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\common\StatusBadge.jsx"   & echo.. 
/**
 * StatusBadge Component
 * Colored badge for displaying status values
 */

import { cn } from "@/lib/utils";
import { Badge } from "@/components/ui/badge";

/**
 * Status color mapping
 */
const STATUS_COLORS = {
  // General
  active: "bg-emerald-100 text-emerald-700 border-emerald-200",
  inactive: "bg-gray-100 text-gray-700 border-gray-200",
  pending: "bg-amber-100 text-amber-700 border-amber-200",
  completed: "bg-emerald-100 text-emerald-700 border-emerald-200",
  cancelled: "bg-red-100 text-red-700 border-red-200",

  // Sale status
  draft: "bg-gray-100 text-gray-700 border-gray-200",
  confirmed: "bg-blue-100 text-blue-700 border-blue-200",
  processing: "bg-amber-100 text-amber-700 border-amber-200",
  shipped: "bg-cyan-100 text-cyan-700 border-cyan-200",
  delivered: "bg-emerald-100 text-emerald-700 border-emerald-200",
  returned: "bg-purple-100 text-purple-700 border-purple-200",
  refunded: "bg-orange-100 text-orange-700 border-orange-200",

  // Payment status
  paid: "bg-emerald-100 text-emerald-700 border-emerald-200",
  unpaid: "bg-red-100 text-red-700 border-red-200",
  partial: "bg-amber-100 text-amber-700 border-amber-200",
  overdue: "bg-red-100 text-red-700 border-red-200",

  // Purchase order status
  approved: "bg-emerald-100 text-emerald-700 border-emerald-200",
  rejected: "bg-red-100 text-red-700 border-red-200",
  received: "bg-blue-100 text-blue-700 border-blue-200",

  // GRN status
  complete: "bg-emerald-100 text-emerald-700 border-emerald-200",
  partial_received: "bg-amber-100 text-amber-700 border-amber-200",

  // Transfer status
  in_transit: "bg-blue-100 text-blue-700 border-blue-200",

  // Stock levels
  low: "bg-amber-100 text-amber-700 border-amber-200",
  out_of_stock: "bg-red-100 text-red-700 border-red-200",
  in_stock: "bg-emerald-100 text-emerald-700 border-emerald-200",

  // Expiry
  expired: "bg-red-100 text-red-700 border-red-200",
  expiring_soon: "bg-amber-100 text-amber-700 border-amber-200",
  valid: "bg-emerald-100 text-emerald-700 border-emerald-200",

  // Cheque status
  deposited: "bg-blue-100 text-blue-700 border-blue-200",
  cleared: "bg-emerald-100 text-emerald-700 border-emerald-200",
  bounced: "bg-red-100 text-red-700 border-red-200",

  // Authorization
  authorized: "bg-emerald-100 text-emerald-700 border-emerald-200",
  unauthorized: "bg-red-100 text-red-700 border-red-200",

  // Alert levels
  info: "bg-blue-100 text-blue-700 border-blue-200",
  warning: "bg-amber-100 text-amber-700 border-amber-200",
  critical: "bg-red-100 text-red-700 border-red-200",

  // Default
  default: "bg-gray-100 text-gray-700 border-gray-200",
};

/**
 * StatusBadge component
 */
const StatusBadge = ({
  status,
  label,
  variant = "outline",
  size = "default",
  className,
  dot = false,
}) => {
  // Normalize status for lookup
  const normalizedStatus =
    status?.toLowerCase().replace(/[- ]/g, "_") || "default";
  const colorClasses = STATUS_COLORS[normalizedStatus] || STATUS_COLORS.default;

  // Display label (use provided label or format status)
  const displayLabel =
    label ||
    status?.replace(/_/g, " ").replace(/\b\w/g, (l) => l.toUpperCase());

  return (
    <Badge
      variant={variant}
      className={cn(
        "font-medium capitalize whitespace-nowrap",
        colorClasses,
        size === "sm" && "text-xs px-2 py-0",
        size === "lg" && "text-sm px-3 py-1",
        className
      )}
    >
      {dot && (
        <span
          className={cn(
            "mr-1.5 h-1.5 w-1.5 rounded-full",
            normalizedStatus === "active" ||
              normalizedStatus === "completed" ||
              normalizedStatus === "paid"
              ? "bg-emerald-500"
              : normalizedStatus === "pending" ||
                normalizedStatus === "processing"
              ? "bg-amber-500"
              : normalizedStatus === "cancelled" ||
                normalizedStatus === "rejected" ||
                normalizedStatus === "expired"
              ? "bg-red-500"
              : "bg-gray-500"
          )}
        />
      )}
      {displayLabel}
    </Badge>
  );
};

export default StatusBadge;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\layout\AppSidebar.jsx"   & echo.. 
/**
 * App Sidebar Component
 * Role-aware navigation sidebar using shadcn sidebar component
 */

import { NavLink, useLocation } from "react-router-dom";
import { ChevronDown, Pill } from "lucide-react";
import {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarMenu,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  useSidebar,
} from "@/components/ui/sidebar";
import {
  Collapsible,
  CollapsibleContent,
  CollapsibleTrigger,
} from "@/components/ui/collapsible";
import { Badge } from "@/components/ui/badge";
import { usePermissions } from "@/hooks";
import { NAVIGATION, filterNavigationByRole } from "./navigation.config";

/**
 * Navigation item with collapsible children
 */
const NavItem = ({ item }) => {
  const location = useLocation();
  const { isMobile, setOpenMobile } = useSidebar();
  const hasChildren = item.children && item.children.length > 0;
  const isActive =
    location.pathname === item.href ||
    (hasChildren &&
      item.children.some((child) => location.pathname.startsWith(child.href)));

  const Icon = item.icon;

  // Close mobile sidebar on navigation
  const handleMobileClose = () => {
    if (isMobile) {
      setOpenMobile(false);
    }
  };

  if (hasChildren) {
    return (
      <Collapsible defaultOpen={isActive} className="group/collapsible">
        <SidebarMenuItem>
          <CollapsibleTrigger asChild>
            <SidebarMenuButton tooltip={item.title} isActive={isActive}>
              {Icon && <Icon />}
              <span>{item.title}</span>
              {item.badge && (
                <Badge
                  variant="destructive"
                  className="ml-auto h-5 px-1.5 text-xs"
                >
                  !
                </Badge>
              )}
              <ChevronDown className="ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-180" />
            </SidebarMenuButton>
          </CollapsibleTrigger>
          <CollapsibleContent>
            <SidebarMenuSub>
              {item.children.map((child) => {
                const ChildIcon = child.icon;
                const isChildActive = location.pathname === child.href;
                return (
                  <SidebarMenuSubItem key={child.href}>
                    <SidebarMenuSubButton asChild isActive={isChildActive}>
                      <NavLink to={child.href} onClick={handleMobileClose}>
                        {ChildIcon && <ChildIcon />}
                        <span>{child.title}</span>
                      </NavLink>
                    </SidebarMenuSubButton>
                  </SidebarMenuSubItem>
                );
              })}
            </SidebarMenuSub>
          </CollapsibleContent>
        </SidebarMenuItem>
      </Collapsible>
    );
  }

  return (
    <SidebarMenuItem>
      <SidebarMenuButton asChild tooltip={item.title} isActive={isActive}>
        <NavLink to={item.href} onClick={handleMobileClose}>
          {Icon && <Icon />}
          <span>{item.title}</span>
          {item.badge && (
            <Badge variant="destructive" className="ml-auto h-5 px-1.5 text-xs">
              !
            </Badge>
          )}
        </NavLink>
      </SidebarMenuButton>
    </SidebarMenuItem>
  );
};

/**
 * Main App Sidebar component
 */
export function AppSidebar({ ...props }) {
  const { role } = usePermissions();

  // Filter navigation based on role
  const filteredNav = filterNavigationByRole(NAVIGATION, role);

  // Group navigation items by category if needed
  const mainNavigation = filteredNav.filter((item) => !item.group);
  const groupedNavigation = filteredNav.reduce((acc, item) => {
    if (item.group) {
      if (!acc[item.group]) {
        acc[item.group] = [];
      }
      acc[item.group].push(item);
    }
    return acc;
  }, {});

  return (
    <Sidebar collapsible="icon" {...props}>
      {/* Header */}
      <SidebarHeader>
        <SidebarMenu>
          <SidebarMenuItem>
            <SidebarMenuButton size="lg" asChild>
              <NavLink to="/dashboard">
                <div className="flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground">
                  <Pill className="size-4" />
                </div>
                <div className="grid flex-1 text-left text-sm leading-tight">
                  <span className="truncate font-semibold">MedLan</span>
                  <span className="truncate text-xs">Pharmacy</span>
                </div>
              </NavLink>
            </SidebarMenuButton>
          </SidebarMenuItem>
        </SidebarMenu>
      </SidebarHeader>

      {/* Content */}
      <SidebarContent>
        {/* Main Navigation */}
        {mainNavigation.length > 0 && (
          <SidebarGroup>
            <SidebarGroupContent>
              <SidebarMenu>
                {mainNavigation.map((item) => (
                  <NavItem key={item.href} item={item} />
                ))}
              </SidebarMenu>
            </SidebarGroupContent>
          </SidebarGroup>
        )}

        {/* Grouped Navigation */}
        {Object.entries(groupedNavigation).map(([groupName, items]) => (
          <SidebarGroup key={groupName}>
            <SidebarGroupLabel>{groupName}</SidebarGroupLabel>
            <SidebarGroupContent>
              <SidebarMenu>
                {items.map((item) => (
                  <NavItem key={item.href} item={item} />
                ))}
              </SidebarMenu>
            </SidebarGroupContent>
          </SidebarGroup>
        ))}
      </SidebarContent>

      {/* Footer */}
      <SidebarFooter>
        <SidebarMenu>
          <SidebarMenuItem>
            <SidebarMenuButton
              size="sm"
              className="text-xs text-muted-foreground"
            >
              MedLan Pharmacy v1.0
            </SidebarMenuButton>
          </SidebarMenuItem>
        </SidebarMenu>
      </SidebarFooter>
    </Sidebar>
  );
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\layout\AuthLayout.jsx"   & echo.. 
/**
 * Auth Layout Component
 * Minimal layout for authentication pages (login, register, forgot password)
 */

import { Outlet, Navigate } from "react-router-dom";
import { Pill } from "lucide-react";
import { useAuth } from "@/hooks";
import { ROUTES } from "@/config";

/**
 * Authentication layout
 */
const AuthLayout = ({ children }) => {
  const { isAuthenticated } = useAuth();

  // Redirect to dashboard if already authenticated
  if (isAuthenticated) {
    return <Navigate to={ROUTES.DASHBOARD} replace />;
  }

  return (
    <div className="min-h-screen flex">
      {/* Left Side - Branding */}
      <div className="hidden lg:flex lg:w-1/2 bg-primary items-center justify-center p-8">
        <div className="max-w-md text-center text-primary-foreground">
          <div className="flex justify-center mb-8">
            <div className="flex h-20 w-20 items-center justify-center rounded-2xl bg-primary-foreground/10 backdrop-blur">
              <Pill className="h-12 w-12" />
            </div>
          </div>
          <h1 className="text-4xl font-bold mb-4">MedLan Pharmacy</h1>
          <p className="text-lg opacity-90">
            Complete pharmacy management solution for modern healthcare
            businesses. Manage inventory, sales, prescriptions, and more.
          </p>
          <div className="mt-12 grid grid-cols-3 gap-4 text-sm">
            <div className="p-4 rounded-lg bg-primary-foreground/10 backdrop-blur">
              <div className="text-2xl font-bold">24/7</div>
              <div className="opacity-75">Support</div>
            </div>
            <div className="p-4 rounded-lg bg-primary-foreground/10 backdrop-blur">
              <div className="text-2xl font-bold">100%</div>
              <div className="opacity-75">Secure</div>
            </div>
            <div className="p-4 rounded-lg bg-primary-foreground/10 backdrop-blur">
              <div className="text-2xl font-bold">Fast</div>
              <div className="opacity-75">& Reliable</div>
            </div>
          </div>
        </div>
      </div>

      {/* Right Side - Auth Form */}
      <div className="flex w-full lg:w-1/2 items-center justify-center p-8">
        <div className="w-full max-w-md">
          {/* Mobile Logo */}
          <div className="lg:hidden flex justify-center mb-8">
            <div className="flex items-center gap-2">
              <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-primary-foreground">
                <Pill className="h-6 w-6" />
              </div>
              <span className="text-xl font-bold">MedLan</span>
            </div>
          </div>

          {/* Auth Content */}
          {children || <Outlet />}

          {/* Footer */}
          <div className="mt-8 text-center text-sm text-muted-foreground">
            <p>
              &copy; {new Date().getFullYear()} MedLan Pharmacy. All rights
              reserved.
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

export default AuthLayout;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\layout\BranchSelector.jsx"   & echo.. 
/**
 * Branch Selector Component
 * Dropdown for switching between branches (for authorized roles)
 */

import { Building2, Check, ChevronsUpDown, Loader2 } from "lucide-react";
import { cn } from "@/lib/utils";
import { useBranch } from "@/hooks";
import { Button } from "@/components/ui/button";
import {
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  CommandList,
} from "@/components/ui/command";
import {
  Popover,
  PopoverContent,
  PopoverTrigger,
} from "@/components/ui/popover";
import { useState } from "react";

/**
 * Branch Selector dropdown component
 */
const BranchSelector = () => {
  const [open, setOpen] = useState(false);
  const {
    selectedBranch,
    branches,
    isLoading,
    canSwitchBranch,
    changeBranch,
    formatBranchName,
  } = useBranch();

  // Show loading state
  if (isLoading && branches.length === 0) {
    return (
      <div className="flex items-center gap-2 px-3 py-2 text-sm border rounded-md bg-muted">
        <Loader2 className="h-4 w-4 animate-spin text-muted-foreground" />
        <span className="text-muted-foreground">Loading...</span>
      </div>
    );
  }

  // Show static display only if user can't switch branches AND there's only one branch
  if (!canSwitchBranch && branches.length <= 1) {
    return (
      <div className="flex items-center gap-2 px-3 py-2 text-sm border rounded-md bg-muted">
        <Building2 className="h-4 w-4 text-muted-foreground" />
        <span className="font-medium">
          {selectedBranch ? formatBranchName(selectedBranch) : "No Branch"}
        </span>
      </div>
    );
  }

  return (
    <Popover open={open} onOpenChange={setOpen}>
      <PopoverTrigger asChild>
        <Button
          variant="outline"
          role="combobox"
          aria-expanded={open}
          className="justify-between gap-2 min-w-[150px] max-w-[200px]"
          disabled={isLoading}
        >
          <Building2 className="h-4 w-4 shrink-0" />
          <span className="truncate">
            {selectedBranch
              ? formatBranchName(selectedBranch)
              : "Select branch..."}
          </span>
          <ChevronsUpDown className="ml-auto h-4 w-4 shrink-0 opacity-50" />
        </Button>
      </PopoverTrigger>
      <PopoverContent className="w-[200px] p-0" align="end">
        <Command>
          <CommandInput placeholder="Search branch..." />
          <CommandList>
            <CommandEmpty>No branch found.</CommandEmpty>
            <CommandGroup>
              {branches.map((branch) => (
                <CommandItem
                  key={branch.id}
                  value={formatBranchName(branch)}
                  onSelect={() => {
                    changeBranch(branch);
                    setOpen(false);
                  }}
                  className="flex items-center gap-2"
                >
                  <Check
                    className={cn(
                      "h-4 w-4",
                      selectedBranch?.id === branch.id
                        ? "opacity-100"
                        : "opacity-0"
                    )}
                  />
                  <div className="flex flex-col">
                    <span>{formatBranchName(branch)}</span>
                    {branch.location && (
                      <span className="text-xs text-muted-foreground">
                        {branch.location}
                      </span>
                    )}
                  </div>
                  {!(branch.isActive ?? branch.active ?? true) && (
                    <span className="ml-auto text-xs text-destructive">
                      Inactive
                    </span>
                  )}
                </CommandItem>
              ))}
            </CommandGroup>
          </CommandList>
        </Command>
      </PopoverContent>
    </Popover>
  );
};

export default BranchSelector;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\layout\Header.jsx"   & echo.. 
/**
 * Header Component
 * Top navigation bar with user menu, branch selector, and notifications
 */

import { Bell, Menu, Moon, Sun, Search } from "lucide-react";
import { cn } from "@/lib/utils";
import { useUiStore } from "@/store";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Separator } from "@/components/ui/separator";
import { SidebarTrigger } from "@/components/ui/sidebar";
import BranchSelector from "./BranchSelector";
import UserMenu from "./UserMenu";
import NotificationDropdown from "./NotificationDropdown";

/**
 * Main Header component
 */
const Header = ({ className }) => {
  const { theme, setTheme } = useUiStore();

  const toggleTheme = () => {
    setTheme(theme === "light" ? "dark" : "light");
  };

  return (
    <header
      className={cn(
        "flex h-16 items-center gap-4 border-b bg-card px-4",
        className
      )}
    >
      {/* Sidebar Toggle */}
      <SidebarTrigger className="shrink-0" />

      {/* Search Bar */}
      <div className="relative hidden md:flex flex-1 max-w-md">
        <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
        <Input
          type="search"
          placeholder="Search products, customers, orders..."
          className="pl-9 bg-background"
        />
      </div>

      {/* Spacer */}
      <div className="flex-1" />

      {/* Right Side Actions */}
      <div className="flex items-center gap-2">
        {/* Branch Selector */}
        <BranchSelector />

        <Separator orientation="vertical" className="h-6" />

        {/* Theme Toggle */}
        <Button
          variant="ghost"
          size="icon"
          onClick={toggleTheme}
          className="shrink-0"
        >
          {theme === "light" ? (
            <Moon className="h-5 w-5" />
          ) : (
            <Sun className="h-5 w-5" />
          )}
          <span className="sr-only">Toggle theme</span>
        </Button>

        {/* Notifications */}
        <NotificationDropdown />

        <Separator orientation="vertical" className="h-6" />

        {/* User Menu */}
        <UserMenu />
      </div>
    </header>
  );
};

export default Header;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\layout\MainLayout.jsx"   & echo.. 
/**
 * Main Layout Component
 * Primary layout wrapper with sidebar, header, and content area
 */

import { Outlet } from "react-router-dom";
import {
  SidebarInset,
  SidebarProvider,
  SidebarTrigger,
} from "@/components/ui/sidebar";
import { AppSidebar } from "./AppSidebar";
import Header from "./Header";
import { AccessibilityWidget } from "@/components/common";

/**
 * Main application layout
 */
const MainLayout = ({ children }) => {
  return (
    <SidebarProvider>
      <AppSidebar />
      <SidebarInset>
        {/* Header */}
        <Header />

        {/* Page Content - Responsive padding */}
        <main className="flex-1 overflow-auto p-3 sm:p-4 md:p-6">
          {children || <Outlet />}
        </main>
      </SidebarInset>

      {/* Accessibility Widget */}
      <AccessibilityWidget />
    </SidebarProvider>
  );
};

export default MainLayout;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\layout\MobileNav.jsx"   & echo.. 
/**
 * Mobile Navigation Component
 * Sheet-based navigation for mobile devices
 */

import { useState } from "react";
import { NavLink, useLocation } from "react-router-dom";
import { Menu, ChevronDown, ChevronRight, Pill, X } from "lucide-react";
import { cn } from "@/lib/utils";
import { usePermissions } from "@/hooks";
import { Button } from "@/components/ui/button";
import {
  Sheet,
  SheetContent,
  SheetHeader,
  SheetTitle,
  SheetTrigger,
} from "@/components/ui/sheet";
import { ScrollArea } from "@/components/ui/scroll-area";
import { Badge } from "@/components/ui/badge";
import { NAVIGATION, filterNavigationByRole } from "./navigation.config";

/**
 * Mobile navigation item
 */
const MobileNavItem = ({ item, onNavigate, level = 0 }) => {
  const location = useLocation();
  const [isOpen, setIsOpen] = useState(false);

  const hasChildren = item.children && item.children.length > 0;
  const isActive = location.pathname === item.href;
  const Icon = item.icon;

  const handleClick = (e) => {
    if (hasChildren) {
      e.preventDefault();
      setIsOpen(!isOpen);
    } else {
      onNavigate();
    }
  };

  return (
    <div className={cn("flex flex-col", level > 0 && "ml-4")}>
      <NavLink
        to={hasChildren ? "#" : item.href}
        onClick={handleClick}
        className={cn(
          "flex items-center gap-3 rounded-lg px-3 py-3 text-sm transition-all",
          isActive
            ? "bg-primary text-primary-foreground"
            : "text-foreground hover:bg-accent"
        )}
      >
        {Icon && <Icon className="h-5 w-5 shrink-0" />}
        <span className="flex-1">{item.title}</span>
        {item.badge && (
          <Badge variant="destructive" className="h-5 px-1.5 text-xs">
            !
          </Badge>
        )}
        {hasChildren && (
          <span className="shrink-0">
            {isOpen ? (
              <ChevronDown className="h-4 w-4" />
            ) : (
              <ChevronRight className="h-4 w-4" />
            )}
          </span>
        )}
      </NavLink>

      {hasChildren && isOpen && (
        <div className="mt-1 flex flex-col gap-1 border-l-2 border-accent ml-3">
          {item.children.map((child) => (
            <MobileNavItem
              key={child.href}
              item={child}
              onNavigate={onNavigate}
              level={level + 1}
            />
          ))}
        </div>
      )}
    </div>
  );
};

/**
 * Mobile Navigation Sheet
 */
const MobileNav = () => {
  const [open, setOpen] = useState(false);
  const { role } = usePermissions();

  const filteredNav = filterNavigationByRole(NAVIGATION, role);

  const handleNavigate = () => {
    setOpen(false);
  };

  return (
    <Sheet open={open} onOpenChange={setOpen}>
      <SheetTrigger asChild>
        <Button variant="ghost" size="icon" className="md:hidden">
          <Menu className="h-5 w-5" />
          <span className="sr-only">Toggle menu</span>
        </Button>
      </SheetTrigger>
      <SheetContent side="left" className="w-80 p-0">
        <SheetHeader className="border-b p-4">
          <SheetTitle className="flex items-center gap-2">
            <div className="flex h-8 w-8 items-center justify-center rounded-lg bg-primary text-primary-foreground">
              <Pill className="h-5 w-5" />
            </div>
            <span>MedLan Pharmacy</span>
          </SheetTitle>
        </SheetHeader>
        <ScrollArea className="flex-1 h-[calc(100vh-5rem)]">
          <nav className="flex flex-col gap-1 p-4">
            {filteredNav.map((item) => (
              <MobileNavItem
                key={item.href}
                item={item}
                onNavigate={handleNavigate}
              />
            ))}
          </nav>
        </ScrollArea>
      </SheetContent>
    </Sheet>
  );
};

export default MobileNav;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\layout\NotificationDropdown.jsx"   & echo.. 
/**
 * Notification Dropdown Component
 * Real-time notification bell with dropdown list
 */

import { useState } from "react";
import {
  Bell,
  Check,
  CheckCheck,
  X,
  AlertTriangle,
  Info,
  Package,
  ShoppingCart,
} from "lucide-react";
import { formatDistanceToNow } from "date-fns";
import { cn } from "@/lib/utils";
import { useNotificationStore } from "@/store";
import { NOTIFICATION_TYPE, ALERT_LEVEL } from "@/constants";
import { Button } from "@/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { ScrollArea } from "@/components/ui/scroll-area";
import { Badge } from "@/components/ui/badge";

/**
 * Get icon for notification type
 */
const getNotificationIcon = (type) => {
  switch (type) {
    case NOTIFICATION_TYPE.LOW_STOCK:
    case NOTIFICATION_TYPE.EXPIRY_WARNING:
      return AlertTriangle;
    case NOTIFICATION_TYPE.ORDER_UPDATE:
    case NOTIFICATION_TYPE.TRANSFER_UPDATE:
      return Package;
    case NOTIFICATION_TYPE.SALE_COMPLETE:
      return ShoppingCart;
    default:
      return Info;
  }
};

/**
 * Get color for alert level
 */
const getAlertColor = (level) => {
  switch (level) {
    case ALERT_LEVEL.CRITICAL:
      return "text-destructive";
    case ALERT_LEVEL.WARNING:
      return "text-amber-500";
    case ALERT_LEVEL.INFO:
      return "text-blue-500";
    default:
      return "text-muted-foreground";
  }
};

/**
 * Single notification item
 */
const NotificationItem = ({ notification, onMarkRead, onDismiss }) => {
  const Icon = getNotificationIcon(notification.type);
  const colorClass = getAlertColor(notification.level);

  return (
    <div
      className={cn(
        "flex gap-3 p-3 hover:bg-accent transition-colors",
        !notification.read && "bg-accent/50"
      )}
    >
      <div className={cn("shrink-0 mt-0.5", colorClass)}>
        <Icon className="h-5 w-5" />
      </div>
      <div className="flex-1 min-w-0">
        <p className="text-sm font-medium">{notification.title}</p>
        <p className="text-xs text-muted-foreground truncate">
          {notification.message}
        </p>
        <p className="text-xs text-muted-foreground mt-1">
          {notification.createdAt
            ? formatDistanceToNow(new Date(notification.createdAt), {
                addSuffix: true,
              })
            : "Just now"}
        </p>
      </div>
      <div className="flex flex-col gap-1 shrink-0">
        {!notification.read && (
          <Button
            variant="ghost"
            size="icon"
            className="h-6 w-6"
            onClick={() => onMarkRead(notification.id)}
          >
            <Check className="h-3 w-3" />
          </Button>
        )}
        <Button
          variant="ghost"
          size="icon"
          className="h-6 w-6"
          onClick={() => onDismiss(notification.id)}
        >
          <X className="h-3 w-3" />
        </Button>
      </div>
    </div>
  );
};

/**
 * Notification dropdown component
 */
const NotificationDropdown = () => {
  const [open, setOpen] = useState(false);
  const {
    notifications,
    unreadCount,
    markAsRead,
    markAllAsRead,
    removeNotification,
    clearAll,
  } = useNotificationStore();

  return (
    <DropdownMenu open={open} onOpenChange={setOpen}>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" size="icon" className="relative">
          <Bell className="h-5 w-5" />
          {unreadCount > 0 && (
            <Badge
              variant="destructive"
              className="absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs"
            >
              {unreadCount > 9 ? "9+" : unreadCount}
            </Badge>
          )}
          <span className="sr-only">Notifications</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent className="w-80" align="end">
        <DropdownMenuLabel className="flex items-center justify-between">
          <span>Notifications</span>
          {notifications.length > 0 && (
            <div className="flex gap-1">
              <Button
                variant="ghost"
                size="sm"
                className="h-6 text-xs"
                onClick={markAllAsRead}
              >
                <CheckCheck className="h-3 w-3 mr-1" />
                Mark all read
              </Button>
              <Button
                variant="ghost"
                size="sm"
                className="h-6 text-xs"
                onClick={clearAll}
              >
                Clear all
              </Button>
            </div>
          )}
        </DropdownMenuLabel>
        <DropdownMenuSeparator />
        <ScrollArea className="h-[300px]">
          {notifications.length === 0 ? (
            <div className="flex flex-col items-center justify-center h-[200px] text-muted-foreground">
              <Bell className="h-10 w-10 mb-2 opacity-50" />
              <p className="text-sm">No notifications</p>
            </div>
          ) : (
            <div className="divide-y">
              {notifications.map((notification) => (
                <NotificationItem
                  key={notification.id}
                  notification={notification}
                  onMarkRead={markAsRead}
                  onDismiss={removeNotification}
                />
              ))}
            </div>
          )}
        </ScrollArea>
      </DropdownMenuContent>
    </DropdownMenu>
  );
};

export default NotificationDropdown;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\layout\Sidebar.jsx"   & echo.. 
/**
 * Sidebar Component
 * Role-aware navigation sidebar with collapsible menu
 */

import { useState } from "react";
import { NavLink, useLocation } from "react-router-dom";
import { ChevronDown, ChevronRight, Pill } from "lucide-react";
import { cn } from "@/lib/utils";
import { useAuth, usePermissions } from "@/hooks";
import { useUiStore } from "@/store";
import { Button } from "@/components/ui/button";
import { ScrollArea } from "@/components/ui/scroll-area";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
  TooltipProvider,
} from "@/components/ui/tooltip";
import { Badge } from "@/components/ui/badge";
import { NAVIGATION, filterNavigationByRole } from "./navigation.config";

/**
 * Single navigation item component
 */
const NavItem = ({ item, isCollapsed, level = 0 }) => {
  const location = useLocation();
  const [isOpen, setIsOpen] = useState(false);

  const hasChildren = item.children && item.children.length > 0;
  const isActive =
    location.pathname === item.href ||
    (hasChildren &&
      item.children.some((child) => location.pathname.startsWith(child.href)));
  const isChildActive =
    hasChildren &&
    item.children.some((child) => location.pathname === child.href);

  const Icon = item.icon;

  // Toggle submenu
  const handleToggle = (e) => {
    if (hasChildren) {
      e.preventDefault();
      setIsOpen(!isOpen);
    }
  };

  // Collapsed sidebar - show tooltip
  if (isCollapsed && level === 0) {
    return (
      <TooltipProvider delayDuration={0}>
        <Tooltip>
          <TooltipTrigger asChild>
            <NavLink
              to={hasChildren ? item.children[0]?.href : item.href}
              className={cn(
                "flex h-10 w-10 items-center justify-center rounded-lg transition-colors",
                isActive
                  ? "bg-primary text-primary-foreground"
                  : "text-muted-foreground hover:bg-accent hover:text-accent-foreground"
              )}
            >
              {Icon && <Icon className="h-5 w-5" />}
            </NavLink>
          </TooltipTrigger>
          <TooltipContent side="right" className="flex flex-col gap-1">
            <span className="font-medium">{item.title}</span>
            {hasChildren && (
              <div className="flex flex-col gap-1 pt-1 border-t">
                {item.children.map((child) => (
                  <NavLink
                    key={child.href}
                    to={child.href}
                    className={cn(
                      "text-sm px-2 py-1 rounded hover:bg-accent",
                      location.pathname === child.href && "bg-accent"
                    )}
                  >
                    {child.title}
                  </NavLink>
                ))}
              </div>
            )}
          </TooltipContent>
        </Tooltip>
      </TooltipProvider>
    );
  }

  return (
    <div className={cn("flex flex-col", level > 0 && "ml-4")}>
      <NavLink
        to={hasChildren ? "#" : item.href}
        onClick={handleToggle}
        className={cn(
          "flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-all",
          isActive && !hasChildren
            ? "bg-primary text-primary-foreground"
            : isActive || isChildActive
            ? "bg-accent text-accent-foreground"
            : "text-muted-foreground hover:bg-accent hover:text-accent-foreground"
        )}
      >
        {Icon && <Icon className="h-4 w-4 shrink-0" />}
        <span className="flex-1 truncate">{item.title}</span>
        {item.badge && (
          <Badge variant="destructive" className="h-5 px-1.5 text-xs">
            !
          </Badge>
        )}
        {hasChildren && (
          <span className="shrink-0">
            {isOpen ? (
              <ChevronDown className="h-4 w-4" />
            ) : (
              <ChevronRight className="h-4 w-4" />
            )}
          </span>
        )}
      </NavLink>

      {hasChildren && isOpen && (
        <div className="mt-1 flex flex-col gap-1">
          {item.children.map((child) => (
            <NavItem
              key={child.href}
              item={child}
              isCollapsed={false}
              level={level + 1}
            />
          ))}
        </div>
      )}
    </div>
  );
};

/**
 * Main Sidebar component
 */
const Sidebar = ({ className }) => {
  const { role } = usePermissions();
  const { sidebarCollapsed } = useUiStore();

  // Filter navigation based on role
  const filteredNav = filterNavigationByRole(NAVIGATION, role);

  return (
    <aside
      className={cn(
        "flex flex-col border-r bg-card transition-all duration-300",
        sidebarCollapsed ? "w-16" : "w-64",
        className
      )}
    >
      {/* Logo */}
      <div
        className={cn(
          "flex h-16 items-center border-b px-4",
          sidebarCollapsed ? "justify-center" : "gap-2"
        )}
      >
        <div className="flex h-8 w-8 items-center justify-center rounded-lg bg-primary text-primary-foreground">
          <Pill className="h-5 w-5" />
        </div>
        {!sidebarCollapsed && (
          <span className="text-lg font-semibold">MedLan</span>
        )}
      </div>

      {/* Navigation */}
      <ScrollArea className="flex-1 px-3 py-4">
        <nav className="flex flex-col gap-1">
          {filteredNav.map((item) => (
            <NavItem
              key={item.href}
              item={item}
              isCollapsed={sidebarCollapsed}
            />
          ))}
        </nav>
      </ScrollArea>

      {/* Footer */}
      {!sidebarCollapsed && (
        <div className="border-t p-4">
          <p className="text-xs text-muted-foreground text-center">
            MedLan Pharmacy v1.0
          </p>
        </div>
      )}
    </aside>
  );
};

export default Sidebar;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\layout\UserMenu.jsx"   & echo.. 
/**
 * User Menu Component
 * Dropdown menu with user profile, settings, and logout
 */

import { useNavigate } from "react-router-dom";
import { LogOut, Settings, User, Shield, HelpCircle } from "lucide-react";
import { useAuth, usePermissions } from "@/hooks";
import { ROUTES } from "@/config";
import { ROLE_LABELS, ROLE_COLORS } from "@/constants";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
import { Button } from "@/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { Badge } from "@/components/ui/badge";

/**
 * User Menu dropdown component
 */
const UserMenu = () => {
  const navigate = useNavigate();
  const { user, displayName, initials, logout } = useAuth();
  const { role, isSuperAdmin } = usePermissions();

  const handleLogout = () => {
    logout();
    navigate(ROUTES.AUTH.LOGIN);
  };

  if (!user) {
    return (
      <Button variant="ghost" onClick={() => navigate(ROUTES.AUTH.LOGIN)}>
        Sign In
      </Button>
    );
  }

  const roleLabel = ROLE_LABELS[role] || role;
  const roleColor = ROLE_COLORS[role] || "gray";

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" className="relative h-10 w-10 rounded-full">
          <Avatar className="h-9 w-9">
            <AvatarImage src={user.avatarUrl} alt={displayName} />
            <AvatarFallback className="bg-primary text-primary-foreground">
              {initials}
            </AvatarFallback>
          </Avatar>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent className="w-56" align="end" forceMount>
        <DropdownMenuLabel className="font-normal">
          <div className="flex flex-col space-y-2">
            <div className="flex items-center gap-2">
              <p className="text-sm font-medium leading-none">{displayName}</p>
            </div>
            <p className="text-xs leading-none text-muted-foreground">
              {user.email || user.username}
            </p>
            <Badge
              variant="outline"
              className="w-fit text-xs"
              style={{
                borderColor: roleColor,
                color: roleColor,
              }}
            >
              <Shield className="h-3 w-3 mr-1" />
              {roleLabel}
            </Badge>
          </div>
        </DropdownMenuLabel>
        <DropdownMenuSeparator />
        <DropdownMenuGroup>
          <DropdownMenuItem onClick={() => navigate(ROUTES.SETTINGS.PROFILE)}>
            <User className="mr-2 h-4 w-4" />
            <span>Profile</span>
          </DropdownMenuItem>
          <DropdownMenuItem onClick={() => navigate(ROUTES.SETTINGS.ROOT)}>
            <Settings className="mr-2 h-4 w-4" />
            <span>Settings</span>
          </DropdownMenuItem>
          {isSuperAdmin && (
            <DropdownMenuItem onClick={() => navigate(ROUTES.SETTINGS.SYSTEM)}>
              <Shield className="mr-2 h-4 w-4" />
              <span>System Settings</span>
            </DropdownMenuItem>
          )}
        </DropdownMenuGroup>
        <DropdownMenuSeparator />
        <DropdownMenuItem onClick={() => navigate("/help")}>
          <HelpCircle className="mr-2 h-4 w-4" />
          <span>Help & Support</span>
        </DropdownMenuItem>
        <DropdownMenuSeparator />
        <DropdownMenuItem
          onClick={handleLogout}
          className="text-destructive focus:text-destructive"
        >
          <LogOut className="mr-2 h-4 w-4" />
          <span>Log out</span>
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  );
};

export default UserMenu;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\accordion.jsx"   & echo.. 
"use client"

import * as React from "react"
import * as AccordionPrimitive from "@radix-ui/react-accordion"
import { ChevronDownIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Accordion({
  ...props
}) {
  return <AccordionPrimitive.Root data-slot="accordion" {...props} />;
}

function AccordionItem({
  className,
  ...props
}) {
  return (
    <AccordionPrimitive.Item
      data-slot="accordion-item"
      className={cn("border-b last:border-b-0", className)}
      {...props} />
  );
}

function AccordionTrigger({
  className,
  children,
  ...props
}) {
  return (
    <AccordionPrimitive.Header className="flex">
      <AccordionPrimitive.Trigger
        data-slot="accordion-trigger"
        className={cn(
          "focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",
          className
        )}
        {...props}>
        {children}
        <ChevronDownIcon
          className="text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200" />
      </AccordionPrimitive.Trigger>
    </AccordionPrimitive.Header>
  );
}

function AccordionContent({
  className,
  children,
  ...props
}) {
  return (
    <AccordionPrimitive.Content
      data-slot="accordion-content"
      className="data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"
      {...props}>
      <div className={cn("pt-0 pb-4", className)}>{children}</div>
    </AccordionPrimitive.Content>
  );
}

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\alert-dialog.jsx"   & echo.. 
import * as React from "react"
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog"

import { cn } from "@/lib/utils"
import { buttonVariants } from "@/components/ui/button"

function AlertDialog({
  ...props
}) {
  return <AlertDialogPrimitive.Root data-slot="alert-dialog" {...props} />;
}

function AlertDialogTrigger({
  ...props
}) {
  return (<AlertDialogPrimitive.Trigger data-slot="alert-dialog-trigger" {...props} />);
}

function AlertDialogPortal({
  ...props
}) {
  return (<AlertDialogPrimitive.Portal data-slot="alert-dialog-portal" {...props} />);
}

function AlertDialogOverlay({
  className,
  ...props
}) {
  return (
    <AlertDialogPrimitive.Overlay
      data-slot="alert-dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props} />
  );
}

function AlertDialogContent({
  className,
  ...props
}) {
  return (
    <AlertDialogPortal>
      <AlertDialogOverlay />
      <AlertDialogPrimitive.Content
        data-slot="alert-dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className
        )}
        {...props} />
    </AlertDialogPortal>
  );
}

function AlertDialogHeader({
  className,
  ...props
}) {
  return (
    <div
      data-slot="alert-dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props} />
  );
}

function AlertDialogFooter({
  className,
  ...props
}) {
  return (
    <div
      data-slot="alert-dialog-footer"
      className={cn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end", className)}
      {...props} />
  );
}

function AlertDialogTitle({
  className,
  ...props
}) {
  return (
    <AlertDialogPrimitive.Title
      data-slot="alert-dialog-title"
      className={cn("text-lg font-semibold", className)}
      {...props} />
  );
}

function AlertDialogDescription({
  className,
  ...props
}) {
  return (
    <AlertDialogPrimitive.Description
      data-slot="alert-dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />
  );
}

function AlertDialogAction({
  className,
  ...props
}) {
  return (<AlertDialogPrimitive.Action className={cn(buttonVariants(), className)} {...props} />);
}

function AlertDialogCancel({
  className,
  ...props
}) {
  return (
    <AlertDialogPrimitive.Cancel
      className={cn(buttonVariants({ variant: "outline" }), className)}
      {...props} />
  );
}

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\alert.jsx"   & echo.. 
/**
 * Alert Component
 * Displays a callout for user attention
 */

import * as React from "react";
import { cva } from "class-variance-authority";
import { cn } from "@/lib/utils";

const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",
  {
    variants: {
      variant: {
        default: "bg-background text-foreground",
        destructive:
          "border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",
        warning:
          "border-amber-500/50 text-amber-600 dark:border-amber-500 [&>svg]:text-amber-500 bg-amber-50 dark:bg-amber-900/20",
        success:
          "border-emerald-500/50 text-emerald-600 dark:border-emerald-500 [&>svg]:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
);

const Alert = React.forwardRef(({ className, variant, ...props }, ref) => (
  <div
    ref={ref}
    role="alert"
    className={cn(alertVariants({ variant }), className)}
    {...props}
  />
));
Alert.displayName = "Alert";

const AlertTitle = React.forwardRef(({ className, ...props }, ref) => (
  <h5
    ref={ref}
    className={cn("mb-1 font-medium leading-none tracking-tight", className)}
    {...props}
  />
));
AlertTitle.displayName = "AlertTitle";

const AlertDescription = React.forwardRef(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm [&_p]:leading-relaxed", className)}
    {...props}
  />
));
AlertDescription.displayName = "AlertDescription";

export { Alert, AlertTitle, AlertDescription };
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\avatar.jsx"   & echo.. 
"use client"

import * as React from "react"
import * as AvatarPrimitive from "@radix-ui/react-avatar"

import { cn } from "@/lib/utils"

function Avatar({
  className,
  ...props
}) {
  return (
    <AvatarPrimitive.Root
      data-slot="avatar"
      className={cn("relative flex size-8 shrink-0 overflow-hidden rounded-full", className)}
      {...props} />
  );
}

function AvatarImage({
  className,
  ...props
}) {
  return (
    <AvatarPrimitive.Image
      data-slot="avatar-image"
      className={cn("aspect-square size-full", className)}
      {...props} />
  );
}

function AvatarFallback({
  className,
  ...props
}) {
  return (
    <AvatarPrimitive.Fallback
      data-slot="avatar-fallback"
      className={cn(
        "bg-muted flex size-full items-center justify-center rounded-full",
        className
      )}
      {...props} />
  );
}

export { Avatar, AvatarImage, AvatarFallback }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\badge.jsx"   & echo.. 
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
        destructive:
          "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

function Badge({
  className,
  variant,
  asChild = false,
  ...props
}) {
  const Comp = asChild ? Slot : "span"

  return (
    <Comp
      data-slot="badge"
      className={cn(badgeVariants({ variant }), className)}
      {...props} />
  );
}

export { Badge, badgeVariants }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\breadcrumb.jsx"   & echo.. 
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { ChevronRight, MoreHorizontal } from "lucide-react"

import { cn } from "@/lib/utils"

function Breadcrumb({
  ...props
}) {
  return <nav aria-label="breadcrumb" data-slot="breadcrumb" {...props} />;
}

function BreadcrumbList({
  className,
  ...props
}) {
  return (
    <ol
      data-slot="breadcrumb-list"
      className={cn(
        "text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",
        className
      )}
      {...props} />
  );
}

function BreadcrumbItem({
  className,
  ...props
}) {
  return (
    <li
      data-slot="breadcrumb-item"
      className={cn("inline-flex items-center gap-1.5", className)}
      {...props} />
  );
}

function BreadcrumbLink({
  asChild,
  className,
  ...props
}) {
  const Comp = asChild ? Slot : "a"

  return (
    <Comp
      data-slot="breadcrumb-link"
      className={cn("hover:text-foreground transition-colors", className)}
      {...props} />
  );
}

function BreadcrumbPage({
  className,
  ...props
}) {
  return (
    <span
      data-slot="breadcrumb-page"
      role="link"
      aria-disabled="true"
      aria-current="page"
      className={cn("text-foreground font-normal", className)}
      {...props} />
  );
}

function BreadcrumbSeparator({
  children,
  className,
  ...props
}) {
  return (
    <li
      data-slot="breadcrumb-separator"
      role="presentation"
      aria-hidden="true"
      className={cn("[&>svg]:size-3.5", className)}
      {...props}>
      {children ?? <ChevronRight />}
    </li>
  );
}

function BreadcrumbEllipsis({
  className,
  ...props
}) {
  return (
    <span
      data-slot="breadcrumb-ellipsis"
      role="presentation"
      aria-hidden="true"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}>
      <MoreHorizontal className="size-4" />
      <span className="sr-only">More</span>
    </span>
  );
}

export {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
  BreadcrumbEllipsis,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\Button.jsx"   & echo.. 
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive:
          "bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9",
        "icon-sm": "size-8",
        "icon-lg": "size-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Button({
  className,
  variant = "default",
  size = "default",
  asChild = false,
  ...props
}) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="button"
      data-variant={variant}
      data-size={size}
      className={cn(buttonVariants({ variant, size, className }))}
      {...props} />
  );
}

export { Button, buttonVariants }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\calendar.jsx"   & echo.. 
"use client"

import * as React from "react"
import {
  ChevronDownIcon,
  ChevronLeftIcon,
  ChevronRightIcon,
} from "lucide-react"
import { DayPicker, getDefaultClassNames } from "react-day-picker";

import { cn } from "@/lib/utils"
import { Button, buttonVariants } from "@/components/ui/button"

function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  captionLayout = "label",
  buttonVariant = "ghost",
  formatters,
  components,
  ...props
}) {
  const defaultClassNames = getDefaultClassNames()

  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn(
        "bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",
        String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,
        String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,
        className
      )}
      captionLayout={captionLayout}
      formatters={{
        formatMonthDropdown: (date) =>
          date.toLocaleString("default", { month: "short" }),
        ...formatters,
      }}
      classNames={{
        root: cn("w-fit", defaultClassNames.root),
        months: cn("flex gap-4 flex-col md:flex-row relative", defaultClassNames.months),
        month: cn("flex flex-col w-full gap-4", defaultClassNames.month),
        nav: cn(
          "flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",
          defaultClassNames.nav
        ),
        button_previous: cn(
          buttonVariants({ variant: buttonVariant }),
          "size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",
          defaultClassNames.button_previous
        ),
        button_next: cn(
          buttonVariants({ variant: buttonVariant }),
          "size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",
          defaultClassNames.button_next
        ),
        month_caption: cn(
          "flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",
          defaultClassNames.month_caption
        ),
        dropdowns: cn(
          "w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",
          defaultClassNames.dropdowns
        ),
        dropdown_root: cn(
          "relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",
          defaultClassNames.dropdown_root
        ),
        dropdown: cn("absolute bg-popover inset-0 opacity-0", defaultClassNames.dropdown),
        caption_label: cn("select-none font-medium", captionLayout === "label"
          ? "text-sm"
          : "rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5", defaultClassNames.caption_label),
        table: "w-full border-collapse",
        weekdays: cn("flex", defaultClassNames.weekdays),
        weekday: cn(
          "text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",
          defaultClassNames.weekday
        ),
        week: cn("flex w-full mt-2", defaultClassNames.week),
        week_number_header: cn("select-none w-(--cell-size)", defaultClassNames.week_number_header),
        week_number: cn(
          "text-[0.8rem] select-none text-muted-foreground",
          defaultClassNames.week_number
        ),
        day: cn(
          "relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",
          props.showWeekNumber
            ? "[&:nth-child(2)[data-selected=true]_button]:rounded-l-md"
            : "[&:first-child[data-selected=true]_button]:rounded-l-md",
          defaultClassNames.day
        ),
        range_start: cn("rounded-l-md bg-accent", defaultClassNames.range_start),
        range_middle: cn("rounded-none", defaultClassNames.range_middle),
        range_end: cn("rounded-r-md bg-accent", defaultClassNames.range_end),
        today: cn(
          "bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",
          defaultClassNames.today
        ),
        outside: cn(
          "text-muted-foreground aria-selected:text-muted-foreground",
          defaultClassNames.outside
        ),
        disabled: cn("text-muted-foreground opacity-50", defaultClassNames.disabled),
        hidden: cn("invisible", defaultClassNames.hidden),
        ...classNames,
      }}
      components={{
        Root: ({ className, rootRef, ...props }) => {
          return (<div data-slot="calendar" ref={rootRef} className={cn(className)} {...props} />);
        },
        Chevron: ({ className, orientation, ...props }) => {
          if (orientation === "left") {
            return (<ChevronLeftIcon className={cn("size-4", className)} {...props} />);
          }

          if (orientation === "right") {
            return (<ChevronRightIcon className={cn("size-4", className)} {...props} />);
          }

          return (<ChevronDownIcon className={cn("size-4", className)} {...props} />);
        },
        DayButton: CalendarDayButton,
        WeekNumber: ({ children, ...props }) => {
          return (
            <td {...props}>
              <div
                className="flex size-(--cell-size) items-center justify-center text-center">
                {children}
              </div>
            </td>
          );
        },
        ...components,
      }}
      {...props} />
  );
}

function CalendarDayButton({
  className,
  day,
  modifiers,
  ...props
}) {
  const defaultClassNames = getDefaultClassNames()

  const ref = React.useRef(null)
  React.useEffect(() => {
    if (modifiers.focused) ref.current?.focus()
  }, [modifiers.focused])

  return (
    <Button
      ref={ref}
      variant="ghost"
      size="icon"
      data-day={day.date.toLocaleDateString()}
      data-selected-single={
        modifiers.selected &&
        !modifiers.range_start &&
        !modifiers.range_end &&
        !modifiers.range_middle
      }
      data-range-start={modifiers.range_start}
      data-range-end={modifiers.range_end}
      data-range-middle={modifiers.range_middle}
      className={cn(
        "data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",
        defaultClassNames.day,
        className
      )}
      {...props} />
  );
}

export { Calendar, CalendarDayButton }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\card.jsx"   & echo.. 
import * as React from "react"

import { cn } from "@/lib/utils"

function Card({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card"
      className={cn(
        "bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",
        className
      )}
      {...props} />
  );
}

function CardHeader({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-header"
      className={cn(
        "@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",
        className
      )}
      {...props} />
  );
}

function CardTitle({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-title"
      className={cn("leading-none font-semibold", className)}
      {...props} />
  );
}

function CardDescription({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />
  );
}

function CardAction({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-action"
      className={cn(
        "col-start-2 row-span-2 row-start-1 self-start justify-self-end",
        className
      )}
      {...props} />
  );
}

function CardContent({
  className,
  ...props
}) {
  return (<div data-slot="card-content" className={cn("px-6", className)} {...props} />);
}

function CardFooter({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-footer"
      className={cn("flex items-center px-6 [.border-t]:pt-6", className)}
      {...props} />
  );
}

export {
  Card,
  CardHeader,
  CardFooter,
  CardTitle,
  CardAction,
  CardDescription,
  CardContent,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\checkbox.jsx"   & echo.. 
import * as React from "react"
import * as CheckboxPrimitive from "@radix-ui/react-checkbox"
import { CheckIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Checkbox({
  className,
  ...props
}) {
  return (
    <CheckboxPrimitive.Root
      data-slot="checkbox"
      className={cn(
        "peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}>
      <CheckboxPrimitive.Indicator
        data-slot="checkbox-indicator"
        className="grid place-content-center text-current transition-none">
        <CheckIcon className="size-3.5" />
      </CheckboxPrimitive.Indicator>
    </CheckboxPrimitive.Root>
  );
}

export { Checkbox }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\collapsible.jsx"   & echo.. 
import * as CollapsiblePrimitive from "@radix-ui/react-collapsible"

function Collapsible({
  ...props
}) {
  return <CollapsiblePrimitive.Root data-slot="collapsible" {...props} />;
}

function CollapsibleTrigger({
  ...props
}) {
  return (<CollapsiblePrimitive.CollapsibleTrigger data-slot="collapsible-trigger" {...props} />);
}

function CollapsibleContent({
  ...props
}) {
  return (<CollapsiblePrimitive.CollapsibleContent data-slot="collapsible-content" {...props} />);
}

export { Collapsible, CollapsibleTrigger, CollapsibleContent }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\command.jsx"   & echo.. 
"use client"

import * as React from "react"
import { Command as CommandPrimitive } from "cmdk"
import { SearchIcon } from "lucide-react"

import { cn } from "@/lib/utils"
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog"

function Command({
  className,
  ...props
}) {
  return (
    <CommandPrimitive
      data-slot="command"
      className={cn(
        "bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",
        className
      )}
      {...props} />
  );
}

function CommandDialog({
  title = "Command Palette",
  description = "Search for a command to run...",
  children,
  className,
  showCloseButton = true,
  ...props
}) {
  return (
    <Dialog {...props}>
      <DialogHeader className="sr-only">
        <DialogTitle>{title}</DialogTitle>
        <DialogDescription>{description}</DialogDescription>
      </DialogHeader>
      <DialogContent
        className={cn("overflow-hidden p-0", className)}
        showCloseButton={showCloseButton}>
        <Command
          className="[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  );
}

function CommandInput({
  className,
  ...props
}) {
  return (
    <div
      data-slot="command-input-wrapper"
      className="flex h-9 items-center gap-2 border-b px-3">
      <SearchIcon className="size-4 shrink-0 opacity-50" />
      <CommandPrimitive.Input
        data-slot="command-input"
        className={cn(
          "placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        {...props} />
    </div>
  );
}

function CommandList({
  className,
  ...props
}) {
  return (
    <CommandPrimitive.List
      data-slot="command-list"
      className={cn("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto", className)}
      {...props} />
  );
}

function CommandEmpty({
  ...props
}) {
  return (<CommandPrimitive.Empty data-slot="command-empty" className="py-6 text-center text-sm" {...props} />);
}

function CommandGroup({
  className,
  ...props
}) {
  return (
    <CommandPrimitive.Group
      data-slot="command-group"
      className={cn(
        "text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",
        className
      )}
      {...props} />
  );
}

function CommandSeparator({
  className,
  ...props
}) {
  return (
    <CommandPrimitive.Separator
      data-slot="command-separator"
      className={cn("bg-border -mx-1 h-px", className)}
      {...props} />
  );
}

function CommandItem({
  className,
  ...props
}) {
  return (
    <CommandPrimitive.Item
      data-slot="command-item"
      className={cn(
        "data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props} />
  );
}

function CommandShortcut({
  className,
  ...props
}) {
  return (
    <span
      data-slot="command-shortcut"
      className={cn("text-muted-foreground ml-auto text-xs tracking-widest", className)}
      {...props} />
  );
}

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\dialog.jsx"   & echo.. 
import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { XIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Dialog({
  ...props
}) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />;
}

function DialogTrigger({
  ...props
}) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />;
}

function DialogPortal({
  ...props
}) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />;
}

function DialogClose({
  ...props
}) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />;
}

function DialogOverlay({
  className,
  ...props
}) {
  return (
    <DialogPrimitive.Overlay
      data-slot="dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props} />
  );
}

function DialogContent({
  className,
  children,
  showCloseButton = true,
  ...props
}) {
  return (
    <DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",
          className
        )}
        {...props}>
        {children}
        {showCloseButton && (
          <DialogPrimitive.Close
            data-slot="dialog-close"
            className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4">
            <XIcon />
            <span className="sr-only">Close</span>
          </DialogPrimitive.Close>
        )}
      </DialogPrimitive.Content>
    </DialogPortal>
  );
}

function DialogHeader({
  className,
  ...props
}) {
  return (
    <div
      data-slot="dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props} />
  );
}

function DialogFooter({
  className,
  ...props
}) {
  return (
    <div
      data-slot="dialog-footer"
      className={cn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end", className)}
      {...props} />
  );
}

function DialogTitle({
  className,
  ...props
}) {
  return (
    <DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn("text-lg leading-none font-semibold", className)}
      {...props} />
  );
}

function DialogDescription({
  className,
  ...props
}) {
  return (
    <DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />
  );
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\dropdown-menu.jsx"   & echo.. 
"use client"

import * as React from "react"
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function DropdownMenu({
  ...props
}) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />;
}

function DropdownMenuPortal({
  ...props
}) {
  return (<DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />);
}

function DropdownMenuTrigger({
  ...props
}) {
  return (<DropdownMenuPrimitive.Trigger data-slot="dropdown-menu-trigger" {...props} />);
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}) {
  return (
    <DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className
        )}
        {...props} />
    </DropdownMenuPrimitive.Portal>
  );
}

function DropdownMenuGroup({
  ...props
}) {
  return (<DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />);
}

function DropdownMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}) {
  return (
    <DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props} />
  );
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}) {
  return (
    <DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      checked={checked}
      {...props}>
      <span
        className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>
  );
}

function DropdownMenuRadioGroup({
  ...props
}) {
  return (<DropdownMenuPrimitive.RadioGroup data-slot="dropdown-menu-radio-group" {...props} />);
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}) {
  return (
    <DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}>
      <span
        className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>
  );
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}) {
  return (
    <DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8", className)}
      {...props} />
  );
}

function DropdownMenuSeparator({
  className,
  ...props
}) {
  return (
    <DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props} />
  );
}

function DropdownMenuShortcut({
  className,
  ...props
}) {
  return (
    <span
      data-slot="dropdown-menu-shortcut"
      className={cn("text-muted-foreground ml-auto text-xs tracking-widest", className)}
      {...props} />
  );
}

function DropdownMenuSub({
  ...props
}) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />;
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}) {
  return (
    <DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}>
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>
  );
}

function DropdownMenuSubContent({
  className,
  ...props
}) {
  return (
    <DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className
      )}
      {...props} />
  );
}

export {
  DropdownMenu,
  DropdownMenuPortal,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuLabel,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubTrigger,
  DropdownMenuSubContent,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\form.jsx"   & echo.. 
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { Controller, FormProvider, useFormContext, useFormState } from "react-hook-form";

import { cn } from "@/lib/utils"
import { Label } from "@/components/ui/label"

const Form = FormProvider

const FormFieldContext = React.createContext({})

const FormField = (
  {
    ...props
  }
) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  );
}

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext)
  const itemContext = React.useContext(FormItemContext)
  const { getFieldState } = useFormContext()
  const formState = useFormState({ name: fieldContext.name })
  const fieldState = getFieldState(fieldContext.name, formState)

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>")
  }

  const { id } = itemContext

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  }
}

const FormItemContext = React.createContext({})

function FormItem({
  className,
  ...props
}) {
  const id = React.useId()

  return (
    <FormItemContext.Provider value={{ id }}>
      <div data-slot="form-item" className={cn("grid gap-2", className)} {...props} />
    </FormItemContext.Provider>
  );
}

function FormLabel({
  className,
  ...props
}) {
  const { error, formItemId } = useFormField()

  return (
    <Label
      data-slot="form-label"
      data-error={!!error}
      className={cn("data-[error=true]:text-destructive", className)}
      htmlFor={formItemId}
      {...props} />
  );
}

function FormControl({
  ...props
}) {
  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()

  return (
    <Slot
      data-slot="form-control"
      id={formItemId}
      aria-describedby={
        !error
          ? `${formDescriptionId}`
          : `${formDescriptionId} ${formMessageId}`
      }
      aria-invalid={!!error}
      {...props} />
  );
}

function FormDescription({
  className,
  ...props
}) {
  const { formDescriptionId } = useFormField()

  return (
    <p
      data-slot="form-description"
      id={formDescriptionId}
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />
  );
}

function FormMessage({
  className,
  ...props
}) {
  const { error, formMessageId } = useFormField()
  const body = error ? String(error?.message ?? "") : props.children

  if (!body) {
    return null
  }

  return (
    <p
      data-slot="form-message"
      id={formMessageId}
      className={cn("text-destructive text-sm", className)}
      {...props}>
      {body}
    </p>
  );
}

export {
  useFormField,
  Form,
  FormItem,
  FormLabel,
  FormControl,
  FormDescription,
  FormMessage,
  FormField,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\input.jsx"   & echo.. 
import * as React from "react"

import { cn } from "@/lib/utils"

function Input({
  className,
  type,
  ...props
}) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
        "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
        className
      )}
      {...props} />
  );
}

export { Input }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\label.jsx"   & echo.. 
"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"

import { cn } from "@/lib/utils"

function Label({
  className,
  ...props
}) {
  return (
    <LabelPrimitive.Root
      data-slot="label"
      className={cn(
        "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
        className
      )}
      {...props} />
  );
}

export { Label }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\pagination.jsx"   & echo.. 
import * as React from "react"
import {
  ChevronLeftIcon,
  ChevronRightIcon,
  MoreHorizontalIcon,
} from "lucide-react"

import { cn } from "@/lib/utils"
import { buttonVariants } from "@/components/ui/button";

function Pagination({
  className,
  ...props
}) {
  return (
    <nav
      role="navigation"
      aria-label="pagination"
      data-slot="pagination"
      className={cn("mx-auto flex w-full justify-center", className)}
      {...props} />
  );
}

function PaginationContent({
  className,
  ...props
}) {
  return (
    <ul
      data-slot="pagination-content"
      className={cn("flex flex-row items-center gap-1", className)}
      {...props} />
  );
}

function PaginationItem({
  ...props
}) {
  return <li data-slot="pagination-item" {...props} />;
}

function PaginationLink({
  className,
  isActive,
  size = "icon",
  ...props
}) {
  return (
    <a
      aria-current={isActive ? "page" : undefined}
      data-slot="pagination-link"
      data-active={isActive}
      className={cn(buttonVariants({
        variant: isActive ? "outline" : "ghost",
        size,
      }), className)}
      {...props} />
  );
}

function PaginationPrevious({
  className,
  ...props
}) {
  return (
    <PaginationLink
      aria-label="Go to previous page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pl-2.5", className)}
      {...props}>
      <ChevronLeftIcon />
      <span className="hidden sm:block">Previous</span>
    </PaginationLink>
  );
}

function PaginationNext({
  className,
  ...props
}) {
  return (
    <PaginationLink
      aria-label="Go to next page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pr-2.5", className)}
      {...props}>
      <span className="hidden sm:block">Next</span>
      <ChevronRightIcon />
    </PaginationLink>
  );
}

function PaginationEllipsis({
  className,
  ...props
}) {
  return (
    <span
      aria-hidden
      data-slot="pagination-ellipsis"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}>
      <MoreHorizontalIcon className="size-4" />
      <span className="sr-only">More pages</span>
    </span>
  );
}

export {
  Pagination,
  PaginationContent,
  PaginationLink,
  PaginationItem,
  PaginationPrevious,
  PaginationNext,
  PaginationEllipsis,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\popover.jsx"   & echo.. 
import * as React from "react"
import * as PopoverPrimitive from "@radix-ui/react-popover"

import { cn } from "@/lib/utils"

function Popover({
  ...props
}) {
  return <PopoverPrimitive.Root data-slot="popover" {...props} />;
}

function PopoverTrigger({
  ...props
}) {
  return <PopoverPrimitive.Trigger data-slot="popover-trigger" {...props} />;
}

function PopoverContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}) {
  return (
    <PopoverPrimitive.Portal>
      <PopoverPrimitive.Content
        data-slot="popover-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className
        )}
        {...props} />
    </PopoverPrimitive.Portal>
  );
}

function PopoverAnchor({
  ...props
}) {
  return <PopoverPrimitive.Anchor data-slot="popover-anchor" {...props} />;
}

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\progress.jsx"   & echo.. 
/**
 * Progress Component
 * A progress bar indicator using Radix UI
 */

import * as React from "react";
import { cn } from "@/lib/utils";

const Progress = React.forwardRef(
  ({ className, value, max = 100, ...props }, ref) => {
    const percentage = Math.min(Math.max((value / max) * 100, 0), 100);

    return (
      <div
        ref={ref}
        role="progressbar"
        aria-valuemin={0}
        aria-valuemax={max}
        aria-valuenow={value}
        className={cn(
          "relative h-2 w-full overflow-hidden rounded-full bg-primary/20",
          className
        )}
        {...props}
      >
        <div
          className="h-full w-full flex-1 bg-primary transition-all"
          style={{ transform: `translateX(-${100 - percentage}%)` }}
        />
      </div>
    );
  }
);

Progress.displayName = "Progress";

export { Progress };
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\scroll-area.jsx"   & echo.. 
"use client"

import * as React from "react"
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area"

import { cn } from "@/lib/utils"

function ScrollArea({
  className,
  children,
  ...props
}) {
  return (
    <ScrollAreaPrimitive.Root data-slot="scroll-area" className={cn("relative", className)} {...props}>
      <ScrollAreaPrimitive.Viewport
        data-slot="scroll-area-viewport"
        className="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1">
        {children}
      </ScrollAreaPrimitive.Viewport>
      <ScrollBar />
      <ScrollAreaPrimitive.Corner />
    </ScrollAreaPrimitive.Root>
  );
}

function ScrollBar({
  className,
  orientation = "vertical",
  ...props
}) {
  return (
    <ScrollAreaPrimitive.ScrollAreaScrollbar
      data-slot="scroll-area-scrollbar"
      orientation={orientation}
      className={cn(
        "flex touch-none p-px transition-colors select-none",
        orientation === "vertical" &&
          "h-full w-2.5 border-l border-l-transparent",
        orientation === "horizontal" &&
          "h-2.5 flex-col border-t border-t-transparent",
        className
      )}
      {...props}>
      <ScrollAreaPrimitive.ScrollAreaThumb
        data-slot="scroll-area-thumb"
        className="bg-border relative flex-1 rounded-full" />
    </ScrollAreaPrimitive.ScrollAreaScrollbar>
  );
}

export { ScrollArea, ScrollBar }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\select.jsx"   & echo.. 
"use client"

import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { CheckIcon, ChevronDownIcon, ChevronUpIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Select({
  ...props
}) {
  return <SelectPrimitive.Root data-slot="select" {...props} />;
}

function SelectGroup({
  ...props
}) {
  return <SelectPrimitive.Group data-slot="select-group" {...props} />;
}

function SelectValue({
  ...props
}) {
  return <SelectPrimitive.Value data-slot="select-value" {...props} />;
}

function SelectTrigger({
  className,
  size = "default",
  children,
  ...props
}) {
  return (
    <SelectPrimitive.Trigger
      data-slot="select-trigger"
      data-size={size}
      className={cn(
        "border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}>
      {children}
      <SelectPrimitive.Icon asChild>
        <ChevronDownIcon className="size-4 opacity-50" />
      </SelectPrimitive.Icon>
    </SelectPrimitive.Trigger>
  );
}

function SelectContent({
  className,
  children,
  position = "item-aligned",
  align = "center",
  ...props
}) {
  return (
    <SelectPrimitive.Portal>
      <SelectPrimitive.Content
        data-slot="select-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",
          position === "popper" &&
            "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
          className
        )}
        position={position}
        align={align}
        {...props}>
        <SelectScrollUpButton />
        <SelectPrimitive.Viewport
          className={cn("p-1", position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1")}>
          {children}
        </SelectPrimitive.Viewport>
        <SelectScrollDownButton />
      </SelectPrimitive.Content>
    </SelectPrimitive.Portal>
  );
}

function SelectLabel({
  className,
  ...props
}) {
  return (
    <SelectPrimitive.Label
      data-slot="select-label"
      className={cn("text-muted-foreground px-2 py-1.5 text-xs", className)}
      {...props} />
  );
}

function SelectItem({
  className,
  children,
  ...props
}) {
  return (
    <SelectPrimitive.Item
      data-slot="select-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",
        className
      )}
      {...props}>
      <span
        data-slot="select-item-indicator"
        className="absolute right-2 flex size-3.5 items-center justify-center">
        <SelectPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </SelectPrimitive.ItemIndicator>
      </span>
      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
    </SelectPrimitive.Item>
  );
}

function SelectSeparator({
  className,
  ...props
}) {
  return (
    <SelectPrimitive.Separator
      data-slot="select-separator"
      className={cn("bg-border pointer-events-none -mx-1 my-1 h-px", className)}
      {...props} />
  );
}

function SelectScrollUpButton({
  className,
  ...props
}) {
  return (
    <SelectPrimitive.ScrollUpButton
      data-slot="select-scroll-up-button"
      className={cn("flex cursor-default items-center justify-center py-1", className)}
      {...props}>
      <ChevronUpIcon className="size-4" />
    </SelectPrimitive.ScrollUpButton>
  );
}

function SelectScrollDownButton({
  className,
  ...props
}) {
  return (
    <SelectPrimitive.ScrollDownButton
      data-slot="select-scroll-down-button"
      className={cn("flex cursor-default items-center justify-center py-1", className)}
      {...props}>
      <ChevronDownIcon className="size-4" />
    </SelectPrimitive.ScrollDownButton>
  );
}

export {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectScrollDownButton,
  SelectScrollUpButton,
  SelectSeparator,
  SelectTrigger,
  SelectValue,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\separator.jsx"   & echo.. 
import * as React from "react"
import * as SeparatorPrimitive from "@radix-ui/react-separator"

import { cn } from "@/lib/utils"

function Separator({
  className,
  orientation = "horizontal",
  decorative = true,
  ...props
}) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",
        className
      )}
      {...props} />
  );
}

export { Separator }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\sheet.jsx"   & echo.. 
"use client"

import * as React from "react"
import * as SheetPrimitive from "@radix-ui/react-dialog"
import { XIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Sheet({
  ...props
}) {
  return <SheetPrimitive.Root data-slot="sheet" {...props} />;
}

function SheetTrigger({
  ...props
}) {
  return <SheetPrimitive.Trigger data-slot="sheet-trigger" {...props} />;
}

function SheetClose({
  ...props
}) {
  return <SheetPrimitive.Close data-slot="sheet-close" {...props} />;
}

function SheetPortal({
  ...props
}) {
  return <SheetPrimitive.Portal data-slot="sheet-portal" {...props} />;
}

function SheetOverlay({
  className,
  ...props
}) {
  return (
    <SheetPrimitive.Overlay
      data-slot="sheet-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props} />
  );
}

function SheetContent({
  className,
  children,
  side = "right",
  ...props
}) {
  return (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content
        data-slot="sheet-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
          side === "right" &&
            "data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",
          side === "left" &&
            "data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",
          side === "top" &&
            "data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",
          side === "bottom" &&
            "data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",
          className
        )}
        {...props}>
        {children}
        <SheetPrimitive.Close
          className="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none">
          <XIcon className="size-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  );
}

function SheetHeader({
  className,
  ...props
}) {
  return (
    <div
      data-slot="sheet-header"
      className={cn("flex flex-col gap-1.5 p-4", className)}
      {...props} />
  );
}

function SheetFooter({
  className,
  ...props
}) {
  return (
    <div
      data-slot="sheet-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props} />
  );
}

function SheetTitle({
  className,
  ...props
}) {
  return (
    <SheetPrimitive.Title
      data-slot="sheet-title"
      className={cn("text-foreground font-semibold", className)}
      {...props} />
  );
}

function SheetDescription({
  className,
  ...props
}) {
  return (
    <SheetPrimitive.Description
      data-slot="sheet-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />
  );
}

export {
  Sheet,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\sidebar.jsx"   & echo.. 
"use client";
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority";
import { PanelLeftIcon } from "lucide-react"

import { useIsMobile } from "@/hooks/use-mobile"
import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Separator } from "@/components/ui/separator"
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
} from "@/components/ui/sheet"
import { Skeleton } from "@/components/ui/skeleton"
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip"

const SIDEBAR_COOKIE_NAME = "sidebar_state"
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7
const SIDEBAR_WIDTH = "16rem"
const SIDEBAR_WIDTH_MOBILE = "18rem"
const SIDEBAR_WIDTH_ICON = "3rem"
const SIDEBAR_KEYBOARD_SHORTCUT = "b"

const SidebarContext = React.createContext(null)

function useSidebar() {
  const context = React.useContext(SidebarContext)
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider.")
  }

  return context
}

function SidebarProvider({
  defaultOpen = true,
  open: openProp,
  onOpenChange: setOpenProp,
  className,
  style,
  children,
  ...props
}) {
  const isMobile = useIsMobile()
  const [openMobile, setOpenMobile] = React.useState(false)

  // This is the internal state of the sidebar.
  // We use openProp and setOpenProp for control from outside the component.
  const [_open, _setOpen] = React.useState(defaultOpen)
  const open = openProp ?? _open
  const setOpen = React.useCallback((value) => {
    const openState = typeof value === "function" ? value(open) : value
    if (setOpenProp) {
      setOpenProp(openState)
    } else {
      _setOpen(openState)
    }

    // This sets the cookie to keep the sidebar state.
    document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`
  }, [setOpenProp, open])

  // Helper to toggle the sidebar.
  const toggleSidebar = React.useCallback(() => {
    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);
  }, [isMobile, setOpen, setOpenMobile])

  // Adds a keyboard shortcut to toggle the sidebar.
  React.useEffect(() => {
    const handleKeyDown = (event) => {
      if (
        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
        (event.metaKey || event.ctrlKey)
      ) {
        event.preventDefault()
        toggleSidebar()
      }
    }

    window.addEventListener("keydown", handleKeyDown)
    return () => window.removeEventListener("keydown", handleKeyDown);
  }, [toggleSidebar])

  // We add a state so that we can do data-state="expanded" or "collapsed".
  // This makes it easier to style the sidebar with Tailwind classes.
  const state = open ? "expanded" : "collapsed"

  const contextValue = React.useMemo(() => ({
    state,
    open,
    setOpen,
    isMobile,
    openMobile,
    setOpenMobile,
    toggleSidebar,
  }), [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar])

  return (
    <SidebarContext.Provider value={contextValue}>
      <TooltipProvider delayDuration={0}>
        <div
          data-slot="sidebar-wrapper"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH,
              "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
              ...style
            }
          }
          className={cn(
            "group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",
            className
          )}
          {...props}>
          {children}
        </div>
      </TooltipProvider>
    </SidebarContext.Provider>
  );
}

function Sidebar({
  side = "left",
  variant = "sidebar",
  collapsible = "offcanvas",
  className,
  children,
  ...props
}) {
  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()

  if (collapsible === "none") {
    return (
      <div
        data-slot="sidebar"
        className={cn(
          "bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",
          className
        )}
        {...props}>
        {children}
      </div>
    );
  }

  if (isMobile) {
    return (
      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
        <SheetContent
          data-sidebar="sidebar"
          data-slot="sidebar"
          data-mobile="true"
          className="bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH_MOBILE
            }
          }
          side={side}>
          <SheetHeader className="sr-only">
            <SheetTitle>Sidebar</SheetTitle>
            <SheetDescription>Displays the mobile sidebar.</SheetDescription>
          </SheetHeader>
          <div className="flex h-full w-full flex-col">{children}</div>
        </SheetContent>
      </Sheet>
    );
  }

  return (
    <div
      className="group peer text-sidebar-foreground hidden md:block"
      data-state={state}
      data-collapsible={state === "collapsed" ? collapsible : ""}
      data-variant={variant}
      data-side={side}
      data-slot="sidebar">
      {/* This is what handles the sidebar gap on desktop */}
      <div
        data-slot="sidebar-gap"
        className={cn(
          "relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear",
          "group-data-[collapsible=offcanvas]:w-0",
          "group-data-[side=right]:rotate-180",
          variant === "floating" || variant === "inset"
            ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon)"
        )} />
      <div
        data-slot="sidebar-container"
        className={cn(
          "fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",
          side === "left"
            ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
            : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
          // Adjust the padding for floating and inset variants.
          variant === "floating" || variant === "inset"
            ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",
          className
        )}
        {...props}>
        <div
          data-sidebar="sidebar"
          data-slot="sidebar-inner"
          className="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm">
          {children}
        </div>
      </div>
    </div>
  );
}

function SidebarTrigger({
  className,
  onClick,
  ...props
}) {
  const { toggleSidebar } = useSidebar()

  return (
    <Button
      data-sidebar="trigger"
      data-slot="sidebar-trigger"
      variant="ghost"
      size="icon"
      className={cn("size-7", className)}
      onClick={(event) => {
        onClick?.(event)
        toggleSidebar()
      }}
      {...props}>
      <PanelLeftIcon />
      <span className="sr-only">Toggle Sidebar</span>
    </Button>
  );
}

function SidebarRail({
  className,
  ...props
}) {
  const { toggleSidebar } = useSidebar()

  return (
    <button
      data-sidebar="rail"
      data-slot="sidebar-rail"
      aria-label="Toggle Sidebar"
      tabIndex={-1}
      onClick={toggleSidebar}
      title="Toggle Sidebar"
      className={cn(
        "hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex",
        "in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize",
        "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
        "hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full",
        "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
        "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
        className
      )}
      {...props} />
  );
}

function SidebarInset({
  className,
  ...props
}) {
  return (
    <main
      data-slot="sidebar-inset"
      className={cn(
        "bg-background relative flex w-full flex-1 flex-col",
        "md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",
        className
      )}
      {...props} />
  );
}

function SidebarInput({
  className,
  ...props
}) {
  return (
    <Input
      data-slot="sidebar-input"
      data-sidebar="input"
      className={cn("bg-background h-8 w-full shadow-none", className)}
      {...props} />
  );
}

function SidebarHeader({
  className,
  ...props
}) {
  return (
    <div
      data-slot="sidebar-header"
      data-sidebar="header"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props} />
  );
}

function SidebarFooter({
  className,
  ...props
}) {
  return (
    <div
      data-slot="sidebar-footer"
      data-sidebar="footer"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props} />
  );
}

function SidebarSeparator({
  className,
  ...props
}) {
  return (
    <Separator
      data-slot="sidebar-separator"
      data-sidebar="separator"
      className={cn("bg-sidebar-border mx-2 w-auto", className)}
      {...props} />
  );
}

function SidebarContent({
  className,
  ...props
}) {
  return (
    <div
      data-slot="sidebar-content"
      data-sidebar="content"
      className={cn(
        "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
        className
      )}
      {...props} />
  );
}

function SidebarGroup({
  className,
  ...props
}) {
  return (
    <div
      data-slot="sidebar-group"
      data-sidebar="group"
      className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
      {...props} />
  );
}

function SidebarGroupLabel({
  className,
  asChild = false,
  ...props
}) {
  const Comp = asChild ? Slot : "div"

  return (
    <Comp
      data-slot="sidebar-group-label"
      data-sidebar="group-label"
      className={cn(
        "text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
        className
      )}
      {...props} />
  );
}

function SidebarGroupAction({
  className,
  asChild = false,
  ...props
}) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="sidebar-group-action"
      data-sidebar="group-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props} />
  );
}

function SidebarGroupContent({
  className,
  ...props
}) {
  return (
    <div
      data-slot="sidebar-group-content"
      data-sidebar="group-content"
      className={cn("w-full text-sm", className)}
      {...props} />
  );
}

function SidebarMenu({
  className,
  ...props
}) {
  return (
    <ul
      data-slot="sidebar-menu"
      data-sidebar="menu"
      className={cn("flex w-full min-w-0 flex-col gap-1", className)}
      {...props} />
  );
}

function SidebarMenuItem({
  className,
  ...props
}) {
  return (
    <li
      data-slot="sidebar-menu-item"
      data-sidebar="menu-item"
      className={cn("group/menu-item relative", className)}
      {...props} />
  );
}

const sidebarMenuButtonVariants = cva(
  "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
        outline:
          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
      },
      size: {
        default: "h-8 text-sm",
        sm: "h-7 text-xs",
        lg: "h-12 text-sm group-data-[collapsible=icon]:p-0!",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function SidebarMenuButton({
  asChild = false,
  isActive = false,
  variant = "default",
  size = "default",
  tooltip,
  className,
  ...props
}) {
  const Comp = asChild ? Slot : "button"
  const { isMobile, state } = useSidebar()

  const button = (
    <Comp
      data-slot="sidebar-menu-button"
      data-sidebar="menu-button"
      data-size={size}
      data-active={isActive}
      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
      {...props} />
  )

  if (!tooltip) {
    return button
  }

  if (typeof tooltip === "string") {
    tooltip = {
      children: tooltip,
    }
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>
      <TooltipContent
        side="right"
        align="center"
        hidden={state !== "collapsed" || isMobile}
        {...tooltip} />
    </Tooltip>
  );
}

function SidebarMenuAction({
  className,
  asChild = false,
  showOnHover = false,
  ...props
}) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="sidebar-menu-action"
      data-sidebar="menu-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0",
        className
      )}
      {...props} />
  );
}

function SidebarMenuBadge({
  className,
  ...props
}) {
  return (
    <div
      data-slot="sidebar-menu-badge"
      data-sidebar="menu-badge"
      className={cn(
        "text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none",
        "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props} />
  );
}

function SidebarMenuSkeleton({
  className,
  showIcon = false,
  ...props
}) {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`;
  }, [])

  return (
    <div
      data-slot="sidebar-menu-skeleton"
      data-sidebar="menu-skeleton"
      className={cn("flex h-8 items-center gap-2 rounded-md px-2", className)}
      {...props}>
      {showIcon && (
        <Skeleton className="size-4 rounded-md" data-sidebar="menu-skeleton-icon" />
      )}
      <Skeleton
        className="h-4 max-w-(--skeleton-width) flex-1"
        data-sidebar="menu-skeleton-text"
        style={
          {
            "--skeleton-width": width
          }
        } />
    </div>
  );
}

function SidebarMenuSub({
  className,
  ...props
}) {
  return (
    <ul
      data-slot="sidebar-menu-sub"
      data-sidebar="menu-sub"
      className={cn(
        "border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props} />
  );
}

function SidebarMenuSubItem({
  className,
  ...props
}) {
  return (
    <li
      data-slot="sidebar-menu-sub-item"
      data-sidebar="menu-sub-item"
      className={cn("group/menu-sub-item relative", className)}
      {...props} />
  );
}

function SidebarMenuSubButton({
  asChild = false,
  size = "md",
  isActive = false,
  className,
  ...props
}) {
  const Comp = asChild ? Slot : "a"

  return (
    <Comp
      data-slot="sidebar-menu-sub-button"
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
        "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
        size === "sm" && "text-xs",
        size === "md" && "text-sm",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props} />
  );
}

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\skeleton.jsx"   & echo.. 
import { cn } from "@/lib/utils"

function Skeleton({
  className,
  ...props
}) {
  return (
    <div
      data-slot="skeleton"
      className={cn("bg-accent animate-pulse rounded-md", className)}
      {...props} />
  );
}

export { Skeleton }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\slider.jsx"   & echo.. 
import * as React from "react"
import * as SliderPrimitive from "@radix-ui/react-slider"

import { cn } from "@/lib/utils"

function Slider({
  className,
  defaultValue,
  value,
  min = 0,
  max = 100,
  ...props
}) {
  const _values = React.useMemo(() =>
    Array.isArray(value)
      ? value
      : Array.isArray(defaultValue)
        ? defaultValue
        : [min, max], [value, defaultValue, min, max])

  return (
    <SliderPrimitive.Root
      data-slot="slider"
      defaultValue={defaultValue}
      value={value}
      min={min}
      max={max}
      className={cn(
        "relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",
        className
      )}
      {...props}>
      <SliderPrimitive.Track
        data-slot="slider-track"
        className={cn(
          "bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"
        )}>
        <SliderPrimitive.Range
          data-slot="slider-range"
          className={cn(
            "bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"
          )} />
      </SliderPrimitive.Track>
      {Array.from({ length: _values.length }, (_, index) => (
        <SliderPrimitive.Thumb
          data-slot="slider-thumb"
          key={index}
          className="border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50" />
      ))}
    </SliderPrimitive.Root>
  );
}

export { Slider }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\sonner.jsx"   & echo.. 
import {
  CircleCheckIcon,
  InfoIcon,
  Loader2Icon,
  OctagonXIcon,
  TriangleAlertIcon,
} from "lucide-react"
import { useTheme } from "next-themes"
import { Toaster as Sonner } from "sonner";

const Toaster = ({
  ...props
}) => {
  const { theme = "system" } = useTheme()

  return (
    <Sonner
      theme={theme}
      className="toaster group"
      icons={{
        success: <CircleCheckIcon className="size-4" />,
        info: <InfoIcon className="size-4" />,
        warning: <TriangleAlertIcon className="size-4" />,
        error: <OctagonXIcon className="size-4" />,
        loading: <Loader2Icon className="size-4 animate-spin" />,
      }}
      style={
        {
          "--normal-bg": "var(--popover)",
          "--normal-text": "var(--popover-foreground)",
          "--normal-border": "var(--border)",
          "--border-radius": "var(--radius)"
        }
      }
      {...props} />
  );
}

export { Toaster }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\switch.jsx"   & echo.. 
import * as React from "react"
import * as SwitchPrimitive from "@radix-ui/react-switch"

import { cn } from "@/lib/utils"

function Switch({
  className,
  ...props
}) {
  return (
    <SwitchPrimitive.Root
      data-slot="switch"
      className={cn(
        "peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}>
      <SwitchPrimitive.Thumb
        data-slot="switch-thumb"
        className={cn(
          "bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"
        )} />
    </SwitchPrimitive.Root>
  );
}

export { Switch }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\table.jsx"   & echo.. 
"use client"

import * as React from "react"

import { cn } from "@/lib/utils"

function Table({
  className,
  ...props
}) {
  return (
    <div data-slot="table-container" className="relative w-full overflow-x-auto">
      <table
        data-slot="table"
        className={cn("w-full caption-bottom text-sm", className)}
        {...props} />
    </div>
  );
}

function TableHeader({
  className,
  ...props
}) {
  return (
    <thead
      data-slot="table-header"
      className={cn("[&_tr]:border-b", className)}
      {...props} />
  );
}

function TableBody({
  className,
  ...props
}) {
  return (
    <tbody
      data-slot="table-body"
      className={cn("[&_tr:last-child]:border-0", className)}
      {...props} />
  );
}

function TableFooter({
  className,
  ...props
}) {
  return (
    <tfoot
      data-slot="table-footer"
      className={cn("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0", className)}
      {...props} />
  );
}

function TableRow({
  className,
  ...props
}) {
  return (
    <tr
      data-slot="table-row"
      className={cn(
        "hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",
        className
      )}
      {...props} />
  );
}

function TableHead({
  className,
  ...props
}) {
  return (
    <th
      data-slot="table-head"
      className={cn(
        "text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className
      )}
      {...props} />
  );
}

function TableCell({
  className,
  ...props
}) {
  return (
    <td
      data-slot="table-cell"
      className={cn(
        "p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className
      )}
      {...props} />
  );
}

function TableCaption({
  className,
  ...props
}) {
  return (
    <caption
      data-slot="table-caption"
      className={cn("text-muted-foreground mt-4 text-sm", className)}
      {...props} />
  );
}

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\tabs.jsx"   & echo.. 
import * as React from "react"
import * as TabsPrimitive from "@radix-ui/react-tabs"

import { cn } from "@/lib/utils"

function Tabs({
  className,
  ...props
}) {
  return (
    <TabsPrimitive.Root
      data-slot="tabs"
      className={cn("flex flex-col gap-2", className)}
      {...props} />
  );
}

function TabsList({
  className,
  ...props
}) {
  return (
    <TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        "bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",
        className
      )}
      {...props} />
  );
}

function TabsTrigger({
  className,
  ...props
}) {
  return (
    <TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props} />
  );
}

function TabsContent({
  className,
  ...props
}) {
  return (
    <TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn("flex-1 outline-none", className)}
      {...props} />
  );
}

export { Tabs, TabsList, TabsTrigger, TabsContent }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\textarea.jsx"   & echo.. 
import * as React from "react"

import { cn } from "@/lib/utils"

function Textarea({
  className,
  ...props
}) {
  return (
    <textarea
      data-slot="textarea"
      className={cn(
        "border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        className
      )}
      {...props} />
  );
}

export { Textarea }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\components\ui\tooltip.jsx"   & echo.. 
import * as React from "react"
import * as TooltipPrimitive from "@radix-ui/react-tooltip"

import { cn } from "@/lib/utils"

function TooltipProvider({
  delayDuration = 0,
  ...props
}) {
  return (<TooltipPrimitive.Provider data-slot="tooltip-provider" delayDuration={delayDuration} {...props} />);
}

function Tooltip({
  ...props
}) {
  return (
    <TooltipProvider>
      <TooltipPrimitive.Root data-slot="tooltip" {...props} />
    </TooltipProvider>
  );
}

function TooltipTrigger({
  ...props
}) {
  return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />;
}

function TooltipContent({
  className,
  sideOffset = 0,
  children,
  ...props
}) {
  return (
    <TooltipPrimitive.Portal>
      <TooltipPrimitive.Content
        data-slot="tooltip-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",
          className
        )}
        {...props}>
        {children}
        <TooltipPrimitive.Arrow
          className="bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]" />
      </TooltipPrimitive.Content>
    </TooltipPrimitive.Portal>
  );
}

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\auth\components\LoginForm.jsx"   & echo.. 
/**
 * LoginForm Component
 * Authentication form with validation
 */

import { useState } from "react";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { Eye, EyeOff, Loader2, LogIn } from "lucide-react";
import { cn } from "@/lib/utils";
import { loginSchema } from "@/utils/validators";
import { useLogin } from "../hooks/useLogin";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Checkbox } from "@/components/ui/checkbox";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";

/**
 * LoginForm component
 */
const LoginForm = ({ className }) => {
  const [showPassword, setShowPassword] = useState(false);
  const { mutate: login, isPending } = useLogin();

  const form = useForm({
    resolver: zodResolver(loginSchema),
    defaultValues: {
      username: "",
      password: "",
      rememberMe: false,
    },
  });

  const onSubmit = (data) => {
    login({
      username: data.username,
      password: data.password,
    });
  };

  return (
    <Form {...form}>
      <form
        onSubmit={form.handleSubmit(onSubmit)}
        className={cn("space-y-6", className)}
      >
        {/* Username Field */}
        <FormField
          control={form.control}
          name="username"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Username</FormLabel>
              <FormControl>
                <Input
                  placeholder="Enter your username"
                  autoComplete="username"
                  disabled={isPending}
                  {...field}
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />

        {/* Password Field */}
        <FormField
          control={form.control}
          name="password"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Password</FormLabel>
              <FormControl>
                <div className="relative">
                  <Input
                    type={showPassword ? "text" : "password"}
                    placeholder="Enter your password"
                    autoComplete="current-password"
                    disabled={isPending}
                    className="pr-10"
                    {...field}
                  />
                  <Button
                    type="button"
                    variant="ghost"
                    size="icon"
                    className="absolute right-0 top-0 h-full px-3 hover:bg-transparent"
                    onClick={() => setShowPassword(!showPassword)}
                    tabIndex={-1}
                  >
                    {showPassword ? (
                      <EyeOff className="h-4 w-4 text-muted-foreground" />
                    ) : (
                      <Eye className="h-4 w-4 text-muted-foreground" />
                    )}
                    <span className="sr-only">
                      {showPassword ? "Hide password" : "Show password"}
                    </span>
                  </Button>
                </div>
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />

        {/* Remember Me & Forgot Password */}
        <div className="flex items-center justify-between">
          <FormField
            control={form.control}
            name="rememberMe"
            render={({ field }) => (
              <FormItem className="flex items-center gap-2 space-y-0">
                <FormControl>
                  <Checkbox
                    checked={field.value}
                    onCheckedChange={field.onChange}
                    disabled={isPending}
                  />
                </FormControl>
                <FormLabel className="text-sm font-normal cursor-pointer">
                  Remember me
                </FormLabel>
              </FormItem>
            )}
          />
          <a
            href="/forgot-password"
            className="text-sm text-primary hover:underline"
          >
            Forgot password?
          </a>
        </div>

        {/* Submit Button */}
        <Button type="submit" className="w-full" size="lg" disabled={isPending}>
          {isPending ? (
            <>
              <Loader2 className="mr-2 h-4 w-4 animate-spin" />
              Signing in...
            </>
          ) : (
            <>
              <LogIn className="mr-2 h-4 w-4" />
              Sign in
            </>
          )}
        </Button>
      </form>
    </Form>
  );
};

export default LoginForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\branches\components\BranchColumns.jsx"   & echo.. 
/**
 * Branch Columns Definition
 * Defines the columns for the branches DataTable
 */

import { Checkbox } from "@/components/ui/checkbox";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import {
  MoreHorizontal,
  Eye,
  Edit,
  Trash2,
  CheckCircle,
  XCircle,
  Building2,
} from "lucide-react";

/**
 * Get column definitions for branches table
 */
export const getBranchColumns = ({
  onView,
  onEdit,
  onDelete,
  onActivate,
  onDeactivate,
} = {}) => [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() ||
          (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
        className="translate-y-[2px]"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
        className="translate-y-[2px]"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "branchCode",
    header: "Code",
    cell: ({ row }) => (
      <span className="font-mono text-sm">{row.getValue("branchCode")}</span>
    ),
  },
  {
    accessorKey: "branchName",
    header: "Branch Name",
    cell: ({ row }) => (
      <div className="flex items-center gap-2">
        <Building2 className="h-4 w-4 text-muted-foreground" />
        <div>
          <div className="font-medium">{row.getValue("branchName")}</div>
          {row.original.isMainBranch && (
            <Badge variant="secondary" className="mt-1">
              Main Branch
            </Badge>
          )}
        </div>
      </div>
    ),
  },
  {
    accessorKey: "city",
    header: "Location",
    cell: ({ row }) => (
      <div className="text-muted-foreground">
        {[row.original.city, row.original.district]
          .filter(Boolean)
          .join(", ") || "-"}
      </div>
    ),
  },
  {
    accessorKey: "phone",
    header: "Phone",
    cell: ({ row }) => row.getValue("phone") || "-",
  },
  {
    accessorKey: "email",
    header: "Email",
    cell: ({ row }) => row.getValue("email") || "-",
  },
  {
    id: "hours",
    header: "Hours",
    cell: ({ row }) => {
      const opening = row.original.openingTime;
      const closing = row.original.closingTime;
      if (!opening && !closing) return "-";
      return `${opening || "?"} - ${closing || "?"}`;
    },
  },
  {
    accessorKey: "isActive",
    header: "Status",
    cell: ({ row }) => {
      const isActive = row.getValue("isActive");
      return (
        <Badge variant={isActive ? "default" : "secondary"}>
          {isActive ? "Active" : "Inactive"}
        </Badge>
      );
    },
  },
  {
    id: "actions",
    header: "Actions",
    cell: ({ row }) => {
      const branch = row.original;

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuItem onClick={() => onView?.(branch)}>
              <Eye className="mr-2 h-4 w-4" />
              View
            </DropdownMenuItem>
            <DropdownMenuItem onClick={() => onEdit?.(branch)}>
              <Edit className="mr-2 h-4 w-4" />
              Edit
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            {branch.isActive ? (
              <DropdownMenuItem onClick={() => onDeactivate?.(branch)}>
                <XCircle className="mr-2 h-4 w-4" />
                Deactivate
              </DropdownMenuItem>
            ) : (
              <DropdownMenuItem onClick={() => onActivate?.(branch)}>
                <CheckCircle className="mr-2 h-4 w-4" />
                Activate
              </DropdownMenuItem>
            )}
            <DropdownMenuSeparator />
            <DropdownMenuItem
              onClick={() => onDelete?.(branch)}
              className="text-destructive focus:text-destructive"
              disabled={branch.isMainBranch}
            >
              <Trash2 className="mr-2 h-4 w-4" />
              Delete
            </DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    enableSorting: false,
    enableHiding: false,
  },
];

export default getBranchColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\branches\components\BranchForm.jsx"   & echo.. 
/**
 * Branch Form Component
 * Form for creating and editing branches
 */

import { useEffect } from "react";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Switch } from "@/components/ui/switch";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { ButtonSpinner } from "@/components/common";

// Validation schema
const branchSchema = z.object({
  branchName: z.string().min(1, "Branch name is required").max(100),
  branchCode: z.string().min(1, "Branch code is required").max(20),
  phone: z
    .string()
    .min(10, "Phone must be at least 10 digits")
    .max(15)
    .optional()
    .or(z.literal("")),
  email: z.string().email("Invalid email").optional().or(z.literal("")),
  address: z.string().max(200).optional().nullable(),
  city: z.string().max(50).optional().nullable(),
  district: z.string().max(50).optional().nullable(),
  postalCode: z.string().max(20).optional().nullable(),
  openingTime: z.string().optional().nullable(),
  closingTime: z.string().optional().nullable(),
  isMainBranch: z.boolean().default(false),
  isActive: z.boolean().default(true),
});

/**
 * BranchForm component
 */
const BranchForm = ({ branch, onSubmit, onCancel, isSubmitting = false }) => {
  const isEditing = Boolean(branch);

  const form = useForm({
    resolver: zodResolver(branchSchema),
    defaultValues: {
      branchName: "",
      branchCode: "",
      phone: "",
      email: "",
      address: "",
      city: "",
      district: "",
      postalCode: "",
      openingTime: "08:00",
      closingTime: "20:00",
      isMainBranch: false,
      isActive: true,
    },
  });

  // Populate form when editing
  useEffect(() => {
    if (branch) {
      form.reset({
        branchName: branch.branchName || "",
        branchCode: branch.branchCode || "",
        phone: branch.phone || "",
        email: branch.email || "",
        address: branch.address || "",
        city: branch.city || "",
        district: branch.district || "",
        postalCode: branch.postalCode || "",
        openingTime: branch.openingTime || "08:00",
        closingTime: branch.closingTime || "20:00",
        isMainBranch: branch.isMainBranch ?? false,
        isActive: branch.isActive ?? true,
      });
    }
  }, [branch, form]);

  const handleSubmit = (data) => {
    onSubmit(data);
  };

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-6">
        {/* Basic Information */}
        <Card>
          <CardHeader>
            <CardTitle>Branch Information</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="branchName"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Branch Name *</FormLabel>
                  <FormControl>
                    <Input placeholder="Main Branch" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="branchCode"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Branch Code *</FormLabel>
                  <FormControl>
                    <Input placeholder="BR001" {...field} />
                  </FormControl>
                  <FormDescription>
                    Unique identifier for this branch
                  </FormDescription>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="phone"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Phone</FormLabel>
                  <FormControl>
                    <Input placeholder="+94 11 234 5678" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="email"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Email</FormLabel>
                  <FormControl>
                    <Input
                      type="email"
                      placeholder="branch@pharmacy.com"
                      {...field}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Address */}
        <Card>
          <CardHeader>
            <CardTitle>Location</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="address"
              render={({ field }) => (
                <FormItem className="md:col-span-2">
                  <FormLabel>Street Address</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="123 Main Street"
                      className="resize-none"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="city"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>City</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Colombo"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="district"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>District</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Colombo"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="postalCode"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Postal Code</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="00100"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Operating Hours */}
        <Card>
          <CardHeader>
            <CardTitle>Operating Hours</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="openingTime"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Opening Time</FormLabel>
                  <FormControl>
                    <Input type="time" {...field} value={field.value || ""} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="closingTime"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Closing Time</FormLabel>
                  <FormControl>
                    <Input type="time" {...field} value={field.value || ""} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Settings */}
        <Card>
          <CardContent className="pt-6 space-y-4">
            <FormField
              control={form.control}
              name="isMainBranch"
              render={({ field }) => (
                <FormItem className="flex flex-row items-center justify-between rounded-lg border p-3">
                  <div className="space-y-0.5">
                    <FormLabel>Main Branch</FormLabel>
                    <FormDescription>
                      Set as the main/headquarters branch
                    </FormDescription>
                  </div>
                  <FormControl>
                    <Switch
                      checked={field.value}
                      onCheckedChange={field.onChange}
                    />
                  </FormControl>
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="isActive"
              render={({ field }) => (
                <FormItem className="flex flex-row items-center justify-between rounded-lg border p-3">
                  <div className="space-y-0.5">
                    <FormLabel>Active Status</FormLabel>
                    <FormDescription>
                      Inactive branches cannot process transactions
                    </FormDescription>
                  </div>
                  <FormControl>
                    <Switch
                      checked={field.value}
                      onCheckedChange={field.onChange}
                    />
                  </FormControl>
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Actions */}
        <div className="flex justify-end gap-4">
          <Button type="button" variant="outline" onClick={onCancel}>
            Cancel
          </Button>
          <Button type="submit" disabled={isSubmitting}>
            {isSubmitting && <ButtonSpinner />}
            {isEditing ? "Update Branch" : "Create Branch"}
          </Button>
        </div>
      </form>
    </Form>
  );
};

export default BranchForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\categories\components\CategoryColumns.jsx"   & echo.. 
/**
 * Category Columns Definition
 * Defines the columns for the categories DataTable
 */

import { Checkbox } from "@/components/ui/checkbox";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import {
  MoreHorizontal,
  Edit,
  Trash2,
  Eye,
  Power,
  PowerOff,
} from "lucide-react";

/**
 * Get column definitions for categories table
 * @param {Object} options - Column options
 * @param {Function} options.onView - View handler
 * @param {Function} options.onEdit - Edit handler
 * @param {Function} options.onToggleStatus - Toggle active status handler
 * @param {Function} options.onDelete - Delete handler
 */
export const getCategoryColumns = ({
  onView,
  onEdit,
  onToggleStatus,
  onDelete,
} = {}) => [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() ||
          (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
        className="translate-y-[2px]"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
        className="translate-y-[2px]"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "categoryName",
    header: "Category Name",
    cell: ({ row }) => (
      <div className="font-medium">{row.getValue("categoryName")}</div>
    ),
  },
  {
    accessorKey: "description",
    header: "Description",
    cell: ({ row }) => (
      <div className="text-muted-foreground max-w-[300px] truncate">
        {row.getValue("description") || "-"}
      </div>
    ),
  },
  {
    accessorKey: "productCount",
    header: "Products",
    cell: ({ row }) => (
      <Badge variant="secondary">
        {row.getValue("productCount") ?? 0} products
      </Badge>
    ),
  },
  {
    accessorKey: "isActive",
    header: "Status",
    cell: ({ row }) => {
      const isActive = row.getValue("isActive");
      return (
        <Badge variant={isActive ? "default" : "secondary"}>
          {isActive ? "Active" : "Inactive"}
        </Badge>
      );
    },
    filterFn: (row, id, value) => {
      if (value === undefined) return true;
      return row.getValue(id) === value;
    },
  },
  {
    id: "actions",
    header: "Actions",
    cell: ({ row }) => {
      const category = row.original;

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuItem onClick={() => onView?.(category)}>
              <Eye className="mr-2 h-4 w-4" />
              View Products
            </DropdownMenuItem>
            <DropdownMenuItem onClick={() => onEdit?.(category)}>
              <Edit className="mr-2 h-4 w-4" />
              Edit
            </DropdownMenuItem>
            <DropdownMenuItem onClick={() => onToggleStatus?.(category)}>
              {category.isActive ? (
                <PowerOff className="mr-2 h-4 w-4" />
              ) : (
                <Power className="mr-2 h-4 w-4" />
              )}
              {category.isActive ? "Deactivate" : "Activate"}
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem
              onClick={() => onDelete?.(category)}
              className="text-destructive focus:text-destructive focus:bg-destructive/10"
            >
              <Trash2 className="mr-2 h-4 w-4" />
              Delete Permanently
            </DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    enableSorting: false,
    enableHiding: false,
  },
];

export default getCategoryColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\categories\components\CategoryFormDialog.jsx"   & echo.. 
/**
 * Category Form Dialog Component
 * Used for creating and editing categories in a dialog
 */

import { useEffect } from "react";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Switch } from "@/components/ui/switch";
import { Button } from "@/components/ui/button";
import { ButtonSpinner } from "@/components/common";

// Validation schema
const categorySchema = z.object({
  categoryName: z
    .string()
    .min(1, "Category name is required")
    .max(100, "Name too long"),
  description: z
    .string()
    .max(500, "Description too long")
    .optional()
    .nullable(),
  isActive: z.boolean().default(true),
});

/**
 * CategoryFormDialog component
 * @param {Object} props
 * @param {boolean} props.open - Dialog open state
 * @param {Function} props.onOpenChange - Dialog state change handler
 * @param {Object} props.category - Category to edit (null for create)
 * @param {Function} props.onSubmit - Submit handler
 * @param {boolean} props.isSubmitting - Loading state
 */
const CategoryFormDialog = ({
  open,
  onOpenChange,
  category,
  onSubmit,
  isSubmitting = false,
}) => {
  const isEditing = Boolean(category);

  const form = useForm({
    resolver: zodResolver(categorySchema),
    defaultValues: {
      categoryName: "",
      description: "",
      isActive: true,
    },
  });

  // Reset form when category changes
  useEffect(() => {
    if (open) {
      if (category) {
        form.reset({
          categoryName: category.categoryName || "",
          description: category.description || "",
          isActive: category.isActive ?? true,
        });
      } else {
        form.reset({
          categoryName: "",
          description: "",
          isActive: true,
        });
      }
    }
  }, [category, form, open]);

  const handleSubmit = (data) => {
    onSubmit(data);
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-[425px]">
        <DialogHeader>
          <DialogTitle>
            {isEditing ? "Edit Category" : "Add Category"}
          </DialogTitle>
          <DialogDescription>
            {isEditing
              ? "Update the category details below."
              : "Create a new category for organizing products."}
          </DialogDescription>
        </DialogHeader>

        <Form {...form}>
          <form
            onSubmit={form.handleSubmit(handleSubmit)}
            className="space-y-4"
          >
            <FormField
              control={form.control}
              name="categoryName"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Category Name *</FormLabel>
                  <FormControl>
                    <Input placeholder="e.g., Pain Relief" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="description"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Description</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="Brief description of the category"
                      className="resize-none"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="isActive"
              render={({ field }) => (
                <FormItem className="flex flex-row items-center justify-between rounded-lg border p-3">
                  <div className="space-y-0.5">
                    <FormLabel>Active</FormLabel>
                    <FormDescription>
                      Inactive categories won't appear in product selection
                    </FormDescription>
                  </div>
                  <FormControl>
                    <Switch
                      checked={field.value}
                      onCheckedChange={field.onChange}
                    />
                  </FormControl>
                </FormItem>
              )}
            />

            <DialogFooter>
              <Button
                type="button"
                variant="outline"
                onClick={() => onOpenChange(false)}
                disabled={isSubmitting}
              >
                Cancel
              </Button>
              <Button type="submit" disabled={isSubmitting}>
                {isSubmitting && <ButtonSpinner />}
                {isEditing ? "Update" : "Create"}
              </Button>
            </DialogFooter>
          </form>
        </Form>
      </DialogContent>
    </Dialog>
  );
};

export default CategoryFormDialog;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\customers\components\CreditAccountColumns.jsx"   & echo.. 
/**
 * Credit Account Columns Definition
 * Defines the columns for the credit accounts DataTable
 */

import { Checkbox } from "@/components/ui/checkbox";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { MoreHorizontal, Eye, CreditCard } from "lucide-react";
import { formatCurrency } from "@/utils/formatters";

/**
 * Get column definitions for credit accounts table
 */
export const getCreditAccountColumns = ({ onView, onManageCredit } = {}) => [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() ||
          (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
        className="translate-y-[2px]"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
        className="translate-y-[2px]"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "customerCode",
    header: "Code",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => (
      <span className="font-mono text-sm">{row.getValue("customerCode")}</span>
    ),
  },
  {
    id: "name",
    header: "Customer Name",
    accessorFn: (row) => `${row.firstName} ${row.lastName}`,
    cell: ({ row }) => (
      <div>
        <div className="font-medium text-sm">
          {row.original.firstName} {row.original.lastName}
        </div>
        {row.original.email && (
          <div className="text-xs text-muted-foreground truncate max-w-[150px] sm:max-w-none">
            {row.original.email}
          </div>
        )}
      </div>
    ),
  },
  {
    accessorKey: "phone",
    header: "Phone",
    meta: { className: "hidden sm:table-cell" },
    cell: ({ row }) => row.getValue("phone") || "-",
  },
  {
    accessorKey: "creditLimit",
    header: "Credit Limit",
    cell: ({ row }) => {
      const creditLimit = row.getValue("creditLimit");
      return (
        <span className="font-medium">{formatCurrency(creditLimit || 0)}</span>
      );
    },
  },
  {
    accessorKey: "currentBalance",
    header: "Outstanding Balance",
    cell: ({ row }) => {
      const balance = row.getValue("currentBalance");
      const creditLimit = row.original.creditLimit;
      const isOverLimit = balance > creditLimit;

      return (
        <div className="flex flex-col gap-1">
          <span
            className={`font-semibold ${
              isOverLimit ? "text-destructive" : "text-orange-600"
            }`}
          >
            {formatCurrency(balance || 0)}
          </span>
          {isOverLimit && (
            <Badge variant="destructive" className="text-xs w-fit">
              Over Limit
            </Badge>
          )}
        </div>
      );
    },
  },
  {
    id: "utilization",
    header: "Credit Used",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => {
      const balance = row.original.currentBalance || 0;
      const creditLimit = row.original.creditLimit || 0;
      const percentage =
        creditLimit > 0 ? ((balance / creditLimit) * 100).toFixed(1) : 0;

      let variant = "default";
      if (percentage >= 100) variant = "destructive";
      else if (percentage >= 75) variant = "warning";

      return (
        <div className="flex items-center gap-2">
          <div className="flex-1 bg-secondary rounded-full h-2 max-w-[100px]">
            <div
              className={`h-2 rounded-full transition-all ${
                variant === "destructive"
                  ? "bg-destructive"
                  : variant === "warning"
                  ? "bg-orange-500"
                  : "bg-primary"
              }`}
              style={{ width: `${Math.min(percentage, 100)}%` }}
            />
          </div>
          <span className="text-xs text-muted-foreground min-w-[45px]">
            {percentage}%
          </span>
        </div>
      );
    },
  },
  {
    id: "available",
    header: "Available Credit",
    meta: { className: "hidden xl:table-cell" },
    cell: ({ row }) => {
      const balance = row.original.currentBalance || 0;
      const creditLimit = row.original.creditLimit || 0;
      const available = Math.max(creditLimit - balance, 0);

      return (
        <span className="font-medium text-green-600">
          {formatCurrency(available)}
        </span>
      );
    },
  },
  {
    accessorKey: "status",
    header: "Status",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => {
      const status = row.getValue("status");
      return (
        <Badge variant={status === "ACTIVE" ? "success" : "secondary"}>
          {status}
        </Badge>
      );
    },
  },
  {
    id: "actions",
    header: "Actions",
    cell: ({ row }) => {
      const customer = row.original;

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button
              variant="ghost"
              size="sm"
              className="h-8 w-8 p-0"
              onClick={(e) => e.stopPropagation()}
            >
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            {onView && (
              <DropdownMenuItem onClick={() => onView(customer)}>
                <Eye className="mr-2 h-4 w-4" />
                View Details
              </DropdownMenuItem>
            )}
            {onManageCredit && (
              <DropdownMenuItem onClick={() => onManageCredit(customer)}>
                <CreditCard className="mr-2 h-4 w-4" />
                Manage Credit
              </DropdownMenuItem>
            )}
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    enableSorting: false,
    enableHiding: false,
  },
];
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\customers\components\CustomerColumns.jsx"   & echo.. 
/**
 * Customer Columns Definition
 * Defines the columns for the customers DataTable
 */

import { Checkbox } from "@/components/ui/checkbox";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import {
  MoreHorizontal,
  Eye,
  Edit,
  Trash2,
  UserCheck,
  UserX,
} from "lucide-react";
import { formatCurrency } from "@/utils/formatters";

/**
 * Get column definitions for customers table
 */
export const getCustomerColumns = ({
  onView,
  onEdit,
  onDelete,
  onActivate,
  onDeactivate,
} = {}) => [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() ||
          (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
        className="translate-y-[2px]"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
        className="translate-y-[2px]"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "customerCode",
    header: "Code",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => (
      <span className="font-mono text-sm">{row.getValue("customerCode")}</span>
    ),
  },
  {
    accessorKey: "customerName",
    header: "Customer Name",
    cell: ({ row }) => (
      <div>
        <div className="font-medium text-sm">
          {row.getValue("customerName")}
        </div>
        {row.original.email && (
          <div className="text-xs text-muted-foreground truncate max-w-[150px] sm:max-w-none">
            {row.original.email}
          </div>
        )}
      </div>
    ),
  },
  {
    accessorKey: "phoneNumber",
    header: "Phone",
    meta: { className: "hidden sm:table-cell" },
    cell: ({ row }) => row.getValue("phoneNumber") || "-",
  },
  {
    accessorKey: "city",
    header: "City",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => row.getValue("city") || "-",
  },
  {
    accessorKey: "creditLimit",
    header: "Credit Limit",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => formatCurrency(row.getValue("creditLimit") || 0),
  },
  {
    accessorKey: "currentBalance",
    header: "Outstanding",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => {
      const balance = row.getValue("currentBalance") || 0;
      return (
        <span className={balance > 0 ? "text-red-600 font-medium" : ""}>
          {formatCurrency(balance)}
        </span>
      );
    },
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => {
      const status = row.getValue("status");
      const isActive = status === "ACTIVE";
      return (
        <Badge variant={isActive ? "default" : "secondary"}>
          {isActive ? "Active" : "Inactive"}
        </Badge>
      );
    },
  },
  {
    id: "actions",
    header: "Actions",
    cell: ({ row }) => {
      const customer = row.original;

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuItem onClick={() => onView?.(customer)}>
              <Eye className="mr-2 h-4 w-4" />
              View
            </DropdownMenuItem>
            <DropdownMenuItem onClick={() => onEdit?.(customer)}>
              <Edit className="mr-2 h-4 w-4" />
              Edit
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            {customer.isActive ? (
              <DropdownMenuItem onClick={() => onDeactivate?.(customer)}>
                <UserX className="mr-2 h-4 w-4" />
                Deactivate
              </DropdownMenuItem>
            ) : (
              <DropdownMenuItem onClick={() => onActivate?.(customer)}>
                <UserCheck className="mr-2 h-4 w-4" />
                Activate
              </DropdownMenuItem>
            )}
            <DropdownMenuSeparator />
            <DropdownMenuItem
              onClick={() => onDelete?.(customer)}
              className="text-destructive focus:text-destructive"
            >
              <Trash2 className="mr-2 h-4 w-4" />
              Delete
            </DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    enableSorting: false,
    enableHiding: false,
  },
];

export default getCustomerColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\customers\components\CustomerForm.jsx"   & echo.. 
/**
 * Customer Form Component
 * Form for creating and editing customers
 */

import { useEffect } from "react";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Switch } from "@/components/ui/switch";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { ButtonSpinner } from "@/components/common";
import { GENDER, GENDER_LABELS } from "@/constants";

// Validation schema
const customerSchema = z.object({
  customerName: z.string().min(1, "Customer name is required").max(200),
  phoneNumber: z
    .string()
    .min(10, "Phone must be at least 10 digits")
    .max(15)
    .optional()
    .or(z.literal("")),
  email: z.string().email("Invalid email").optional().or(z.literal("")),
  gender: z.string().optional().nullable(),
  dateOfBirth: z.string().optional().nullable(),
  address: z.string().max(200).optional().nullable(),
  city: z.string().max(50).optional().nullable(),
  state: z.string().max(100).optional().nullable(),
  pincode: z.string().max(20).optional().nullable(),
  fax: z.string().max(50).optional().nullable(),
  description: z.string().max(500).optional().nullable(),
  medicalHistory: z.string().optional().nullable(),
  allergies: z.string().optional().nullable(),
  insuranceProvider: z.string().max(100).optional().nullable(),
  insurancePolicyNumber: z.string().max(100).optional().nullable(),
  creditLimit: z.coerce.number().min(0).optional().nullable(),
});

/**
 * CustomerForm component
 * @param {Object} props
 * @param {Object} props.customer - Customer to edit (null for create)
 * @param {Function} props.onSubmit - Submit handler
 * @param {Function} props.onCancel - Cancel handler
 * @param {boolean} props.isSubmitting - Loading state
 */
const CustomerForm = ({
  customer,
  onSubmit,
  onCancel,
  isSubmitting = false,
}) => {
  const isEditing = Boolean(customer);

  const form = useForm({
    resolver: zodResolver(customerSchema),
    defaultValues: {
      customerName: "",
      phoneNumber: "",
      email: "",
      gender: "",
      dateOfBirth: "",
      address: "",
      city: "",
      state: "",
      pincode: "",
      fax: "",
      description: "",
      medicalHistory: "",
      allergies: "",
      insuranceProvider: "",
      insurancePolicyNumber: "",
      creditLimit: 0,
    },
  });

  // Populate form when editing
  useEffect(() => {
    if (customer) {
      form.reset({
        customerName: customer.customerName || "",
        phoneNumber: customer.phoneNumber || "",
        email: customer.email || "",
        gender: customer.gender || "",
        dateOfBirth: customer.dateOfBirth?.split("T")[0] || "",
        address: customer.address || "",
        city: customer.city || "",
        state: customer.state || "",
        pincode: customer.pincode || "",
        fax: customer.fax || "",
        description: customer.description || "",
        medicalHistory: customer.medicalHistory || "",
        allergies: customer.allergies || "",
        insuranceProvider: customer.insuranceProvider || "",
        insurancePolicyNumber: customer.insurancePolicyNumber || "",
        creditLimit: customer.creditLimit || 0,
      });
    }
  }, [customer, form]);

  const handleSubmit = (data) => {
    onSubmit({
      ...data,
      gender: data.gender || null,
      dateOfBirth: data.dateOfBirth || null,
    });
  };

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-6">
        {/* Personal Information */}
        <Card>
          <CardHeader>
            <CardTitle>Personal Information</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="customerName"
              render={({ field }) => (
                <FormItem className="md:col-span-2">
                  <FormLabel>Customer Name *</FormLabel>
                  <FormControl>
                    <Input placeholder="John Doe" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="email"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Email</FormLabel>
                  <FormControl>
                    <Input
                      type="email"
                      placeholder="john@example.com"
                      {...field}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="phoneNumber"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Phone</FormLabel>
                  <FormControl>
                    <Input placeholder="+94 77 123 4567" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="gender"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Gender</FormLabel>
                  <Select
                    onValueChange={field.onChange}
                    value={field.value || ""}
                  >
                    <FormControl>
                      <SelectTrigger>
                        <SelectValue placeholder="Select gender" />
                      </SelectTrigger>
                    </FormControl>
                    <SelectContent>
                      {Object.entries(GENDER_LABELS).map(([value, label]) => (
                        <SelectItem key={value} value={value}>
                          {label}
                        </SelectItem>
                      ))}
                    </SelectContent>
                  </Select>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="dateOfBirth"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Date of Birth</FormLabel>
                  <FormControl>
                    <Input type="date" {...field} value={field.value || ""} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="fax"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Fax</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Fax number"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Address & Contact */}
        <Card>
          <CardHeader>
            <CardTitle>Address</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="address"
              render={({ field }) => (
                <FormItem className="md:col-span-2">
                  <FormLabel>Street Address</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="123 Main Street"
                      className="resize-none"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="city"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>City</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Colombo"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="state"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>State</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Western"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="pincode"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Pincode</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="10100"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Additional Information */}
        <Card>
          <CardHeader>
            <CardTitle>Additional Information</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="grid gap-4 md:grid-cols-2">
              <FormField
                control={form.control}
                name="creditLimit"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Credit Limit</FormLabel>
                    <FormControl>
                      <Input type="number" min="0" step="0.01" {...field} />
                    </FormControl>
                    <FormDescription>
                      Maximum credit allowed for this customer
                    </FormDescription>
                    <FormMessage />
                  </FormItem>
                )}
              />
            </div>

            <FormField
              control={form.control}
              name="description"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Description</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="Any additional notes about this customer..."
                      className="resize-none"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="medicalHistory"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Medical History</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="Medical history..."
                      className="resize-none"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="allergies"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Allergies</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="Known allergies..."
                      className="resize-none"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <div className="grid gap-4 md:grid-cols-2">
              <FormField
                control={form.control}
                name="insuranceProvider"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Insurance Provider</FormLabel>
                    <FormControl>
                      <Input
                        placeholder="Insurance company"
                        {...field}
                        value={field.value || ""}
                      />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />

              <FormField
                control={form.control}
                name="insurancePolicyNumber"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Policy Number</FormLabel>
                    <FormControl>
                      <Input
                        placeholder="Policy number"
                        {...field}
                        value={field.value || ""}
                      />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />
            </div>
          </CardContent>
        </Card>

        {/* Actions */}
        <div className="flex justify-end gap-4">
          <Button type="button" variant="outline" onClick={onCancel}>
            Cancel
          </Button>
          <Button type="submit" disabled={isSubmitting}>
            {isSubmitting && <ButtonSpinner />}
            {isEditing ? "Update Customer" : "Create Customer"}
          </Button>
        </div>
      </form>
    </Form>
  );
};

export default CustomerForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\DashboardRouter.jsx"   & echo.. 
/**
 * DashboardRouter Component
 * Automatically routes users to their role-specific dashboard
 */

import { useAuth } from "@/hooks";
import { ROLES } from "@/constants";
import {
  AdminDashboard,
  CashierDashboard,
  PharmacistDashboard,
  AccountantDashboard,
  InventoryManagerDashboard,
} from "./dashboards";

/**
 * Maps user roles to their specific dashboard component
 */
const DASHBOARD_BY_ROLE = {
  [ROLES.SUPER_ADMIN]: AdminDashboard,
  [ROLES.ADMIN]: AdminDashboard,
  [ROLES.BRANCH_MANAGER]: AdminDashboard,
  [ROLES.PHARMACIST]: PharmacistDashboard,
  [ROLES.CASHIER]: CashierDashboard,
  [ROLES.INVENTORY_MANAGER]: InventoryManagerDashboard,
  [ROLES.ACCOUNTANT]: AccountantDashboard,
};

/**
 * DashboardRouter - Renders the appropriate dashboard based on user role
 */
const DashboardRouter = () => {
  const { user } = useAuth();
  const userRole = user?.role;

  // Get the dashboard component for the user's role
  const DashboardComponent = DASHBOARD_BY_ROLE[userRole] || AdminDashboard;

  return <DashboardComponent />;
};

export default DashboardRouter;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\InventoryAlertsWidget.jsx"   & echo.. 
/**
 * InventoryAlertsWidget Component
 * Displays low stock and expiring products alerts
 */

import { Link } from "react-router-dom";
import { AlertTriangle, Clock, Package, ArrowRight } from "lucide-react";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { ScrollArea } from "@/components/ui/scroll-area";
import { Skeleton } from "@/components/ui/skeleton";
import { ROUTES } from "@/config";
import { formatExpiryDate } from "@/utils/formatters";

/**
 * Single alert item
 */
const AlertItem = ({ item, type }) => {
  const isLowStock = type === "low-stock";
  const isExpiring = type === "expiring";

  return (
    <div className="flex items-center gap-3 py-2">
      <div
        className={`shrink-0 rounded-full p-2 ${
          isLowStock ? "bg-amber-100" : "bg-red-100"
        }`}
      >
        {isLowStock ? (
          <Package className="h-4 w-4 text-amber-600" />
        ) : (
          <Clock className="h-4 w-4 text-red-600" />
        )}
      </div>
      <div className="flex-1 min-w-0">
        <p className="text-sm font-medium truncate">{item.productName}</p>
        <p className="text-xs text-muted-foreground">
          {isLowStock
            ? `Stock: ${item.currentStock} (Min: ${item.reorderLevel})`
            : `Expires: ${formatExpiryDate(item.expiryDate).formatted}`}
        </p>
      </div>
      {isLowStock && item.currentStock === 0 && (
        <Badge variant="destructive" className="shrink-0">
          Out of Stock
        </Badge>
      )}
      {isExpiring && (
        <Badge
          variant="outline"
          className={`shrink-0 ${
            formatExpiryDate(item.expiryDate).status === "expired"
              ? "border-red-500 text-red-500"
              : "border-amber-500 text-amber-500"
          }`}
        >
          {formatExpiryDate(item.expiryDate).status === "expired"
            ? "Expired"
            : "Expiring"}
        </Badge>
      )}
    </div>
  );
};

/**
 * Loading skeleton
 */
const AlertsSkeleton = () => (
  <div className="space-y-3">
    {[1, 2, 3, 4].map((i) => (
      <div key={i} className="flex items-center gap-3 py-2">
        <Skeleton className="h-8 w-8 rounded-full" />
        <div className="flex-1 space-y-1">
          <Skeleton className="h-4 w-3/4" />
          <Skeleton className="h-3 w-1/2" />
        </div>
      </div>
    ))}
  </div>
);

/**
 * InventoryAlertsWidget component
 */
const InventoryAlertsWidget = ({
  lowStockItems = [],
  expiringItems = [],
  isLoading = false,
}) => {
  const hasLowStock = lowStockItems.length > 0;
  const hasExpiring = expiringItems.length > 0;

  return (
    <div className="grid gap-4 md:grid-cols-2">
      {/* Low Stock Card */}
      <Card>
        <CardHeader className="pb-3">
          <div className="flex items-center justify-between">
            <div>
              <CardTitle className="text-base flex items-center gap-2">
                <AlertTriangle className="h-4 w-4 text-amber-500" />
                Low Stock Alerts
              </CardTitle>
              <CardDescription>Products below reorder level</CardDescription>
            </div>
            {hasLowStock && (
              <Badge variant="secondary">{lowStockItems.length}</Badge>
            )}
          </div>
        </CardHeader>
        <CardContent>
          {isLoading ? (
            <AlertsSkeleton />
          ) : hasLowStock ? (
            <>
              <ScrollArea className="h-[200px]">
                <div className="divide-y">
                  {lowStockItems.slice(0, 5).map((item, index) => (
                    <AlertItem
                      key={item.id || index}
                      item={item}
                      type="low-stock"
                    />
                  ))}
                </div>
              </ScrollArea>
              <Button variant="link" className="w-full mt-2" asChild>
                <Link to={ROUTES.PRODUCTS.LOW_STOCK}>
                  View all low stock items
                  <ArrowRight className="h-4 w-4 ml-1" />
                </Link>
              </Button>
            </>
          ) : (
            <div className="flex flex-col items-center justify-center py-8 text-center text-muted-foreground">
              <Package className="h-10 w-10 mb-2 opacity-50" />
              <p className="text-sm">All products are well stocked</p>
            </div>
          )}
        </CardContent>
      </Card>

      {/* Expiring Products Card */}
      <Card>
        <CardHeader className="pb-3">
          <div className="flex items-center justify-between">
            <div>
              <CardTitle className="text-base flex items-center gap-2">
                <Clock className="h-4 w-4 text-red-500" />
                Expiring Soon
              </CardTitle>
              <CardDescription>
                Products expiring within 30 days
              </CardDescription>
            </div>
            {hasExpiring && (
              <Badge variant="secondary">{expiringItems.length}</Badge>
            )}
          </div>
        </CardHeader>
        <CardContent>
          {isLoading ? (
            <AlertsSkeleton />
          ) : hasExpiring ? (
            <>
              <ScrollArea className="h-[200px]">
                <div className="divide-y">
                  {expiringItems.slice(0, 5).map((item, index) => (
                    <AlertItem
                      key={item.id || index}
                      item={item}
                      type="expiring"
                    />
                  ))}
                </div>
              </ScrollArea>
              <Button variant="link" className="w-full mt-2" asChild>
                <Link to={ROUTES.PRODUCTS.EXPIRING}>
                  View all expiring products
                  <ArrowRight className="h-4 w-4 ml-1" />
                </Link>
              </Button>
            </>
          ) : (
            <div className="flex flex-col items-center justify-center py-8 text-center text-muted-foreground">
              <Clock className="h-10 w-10 mb-2 opacity-50" />
              <p className="text-sm">No products expiring soon</p>
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
};

export default InventoryAlertsWidget;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\QuickActionsWidget.jsx"   & echo.. 
/**
 * QuickActionsWidget Component
 * Quick access buttons for common actions
 * Supports role-specific variants
 */

import { Link } from "react-router-dom";
import {
  ShoppingCart,
  Plus,
  Package,
  Users,
  FileText,
  ArrowLeftRight,
  ClipboardList,
  Truck,
  DollarSign,
  Settings,
  Building2,
  UserCog,
  PieChart,
  Receipt,
  Wallet,
} from "lucide-react";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { usePermissions } from "@/hooks";
import { ROUTES } from "@/config";

/**
 * Action button configuration
 */
const QUICK_ACTIONS = [
  {
    title: "New Sale",
    description: "Start a POS transaction",
    icon: ShoppingCart,
    href: ROUTES.POS.NEW_SALE,
    feature: "pos",
    color: "bg-emerald-100 text-emerald-600",
  },
  {
    title: "Add Product",
    description: "Add new inventory item",
    icon: Plus,
    href: ROUTES.PRODUCTS.NEW,
    feature: "products",
    action: "create",
    color: "bg-blue-100 text-blue-600",
  },
  {
    title: "Stock Transfer",
    description: "Transfer between branches",
    icon: ArrowLeftRight,
    href: ROUTES.INVENTORY.TRANSFERS,
    feature: "inventory",
    color: "bg-purple-100 text-purple-600",
  },
  {
    title: "Purchase Order",
    description: "Create new PO",
    icon: ClipboardList,
    href: ROUTES.PURCHASE_ORDERS.NEW,
    feature: "purchaseOrders",
    action: "create",
    color: "bg-amber-100 text-amber-600",
  },
  {
    title: "Add Customer",
    description: "Register new customer",
    icon: Users,
    href: ROUTES.CUSTOMERS.NEW,
    feature: "customers",
    action: "create",
    color: "bg-cyan-100 text-cyan-600",
  },
  {
    title: "Add Supplier",
    description: "Register new supplier",
    icon: Truck,
    href: ROUTES.SUPPLIERS.NEW,
    feature: "suppliers",
    action: "create",
    color: "bg-orange-100 text-orange-600",
  },
  {
    title: "View Stock",
    description: "Check inventory levels",
    icon: Package,
    href: ROUTES.INVENTORY.STOCK,
    feature: "inventory",
    color: "bg-gray-100 text-gray-600",
  },
  {
    title: "Sales Report",
    description: "View sales analytics",
    icon: FileText,
    href: ROUTES.REPORTS.SALES,
    feature: "reports",
    color: "bg-pink-100 text-pink-600",
  },
];

/**
 * Admin-specific quick actions
 */
const ADMIN_ACTIONS = [
  {
    title: "New Sale",
    description: "Start POS transaction",
    icon: ShoppingCart,
    href: ROUTES.POS.NEW_SALE,
    feature: "pos",
    color: "bg-emerald-100 text-emerald-600",
  },
  {
    title: "Add Product",
    description: "Add new inventory",
    icon: Plus,
    href: ROUTES.PRODUCTS.NEW,
    feature: "products",
    action: "create",
    color: "bg-blue-100 text-blue-600",
  },
  {
    title: "Purchase Order",
    description: "Create new PO",
    icon: ClipboardList,
    href: ROUTES.PURCHASE_ORDERS.NEW,
    feature: "purchaseOrders",
    action: "create",
    color: "bg-amber-100 text-amber-600",
  },
  {
    title: "View Reports",
    description: "Analytics dashboard",
    icon: PieChart,
    href: ROUTES.REPORTS.ROOT,
    feature: "reports",
    color: "bg-purple-100 text-purple-600",
  },
  {
    title: "Manage Users",
    description: "User management",
    icon: UserCog,
    href: ROUTES.USERS.LIST,
    feature: "users",
    color: "bg-cyan-100 text-cyan-600",
  },
  {
    title: "Branches",
    description: "Branch management",
    icon: Building2,
    href: ROUTES.BRANCHES.LIST,
    feature: "branches",
    color: "bg-indigo-100 text-indigo-600",
  },
  {
    title: "Finance",
    description: "Financial overview",
    icon: Wallet,
    href: ROUTES.FINANCE.ROOT,
    feature: "finance",
    color: "bg-green-100 text-green-600",
  },
  {
    title: "Settings",
    description: "System settings",
    icon: Settings,
    href: ROUTES.SETTINGS.ROOT,
    feature: "settings",
    color: "bg-gray-100 text-gray-600",
  },
];

/**
 * Get actions based on variant
 */
const getActionsByVariant = (variant) => {
  switch (variant) {
    case "admin":
      return ADMIN_ACTIONS;
    default:
      return QUICK_ACTIONS;
  }
};

/**
 * QuickActionsWidget component
 * @param {Object} props
 * @param {string} props.variant - "default" | "admin"
 */
const QuickActionsWidget = ({ variant = "default" }) => {
  const { hasPermission } = usePermissions();

  const actions = getActionsByVariant(variant);

  // Filter actions based on permissions
  const availableActions = actions.filter((action) => {
    if (!action.feature) return true;
    return hasPermission(action.feature, action.action || "view");
  });

  return (
    <Card>
      <CardHeader className="pb-3">
        <CardTitle className="text-base">Quick Actions</CardTitle>
        <CardDescription>Common tasks and shortcuts</CardDescription>
      </CardHeader>
      <CardContent>
        <div className="grid grid-cols-2 sm:grid-cols-4 gap-3">
          {availableActions.slice(0, 8).map((action) => {
            const Icon = action.icon;
            return (
              <Button
                key={action.href}
                variant="outline"
                className="h-auto flex-col gap-2 p-4 hover:border-primary/50"
                asChild
              >
                <Link to={action.href}>
                  <div className={`rounded-lg p-2 ${action.color}`}>
                    <Icon className="h-5 w-5" />
                  </div>
                  <div className="text-center">
                    <p className="text-sm font-medium">{action.title}</p>
                    <p className="text-xs text-muted-foreground hidden sm:block">
                      {action.description}
                    </p>
                  </div>
                </Link>
              </Button>
            );
          })}
        </div>
      </CardContent>
    </Card>
  );
};

export default QuickActionsWidget;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\RecentSalesWidget.jsx"   & echo.. 
/**
 * RecentSalesWidget Component
 * Displays recent sales transactions
 */

import { Link } from "react-router-dom";
import { ShoppingCart, ArrowRight, User, Clock } from "lucide-react";
import { formatDistanceToNow } from "date-fns";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { ScrollArea } from "@/components/ui/scroll-area";
import { Skeleton } from "@/components/ui/skeleton";
import { Avatar, AvatarFallback } from "@/components/ui/avatar";
import { ROUTES } from "@/config";
import { formatCurrency } from "@/utils/formatters";
import { StatusBadge } from "@/components/common";

/**
 * Single sale item
 */
const SaleItem = ({ sale }) => {
  return (
    <div className="flex items-center gap-3 py-3">
      <Avatar className="h-9 w-9">
        <AvatarFallback className="bg-primary/10 text-primary text-xs">
          {sale.customerName?.slice(0, 2).toUpperCase() || "WK"}
        </AvatarFallback>
      </Avatar>
      <div className="flex-1 min-w-0">
        <div className="flex items-center gap-2">
          <p className="text-sm font-medium truncate">
            {sale.customerName || "Walk-in Customer"}
          </p>
          <StatusBadge status={sale.status} size="sm" />
        </div>
        <div className="flex items-center gap-2 text-xs text-muted-foreground">
          <span>#{sale.invoiceNumber}</span>
          <span></span>
          <span>{sale.itemCount} items</span>
          <span></span>
          <span>
            {formatDistanceToNow(new Date(sale.createdAt), { addSuffix: true })}
          </span>
        </div>
      </div>
      <div className="text-right">
        <p className="text-sm font-semibold">{formatCurrency(sale.total)}</p>
        <p className="text-xs text-muted-foreground capitalize">
          {sale.paymentMethod?.toLowerCase().replace("_", " ")}
        </p>
      </div>
    </div>
  );
};

/**
 * Loading skeleton
 */
const SalesSkeleton = () => (
  <div className="space-y-3">
    {[1, 2, 3, 4, 5].map((i) => (
      <div key={i} className="flex items-center gap-3 py-3">
        <Skeleton className="h-9 w-9 rounded-full" />
        <div className="flex-1 space-y-1">
          <Skeleton className="h-4 w-3/4" />
          <Skeleton className="h-3 w-1/2" />
        </div>
        <div className="space-y-1 text-right">
          <Skeleton className="h-4 w-20 ml-auto" />
          <Skeleton className="h-3 w-12 ml-auto" />
        </div>
      </div>
    ))}
  </div>
);

/**
 * RecentSalesWidget component
 */
const RecentSalesWidget = ({ sales = [], isLoading = false }) => {
  const hasSales = sales.length > 0;

  return (
    <Card>
      <CardHeader className="pb-3">
        <div className="flex items-center justify-between">
          <div>
            <CardTitle className="text-base flex items-center gap-2">
              <ShoppingCart className="h-4 w-4" />
              Recent Sales
            </CardTitle>
            <CardDescription>
              Latest transactions at your branch
            </CardDescription>
          </div>
          <Button variant="outline" size="sm" asChild>
            <Link to={ROUTES.POS.HISTORY}>
              View All
              <ArrowRight className="h-4 w-4 ml-1" />
            </Link>
          </Button>
        </div>
      </CardHeader>
      <CardContent>
        {isLoading ? (
          <SalesSkeleton />
        ) : hasSales ? (
          <ScrollArea className="h-[350px]">
            <div className="divide-y">
              {sales.map((sale) => (
                <SaleItem key={sale.id} sale={sale} />
              ))}
            </div>
          </ScrollArea>
        ) : (
          <div className="flex flex-col items-center justify-center py-12 text-center text-muted-foreground">
            <ShoppingCart className="h-10 w-10 mb-2 opacity-50" />
            <p className="text-sm">No sales recorded today</p>
            <Button variant="link" asChild className="mt-2">
              <Link to={ROUTES.POS.NEW_SALE}>Start a new sale</Link>
            </Button>
          </div>
        )}
      </CardContent>
    </Card>
  );
};

export default RecentSalesWidget;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\SalesOverviewWidget.jsx"   & echo.. 
/**
 * SalesOverviewWidget Component
 * Displays sales statistics card
 */

import { DollarSign, TrendingUp, ShoppingCart, CreditCard } from "lucide-react";
import { StatCard } from "@/components/common";
import { formatCurrency } from "@/utils/formatters";

/**
 * Sales overview widget with multiple stat cards
 */
const SalesOverviewWidget = ({ data, isLoading }) => {
  const todaySummary = data?.todaySummary || {};
  const monthlySummary = data?.monthlySummary || {};

  return (
    <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
      <StatCard
        title="Today's Revenue"
        value={formatCurrency(todaySummary.totalSales || 0)}
        icon={DollarSign}
        iconColor="text-emerald-600"
        iconBgColor="bg-emerald-100"
        isLoading={isLoading}
      />
      <StatCard
        title="Today's Sales"
        value={todaySummary.salesCount || 0}
        icon={ShoppingCart}
        iconColor="text-blue-600"
        iconBgColor="bg-blue-100"
        isLoading={isLoading}
      />
      <StatCard
        title="Monthly Revenue"
        value={formatCurrency(monthlySummary.totalSales || 0)}
        icon={TrendingUp}
        iconColor="text-purple-600"
        iconBgColor="bg-purple-100"
        isLoading={isLoading}
      />
      <StatCard
        title="Monthly Profit"
        value={formatCurrency(monthlySummary.totalProfit || 0)}
        icon={CreditCard}
        iconColor="text-amber-600"
        iconBgColor="bg-amber-100"
        isLoading={isLoading}
      />
    </div>
  );
};

export default SalesOverviewWidget;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\dashboards\AccountantDashboard.jsx"   & echo.. 
/**
 * AccountantDashboard Component
 * Dashboard for ACCOUNTANT role
 * Focus on financial metrics, reports, and approvals
 */

import { Link } from "react-router-dom";
import {
  DollarSign,
  TrendingUp,
  TrendingDown,
  FileText,
  CreditCard,
  Wallet,
  PieChart,
  ArrowRight,
  CheckCircle2,
  Clock,
} from "lucide-react";
import { PageHeader, StatCard } from "@/components/common";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Progress } from "@/components/ui/progress";
import { useAuth } from "@/hooks";
import { useDashboardStats } from "@/features/dashboard";
import { ROUTES } from "@/config";
import { formatCurrency } from "@/utils/formatters";

/**
 * Accountant Dashboard - Finance focused
 */
const AccountantDashboard = () => {
  const { displayName } = useAuth();
  const { data: stats, isLoading: statsLoading } = useDashboardStats();

  const getGreeting = () => {
    const hour = new Date().getHours();
    if (hour < 12) return "Good morning";
    if (hour < 18) return "Good afternoon";
    return "Good evening";
  };

  // Calculate financial metrics
  const totalRevenue = stats?.monthlyRevenue || 0;
  const totalExpenses = stats?.monthlyExpenses || 0;
  const grossProfit = totalRevenue - totalExpenses;
  const profitMargin = totalRevenue > 0 ? (grossProfit / totalRevenue) * 100 : 0;

  return (
    <div className="space-y-6">
      {/* Page Header */}
      <PageHeader
        title={`${getGreeting()}, ${displayName || "Accountant"}!`}
        description="Financial overview and pending approvals."
      />

      {/* Financial Summary Cards */}
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <StatCard
          title="Monthly Revenue"
          value={formatCurrency(totalRevenue)}
          icon={<DollarSign className="h-4 w-4" />}
          trend={stats?.revenueGrowth}
          loading={statsLoading}
        />
        <StatCard
          title="Monthly Expenses"
          value={formatCurrency(totalExpenses)}
          icon={<CreditCard className="h-4 w-4" />}
          loading={statsLoading}
        />
        <StatCard
          title="Gross Profit"
          value={formatCurrency(grossProfit)}
          variant={grossProfit >= 0 ? "success" : "destructive"}
          icon={grossProfit >= 0 ? <TrendingUp className="h-4 w-4" /> : <TrendingDown className="h-4 w-4" />}
          loading={statsLoading}
        />
        <StatCard
          title="Profit Margin"
          value={`${profitMargin.toFixed(1)}%`}
          icon={<PieChart className="h-4 w-4" />}
          loading={statsLoading}
        />
      </div>

      {/* Quick Actions for Accountant */}
      <div className="grid gap-4 md:grid-cols-4">
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.FINANCE.ROOT} className="flex flex-col items-center">
            <Wallet className="h-6 w-6 mb-2" />
            <span className="font-medium">Finance</span>
            <span className="text-xs text-muted-foreground">Manage finances</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.REPORTS.FINANCIAL} className="flex flex-col items-center">
            <FileText className="h-6 w-6 mb-2" />
            <span className="font-medium">Financial Reports</span>
            <span className="text-xs text-muted-foreground">P&L, Balance Sheet</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.REPORTS.SALES} className="flex flex-col items-center">
            <PieChart className="h-6 w-6 mb-2" />
            <span className="font-medium">Sales Reports</span>
            <span className="text-xs text-muted-foreground">Revenue analytics</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.PURCHASE_ORDERS.LIST} className="flex flex-col items-center">
            <CheckCircle2 className="h-6 w-6 mb-2" />
            <span className="font-medium">Approvals</span>
            <span className="text-xs text-muted-foreground">PO & GRN approvals</span>
          </Link>
        </Button>
      </div>

      {/* Main Content Grid */}
      <div className="grid gap-6 lg:grid-cols-2">
        {/* Revenue vs Expenses Card */}
        <Card>
          <CardHeader>
            <CardTitle>Revenue vs Expenses</CardTitle>
            <CardDescription>This month's financial performance</CardDescription>
          </CardHeader>
          <CardContent className="space-y-6">
            <div className="space-y-2">
              <div className="flex justify-between text-sm">
                <span>Revenue</span>
                <span className="font-medium">{formatCurrency(totalRevenue)}</span>
              </div>
              <Progress value={100} className="h-2 bg-emerald-100" />
            </div>
            <div className="space-y-2">
              <div className="flex justify-between text-sm">
                <span>Expenses</span>
                <span className="font-medium">{formatCurrency(totalExpenses)}</span>
              </div>
              <Progress 
                value={totalRevenue > 0 ? (totalExpenses / totalRevenue) * 100 : 0} 
                className="h-2"
              />
            </div>
            <div className="pt-4 border-t">
              <div className="flex justify-between">
                <span className="font-medium">Net Profit</span>
                <span className={`font-bold ${grossProfit >= 0 ? 'text-emerald-600' : 'text-red-600'}`}>
                  {formatCurrency(grossProfit)}
                </span>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Pending Approvals Card */}
        <Card>
          <CardHeader className="flex flex-row items-center justify-between">
            <div>
              <CardTitle className="flex items-center gap-2">
                <Clock className="h-5 w-5 text-amber-500" />
                Pending Approvals
              </CardTitle>
              <CardDescription>Items requiring your attention</CardDescription>
            </div>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {/* Purchase Orders */}
              <div className="flex items-center justify-between p-3 rounded-lg bg-muted/50">
                <div className="flex items-center gap-3">
                  <div className="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center">
                    <FileText className="h-5 w-5 text-blue-600" />
                  </div>
                  <div>
                    <p className="font-medium">Purchase Orders</p>
                    <p className="text-sm text-muted-foreground">Awaiting approval</p>
                  </div>
                </div>
                <div className="flex items-center gap-2">
                  <span className="text-2xl font-bold">{stats?.pendingPOs || 0}</span>
                  <Button asChild variant="ghost" size="sm">
                    <Link to={ROUTES.PURCHASE_ORDERS.LIST}>
                      <ArrowRight className="h-4 w-4" />
                    </Link>
                  </Button>
                </div>
              </div>

              {/* GRNs */}
              <div className="flex items-center justify-between p-3 rounded-lg bg-muted/50">
                <div className="flex items-center gap-3">
                  <div className="h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center">
                    <CheckCircle2 className="h-5 w-5 text-emerald-600" />
                  </div>
                  <div>
                    <p className="font-medium">Goods Received Notes</p>
                    <p className="text-sm text-muted-foreground">Awaiting verification</p>
                  </div>
                </div>
                <div className="flex items-center gap-2">
                  <span className="text-2xl font-bold">{stats?.pendingGRNs || 0}</span>
                  <Button asChild variant="ghost" size="sm">
                    <Link to={ROUTES.GRN.LIST}>
                      <ArrowRight className="h-4 w-4" />
                    </Link>
                  </Button>
                </div>
              </div>

              {/* Credit Notes */}
              <div className="flex items-center justify-between p-3 rounded-lg bg-muted/50">
                <div className="flex items-center gap-3">
                  <div className="h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center">
                    <CreditCard className="h-5 w-5 text-purple-600" />
                  </div>
                  <div>
                    <p className="font-medium">Credit Notes</p>
                    <p className="text-sm text-muted-foreground">Pending review</p>
                  </div>
                </div>
                <div className="flex items-center gap-2">
                  <span className="text-2xl font-bold">{stats?.pendingCredits || 0}</span>
                  <Button asChild variant="ghost" size="sm">
                    <Link to={ROUTES.FINANCE.ROOT}>
                      <ArrowRight className="h-4 w-4" />
                    </Link>
                  </Button>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Reports Quick Access */}
      <Card>
        <CardHeader>
          <CardTitle>Quick Reports</CardTitle>
          <CardDescription>Access commonly used financial reports</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="grid gap-4 md:grid-cols-3">
            <Button asChild variant="outline" className="justify-start">
              <Link to={ROUTES.REPORTS.SALES}>
                <FileText className="mr-2 h-4 w-4" />
                Daily Sales Summary
              </Link>
            </Button>
            <Button asChild variant="outline" className="justify-start">
              <Link to={ROUTES.REPORTS.INVENTORY}>
                <FileText className="mr-2 h-4 w-4" />
                Stock Valuation Report
              </Link>
            </Button>
            <Button asChild variant="outline" className="justify-start">
              <Link to={ROUTES.REPORTS.FINANCIAL}>
                <FileText className="mr-2 h-4 w-4" />
                Monthly P&L Statement
              </Link>
            </Button>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

export default AccountantDashboard;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\dashboards\AdminDashboard.jsx"   & echo.. 
/**
 * AdminDashboard Component
 * Dashboard for SUPER_ADMIN, ADMIN, and BRANCH_MANAGER roles
 * Full overview of business operations
 */

import { PageHeader } from "@/components/common";
import {
  SalesOverviewWidget,
  InventoryAlertsWidget,
  RecentSalesWidget,
  QuickActionsWidget,
} from "@/features/dashboard";
import {
  useDashboardStats,
  useRecentSales,
  useLowStockAlerts,
  useExpiringProducts,
} from "@/features/dashboard";
import { useAuth, usePermissions } from "@/hooks";

/**
 * Admin Dashboard - Full business overview
 */
const AdminDashboard = () => {
  const { displayName } = useAuth();
  const { isOwnerOrAbove } = usePermissions();

  // Fetch dashboard data
  const { data: stats, isLoading: statsLoading } = useDashboardStats();
  const { data: recentSales, isLoading: salesLoading } = useRecentSales(10);
  const { data: lowStock, isLoading: lowStockLoading } = useLowStockAlerts(10);
  const { data: expiring, isLoading: expiringLoading } = useExpiringProducts(30, 10);

  const getGreeting = () => {
    const hour = new Date().getHours();
    if (hour < 12) return "Good morning";
    if (hour < 18) return "Good afternoon";
    return "Good evening";
  };

  return (
    <div className="space-y-6">
      {/* Page Header */}
      <PageHeader
        title={`${getGreeting()}, ${displayName || "Admin"}!`}
        description="Here's your business overview for today."
      />

      {/* Sales Overview */}
      <SalesOverviewWidget data={stats} isLoading={statsLoading} />

      {/* Quick Actions - Admin specific */}
      <QuickActionsWidget variant="admin" />

      {/* Main Content Grid */}
      <div className="grid gap-6 lg:grid-cols-3">
        {/* Recent Sales - 2 columns */}
        <div className="lg:col-span-2">
          <RecentSalesWidget
            sales={recentSales?.content || []}
            isLoading={salesLoading}
          />
        </div>

        {/* Inventory Alerts - 1 column */}
        <div>
          <InventoryAlertsWidget
            lowStockItems={lowStock?.content || []}
            expiringItems={expiring?.content || []}
            isLoading={lowStockLoading || expiringLoading}
          />
        </div>
      </div>

      {/* Super Admin / Owner specific sections */}
      {isOwnerOrAbove && (
        <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {/* Placeholder for branch performance, staff stats, etc. */}
          <div className="rounded-lg border bg-card p-6">
            <h3 className="font-semibold mb-2">Branch Performance</h3>
            <p className="text-sm text-muted-foreground">
              Multi-branch analytics coming soon...
            </p>
          </div>
          <div className="rounded-lg border bg-card p-6">
            <h3 className="font-semibold mb-2">Staff Activity</h3>
            <p className="text-sm text-muted-foreground">
              Employee performance metrics coming soon...
            </p>
          </div>
          <div className="rounded-lg border bg-card p-6">
            <h3 className="font-semibold mb-2">System Health</h3>
            <p className="text-sm text-muted-foreground">
              System monitoring coming soon...
            </p>
          </div>
        </div>
      )}
    </div>
  );
};

export default AdminDashboard;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\dashboards\CashierDashboard.jsx"   & echo.. 
/**
 * CashierDashboard Component
 * Streamlined dashboard for CASHIER role
 * Focus on POS and daily sales metrics
 */

import { Link } from "react-router-dom";
import {
  ShoppingCart,
  DollarSign,
  Receipt,
  Clock,
  TrendingUp,
  ArrowRight,
} from "lucide-react";
import { PageHeader, StatCard } from "@/components/common";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { useAuth } from "@/hooks";
import { useDashboardStats, useRecentSales } from "@/features/dashboard";
import { ROUTES } from "@/config";
import { formatCurrency } from "@/utils/formatters";

/**
 * Cashier Dashboard - POS focused
 */
const CashierDashboard = () => {
  const { displayName } = useAuth();
  const { data: stats, isLoading: statsLoading } = useDashboardStats();
  const { data: recentSales, isLoading: salesLoading } = useRecentSales(5);

  const getGreeting = () => {
    const hour = new Date().getHours();
    if (hour < 12) return "Good morning";
    if (hour < 18) return "Good afternoon";
    return "Good evening";
  };

  return (
    <div className="space-y-6">
      {/* Page Header */}
      <PageHeader
        title={`${getGreeting()}, ${displayName || "Cashier"}!`}
        description="Ready to serve customers. Here's your sales summary."
      />

      {/* Quick Start POS Button */}
      <Card className="bg-gradient-to-r from-emerald-500 to-emerald-600 text-white border-0">
        <CardContent className="flex items-center justify-between p-6">
          <div>
            <h2 className="text-2xl font-bold mb-1">Start New Sale</h2>
            <p className="text-emerald-100">
              Open the Point of Sale terminal to begin a transaction
            </p>
          </div>
          <Button
            asChild
            size="lg"
            className="bg-white text-emerald-600 hover:bg-emerald-50"
          >
            <Link to={ROUTES.POS.NEW_SALE}>
              <ShoppingCart className="mr-2 h-5 w-5" />
              Open POS
            </Link>
          </Button>
        </CardContent>
      </Card>

      {/* Today's Stats */}
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <StatCard
          title="Today's Sales"
          value={formatCurrency(stats?.todaySales || 0)}
          icon={<DollarSign className="h-4 w-4" />}
          loading={statsLoading}
        />
        <StatCard
          title="Transactions"
          value={stats?.todayTransactions || 0}
          icon={<Receipt className="h-4 w-4" />}
          loading={statsLoading}
        />
        <StatCard
          title="Avg. Transaction"
          value={formatCurrency(
            stats?.todayTransactions
              ? (stats?.todaySales || 0) / stats.todayTransactions
              : 0
          )}
          icon={<TrendingUp className="h-4 w-4" />}
          loading={statsLoading}
        />
        <StatCard
          title="Held Sales"
          value={stats?.heldSales || 0}
          icon={<Clock className="h-4 w-4" />}
          loading={statsLoading}
        />
      </div>

      {/* Quick Actions */}
      <div className="grid gap-4 md:grid-cols-3">
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.POS.HELD_SALES} className="flex flex-col items-center">
            <Clock className="h-6 w-6 mb-2" />
            <span className="font-medium">Held Sales</span>
            <span className="text-xs text-muted-foreground">
              Resume pending transactions
            </span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.SALES.LIST} className="flex flex-col items-center">
            <Receipt className="h-6 w-6 mb-2" />
            <span className="font-medium">Sales History</span>
            <span className="text-xs text-muted-foreground">
              View past transactions
            </span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.CUSTOMERS.LIST} className="flex flex-col items-center">
            <ShoppingCart className="h-6 w-6 mb-2" />
            <span className="font-medium">Customers</span>
            <span className="text-xs text-muted-foreground">
              Search customer records
            </span>
          </Link>
        </Button>
      </div>

      {/* Recent Sales */}
      <Card>
        <CardHeader className="flex flex-row items-center justify-between">
          <div>
            <CardTitle>Recent Sales</CardTitle>
            <CardDescription>Your last few transactions</CardDescription>
          </div>
          <Button asChild variant="ghost" size="sm">
            <Link to={ROUTES.SALES.LIST}>
              View All
              <ArrowRight className="ml-2 h-4 w-4" />
            </Link>
          </Button>
        </CardHeader>
        <CardContent>
          {salesLoading ? (
            <div className="space-y-2">
              {[...Array(5)].map((_, i) => (
                <div key={i} className="h-12 bg-muted animate-pulse rounded" />
              ))}
            </div>
          ) : recentSales?.content?.length > 0 ? (
            <div className="space-y-2">
              {recentSales.content.map((sale) => (
                <div
                  key={sale.id}
                  className="flex items-center justify-between p-3 rounded-lg bg-muted/50"
                >
                  <div>
                    <p className="font-medium">#{sale.invoiceNumber}</p>
                    <p className="text-sm text-muted-foreground">
                      {sale.customerName || "Walk-in Customer"}
                    </p>
                  </div>
                  <div className="text-right">
                    <p className="font-medium">{formatCurrency(sale.total)}</p>
                    <p className="text-sm text-muted-foreground">
                      {new Date(sale.createdAt).toLocaleTimeString()}
                    </p>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-center text-muted-foreground py-8">
              No sales today yet. Start selling!
            </p>
          )}
        </CardContent>
      </Card>
    </div>
  );
};

export default CashierDashboard;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\dashboards\InventoryManagerDashboard.jsx"   & echo.. 
/**
 * InventoryManagerDashboard Component
 * Dashboard for INVENTORY_MANAGER role
 * Focus on stock management, procurement, and supplier relations
 */

import { Link } from "react-router-dom";
import {
  Package,
  Truck,
  AlertTriangle,
  Clock,
  ArrowLeftRight,
  ClipboardList,
  FileText,
  ArrowRight,
  TrendingDown,
  Calendar,
} from "lucide-react";
import { PageHeader, StatCard } from "@/components/common";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { useAuth } from "@/hooks";
import {
  useDashboardStats,
  useLowStockAlerts,
  useExpiringProducts,
} from "@/features/dashboard";
import { ROUTES } from "@/config";

/**
 * Inventory Manager Dashboard - Stock & Procurement focused
 */
const InventoryManagerDashboard = () => {
  const { displayName } = useAuth();
  const { data: stats, isLoading: statsLoading } = useDashboardStats();
  const { data: lowStock, isLoading: lowStockLoading } = useLowStockAlerts(10);
  const { data: expiring, isLoading: expiringLoading } = useExpiringProducts(30, 10);

  const getGreeting = () => {
    const hour = new Date().getHours();
    if (hour < 12) return "Good morning";
    if (hour < 18) return "Good afternoon";
    return "Good evening";
  };

  const lowStockCount = lowStock?.totalElements || 0;
  const expiringCount = expiring?.totalElements || 0;

  return (
    <div className="space-y-6">
      {/* Page Header */}
      <PageHeader
        title={`${getGreeting()}, ${displayName || "Inventory Manager"}!`}
        description="Stock overview and procurement management."
      />

      {/* Alert Banner if there are critical items */}
      {(lowStockCount > 0 || expiringCount > 0) && (
        <Card className="bg-amber-50 dark:bg-amber-900/20 border-amber-200">
          <CardContent className="flex items-center justify-between p-4">
            <div className="flex items-center gap-3">
              <AlertTriangle className="h-6 w-6 text-amber-500" />
              <div>
                <p className="font-medium text-amber-800 dark:text-amber-200">
                  Attention Required
                </p>
                <p className="text-sm text-amber-600 dark:text-amber-300">
                  {lowStockCount} items low on stock, {expiringCount} items expiring soon
                </p>
              </div>
            </div>
            <Button asChild variant="outline" className="border-amber-300">
              <Link to={ROUTES.INVENTORY.LOW_STOCK}>Review Now</Link>
            </Button>
          </CardContent>
        </Card>
      )}

      {/* Stats Overview */}
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <StatCard
          title="Total Products"
          value={stats?.totalProducts || 0}
          icon={<Package className="h-4 w-4" />}
          loading={statsLoading}
        />
        <StatCard
          title="Low Stock Items"
          value={lowStockCount}
          variant={lowStockCount > 0 ? "warning" : "default"}
          icon={<TrendingDown className="h-4 w-4" />}
          loading={lowStockLoading}
        />
        <StatCard
          title="Pending POs"
          value={stats?.pendingPurchaseOrders || 0}
          icon={<ClipboardList className="h-4 w-4" />}
          loading={statsLoading}
        />
        <StatCard
          title="Pending GRNs"
          value={stats?.pendingGRNs || 0}
          icon={<Truck className="h-4 w-4" />}
          loading={statsLoading}
        />
      </div>

      {/* Quick Actions */}
      <div className="grid gap-4 md:grid-cols-5">
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.PURCHASE_ORDERS.NEW} className="flex flex-col items-center">
            <ClipboardList className="h-6 w-6 mb-2" />
            <span className="font-medium">New PO</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.GRN.CREATE} className="flex flex-col items-center">
            <Truck className="h-6 w-6 mb-2" />
            <span className="font-medium">Receive Goods</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.INVENTORY.TRANSFERS} className="flex flex-col items-center">
            <ArrowLeftRight className="h-6 w-6 mb-2" />
            <span className="font-medium">Transfer Stock</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.INVENTORY.ADJUSTMENTS} className="flex flex-col items-center">
            <Package className="h-6 w-6 mb-2" />
            <span className="font-medium">Stock Adjust</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.SUPPLIERS.LIST} className="flex flex-col items-center">
            <Truck className="h-6 w-6 mb-2" />
            <span className="font-medium">Suppliers</span>
          </Link>
        </Button>
      </div>

      {/* Main Content Grid */}
      <div className="grid gap-6 lg:grid-cols-2">
        {/* Low Stock Items */}
        <Card>
          <CardHeader className="flex flex-row items-center justify-between">
            <div>
              <CardTitle className="flex items-center gap-2">
                <TrendingDown className="h-5 w-5 text-amber-500" />
                Low Stock Items
              </CardTitle>
              <CardDescription>Requires reordering</CardDescription>
            </div>
            <Button asChild variant="ghost" size="sm">
              <Link to={ROUTES.INVENTORY.LOW_STOCK}>
                View All
                <ArrowRight className="ml-2 h-4 w-4" />
              </Link>
            </Button>
          </CardHeader>
          <CardContent>
            {lowStockLoading ? (
              <div className="space-y-2">
                {[...Array(5)].map((_, i) => (
                  <div key={i} className="h-12 bg-muted animate-pulse rounded" />
                ))}
              </div>
            ) : lowStock?.content?.length > 0 ? (
              <div className="space-y-2">
                {lowStock.content.slice(0, 8).map((item) => (
                  <div
                    key={item.id}
                    className="flex items-center justify-between p-3 rounded-lg bg-muted/50"
                  >
                    <div>
                      <p className="font-medium">{item.productName}</p>
                      <p className="text-sm text-muted-foreground">
                        Min: {item.minStock} | Reorder: {item.reorderLevel}
                      </p>
                    </div>
                    <div className="text-right">
                      <Badge variant={item.currentStock <= 0 ? "destructive" : "outline"}>
                        {item.currentStock} in stock
                      </Badge>
                    </div>
                  </div>
                ))}
              </div>
            ) : (
              <div className="text-center py-8">
                <Package className="h-12 w-12 mx-auto text-muted-foreground mb-2" />
                <p className="text-muted-foreground">All items well stocked</p>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Expiring Products */}
        <Card>
          <CardHeader className="flex flex-row items-center justify-between">
            <div>
              <CardTitle className="flex items-center gap-2">
                <Calendar className="h-5 w-5 text-red-500" />
                Expiring Products
              </CardTitle>
              <CardDescription>Within next 30 days</CardDescription>
            </div>
            <Button asChild variant="ghost" size="sm">
              <Link to={ROUTES.INVENTORY.EXPIRY}>
                View All
                <ArrowRight className="ml-2 h-4 w-4" />
              </Link>
            </Button>
          </CardHeader>
          <CardContent>
            {expiringLoading ? (
              <div className="space-y-2">
                {[...Array(5)].map((_, i) => (
                  <div key={i} className="h-12 bg-muted animate-pulse rounded" />
                ))}
              </div>
            ) : expiring?.content?.length > 0 ? (
              <div className="space-y-2">
                {expiring.content.slice(0, 8).map((item) => (
                  <div
                    key={item.id}
                    className="flex items-center justify-between p-3 rounded-lg bg-muted/50"
                  >
                    <div>
                      <p className="font-medium">{item.productName}</p>
                      <p className="text-sm text-muted-foreground">
                        Batch: {item.batchNumber}
                      </p>
                    </div>
                    <div className="text-right">
                      <Badge variant="destructive">
                        {new Date(item.expiryDate).toLocaleDateString()}
                      </Badge>
                      <p className="text-xs text-muted-foreground mt-1">
                        Qty: {item.quantity}
                      </p>
                    </div>
                  </div>
                ))}
              </div>
            ) : (
              <div className="text-center py-8">
                <Clock className="h-12 w-12 mx-auto text-muted-foreground mb-2" />
                <p className="text-muted-foreground">No items expiring soon</p>
              </div>
            )}
          </CardContent>
        </Card>
      </div>

      {/* Pending Orders */}
      <Card>
        <CardHeader className="flex flex-row items-center justify-between">
          <div>
            <CardTitle>Pending Purchase Orders</CardTitle>
            <CardDescription>Orders awaiting delivery or approval</CardDescription>
          </div>
          <Button asChild>
            <Link to={ROUTES.PURCHASE_ORDERS.NEW}>
              <ClipboardList className="mr-2 h-4 w-4" />
              Create New PO
            </Link>
          </Button>
        </CardHeader>
        <CardContent>
          <div className="grid gap-4 md:grid-cols-3">
            <div className="p-4 rounded-lg bg-muted/50 text-center">
              <p className="text-3xl font-bold text-amber-600">
                {stats?.draftPOs || 0}
              </p>
              <p className="text-sm text-muted-foreground">Draft</p>
            </div>
            <div className="p-4 rounded-lg bg-muted/50 text-center">
              <p className="text-3xl font-bold text-blue-600">
                {stats?.submittedPOs || 0}
              </p>
              <p className="text-sm text-muted-foreground">Submitted</p>
            </div>
            <div className="p-4 rounded-lg bg-muted/50 text-center">
              <p className="text-3xl font-bold text-emerald-600">
                {stats?.approvedPOs || 0}
              </p>
              <p className="text-sm text-muted-foreground">Approved (Awaiting Delivery)</p>
            </div>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

export default InventoryManagerDashboard;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\dashboard\components\dashboards\PharmacistDashboard.jsx"   & echo.. 
/**
 * PharmacistDashboard Component
 * Dashboard for PHARMACIST role
 * Focus on POS, prescriptions, and inventory alerts
 */

import { Link } from "react-router-dom";
import {
  ShoppingCart,
  Pill,
  AlertTriangle,
  Package,
  Clock,
  FileText,
  ArrowRight,
} from "lucide-react";
import { PageHeader, StatCard } from "@/components/common";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { useAuth } from "@/hooks";
import {
  useDashboardStats,
  useLowStockAlerts,
  useExpiringProducts,
} from "@/features/dashboard";
import { ROUTES } from "@/config";
import { formatCurrency } from "@/utils/formatters";

/**
 * Pharmacist Dashboard - POS + Inventory focused
 */
const PharmacistDashboard = () => {
  const { displayName } = useAuth();
  const { data: stats, isLoading: statsLoading } = useDashboardStats();
  const { data: lowStock, isLoading: lowStockLoading } = useLowStockAlerts(5);
  const { data: expiring, isLoading: expiringLoading } = useExpiringProducts(30, 5);

  const getGreeting = () => {
    const hour = new Date().getHours();
    if (hour < 12) return "Good morning";
    if (hour < 18) return "Good afternoon";
    return "Good evening";
  };

  const lowStockCount = lowStock?.totalElements || 0;
  const expiringCount = expiring?.totalElements || 0;

  return (
    <div className="space-y-6">
      {/* Page Header */}
      <PageHeader
        title={`${getGreeting()}, ${displayName || "Pharmacist"}!`}
        description="Your pharmacy overview and key alerts."
      />

      {/* Quick Start POS Button */}
      <Card className="bg-gradient-to-r from-cyan-500 to-cyan-600 text-white border-0">
        <CardContent className="flex items-center justify-between p-6">
          <div>
            <h2 className="text-2xl font-bold mb-1">Point of Sale</h2>
            <p className="text-cyan-100">
              Start a new sale or dispense medications
            </p>
          </div>
          <Button
            asChild
            size="lg"
            className="bg-white text-cyan-600 hover:bg-cyan-50"
          >
            <Link to={ROUTES.POS.NEW_SALE}>
              <ShoppingCart className="mr-2 h-5 w-5" />
              Open POS
            </Link>
          </Button>
        </CardContent>
      </Card>

      {/* Stats Overview */}
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <StatCard
          title="Today's Sales"
          value={formatCurrency(stats?.todaySales || 0)}
          icon={<ShoppingCart className="h-4 w-4" />}
          loading={statsLoading}
        />
        <StatCard
          title="Prescriptions"
          value={stats?.todayPrescriptions || 0}
          description="Dispensed today"
          icon={<Pill className="h-4 w-4" />}
          loading={statsLoading}
        />
        <StatCard
          title="Low Stock Items"
          value={lowStockCount}
          variant={lowStockCount > 0 ? "warning" : "default"}
          icon={<Package className="h-4 w-4" />}
          loading={lowStockLoading}
        />
        <StatCard
          title="Expiring Soon"
          value={expiringCount}
          description="Within 30 days"
          variant={expiringCount > 0 ? "destructive" : "default"}
          icon={<AlertTriangle className="h-4 w-4" />}
          loading={expiringLoading}
        />
      </div>

      {/* Quick Actions */}
      <div className="grid gap-4 md:grid-cols-4">
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.POS.NEW_SALE} className="flex flex-col items-center">
            <ShoppingCart className="h-6 w-6 mb-2" />
            <span className="font-medium">New Sale</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.INVENTORY.STOCK} className="flex flex-col items-center">
            <Package className="h-6 w-6 mb-2" />
            <span className="font-medium">Check Stock</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.PRODUCTS.LIST} className="flex flex-col items-center">
            <Pill className="h-6 w-6 mb-2" />
            <span className="font-medium">Products</span>
          </Link>
        </Button>
        <Button asChild variant="outline" className="h-auto py-4">
          <Link to={ROUTES.SALES.LIST} className="flex flex-col items-center">
            <FileText className="h-6 w-6 mb-2" />
            <span className="font-medium">Sales History</span>
          </Link>
        </Button>
      </div>

      {/* Alerts Grid */}
      <div className="grid gap-6 lg:grid-cols-2">
        {/* Low Stock Alert */}
        <Card>
          <CardHeader className="flex flex-row items-center justify-between">
            <div>
              <CardTitle className="flex items-center gap-2">
                <Package className="h-5 w-5 text-amber-500" />
                Low Stock Alert
              </CardTitle>
              <CardDescription>Items below minimum stock level</CardDescription>
            </div>
            <Button asChild variant="ghost" size="sm">
              <Link to={ROUTES.INVENTORY.LOW_STOCK}>
                View All
                <ArrowRight className="ml-2 h-4 w-4" />
              </Link>
            </Button>
          </CardHeader>
          <CardContent>
            {lowStockLoading ? (
              <div className="space-y-2">
                {[...Array(3)].map((_, i) => (
                  <div key={i} className="h-10 bg-muted animate-pulse rounded" />
                ))}
              </div>
            ) : lowStock?.content?.length > 0 ? (
              <div className="space-y-2">
                {lowStock.content.slice(0, 5).map((item) => (
                  <div
                    key={item.id}
                    className="flex items-center justify-between p-2 rounded bg-amber-50 dark:bg-amber-900/20"
                  >
                    <span className="font-medium text-sm">{item.productName}</span>
                    <Badge variant="outline" className="text-amber-600">
                      {item.currentStock} left
                    </Badge>
                  </div>
                ))}
              </div>
            ) : (
              <p className="text-center text-muted-foreground py-4">
                All items are well stocked
              </p>
            )}
          </CardContent>
        </Card>

        {/* Expiring Soon Alert */}
        <Card>
          <CardHeader className="flex flex-row items-center justify-between">
            <div>
              <CardTitle className="flex items-center gap-2">
                <Clock className="h-5 w-5 text-red-500" />
                Expiring Soon
              </CardTitle>
              <CardDescription>Items expiring within 30 days</CardDescription>
            </div>
            <Button asChild variant="ghost" size="sm">
              <Link to={ROUTES.INVENTORY.EXPIRY}>
                View All
                <ArrowRight className="ml-2 h-4 w-4" />
              </Link>
            </Button>
          </CardHeader>
          <CardContent>
            {expiringLoading ? (
              <div className="space-y-2">
                {[...Array(3)].map((_, i) => (
                  <div key={i} className="h-10 bg-muted animate-pulse rounded" />
                ))}
              </div>
            ) : expiring?.content?.length > 0 ? (
              <div className="space-y-2">
                {expiring.content.slice(0, 5).map((item) => (
                  <div
                    key={item.id}
                    className="flex items-center justify-between p-2 rounded bg-red-50 dark:bg-red-900/20"
                  >
                    <span className="font-medium text-sm">{item.productName}</span>
                    <Badge variant="outline" className="text-red-600">
                      {new Date(item.expiryDate).toLocaleDateString()}
                    </Badge>
                  </div>
                ))}
              </div>
            ) : (
              <p className="text-center text-muted-foreground py-4">
                No items expiring soon
              </p>
            )}
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default PharmacistDashboard;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\grn\components\GRNColumns.jsx"   & echo.. 
/**
 * GRN Columns Definition
 * Defines the columns for the GRN DataTable
 */

import { Checkbox } from "@/components/ui/checkbox";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { MoreHorizontal, Eye, CheckCircle, XCircle, Undo2 } from "lucide-react";
import { formatDate, formatCurrency } from "@/utils/formatters";

// Status badge configuration
const statusConfig = {
  DRAFT: { label: "Draft", variant: "secondary" },
  PENDING: { label: "Pending Verification", variant: "warning" },
  VERIFIED: { label: "Verified", variant: "default" },
  COMPLETED: { label: "Completed", variant: "success" },
  CANCELLED: { label: "Cancelled", variant: "secondary" },
};

/**
 * Get column definitions for GRN table
 */
export const getGRNColumns = ({
  onView,
  onComplete,
  onCreateReturn,
} = {}) => [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() ||
          (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
        className="translate-y-[2px]"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
        className="translate-y-[2px]"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "grnNumber",
    header: "GRN Number",
    cell: ({ row }) => (
      <span className="font-mono text-sm font-medium">
        {row.getValue("grnNumber")}
      </span>
    ),
  },
  {
    accessorKey: "purchaseOrderNumber",
    header: "PO Number",
    cell: ({ row }) => {
      return row.original.purchaseOrderNumber || "-";
    },
  },
  {
    accessorKey: "supplierName",
    header: "Supplier",
    cell: ({ row }) => {
      return row.original.supplierName || "-";
    },
  },
  {
    accessorKey: "receivedDate",
    header: "Received Date",
    cell: ({ row }) => formatDate(row.getValue("receivedDate")),
  },
  {
    accessorKey: "itemCount",
    header: "Items",
    cell: ({ row }) => {
      const items = row.original.items || [];
      return items.length;
    },
  },
  {
    accessorKey: "totalAmount",
    header: "Total",
    cell: ({ row }) => formatCurrency(row.getValue("totalAmount")),
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => {
      const status = row.getValue("status");
      const grn = row.original;
      const items = grn.items || [];
      const hasIncompleteData = items.some(item => 
        !item.batchNumber || !item.manufacturingDate || !item.expiryDate || !item.sellingPrice || !item.mrp
      );
      
      const config = statusConfig[status] || {
        label: status,
        variant: "secondary",
      };
      
      return (
        <div className="flex items-center gap-2">
          <Badge variant={config.variant}>{config.label}</Badge>
          {hasIncompleteData && status !== "COMPLETED" && (
            <span className="text-destructive text-xs" title="Missing required data"></span>
          )}
        </div>
      );
    },
  },
  {
    id: "actions",
    header: "Actions",
    cell: ({ row }) => {
      const grn = row.original;
      const status = grn.status;

      const canComplete = status === "DRAFT" || status === "PENDING" || status === "VERIFIED";
      const canReturn = status === "COMPLETED";

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuItem onClick={() => onView?.(grn)}>
              <Eye className="mr-2 h-4 w-4" />
              View Details
            </DropdownMenuItem>
            {canComplete && (
              <>
                <DropdownMenuSeparator />
                <DropdownMenuItem onClick={() => onComplete?.(grn)}>
                  <CheckCircle className="mr-2 h-4 w-4" />
                  Complete & Update Stock
                </DropdownMenuItem>
              </>
            )}
            {canReturn && (
              <>
                <DropdownMenuSeparator />
                <DropdownMenuItem onClick={() => onCreateReturn?.(grn)}>
                  <Undo2 className="mr-2 h-4 w-4" />
                  Create Return (RGRN)
                </DropdownMenuItem>
              </>
            )}
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    enableSorting: false,
    enableHiding: false,
  },
];

export default getGRNColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\grn\components\GRNForm.jsx"   & echo.. 
/**
 * GRN Form Component
 * Form for creating GRN from Purchase Order
 */

import { useState, useEffect } from "react";
import { useFieldArray, useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { Package, AlertTriangle } from "lucide-react";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
  FormDescription,
} from "@/components/ui/form";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardHeader,
  CardTitle,
  CardDescription,
} from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Separator } from "@/components/ui/separator";
import { Alert, AlertDescription } from "@/components/ui/alert";
import { ButtonSpinner } from "@/components/common";
import { formatCurrency } from "@/utils/formatters";

// Line item schema
const lineItemSchema = z.object({
  productId: z.string(),
  productName: z.string(),
  orderedQuantity: z.number(),
  receivedQuantity: z.number().min(1, "Received quantity must be at least 1"),
  rejectedQuantity: z.number().min(0).default(0),
  unitPrice: z.number().min(0.01, "Unit price must be greater than 0"),
  batchNumber: z.string().min(1, "Batch number is required"),
  manufacturingDate: z.string().min(1, "Manufacturing date is required"),
  expiryDate: z.string().min(1, "Expiry date is required"),
  sellingPrice: z.number().min(0.01, "Selling price is required"),
  mrp: z.number().min(0.01, "MRP is required"),
  notes: z.string().optional(),
}).refine((data) => {
  // Validate expiry date is after manufacturing date
  if (data.manufacturingDate && data.expiryDate) {
    return new Date(data.expiryDate) > new Date(data.manufacturingDate);
  }
  return true;
}, {
  message: "Expiry date must be after manufacturing date",
  path: ["expiryDate"],
}).refine((data) => {
  // Validate MRP is greater than or equal to selling price
  if (data.mrp && data.sellingPrice) {
    return data.mrp >= data.sellingPrice;
  }
  return true;
}, {
  message: "MRP must be greater than or equal to selling price",
  path: ["mrp"],
});

// Validation schema
const grnSchema = z.object({
  purchaseOrderId: z.string().min(1, "Purchase order is required"),
  receivedDate: z.string().min(1, "Received date is required"),
  invoiceNumber: z.string().optional(),
  invoiceDate: z.string().optional(),
  notes: z.string().max(500).optional().nullable(),
  items: z.array(lineItemSchema).min(1, "At least one item is required"),
});

/**
 * GRNForm component
 */
const GRNForm = ({
  purchaseOrder,
  initialData,
  onSubmit,
  onCancel,
  isSubmitting = false,
  isEditMode = false,
}) => {
  const form = useForm({
    resolver: zodResolver(grnSchema),
    defaultValues: initialData || {
      purchaseOrderId: purchaseOrder?.id?.toString() || "",
      receivedDate: new Date().toISOString().split("T")[0],
      invoiceNumber: "",
      invoiceDate: "",
      notes: "",
      items: [],
    },
  });

  const { fields } = useFieldArray({
    control: form.control,
    name: "items",
  });

  const items = form.watch("items");

  // Populate form from PO items (only if not in edit mode)
  useEffect(() => {
    if (purchaseOrder?.items && !isEditMode) {
      const grnItems = purchaseOrder.items.map((item) => ({
        productId: item.productId?.toString() || "",
        productName: item.product?.name || item.productName || "",
        orderedQuantity: item.quantityOrdered || item.quantity || 1,
        receivedQuantity: item.quantityOrdered || item.quantity || 1, // Default to ordered quantity
        rejectedQuantity: 0,
        unitPrice: item.unitPrice || 0,
        batchNumber: "",
        manufacturingDate: "",
        expiryDate: "",
        sellingPrice: 0,
        mrp: 0,
        notes: "",
      }));

      form.reset({
        purchaseOrderId: purchaseOrder.id?.toString() || "",
        receivedDate: new Date().toISOString().split("T")[0],
        invoiceNumber: "",
        invoiceDate: "",
        notes: "",
        items: grnItems,
      });
    }
  }, [purchaseOrder, form, isEditMode]);

  // Calculate totals
  const totalReceived = items.reduce(
    (sum, item) => sum + item.receivedQuantity * item.unitPrice,
    0
  );

  const hasDiscrepancies = items.some(
    (item) =>
      item.receivedQuantity !== item.orderedQuantity ||
      item.rejectedQuantity > 0
  );

  const handleSubmit = (data) => {
    onSubmit({
      ...data,
      totalAmount: totalReceived,
    });
  };

  if (!purchaseOrder) {
    return (
      <Card>
        <CardContent className="flex flex-col items-center justify-center py-12">
          <Package className="h-12 w-12 mb-4 text-muted-foreground" />
          <p className="text-muted-foreground">No purchase order selected</p>
        </CardContent>
      </Card>
    );
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-6">
        {/* PO Info */}
        <Card>
          <CardHeader>
            <CardTitle>Purchase Order: {purchaseOrder.poNumber}</CardTitle>
            <CardDescription>
              Supplier: {purchaseOrder.supplier?.name || "-"}
            </CardDescription>
          </CardHeader>
        </Card>

        {/* Receipt Details */}
        <Card>
          <CardHeader>
            <CardTitle>Receipt Details</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            <FormField
              control={form.control}
              name="receivedDate"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Received Date *</FormLabel>
                  <FormControl>
                    <Input type="date" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="invoiceNumber"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Supplier Invoice No.</FormLabel>
                  <FormControl>
                    <Input placeholder="INV-001" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="invoiceDate"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Invoice Date</FormLabel>
                  <FormControl>
                    <Input type="date" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Discrepancy Warning */}
        {hasDiscrepancies && (
          <Alert variant="warning">
            <AlertTriangle className="h-4 w-4" />
            <AlertDescription>
              There are discrepancies between ordered and received quantities.
            </AlertDescription>
          </Alert>
        )}

        {/* Edit Mode - Incomplete Data Warning */}
        {isEditMode && items.some(item => 
          !item.batchNumber || !item.manufacturingDate || !item.expiryDate || 
          !item.sellingPrice || item.sellingPrice === 0 || !item.mrp || item.mrp === 0
        ) && (
          <Alert variant="warning" className="bg-amber-50 border-amber-300">
            <AlertTriangle className="h-4 w-4 text-amber-600" />
            <AlertDescription className="text-amber-900">
              <strong>Action Required:</strong> Items highlighted in red are missing required information. 
              Please fill in all required fields (Batch Number, Manufacturing Date, Expiry Date, Selling Price, and MRP) before saving.
            </AlertDescription>
          </Alert>
        )}

        {/* Items Table */}
        <Card>
          <CardHeader>
            <CardTitle>Received Items</CardTitle>
            <CardDescription>
              {isEditMode ? (
                <span className="text-amber-700 font-medium">
                   Please complete all missing fields marked with * before saving. Incomplete items are highlighted.
                </span>
              ) : (
                <span>
                  All fields marked with * are required. You must enter batch number, manufacturing date, expiry date, selling price, and MRP for each item before saving.
                </span>
              )}
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="rounded-md border">
              <Table>
                <TableHeader>
                  <TableRow>
                    <TableHead className="w-[20%]">Product</TableHead>
                    <TableHead className="text-right w-[8%]">
                      Ordered
                    </TableHead>
                    <TableHead className="text-right w-[8%]">
                      Received
                    </TableHead>
                    <TableHead className="w-[12%]">Batch No. *</TableHead>
                    <TableHead className="w-[10%]">Mfg Date *</TableHead>
                    <TableHead className="w-[10%]">Expiry *</TableHead>
                    <TableHead className="text-right w-[10%]">Selling Price *</TableHead>
                    <TableHead className="text-right w-[10%]">MRP *</TableHead>
                    <TableHead className="text-right w-[12%]">Amount</TableHead>
                  </TableRow>
                </TableHeader>
                <TableBody>
                  {fields.map((field, index) => {
                    const item = items[index] || {};
                    const lineTotal = item.receivedQuantity * item.unitPrice;
                    const hasQtyMismatch =
                      item.receivedQuantity !== item.orderedQuantity;
                    
                    // Check for missing required fields
                    const isMissingData = isEditMode && (
                      !item.batchNumber || 
                      !item.manufacturingDate || 
                      !item.expiryDate || 
                      !item.sellingPrice || 
                      item.sellingPrice === 0 ||
                      !item.mrp || 
                      item.mrp === 0
                    );

                    return (
                      <TableRow
                        key={field.id}
                        className={
                          isMissingData 
                            ? "bg-red-50 border-l-4 border-red-500" 
                            : hasQtyMismatch 
                            ? "bg-yellow-50" 
                            : ""
                        }
                      >
                        <TableCell>
                          <div>
                            <span className="font-medium">
                              {item.productName}
                            </span>
                            {isMissingData && (
                              <p className="text-xs text-red-600 mt-1 font-medium">
                                 Complete all required fields
                              </p>
                            )}
                          </div>
                        </TableCell>
                        <TableCell className="text-right">
                          {item.orderedQuantity}
                        </TableCell>
                        <TableCell>
                          <Input
                            type="number"
                            min={0}
                            max={item.orderedQuantity}
                            className="w-full text-right"
                            {...form.register(
                              `items.${index}.receivedQuantity`,
                              { valueAsNumber: true }
                            )}
                          />
                        </TableCell>
                        <TableCell>
                          <Input
                            placeholder="LOT123"
                            className="w-full"
                            {...form.register(`items.${index}.batchNumber`)}
                          />
                          {form.formState.errors.items?.[index]?.batchNumber && (
                            <p className="text-xs text-red-500 mt-1">
                              {form.formState.errors.items[index].batchNumber.message}
                            </p>
                          )}
                        </TableCell>
                        <TableCell>
                          <Input
                            type="date"
                            className="w-full"
                            {...form.register(`items.${index}.manufacturingDate`)}
                          />
                          {form.formState.errors.items?.[index]?.manufacturingDate && (
                            <p className="text-xs text-red-500 mt-1">
                              {form.formState.errors.items[index].manufacturingDate.message}
                            </p>
                          )}
                        </TableCell>
                        <TableCell>
                          <Input
                            type="date"
                            className="w-full"
                            {...form.register(`items.${index}.expiryDate`)}
                          />
                          {form.formState.errors.items?.[index]?.expiryDate && (
                            <p className="text-xs text-red-500 mt-1">
                              {form.formState.errors.items[index].expiryDate.message}
                            </p>
                          )}
                        </TableCell>
                        <TableCell>
                          <Input
                            type="number"
                            min={0}
                            step="0.01"
                            className="w-full text-right"
                            placeholder="0.00"
                            {...form.register(
                              `items.${index}.sellingPrice`,
                              { valueAsNumber: true }
                            )}
                          />
                          {form.formState.errors.items?.[index]?.sellingPrice && (
                            <p className="text-xs text-red-500 mt-1">
                              {form.formState.errors.items[index].sellingPrice.message}
                            </p>
                          )}
                        </TableCell>
                        <TableCell>
                          <Input
                            type="number"
                            min={0}
                            step="0.01"
                            className="w-full text-right"
                            placeholder="0.00"
                            {...form.register(
                              `items.${index}.mrp`,
                              { valueAsNumber: true }
                            )}
                          />
                          {form.formState.errors.items?.[index]?.mrp && (
                            <p className="text-xs text-red-500 mt-1">
                              {form.formState.errors.items[index].mrp.message}
                            </p>
                          )}
                        </TableCell>
                        <TableCell className="text-right font-medium">
                          {formatCurrency(lineTotal)}
                        </TableCell>
                      </TableRow>
                    );
                  })}
                </TableBody>
              </Table>
            </div>

            {/* Total */}
            <div className="flex justify-end mt-4">
              <div className="w-[200px] space-y-2">
                <Separator />
                <div className="flex justify-between font-bold">
                  <span>Total Amount</span>
                  <span>{formatCurrency(totalReceived)}</span>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Notes */}
        <Card>
          <CardHeader>
            <CardTitle>Notes</CardTitle>
          </CardHeader>
          <CardContent>
            <FormField
              control={form.control}
              name="notes"
              render={({ field }) => (
                <FormItem>
                  <FormControl>
                    <Textarea
                      placeholder="Add any notes about this delivery..."
                      className="resize-none"
                      rows={3}
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Actions */}
        <div className="flex justify-end gap-4">
          <Button type="button" variant="outline" onClick={onCancel}>
            Cancel
          </Button>
          <Button type="submit" disabled={isSubmitting}>
            {isSubmitting && <ButtonSpinner />}
            {isEditMode ? "Save Changes" : "Create GRN"}
          </Button>
        </div>
      </form>
    </Form>
  );
};

export default GRNForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\inventory\components\ExpiringColumns.jsx"   & echo.. 
/**
 * Expiring Products Table Component
 * Displays products approaching expiry or already expired
 */

import { Badge } from "@/components/ui/badge";
import { formatDate, formatCurrency } from "@/utils/formatters";
import { differenceInDays, isPast, parseISO } from "date-fns";

/**
 * Get column definitions for expiring products table
 */
export const getExpiringColumns = () => [
  {
    accessorKey: "productCode",
    header: "Code",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => (
      <span className="font-mono text-sm">{row.getValue("productCode")}</span>
    ),
  },
  {
    accessorKey: "productName",
    header: "Product",
    cell: ({ row }) => (
      <div className="max-w-[120px] sm:max-w-none">
        <div className="font-medium text-sm truncate">
          {row.getValue("productName")}
        </div>
        {row.original.batchNumber && (
          <div className="text-xs text-muted-foreground truncate hidden sm:block">
            Batch: {row.original.batchNumber}
          </div>
        )}
      </div>
    ),
  },
  {
    accessorKey: "expiryDate",
    header: "Expiry",
    cell: ({ row }) => {
      const expiryDate = row.getValue("expiryDate");
      if (!expiryDate) return "-";

      const expiry = parseISO(expiryDate);
      const daysUntilExpiry = differenceInDays(expiry, new Date());
      const isExpired = isPast(expiry);

      return (
        <div className="space-y-0.5 sm:space-y-1">
          <div
            className={`text-xs sm:text-sm ${
              isExpired ? "text-red-600 font-medium" : ""
            }`}
          >
            {formatDate(expiryDate)}
          </div>
          <div className="text-xs hidden sm:block">
            {isExpired ? (
              <span className="text-red-600">
                Expired {Math.abs(daysUntilExpiry)}d ago
              </span>
            ) : daysUntilExpiry <= 30 ? (
              <span className="text-orange-600">{daysUntilExpiry}d left</span>
            ) : daysUntilExpiry <= 90 ? (
              <span className="text-yellow-600">{daysUntilExpiry}d left</span>
            ) : (
              <span className="text-muted-foreground">
                {daysUntilExpiry}d left
              </span>
            )}
          </div>
        </div>
      );
    },
  },
  {
    accessorKey: "quantity",
    header: "Qty",
    meta: { className: "hidden sm:table-cell" },
    cell: ({ row }) => (
      <span className="text-sm">{row.getValue("quantity") || 0}</span>
    ),
  },
  {
    accessorKey: "branchName",
    header: "Branch",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => (
      <Badge variant="outline" className="text-xs">
        {row.getValue("branchName") || "-"}
      </Badge>
    ),
  },
  {
    accessorKey: "sellingPrice",
    header: "Value",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => {
      const qty = row.original.quantity || 0;
      const price = row.original.sellingPrice || 0;
      return <span className="text-sm">{formatCurrency(qty * price)}</span>;
    },
  },
  {
    id: "status",
    header: "Status",
    cell: ({ row }) => {
      const expiryDate = row.original.expiryDate;
      if (!expiryDate) return "-";

      const expiry = parseISO(expiryDate);
      const daysUntilExpiry = differenceInDays(expiry, new Date());
      const isExpired = isPast(expiry);

      if (isExpired) {
        return (
          <Badge variant="destructive" className="text-xs">
            Expired
          </Badge>
        );
      }
      if (daysUntilExpiry <= 30) {
        return (
          <Badge variant="destructive" className="text-xs">
            Critical
          </Badge>
        );
      }
      if (daysUntilExpiry <= 90) {
        return (
          <Badge variant="warning" className="text-xs">
            Soon
          </Badge>
        );
      }
      return (
        <Badge variant="secondary" className="text-xs">
          OK
        </Badge>
      );
    },
  },
];

export default getExpiringColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\inventory\components\LowStockColumns.jsx"   & echo.. 
/**
 * Low Stock Table Component
 * Displays products with low stock levels
 */

import { Badge } from "@/components/ui/badge";
import { Progress } from "@/components/ui/progress";
import { formatCurrency } from "@/utils/formatters";

/**
 * Get column definitions for low stock products table
 */
export const getLowStockColumns = () => [
  {
    accessorKey: "productCode",
    header: "Code",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => (
      <span className="font-mono text-sm">{row.getValue("productCode")}</span>
    ),
  },
  {
    accessorKey: "productName",
    header: "Product",
    cell: ({ row }) => (
      <div className="max-w-[120px] sm:max-w-none">
        <div className="font-medium text-sm truncate">
          {row.getValue("productName")}
        </div>
        {row.original.genericName && (
          <div className="text-xs text-muted-foreground truncate hidden sm:block">
            {row.original.genericName}
          </div>
        )}
      </div>
    ),
  },
  {
    accessorKey: "currentStock",
    header: "Stock",
    cell: ({ row }) => {
      const current = row.getValue("currentStock") || 0;
      const reorder = row.original.reorderLevel || 0;
      const percentage =
        reorder > 0 ? Math.min((current / reorder) * 100, 100) : 100;

      return (
        <div className="space-y-1 min-w-[80px] sm:min-w-[120px]">
          <div className="flex justify-between text-xs sm:text-sm">
            <span className={current === 0 ? "text-red-600 font-medium" : ""}>
              {current}
            </span>
            <span className="text-muted-foreground">/ {reorder}</span>
          </div>
          <Progress
            value={percentage}
            className="h-2"
            indicatorClassName={
              current === 0
                ? "bg-red-500"
                : percentage < 50
                ? "bg-orange-500"
                : "bg-yellow-500"
            }
          />
        </div>
      );
    },
  },
  {
    accessorKey: "branchName",
    header: "Branch",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => (
      <Badge variant="outline" className="text-xs">
        {row.getValue("branchName") || "-"}
      </Badge>
    ),
  },
  {
    accessorKey: "category",
    header: "Category",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => (
      <div className="text-muted-foreground text-sm">
        {row.original.category?.categoryName || "-"}
      </div>
    ),
  },
  {
    accessorKey: "sellingPrice",
    header: "Price",
    meta: { className: "hidden sm:table-cell" },
    cell: ({ row }) => (
      <span className="text-sm">
        {formatCurrency(row.getValue("sellingPrice"))}
      </span>
    ),
  },
  {
    id: "status",
    header: "Status",
    cell: ({ row }) => {
      const current = row.original.currentStock || 0;

      if (current === 0) {
        return (
          <Badge variant="destructive" className="text-xs">
            Out
          </Badge>
        );
      }
      return (
        <Badge variant="warning" className="text-xs">
          Low
        </Badge>
      );
    },
  },
];

export default getLowStockColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\inventory\components\StockTransferColumns.jsx"   & echo.. 
/**
 * Stock Transfer Columns Definition
 * Defines the columns for the stock transfers DataTable
 */

import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import {
  MoreHorizontal,
  Eye,
  CheckCircle,
  XCircle,
  Truck,
  PackageCheck,
} from "lucide-react";
import { formatDate } from "@/utils/formatters";
import {
  TRANSFER_STATUS,
  TRANSFER_STATUS_LABELS,
  TRANSFER_STATUS_COLORS,
} from "@/constants";

/**
 * Get column definitions for stock transfers table
 */
export const getStockTransferColumns = ({
  onView,
  onApprove,
  onReject,
  onDispatch,
  onReceive,
} = {}) => [
  {
    accessorKey: "transferNumber",
    header: "Transfer #",
    cell: ({ row }) => (
      <span className="font-mono font-medium">
        {row.getValue("transferNumber")}
      </span>
    ),
  },
  {
    accessorKey: "fromBranch",
    header: "From Branch",
    cell: ({ row }) => <div>{row.original.fromBranch?.branchName || "-"}</div>,
  },
  {
    accessorKey: "toBranch",
    header: "To Branch",
    cell: ({ row }) => <div>{row.original.toBranch?.branchName || "-"}</div>,
  },
  {
    accessorKey: "itemCount",
    header: "Items",
    cell: ({ row }) => (
      <Badge variant="secondary">{row.original.items?.length || 0} items</Badge>
    ),
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => {
      const status = row.getValue("status");
      const colorClass =
        TRANSFER_STATUS_COLORS[status] || "bg-gray-100 text-gray-800";
      return (
        <Badge className={colorClass}>
          {TRANSFER_STATUS_LABELS[status] || status}
        </Badge>
      );
    },
    filterFn: (row, id, value) => {
      if (!value) return true;
      return row.getValue(id) === value;
    },
  },
  {
    accessorKey: "requestedDate",
    header: "Requested",
    cell: ({ row }) => formatDate(row.getValue("requestedDate")),
  },
  {
    accessorKey: "createdBy",
    header: "Requested By",
    cell: ({ row }) => (
      <div className="text-muted-foreground">
        {row.original.createdBy?.firstName} {row.original.createdBy?.lastName}
      </div>
    ),
  },
  {
    id: "actions",
    header: "Actions",
    cell: ({ row }) => {
      const transfer = row.original;
      const status = transfer.status;

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuItem onClick={() => onView?.(transfer)}>
              <Eye className="mr-2 h-4 w-4" />
              View Details
            </DropdownMenuItem>

            {status === TRANSFER_STATUS.PENDING && (
              <>
                <DropdownMenuSeparator />
                <DropdownMenuItem onClick={() => onApprove?.(transfer)}>
                  <CheckCircle className="mr-2 h-4 w-4 text-green-600" />
                  Approve
                </DropdownMenuItem>
                <DropdownMenuItem onClick={() => onReject?.(transfer)}>
                  <XCircle className="mr-2 h-4 w-4 text-red-600" />
                  Reject
                </DropdownMenuItem>
              </>
            )}

            {status === TRANSFER_STATUS.APPROVED && (
              <>
                <DropdownMenuSeparator />
                <DropdownMenuItem onClick={() => onDispatch?.(transfer)}>
                  <Truck className="mr-2 h-4 w-4" />
                  Mark as Dispatched
                </DropdownMenuItem>
              </>
            )}

            {status === TRANSFER_STATUS.DISPATCHED && (
              <>
                <DropdownMenuSeparator />
                <DropdownMenuItem onClick={() => onReceive?.(transfer)}>
                  <PackageCheck className="mr-2 h-4 w-4" />
                  Receive
                </DropdownMenuItem>
              </>
            )}
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    enableSorting: false,
    enableHiding: false,
  },
];

export default getStockTransferColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\inventory\components\StockTransferForm.jsx"   & echo.. 
/**
 * Stock Transfer Form Component
 * Form for creating new stock transfers
 */

import { useForm, useFieldArray } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { Plus, Trash2 } from "lucide-react";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { ButtonSpinner } from "@/components/common";

// Validation schema
const stockTransferSchema = z
  .object({
    fromBranchId: z.string().min(1, "Source branch is required"),
    toBranchId: z.string().min(1, "Destination branch is required"),
    notes: z.string().max(500).optional().nullable(),
    items: z
      .array(
        z.object({
          productId: z.string().min(1, "Product is required"),
          quantity: z.coerce.number().min(1, "Quantity must be at least 1"),
        })
      )
      .min(1, "At least one item is required"),
  })
  .refine((data) => data.fromBranchId !== data.toBranchId, {
    message: "Source and destination branches must be different",
    path: ["toBranchId"],
  });

/**
 * StockTransferForm component
 * @param {Object} props
 * @param {Array} props.branches - Available branches
 * @param {Array} props.products - Available products
 * @param {Function} props.onSubmit - Submit handler
 * @param {Function} props.onCancel - Cancel handler
 * @param {boolean} props.isSubmitting - Loading state
 */
const StockTransferForm = ({
  branches = [],
  products = [],
  onSubmit,
  onCancel,
  isSubmitting = false,
}) => {
  const form = useForm({
    resolver: zodResolver(stockTransferSchema),
    defaultValues: {
      fromBranchId: "",
      toBranchId: "",
      notes: "",
      items: [{ productId: "", quantity: 1 }],
    },
  });

  const { fields, append, remove } = useFieldArray({
    control: form.control,
    name: "items",
  });

  const handleSubmit = (data) => {
    onSubmit({
      ...data,
      items: data.items.map((item) => ({
        productId: Number(item.productId),
        quantity: Number(item.quantity),
      })),
    });
  };

  const addItem = () => {
    append({ productId: "", quantity: 1 });
  };

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-6">
        <Card>
          <CardHeader>
            <CardTitle>Transfer Details</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="grid gap-4 md:grid-cols-2">
              <FormField
                control={form.control}
                name="fromBranchId"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>From Branch *</FormLabel>
                    <Select onValueChange={field.onChange} value={field.value}>
                      <FormControl>
                        <SelectTrigger>
                          <SelectValue placeholder="Select source branch" />
                        </SelectTrigger>
                      </FormControl>
                      <SelectContent>
                        {branches.map((branch) => (
                          <SelectItem key={branch.id} value={String(branch.id)}>
                            {branch.branchName}
                          </SelectItem>
                        ))}
                      </SelectContent>
                    </Select>
                    <FormMessage />
                  </FormItem>
                )}
              />

              <FormField
                control={form.control}
                name="toBranchId"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>To Branch *</FormLabel>
                    <Select onValueChange={field.onChange} value={field.value}>
                      <FormControl>
                        <SelectTrigger>
                          <SelectValue placeholder="Select destination branch" />
                        </SelectTrigger>
                      </FormControl>
                      <SelectContent>
                        {branches.map((branch) => (
                          <SelectItem key={branch.id} value={String(branch.id)}>
                            {branch.branchName}
                          </SelectItem>
                        ))}
                      </SelectContent>
                    </Select>
                    <FormMessage />
                  </FormItem>
                )}
              />
            </div>

            <FormField
              control={form.control}
              name="notes"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Notes</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="Add any additional notes..."
                      className="resize-none"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between">
            <CardTitle>Transfer Items</CardTitle>
            <Button type="button" variant="outline" size="sm" onClick={addItem}>
              <Plus className="mr-2 h-4 w-4" />
              Add Item
            </Button>
          </CardHeader>
          <CardContent className="space-y-4">
            {fields.map((field, index) => (
              <div key={field.id} className="flex gap-4 items-start">
                <FormField
                  control={form.control}
                  name={`items.${index}.productId`}
                  render={({ field }) => (
                    <FormItem className="flex-1">
                      <FormLabel className={index === 0 ? "" : "sr-only"}>
                        Product *
                      </FormLabel>
                      <Select
                        onValueChange={field.onChange}
                        value={field.value}
                      >
                        <FormControl>
                          <SelectTrigger>
                            <SelectValue placeholder="Select product" />
                          </SelectTrigger>
                        </FormControl>
                        <SelectContent>
                          {products.map((product) => (
                            <SelectItem
                              key={product.id}
                              value={String(product.id)}
                            >
                              {product.productName} ({product.productCode})
                            </SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                <FormField
                  control={form.control}
                  name={`items.${index}.quantity`}
                  render={({ field }) => (
                    <FormItem className="w-32">
                      <FormLabel className={index === 0 ? "" : "sr-only"}>
                        Quantity *
                      </FormLabel>
                      <FormControl>
                        <Input type="number" min="1" {...field} />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                {fields.length > 1 && (
                  <Button
                    type="button"
                    variant="ghost"
                    size="icon"
                    onClick={() => remove(index)}
                    className="mt-8"
                  >
                    <Trash2 className="h-4 w-4 text-destructive" />
                  </Button>
                )}
              </div>
            ))}
          </CardContent>
        </Card>

        <div className="flex justify-end gap-4">
          <Button type="button" variant="outline" onClick={onCancel}>
            Cancel
          </Button>
          <Button type="submit" disabled={isSubmitting}>
            {isSubmitting && <ButtonSpinner />}
            Create Transfer
          </Button>
        </div>
      </form>
    </Form>
  );
};

export default StockTransferForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\products\components\ProductColumns.jsx"   & echo.. 
/**
 * Product Columns Definition
 * Column definitions for product DataTable
 */

import { MoreHorizontal, Eye, Edit, Trash2, XCircle } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Checkbox } from "@/components/ui/checkbox";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { formatCurrency } from "@/utils/formatters";
import { DOSAGE_FORM_LABELS, DRUG_SCHEDULE_LABELS } from "@/constants";

/**
 * Get product table columns
 */
export const getProductColumns = ({
  onView,
  onEdit,
  onDelete,
  onDiscontinue,
}) => [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={table.getIsAllPageRowsSelected()}
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
    size: 40,
  },
  {
    accessorKey: "productCode",
    header: "Code",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => (
      <span className="font-mono text-sm">{row.getValue("productCode")}</span>
    ),
    size: 120,
    enableSorting: true,
  },
  {
    accessorKey: "productName",
    header: "Product Name",
    cell: ({ row }) => (
      <div className="flex flex-col max-w-[150px] sm:max-w-none">
        <span className="font-medium text-sm truncate">
          {row.getValue("productName")}
        </span>
        {row.original.genericName && (
          <span className="text-xs text-muted-foreground truncate">
            {row.original.genericName}
          </span>
        )}
      </div>
    ),
    size: 300,
    enableSorting: true,
  },
  {
    accessorKey: "categoryName",
    id: "categoryName",
    header: "Category",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => (
      <Badge variant="outline" className="text-xs">
        {row.original.category?.categoryName || "-"}
      </Badge>
    ),
    size: 150,
    enableSorting: true,
  },
  {
    accessorKey: "dosageForm",
    header: "Form",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => (
      <span className="text-sm">
        {DOSAGE_FORM_LABELS[row.getValue("dosageForm")] ||
          row.getValue("dosageForm") ||
          "-"}
      </span>
    ),
    size: 120,
    enableSorting: true,
  },
  {
    accessorKey: "strength",
    header: "Strength",
    meta: { className: "hidden xl:table-cell" },
    cell: ({ row }) => row.getValue("strength") || "-",
    size: 100,
    enableSorting: true,
  },
  {
    accessorKey: "drugSchedule",
    header: "Schedule",
    meta: { className: "hidden xl:table-cell" },
    cell: ({ row }) => {
      const schedule = row.getValue("drugSchedule");
      if (!schedule) return "-";
      const variant =
        schedule === "X"
          ? "destructive"
          : schedule === "H"
          ? "warning"
          : "secondary";
      return (
        <Badge variant={variant} className="text-xs">
          {DRUG_SCHEDULE_LABELS[schedule] || schedule}
        </Badge>
      );
    },
    size: 100,
    enableSorting: true,
  },
  {
    accessorKey: "sellingPrice",
    header: "Price",
    cell: ({ row }) => (
      <span className="font-medium text-sm">
        {formatCurrency(row.getValue("sellingPrice"))}
      </span>
    ),
    size: 120,
    enableSorting: true,
  },
  {
    accessorKey: "isActive",
    header: "Status",
    meta: { className: "hidden sm:table-cell" },
    cell: ({ row }) => {
      const isActive = row.getValue("isActive");
      const isDiscontinued = row.original.isDiscontinued;

      if (isDiscontinued) {
        return (
          <Badge variant="destructive" className="text-xs">
            Discontinued
          </Badge>
        );
      }
      return (
        <Badge variant={isActive ? "default" : "secondary"} className="text-xs">
          {isActive ? "Active" : "Inactive"}
        </Badge>
      );
    },
    size: 120,
    enableSorting: true,
  },
  {
    id: "actions",
    header: "",
    cell: ({ row }) => {
      const product = row.original;

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" size="icon" className="h-8 w-8">
              <MoreHorizontal className="h-4 w-4" />
              <span className="sr-only">Open menu</span>
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuLabel>Actions</DropdownMenuLabel>
            <DropdownMenuSeparator />
            <DropdownMenuItem onClick={() => onView?.(product)}>
              <Eye className="mr-2 h-4 w-4" />
              View Details
            </DropdownMenuItem>
            <DropdownMenuItem onClick={() => onEdit?.(product)}>
              <Edit className="mr-2 h-4 w-4" />
              Edit
            </DropdownMenuItem>
            {!product.isDiscontinued && (
              <DropdownMenuItem onClick={() => onDiscontinue?.(product)}>
                <XCircle className="mr-2 h-4 w-4" />
                Discontinue
              </DropdownMenuItem>
            )}
            <DropdownMenuSeparator />
            <DropdownMenuItem
              onClick={() => onDelete?.(product)}
              className="text-destructive focus:text-destructive"
            >
              <Trash2 className="mr-2 h-4 w-4" />
              Delete
            </DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    size: 50,
  },
];

export default getProductColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\products\components\ProductFilters.jsx"   & echo.. 
/**
 * Product Filters Component
 * Filter controls for product list
 */

import { Search, X, Filter } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Badge } from "@/components/ui/badge";
import { useActiveCategories } from "../hooks";

/**
 * ProductFilters component
 */
const ProductFilters = ({ filters, onFilterChange, onClearFilters }) => {
  const { data: categories = [] } = useActiveCategories();

  const handleSearchChange = (e) => {
    onFilterChange({ ...filters, search: e.target.value });
  };

  const handleCategoryChange = (value) => {
    onFilterChange({
      ...filters,
      categoryId: value === "all" ? undefined : value,
    });
  };

  const handleStatusChange = (value) => {
    onFilterChange({
      ...filters,
      status: value === "all" ? undefined : value,
    });
  };

  const activeFiltersCount = [
    filters.search,
    filters.categoryId,
    filters.status,
  ].filter(Boolean).length;

  return (
    <div className="space-y-4">
      <div className="flex flex-col gap-4 sm:flex-row sm:items-center">
        {/* Search */}
        <div className="relative flex-1 max-w-sm">
          <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
          <Input
            placeholder="Search products..."
            value={filters.search || ""}
            onChange={handleSearchChange}
            className="pl-9"
          />
        </div>

        {/* Category Filter */}
        <Select
          value={filters.categoryId || "all"}
          onValueChange={handleCategoryChange}
        >
          <SelectTrigger className="w-[180px]">
            <SelectValue placeholder="Category" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Categories</SelectItem>
            {categories.map((category) => (
              <SelectItem key={category.id} value={category.id.toString()}>
                {category.categoryName}
              </SelectItem>
            ))}
          </SelectContent>
        </Select>

        {/* Status Filter */}
        <Select
          value={filters.status || "all"}
          onValueChange={handleStatusChange}
        >
          <SelectTrigger className="w-[140px]">
            <SelectValue placeholder="Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="active">Active</SelectItem>
            <SelectItem value="inactive">Inactive</SelectItem>
            <SelectItem value="discontinued">Discontinued</SelectItem>
          </SelectContent>
        </Select>

        {/* Clear Filters */}
        {activeFiltersCount > 0 && (
          <Button
            variant="ghost"
            size="sm"
            onClick={onClearFilters}
            className="gap-2"
          >
            <X className="h-4 w-4" />
            Clear Filters
            <Badge variant="secondary" className="ml-1">
              {activeFiltersCount}
            </Badge>
          </Button>
        )}
      </div>
    </div>
  );
};

export default ProductFilters;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\products\components\ProductForm.jsx"   & echo.. 
/**
 * Product Form Component
 * Reusable form for creating and editing products
 */

import { useEffect } from "react";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { Loader2 } from "lucide-react";
import { productSchema } from "@/utils/validators";
import { useActiveCategories } from "../hooks";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Checkbox } from "@/components/ui/checkbox";
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import {
  DOSAGE_FORM,
  DOSAGE_FORM_LABELS,
  DRUG_SCHEDULE,
  DRUG_SCHEDULE_LABELS,
} from "@/constants";

/**
 * ProductForm component
 */
const ProductForm = ({ product, onSubmit, isSubmitting = false, onCancel }) => {
  const { data: categories = [], isLoading: loadingCategories } =
    useActiveCategories();

  const form = useForm({
    resolver: zodResolver(productSchema),
    defaultValues: {
      productName: "",
      genericName: "",
      categoryId: "",
      dosageForm: "",
      strength: "",
      drugSchedule: "",
      manufacturer: "",
      barcode: "",
      description: "",
      costPrice: "",
      sellingPrice: "",
      mrp: "",
      gstRate: "",
      reorderLevel: "",
      minimumStock: "",
      maximumStock: "",
      isPrescriptionRequired: false,
      isNarcotic: false,
      isRefrigerated: false,
    },
  });

  // Populate form when editing
  useEffect(() => {
    if (product) {
      form.reset({
        productName: product.productName || "",
        genericName: product.genericName || "",
        categoryId: (product.categoryId || product.category?.id)?.toString() || "",
        dosageForm: product.dosageForm || "",
        strength: product.strength || "",
        drugSchedule: product.drugSchedule || "",
        manufacturer: product.manufacturer || "",
        barcode: product.barcode || "",
        description: product.description || "",
        costPrice: product.costPrice?.toString() || "",
        sellingPrice: product.sellingPrice?.toString() || "",
        mrp: product.mrp?.toString() || "",
        gstRate: product.gstRate?.toString() || "",
        reorderLevel: product.reorderLevel?.toString() || "",
        minimumStock: product.minimumStock?.toString() || "",
        maximumStock: product.maximumStock?.toString() || "",
        isPrescriptionRequired: product.isPrescriptionRequired || false,
        isNarcotic: product.isNarcotic || false,
        isRefrigerated: product.isRefrigerated || false,
      });
    }
  }, [product, form]);

  const handleSubmit = (data) => {
    // Convert string values to numbers and handle empty enums
    const formattedData = {
      ...data,
      categoryId: data.categoryId ? parseInt(data.categoryId) : null,
      dosageForm: data.dosageForm || null,
      drugSchedule: data.drugSchedule || null,
      costPrice: data.costPrice ? parseFloat(data.costPrice) : null,
      sellingPrice: data.sellingPrice ? parseFloat(data.sellingPrice) : null,
      mrp: data.mrp ? parseFloat(data.mrp) : null,
      gstRate: data.gstRate ? parseFloat(data.gstRate) : null,
      reorderLevel: data.reorderLevel ? parseInt(data.reorderLevel) : null,
      minimumStock: data.minimumStock ? parseInt(data.minimumStock) : null,
      maximumStock: data.maximumStock ? parseInt(data.maximumStock) : null,
    };
    onSubmit(formattedData);
  };

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-6">
        {/* Basic Information */}
        <Card>
          <CardHeader>
            <CardTitle className="text-lg">Basic Information</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 sm:grid-cols-2">
            <FormField
              control={form.control}
              name="productName"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Product Name *</FormLabel>
                  <FormControl>
                    <Input placeholder="Enter product name" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="genericName"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Generic Name</FormLabel>
                  <FormControl>
                    <Input placeholder="Enter generic name" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="categoryId"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Category *</FormLabel>
                  <Select
                    onValueChange={field.onChange}
                    value={field.value}
                    defaultValue={field.value}
                    disabled={loadingCategories}
                  >
                    <FormControl>
                      <SelectTrigger>
                        <SelectValue
                          placeholder={
                            loadingCategories ? "Loading..." : "Select category"
                          }
                        />
                      </SelectTrigger>
                    </FormControl>
                    <SelectContent>
                      {!loadingCategories &&
                      categories &&
                      categories.length > 0 ? (
                        categories.map((category) => (
                          <SelectItem
                            key={category.id}
                            value={category.id.toString()}
                          >
                            {category.categoryName}
                          </SelectItem>
                        ))
                      ) : !loadingCategories ? (
                        <SelectItem value="none" disabled>
                          No categories available
                        </SelectItem>
                      ) : null}
                    </SelectContent>
                  </Select>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="dosageForm"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Dosage Form</FormLabel>
                  <Select onValueChange={field.onChange} value={field.value} defaultValue={field.value}>
                    <FormControl>
                      <SelectTrigger>
                        <SelectValue placeholder="Select dosage form" />
                      </SelectTrigger>
                    </FormControl>
                    <SelectContent>
                      {Object.entries(DOSAGE_FORM).map(([key, value]) => (
                        <SelectItem key={key} value={value}>
                          {DOSAGE_FORM_LABELS[value]}
                        </SelectItem>
                      ))}
                    </SelectContent>
                  </Select>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="strength"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Strength</FormLabel>
                  <FormControl>
                    <Input placeholder="e.g., 500mg" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="drugSchedule"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Drug Schedule</FormLabel>
                  <Select onValueChange={field.onChange} value={field.value} defaultValue={field.value}>
                    <FormControl>
                      <SelectTrigger>
                        <SelectValue placeholder="Select schedule" />
                      </SelectTrigger>
                    </FormControl>
                    <SelectContent>
                      {Object.entries(DRUG_SCHEDULE).map(([key, value]) => (
                        <SelectItem key={key} value={value}>
                          {DRUG_SCHEDULE_LABELS[value]}
                        </SelectItem>
                      ))}
                    </SelectContent>
                  </Select>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="manufacturer"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Manufacturer</FormLabel>
                  <FormControl>
                    <Input placeholder="Enter manufacturer" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="barcode"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Barcode</FormLabel>
                  <FormControl>
                    <Input placeholder="Enter barcode" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="description"
              render={({ field }) => (
                <FormItem className="sm:col-span-2">
                  <FormLabel>Description</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="Enter product description"
                      className="min-h-[80px]"
                      {...field}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Pricing */}
        <Card>
          <CardHeader>
            <CardTitle className="text-lg">Pricing</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
            <FormField
              control={form.control}
              name="costPrice"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Cost Price *</FormLabel>
                  <FormControl>
                    <Input
                      type="number"
                      step="0.01"
                      placeholder="0.00"
                      {...field}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="sellingPrice"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Selling Price *</FormLabel>
                  <FormControl>
                    <Input
                      type="number"
                      step="0.01"
                      placeholder="0.00"
                      {...field}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="mrp"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>MRP</FormLabel>
                  <FormControl>
                    <Input
                      type="number"
                      step="0.01"
                      placeholder="0.00"
                      {...field}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="gstRate"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>GST Rate (%)</FormLabel>
                  <FormControl>
                    <Input
                      type="number"
                      step="0.01"
                      placeholder="0"
                      {...field}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Inventory Settings */}
        <Card>
          <CardHeader>
            <CardTitle className="text-lg">Inventory Settings</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 sm:grid-cols-3">
            <FormField
              control={form.control}
              name="reorderLevel"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Reorder Level</FormLabel>
                  <FormControl>
                    <Input type="number" placeholder="0" {...field} />
                  </FormControl>
                  <FormDescription>
                    Alert when stock falls below
                  </FormDescription>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="minimumStock"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Minimum Stock</FormLabel>
                  <FormControl>
                    <Input type="number" placeholder="0" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="maximumStock"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Maximum Stock</FormLabel>
                  <FormControl>
                    <Input type="number" placeholder="0" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Flags */}
        <Card>
          <CardHeader>
            <CardTitle className="text-lg">Additional Settings</CardTitle>
          </CardHeader>
          <CardContent className="flex flex-wrap gap-6">
            <FormField
              control={form.control}
              name="isPrescriptionRequired"
              render={({ field }) => (
                <FormItem className="flex flex-row items-start space-x-3 space-y-0">
                  <FormControl>
                    <Checkbox
                      checked={field.value}
                      onCheckedChange={field.onChange}
                    />
                  </FormControl>
                  <div className="space-y-1 leading-none">
                    <FormLabel>Prescription Required</FormLabel>
                    <FormDescription>
                      Requires valid prescription to sell
                    </FormDescription>
                  </div>
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="isNarcotic"
              render={({ field }) => (
                <FormItem className="flex flex-row items-start space-x-3 space-y-0">
                  <FormControl>
                    <Checkbox
                      checked={field.value}
                      onCheckedChange={field.onChange}
                    />
                  </FormControl>
                  <div className="space-y-1 leading-none">
                    <FormLabel>Narcotic Drug</FormLabel>
                    <FormDescription>
                      Subject to special regulations
                    </FormDescription>
                  </div>
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="isRefrigerated"
              render={({ field }) => (
                <FormItem className="flex flex-row items-start space-x-3 space-y-0">
                  <FormControl>
                    <Checkbox
                      checked={field.value}
                      onCheckedChange={field.onChange}
                    />
                  </FormControl>
                  <div className="space-y-1 leading-none">
                    <FormLabel>Requires Refrigeration</FormLabel>
                    <FormDescription>
                      Must be stored in cold chain
                    </FormDescription>
                  </div>
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Actions */}
        <div className="flex justify-end gap-3">
          {onCancel && (
            <Button type="button" variant="outline" onClick={onCancel}>
              Cancel
            </Button>
          )}
          <Button type="submit" disabled={isSubmitting}>
            {isSubmitting && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
            {product ? "Update Product" : "Create Product"}
          </Button>
        </div>
      </form>
    </Form>
  );
};

export default ProductForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\purchase-orders\components\PurchaseOrderColumns.jsx"   & echo.. 
/**
 * Purchase Order Columns Definition
 * Defines the columns for the purchase orders DataTable
 */

import { Checkbox } from "@/components/ui/checkbox";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import {
  MoreHorizontal,
  Eye,
  Edit,
  Trash2,
  Send,
  CheckCircle,
  XCircle,
  Package,
} from "lucide-react";
import { formatDate, formatCurrency } from "@/utils/formatters";

// Status badge configuration
const statusConfig = {
  DRAFT: { label: "Draft", variant: "secondary" },
  PENDING_APPROVAL: { label: "Pending", variant: "warning" },
  APPROVED: { label: "Approved", variant: "default" },
  REJECTED: { label: "Rejected", variant: "destructive" },
  ORDERED: { label: "Ordered", variant: "outline" },
  PARTIALLY_RECEIVED: { label: "Partial", variant: "warning" },
  RECEIVED: { label: "Received", variant: "success" },
  CANCELLED: { label: "Cancelled", variant: "secondary" },
};

/**
 * Get column definitions for purchase orders table
 */
export const getPurchaseOrderColumns = ({
  onView,
  onEdit,
  onDelete,
  onSubmit,
  onApprove,
  onReject,
  onReceive,
  currentUserRole,
  hasPermission,
} = {}) => [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() ||
          (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
        className="translate-y-[2px]"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
        className="translate-y-[2px]"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "poNumber",
    header: "PO Number",
    cell: ({ row }) => (
      <span className="font-mono text-xs sm:text-sm font-medium">
        {row.getValue("poNumber")}
      </span>
    ),
  },
  {
    accessorKey: "supplier",
    header: "Supplier",
    cell: ({ row }) => {
      const supplier = row.original.supplier;
      return (
        <span className="truncate max-w-[100px] sm:max-w-none block">
          {supplier?.name || "-"}
        </span>
      );
    },
  },
  {
    accessorKey: "orderDate",
    header: "Order Date",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => formatDate(row.getValue("orderDate")),
  },
  {
    accessorKey: "expectedDate",
    header: "Expected",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => formatDate(row.getValue("expectedDate")) || "-",
  },
  {
    accessorKey: "itemCount",
    header: "Items",
    meta: { className: "hidden sm:table-cell" },
    cell: ({ row }) => {
      const items = row.original.items || [];
      return items.length;
    },
  },
  {
    accessorKey: "totalAmount",
    header: "Total",
    cell: ({ row }) => (
      <span className="font-medium text-sm">
        {formatCurrency(row.getValue("totalAmount"))}
      </span>
    ),
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => {
      const status = row.getValue("status");
      const config = statusConfig[status] || {
        label: status,
        variant: "secondary",
      };
      return (
        <Badge variant={config.variant} className="text-xs">
          {config.label}
        </Badge>
      );
    },
  },
  {
    id: "actions",
    header: "Actions",
    cell: ({ row }) => {
      const po = row.original;
      const status = po.status;

      // Combine status checks with permission checks
      // Note: SUPER_ADMIN creates orders directly as APPROVED, bypassing DRAFT/PENDING_APPROVAL states
      const canEdit = status === "DRAFT" && (!hasPermission || hasPermission("purchaseOrders", "edit"));
      const canSubmit = status === "DRAFT" && (!hasPermission || hasPermission("purchaseOrders", "edit"));
      const canApprove = status === "PENDING_APPROVAL" && (!hasPermission || hasPermission("purchaseOrders", "approve"));
      const canReject = status === "PENDING_APPROVAL" && (!hasPermission || hasPermission("purchaseOrders", "reject"));
      const canReceive = (status === "APPROVED" || status === "ORDERED") && (!hasPermission || hasPermission("grn", "create"));
      const canDelete = status === "DRAFT" && (!hasPermission || hasPermission("purchaseOrders", "delete"));

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuItem onClick={() => onView?.(po)}>
              <Eye className="mr-2 h-4 w-4" />
              View
            </DropdownMenuItem>
            {canEdit && (
              <DropdownMenuItem onClick={() => onEdit?.(po)}>
                <Edit className="mr-2 h-4 w-4" />
                Edit
              </DropdownMenuItem>
            )}
            <DropdownMenuSeparator />
            {canSubmit && (
              <DropdownMenuItem onClick={() => onSubmit?.(po)}>
                <Send className="mr-2 h-4 w-4" />
                Submit for Approval
              </DropdownMenuItem>
            )}
            {canApprove && (
              <>
                <DropdownMenuItem onClick={() => onApprove?.(po)}>
                  <CheckCircle className="mr-2 h-4 w-4" />
                  Approve
                </DropdownMenuItem>
              </>
            )}
            {canReject && (
              <DropdownMenuItem onClick={() => onReject?.(po)}>
                <XCircle className="mr-2 h-4 w-4" />
                Reject
              </DropdownMenuItem>
            )}
            {canReceive && (
              <DropdownMenuItem onClick={() => onReceive?.(po)}>
                <Package className="mr-2 h-4 w-4" />
                Receive (Create GRN)
              </DropdownMenuItem>
            )}
            {canDelete && (
              <>
                <DropdownMenuSeparator />
                <DropdownMenuItem
                  onClick={() => onDelete?.(po)}
                  className="text-destructive focus:text-destructive"
                >
                  <Trash2 className="mr-2 h-4 w-4" />
                  Delete
                </DropdownMenuItem>
              </>
            )}
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    enableSorting: false,
    enableHiding: false,
  },
];

export default getPurchaseOrderColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\purchase-orders\components\PurchaseOrderForm.jsx"   & echo.. 
/**
 * Purchase Order Form Component
 * Form for creating and editing purchase orders
 */

import { useState, useEffect, useMemo } from "react";
import { useFieldArray, useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { Plus, Trash2, Search, Package } from "lucide-react";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Separator } from "@/components/ui/separator";
import { ButtonSpinner } from "@/components/common";
import { formatCurrency } from "@/utils/formatters";

// Line item schema
const lineItemSchema = z.object({
  productId: z.string().min(1, "Product is required"),
  productName: z.string().optional(),
  quantity: z.number().min(1, "Quantity must be at least 1"),
  unitPrice: z.number().min(0, "Unit price must be positive"),
  discount: z.number().min(0).max(100).default(0),
  taxRate: z.number().min(0).max(100).default(0),
});

// Validation schema
const purchaseOrderSchema = z.object({
  supplierId: z.string().min(1, "Supplier is required"),
  orderDate: z.string().min(1, "Order date is required"),
  expectedDate: z.string().optional().nullable(),
  notes: z.string().max(500).optional().nullable(),
  items: z.array(lineItemSchema).min(1, "At least one item is required"),
});

/**
 * PurchaseOrderForm component
 */
const PurchaseOrderForm = ({
  purchaseOrder,
  suppliers = [],
  products = [],
  onSubmit,
  onCancel,
  isSubmitting = false,
  onProductSearch,
}) => {
  const isEditing = Boolean(purchaseOrder);
  const [productSearch, setProductSearch] = useState("");

  // Normalize products input to a flat array to prevent filter errors
  const productList = useMemo(() => {
    if (Array.isArray(products)) return products;
    if (products?.content && Array.isArray(products.content))
      return products.content;
    return [];
  }, [products]);

  // Debug: Log suppliers in form component
  console.log('PO Form Component - Suppliers:', suppliers);
  console.log('PO Form Component - Suppliers length:', suppliers?.length);
  console.log('PO Form Component - Products:', products);
  console.log('PO Form Component - Product list:', productList);
  console.log('PO Form Component - Product list length:', productList?.length);

  const form = useForm({
    resolver: zodResolver(purchaseOrderSchema),
    defaultValues: {
      supplierId: "",
      orderDate: new Date().toISOString().split("T")[0],
      expectedDate: "",
      notes: "",
      items: [],
    },
  });

  const { fields, append, remove } = useFieldArray({
    control: form.control,
    name: "items",
  });

  const items = form.watch("items");

  // Populate form when editing
  useEffect(() => {
    if (purchaseOrder) {
      form.reset({
        supplierId: purchaseOrder.supplierId?.toString() || "",
        orderDate: purchaseOrder.orderDate?.split("T")[0] || "",
        expectedDate: purchaseOrder.expectedDate?.split("T")[0] || "",
        notes: purchaseOrder.notes || "",
        items:
          purchaseOrder.items?.map((item) => ({
            productId: item.productId?.toString() || "",
            productName: item.productName || item.product?.name || "",
            quantity: item.quantity || 1,
            unitPrice: item.unitPrice || 0,
            discount: item.discount || 0,
            taxRate: item.taxRate || 0,
          })) || [],
      });
    }
  }, [purchaseOrder, form]);

  // Calculate totals
  const calculateLineTotal = (item) => {
    const subtotal = item.quantity * item.unitPrice;
    const discountAmount = subtotal * (item.discount / 100);
    const afterDiscount = subtotal - discountAmount;
    const taxAmount = afterDiscount * (item.taxRate / 100);
    return afterDiscount + taxAmount;
  };

  const subtotal = items.reduce(
    (sum, item) => sum + item.quantity * item.unitPrice,
    0
  );
  const totalDiscount = items.reduce((sum, item) => {
    const itemSubtotal = item.quantity * item.unitPrice;
    return sum + itemSubtotal * (item.discount / 100);
  }, 0);
  const totalTax = items.reduce((sum, item) => {
    const itemSubtotal = item.quantity * item.unitPrice;
    const afterDiscount = itemSubtotal - itemSubtotal * (item.discount / 100);
    return sum + afterDiscount * (item.taxRate / 100);
  }, 0);
  const grandTotal = subtotal - totalDiscount + totalTax;

  // Add product to order
  const handleAddProduct = (product) => {
    const exists = fields.find((f) => f.productId === product.id?.toString());
    if (exists) {
      // Increment quantity if already exists
      const index = fields.findIndex(
        (f) => f.productId === product.id?.toString()
      );
      const currentQty = form.getValues(`items.${index}.quantity`);
      form.setValue(`items.${index}.quantity`, currentQty + 1);
    } else {
      append({
        productId: product.id?.toString(),
        productName: product.productName || product.name,
        quantity: 1,
        unitPrice: product.costPrice || product.purchasePrice || product.sellingPrice || 0,
        discount: 0,
        taxRate: product.taxRate || product.gstRate || 0,
      });
    }
    setProductSearch("");
  };

  // Filter products based on search
  const filteredProducts = productList
    .filter(
      (p) => {
        const name = (p.productName || p.name || '').toLowerCase();
        const sku = (p.sku || p.productCode || '').toLowerCase();
        const search = productSearch.toLowerCase();
        return name.includes(search) || sku.includes(search);
      }
    )
    .slice(0, 10);

  const handleSubmit = (data) => {
    onSubmit({
      ...data,
      totalAmount: grandTotal,
    });
  };

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-6">
        {/* Header Info */}
        <Card>
          <CardHeader>
            <CardTitle>Order Details</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            <FormField
              control={form.control}
              name="supplierId"
              render={({ field }) => (
                <FormItem className="md:col-span-2">
                  <FormLabel>Supplier *</FormLabel>
                  <Select onValueChange={field.onChange} value={field.value}>
                    <FormControl>
                      <SelectTrigger>
                        <SelectValue placeholder="Select supplier" />
                      </SelectTrigger>
                    </FormControl>
                    <SelectContent>
                      {suppliers.length === 0 ? (
                        <div className="py-6 text-center text-sm text-muted-foreground">
                          No active suppliers found
                        </div>
                      ) : (
                        suppliers.map((supplier) => (
                          <SelectItem
                            key={supplier.id}
                            value={supplier.id?.toString()}
                          >
                            {supplier.supplierName || supplier.name}
                          </SelectItem>
                        ))
                      )}
                    </SelectContent>
                  </Select>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="orderDate"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Order Date *</FormLabel>
                  <FormControl>
                    <Input type="date" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="expectedDate"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Expected Delivery</FormLabel>
                  <FormControl>
                    <Input type="date" {...field} value={field.value || ""} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Product Search */}
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle>Order Items</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            {/* Search Products */}
            <div className="relative">
              <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
              <Input
                placeholder="Search products by name or SKU..."
                value={productSearch}
                onChange={(e) => setProductSearch(e.target.value)}
                className="pl-10"
              />
              {productSearch && filteredProducts.length > 0 && (
                <div className="absolute z-10 mt-1 w-full rounded-md border bg-popover shadow-lg">
                  {filteredProducts.map((product) => (
                    <button
                      key={product.id}
                      type="button"
                      className="w-full px-4 py-2 text-left text-sm hover:bg-muted flex justify-between"
                      onClick={() => handleAddProduct(product)}
                    >
                      <span>{product.productName || product.name}</span>
                      <span className="text-muted-foreground">
                        {product.sku || product.productCode}
                      </span>
                    </button>
                  ))}
                </div>
              )}
            </div>

            {/* Items Table */}
            {fields.length > 0 ? (
              <div className="rounded-md border">
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead className="w-[40%]">Product</TableHead>
                      <TableHead className="text-right">Qty</TableHead>
                      <TableHead className="text-right">Unit Price</TableHead>
                      <TableHead className="text-right">Discount %</TableHead>
                      <TableHead className="text-right">Tax %</TableHead>
                      <TableHead className="text-right">Total</TableHead>
                      <TableHead className="w-[50px]"></TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {fields.map((field, index) => {
                      const item = items[index] || {};
                      const lineTotal = calculateLineTotal(item);

                      return (
                        <TableRow key={field.id}>
                          <TableCell>
                            <span className="font-medium">
                              {item.productName}
                            </span>
                          </TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              min={1}
                              className="w-20 text-right"
                              {...form.register(`items.${index}.quantity`, {
                                valueAsNumber: true,
                              })}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              min={0}
                              step={0.01}
                              className="w-24 text-right"
                              {...form.register(`items.${index}.unitPrice`, {
                                valueAsNumber: true,
                              })}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              min={0}
                              max={100}
                              step={0.1}
                              className="w-20 text-right"
                              {...form.register(`items.${index}.discount`, {
                                valueAsNumber: true,
                              })}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              min={0}
                              max={100}
                              step={0.1}
                              className="w-20 text-right"
                              {...form.register(`items.${index}.taxRate`, {
                                valueAsNumber: true,
                              })}
                            />
                          </TableCell>
                          <TableCell className="text-right font-medium">
                            {formatCurrency(lineTotal)}
                          </TableCell>
                          <TableCell>
                            <Button
                              type="button"
                              variant="ghost"
                              size="icon"
                              onClick={() => remove(index)}
                            >
                              <Trash2 className="h-4 w-4 text-destructive" />
                            </Button>
                          </TableCell>
                        </TableRow>
                      );
                    })}
                  </TableBody>
                </Table>
              </div>
            ) : (
              <div className="flex flex-col items-center justify-center py-8 text-muted-foreground">
                <Package className="h-12 w-12 mb-2" />
                <p>No items added. Search and add products above.</p>
              </div>
            )}

            {/* Totals */}
            {fields.length > 0 && (
              <div className="flex justify-end">
                <div className="w-[300px] space-y-2">
                  <div className="flex justify-between text-sm">
                    <span>Subtotal</span>
                    <span>{formatCurrency(subtotal)}</span>
                  </div>
                  <div className="flex justify-between text-sm text-muted-foreground">
                    <span>Discount</span>
                    <span>-{formatCurrency(totalDiscount)}</span>
                  </div>
                  <div className="flex justify-between text-sm text-muted-foreground">
                    <span>Tax</span>
                    <span>+{formatCurrency(totalTax)}</span>
                  </div>
                  <Separator />
                  <div className="flex justify-between font-bold">
                    <span>Grand Total</span>
                    <span>{formatCurrency(grandTotal)}</span>
                  </div>
                </div>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Notes */}
        <Card>
          <CardHeader>
            <CardTitle>Notes</CardTitle>
          </CardHeader>
          <CardContent>
            <FormField
              control={form.control}
              name="notes"
              render={({ field }) => (
                <FormItem>
                  <FormControl>
                    <Textarea
                      placeholder="Add any notes or special instructions..."
                      className="resize-none"
                      rows={3}
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Actions */}
        <div className="flex justify-end gap-4">
          <Button type="button" variant="outline" onClick={onCancel}>
            Cancel
          </Button>
          <Button type="submit" disabled={isSubmitting || fields.length === 0}>
            {isSubmitting && <ButtonSpinner />}
            {isEditing ? "Update Order" : "Create Order"}
          </Button>
        </div>
      </form>
    </Form>
  );
};

export default PurchaseOrderForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\reports\components\ReportFilters.jsx"   & echo.. 
/**
 * Report Filter Component
 * Common date range and filter controls for reports
 */

import { useState } from "react";
import {
  format,
  subDays,
  startOfMonth,
  endOfMonth,
  startOfYear,
} from "date-fns";
import {
  CalendarDays,
  Download,
  FileSpreadsheet,
  FileText,
} from "lucide-react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { Card, CardContent } from "@/components/ui/card";

// Preset date ranges
const presets = [
  { label: "Today", getValue: () => ({ start: new Date(), end: new Date() }) },
  {
    label: "Yesterday",
    getValue: () => ({
      start: subDays(new Date(), 1),
      end: subDays(new Date(), 1),
    }),
  },
  {
    label: "Last 7 days",
    getValue: () => ({ start: subDays(new Date(), 7), end: new Date() }),
  },
  {
    label: "Last 30 days",
    getValue: () => ({ start: subDays(new Date(), 30), end: new Date() }),
  },
  {
    label: "This Month",
    getValue: () => ({
      start: startOfMonth(new Date()),
      end: endOfMonth(new Date()),
    }),
  },
  {
    label: "This Year",
    getValue: () => ({ start: startOfYear(new Date()), end: new Date() }),
  },
];

/**
 * ReportFilters component
 */
const ReportFilters = ({
  startDate,
  endDate,
  onDateChange,
  branchId,
  onBranchChange,
  branches = [],
  showBranchFilter = true,
  onExport,
  isLoading = false,
  children,
}) => {
  const [preset, setPreset] = useState("");

  const handlePresetChange = (value) => {
    setPreset(value);
    const presetConfig = presets.find((p) => p.label === value);
    if (presetConfig) {
      const { start, end } = presetConfig.getValue();
      onDateChange({
        startDate: format(start, "yyyy-MM-dd"),
        endDate: format(end, "yyyy-MM-dd"),
      });
    }
  };

  const handleStartDateChange = (e) => {
    setPreset("");
    onDateChange({ startDate: e.target.value, endDate });
  };

  const handleEndDateChange = (e) => {
    setPreset("");
    onDateChange({ startDate, endDate: e.target.value });
  };

  return (
    <Card>
      <CardContent className="pt-6">
        <div className="flex flex-wrap gap-4 items-end">
          {/* Date Preset */}
          <div className="space-y-2">
            <Label>Quick Select</Label>
            <Select value={preset} onValueChange={handlePresetChange}>
              <SelectTrigger className="w-[150px]">
                <SelectValue placeholder="Choose..." />
              </SelectTrigger>
              <SelectContent>
                {presets.map((p) => (
                  <SelectItem key={p.label} value={p.label}>
                    {p.label}
                  </SelectItem>
                ))}
              </SelectContent>
            </Select>
          </div>

          {/* Date Range */}
          <div className="space-y-2">
            <Label>Start Date</Label>
            <div className="relative">
              <CalendarDays className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
              <Input
                type="date"
                value={startDate}
                onChange={handleStartDateChange}
                className="pl-10 w-[160px]"
              />
            </div>
          </div>

          <div className="space-y-2">
            <Label>End Date</Label>
            <div className="relative">
              <CalendarDays className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
              <Input
                type="date"
                value={endDate}
                onChange={handleEndDateChange}
                className="pl-10 w-[160px]"
              />
            </div>
          </div>

          {/* Branch Filter */}
          {showBranchFilter && branches.length > 0 && (
            <div className="space-y-2">
              <Label>Branch</Label>
              <Select value={branchId || "all"} onValueChange={onBranchChange}>
                <SelectTrigger className="w-[180px]">
                  <SelectValue placeholder="All Branches" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="all">All Branches</SelectItem>
                  {branches.map((branch) => (
                    <SelectItem key={branch.id} value={branch.id?.toString()}>
                      {branch.branchName}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>
          )}

          {/* Additional Filters */}
          {children}

          {/* Spacer */}
          <div className="flex-1" />

          {/* Export Button */}
          {onExport && (
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button variant="outline" disabled={isLoading}>
                  <Download className="mr-2 h-4 w-4" />
                  Export
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end">
                <DropdownMenuItem onClick={() => onExport("pdf")}>
                  <FileText className="mr-2 h-4 w-4" />
                  Export as PDF
                </DropdownMenuItem>
                <DropdownMenuItem onClick={() => onExport("excel")}>
                  <FileSpreadsheet className="mr-2 h-4 w-4" />
                  Export as Excel
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          )}
        </div>
      </CardContent>
    </Card>
  );
};

export default ReportFilters;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\reports\components\ReportSummaryCard.jsx"   & echo.. 
/**
 * Report Summary Card Component
 * Displays a summary metric in a card format
 */

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { cn } from "@/lib/utils";

/**
 * ReportSummaryCard component
 */
const ReportSummaryCard = ({
  title,
  value,
  description,
  icon: Icon,
  trend,
  trendValue,
  className,
}) => {
  const trendColors = {
    up: "text-green-600",
    down: "text-red-600",
    neutral: "text-muted-foreground",
  };

  return (
    <Card className={className}>
      <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        <CardTitle className="text-sm font-medium">{title}</CardTitle>
        {Icon && <Icon className="h-4 w-4 text-muted-foreground" />}
      </CardHeader>
      <CardContent>
        <div className="text-2xl font-bold">{value}</div>
        {(description || trendValue) && (
          <p className="text-xs text-muted-foreground mt-1">
            {trendValue && (
              <span
                className={cn(
                  "mr-1",
                  trendColors[trend] || trendColors.neutral
                )}
              >
                {trend === "up" ? "" : trend === "down" ? "" : ""}{" "}
                {trendValue}
              </span>
            )}
            {description}
          </p>
        )}
      </CardContent>
    </Card>
  );
};

export default ReportSummaryCard;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\sales\components\POSCart.jsx"   & echo.. 
/**
 * POS Cart Component
 * Displays cart items with quantity controls
 */

import { Minus, Plus, Trash2, Percent } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { ScrollArea } from "@/components/ui/scroll-area";
import { formatCurrency } from "@/utils/formatters";
import { usePOSStore } from "../store";

const POSCart = () => {
  const items = usePOSStore((state) => state.items);
  const updateItemQuantity = usePOSStore((state) => state.updateItemQuantity);
  const updateItemDiscount = usePOSStore((state) => state.updateItemDiscount);
  const removeItem = usePOSStore((state) => state.removeItem);

  if (items.length === 0) {
    return (
      <div className="flex flex-col items-center justify-center h-full text-muted-foreground py-12">
        <div className="text-6xl mb-4"></div>
        <p className="text-lg">Cart is empty</p>
        <p className="text-sm">Search for products to add them here</p>
      </div>
    );
  }

  return (
    <ScrollArea className="flex-1 min-h-0">
      <div className="space-y-2 pr-2 sm:pr-4">
        {items.map((item, index) => {
          const itemTotal = item.unitPrice * item.quantity;
          const discountAmount = (itemTotal * item.discount) / 100;
          const finalTotal = itemTotal - discountAmount;

          return (
            <div
              key={`${item.productId}-${item.batchId || index}`}
              className="flex gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg border bg-card"
            >
              {/* Product Info */}
              <div className="flex-1 min-w-0">
                <div className="flex items-center gap-1 flex-wrap">
                  <p className="font-medium text-sm truncate">
                    {item.productName}
                  </p>
                  {item.isPrescriptionRequired && (
                    <Badge variant="destructive" className="text-xs h-4">
                      
                    </Badge>
                  )}
                  {item.isNarcotic && (
                    <Badge variant="destructive" className="text-xs h-4">
                      N
                    </Badge>
                  )}
                  {item.isRefrigerated && (
                    <Badge variant="default" className="text-xs h-4">
                      
                    </Badge>
                  )}
                </div>
                <div className="space-y-0.5">
                  <p className="text-xs text-muted-foreground truncate">
                    {item.sku || item.productCode}
                  </p>
                  {item.batchNumber && (
                    <p className="text-xs text-muted-foreground truncate">
                      <span className="font-semibold">Batch:</span> {item.batchNumber}
                      {item.expiryDate && `  Exp: ${new Date(item.expiryDate).toLocaleDateString()}`}
                    </p>
                  )}
                  {(item.strength || item.dosageForm) && (
                    <p className="text-xs text-muted-foreground truncate">
                      {item.strength} {item.dosageForm && ` ${item.dosageForm}`}
                    </p>
                  )}
                  {item.manufacturer && (
                    <p className="text-xs text-muted-foreground truncate">
                      {item.manufacturer}
                    </p>
                  )}
                </div>
                <p className="text-xs sm:text-sm font-medium mt-1">
                  {formatCurrency(item.unitPrice)} each
                </p>
              </div>

              {/* Quantity Controls */}
              <div className="flex flex-col items-end gap-1 sm:gap-2">
                <div className="flex items-center gap-0.5 sm:gap-1">
                  <Button
                    variant="outline"
                    size="icon"
                    className="h-7 w-7 sm:h-8 sm:w-8"
                    onClick={() => updateItemQuantity(index, item.quantity - 1)}
                  >
                    <Minus className="h-3 w-3" />
                  </Button>
                  <Input
                    type="number"
                    value={item.quantity}
                    onChange={(e) =>
                      updateItemQuantity(index, parseInt(e.target.value) || 0)
                    }
                    className="w-12 sm:w-16 h-7 sm:h-8 text-center text-sm"
                    min={0}
                    max={item.maxQuantity}
                  />
                  <Button
                    variant="outline"
                    size="icon"
                    className="h-7 w-7 sm:h-8 sm:w-8"
                    onClick={() => updateItemQuantity(index, item.quantity + 1)}
                    disabled={item.quantity >= item.maxQuantity}
                  >
                    <Plus className="h-3 w-3" />
                  </Button>
                </div>

                {/* Item Discount - hidden on mobile */}
                <div className="hidden sm:flex items-center gap-1">
                  <Percent className="h-3 w-3 text-muted-foreground" />
                  <Input
                    type="number"
                    value={item.discount}
                    onChange={(e) =>
                      updateItemDiscount(index, parseFloat(e.target.value) || 0)
                    }
                    className="w-16 h-6 text-center text-xs"
                    min={0}
                    max={100}
                  />
                </div>

                {/* Line Total */}
                <div className="text-right">
                  {item.discount > 0 && (
                    <p className="text-xs text-muted-foreground line-through">
                      {formatCurrency(itemTotal)}
                    </p>
                  )}
                  <p className="font-bold text-sm">
                    {formatCurrency(finalTotal)}
                  </p>
                </div>
              </div>

              {/* Remove Button */}
              <Button
                variant="ghost"
                size="icon"
                className="h-7 w-7 sm:h-8 sm:w-8 text-destructive hover:text-destructive"
                onClick={() => removeItem(index)}
              >
                <Trash2 className="h-4 w-4" />
              </Button>
            </div>
          );
        })}
      </div>
    </ScrollArea>
  );
};

export default POSCart;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\sales\components\POSProductSearch.jsx"   & echo.. 
/**
 * POS Product Search Component
 * Search and add products to cart with advanced search capabilities
 */

import { useState, useRef, useEffect, useMemo } from "react";
import { Search, Barcode } from "lucide-react";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { formatCurrency } from "@/utils/formatters";
import { useDebounce } from "@/hooks/useDebounce";
import { usePOSStore } from "../store";
import { toast } from "sonner";

/**
 * Advanced product search algorithm
 * Supports: exact barcode match, name search, generic name search, SKU search, partial matches
 */
const searchProducts = (products, searchTerm) => {
  if (!searchTerm || searchTerm.trim().length === 0) return [];

  const query = searchTerm.trim().toLowerCase();
  const results = [];

  products.forEach((product) => {
    // Handle various possible field names from API
    const name = (product.name || product.productName || "").toLowerCase();
    const sku = (product.sku || product.productCode || "").toLowerCase();
    const barcode = (product.barcode || "").toLowerCase();
    const genericName = (product.genericName || "").toLowerCase();
    const manufacturer = (product.manufacturer || "").toLowerCase();
    const description = (product.description || "").toLowerCase();

    let score = 0;
    let matchType = "";

    // Priority 1: Exact barcode match (instant add)
    if (barcode && barcode === query) {
      score = 1000;
      matchType = "barcode-exact";
    }
    // Priority 2: Barcode starts with query
    else if (barcode && barcode.startsWith(query)) {
      score = 900;
      matchType = "barcode-prefix";
    }
    // Priority 3: Barcode contains query
    else if (barcode && barcode.includes(query)) {
      score = 800;
      matchType = "barcode-partial";
    }
    // Priority 4: Exact SKU match
    else if (sku && sku === query) {
      score = 700;
      matchType = "sku-exact";
    }
    // Priority 5: SKU starts with query
    else if (sku && sku.startsWith(query)) {
      score = 600;
      matchType = "sku-prefix";
    }
    // Priority 6: Product name OR Generic name exact match
    else if ((name && name === query) || (genericName && genericName === query)) {
      score = 550;
      matchType = (genericName && genericName === query) ? "generic-exact" : "name-exact";
    }
    // Priority 7: Product name OR Generic name starts with query
    else if ((name && name.startsWith(query)) || (genericName && genericName.startsWith(query))) {
      score = 500;
      matchType = (genericName && genericName.startsWith(query)) ? "generic-prefix" : "name-prefix";
    }
    // Priority 8: Product name OR Generic name contains whole word match
    else if (
      (name && (name.includes(` ${query} `) || name.startsWith(`${query} `) || name.endsWith(` ${query}`))) ||
      (genericName && (genericName.includes(` ${query} `) || genericName.startsWith(`${query} `) || genericName.endsWith(` ${query}`)))
    ) {
      score = 450;
      const genericMatch = genericName && (genericName.includes(` ${query} `) || genericName.startsWith(`${query} `) || genericName.endsWith(` ${query}`));
      matchType = genericMatch ? "generic-word" : "name-word";
    }
    // Priority 9: Product name OR Generic name contains query anywhere
    else if ((name && name.includes(query)) || (genericName && genericName.includes(query))) {
      score = 400;
      matchType = (genericName && genericName.includes(query)) ? "generic-partial" : "name-partial";
    }
    // Priority 10: Description contains query
    else if (description && description.includes(query)) {
      score = 250;
      matchType = "description";
    }
    // Priority 11: SKU contains query
    else if (sku && sku.includes(query)) {
      score = 200;
      matchType = "sku-partial";
    }
    // Priority 12: Manufacturer match
    else if (manufacturer && manufacturer.includes(query)) {
      score = 150;
      matchType = "manufacturer";
    }

    // Fuzzy matching for typos (check both name and generic name)
    if (score === 0 && query.length >= 3) {
      if (name && isCloseMatch(name, query)) {
        score = 100;
        matchType = "fuzzy-name";
      } else if (genericName && isCloseMatch(genericName, query)) {
        score = 95;
        matchType = "fuzzy-generic";
      }
    }

    if (score > 0) {
      // Boost score for products with good stock
      const stock = product.stockQuantity || product.quantity || 0;
      if (stock > 0) {
        score += 10;
      }

      results.push({
        ...product,
        searchScore: score,
        matchType,
      });
    }
  });

  // Sort by score (highest first) and return top 10
  return results
    .sort((a, b) => b.searchScore - a.searchScore)
    .slice(0, 10);
};

/**
 * Basic fuzzy matching - checks if strings are similar within 1-2 character differences
 */
const isCloseMatch = (str, query) => {
  // Simple check: if query is found with wildcards
  const words = str.split(" ");
  return words.some(word => {
    if (word.length < query.length) return false;
    let differences = 0;
    for (let i = 0; i < Math.min(word.length, query.length); i++) {
      if (word[i] !== query[i]) differences++;
      if (differences > 2) return false;
    }
    return differences <= 2 && Math.abs(word.length - query.length) <= 1;
  });
};

const POSProductSearch = ({ products = [], isLoading }) => {
  const [search, setSearch] = useState("");
  const [showResults, setShowResults] = useState(false);
  const [selectedIndex, setSelectedIndex] = useState(0);
  const inputRef = useRef(null);
  const addItem = usePOSStore((state) => state.addItem);

  // Debounce search for performance (except for barcodes which should be instant)
  const debouncedSearch = useDebounce(search, search.length > 10 ? 0 : 200);

  // Filter products using advanced search
  const filteredProducts = useMemo(() => {
    const results = searchProducts(products, debouncedSearch);
    // Debug logging (remove in production)
    if (debouncedSearch && results.length === 0 && products.length > 0) {
      console.log("Search Debug:", {
        query: debouncedSearch,
        totalProducts: products.length,
        sampleProduct: products[0],
        results: results.length
      });
    }
    return results;
  }, [products, debouncedSearch]);

  // Handle product selection
  const handleSelect = (product) => {
    // Check if product has stock
    const stockQty = product.stockQuantity || product.quantity || 0;
    if (stockQty <= 0) {
      toast.error("Out of Stock", {
        description: `${product.name || product.productName} has no available stock.`,
      });
      return;
    }

    addItem(product);
    setSearch("");
    setShowResults(false);
    setSelectedIndex(0);
    inputRef.current?.focus();
  };

  // Auto-select for exact barcode match
  useEffect(() => {
    if (filteredProducts.length > 0 && 
        filteredProducts[0].matchType === "barcode-exact" &&
        search.length > 8) { // Typical barcode length
      handleSelect(filteredProducts[0]);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [filteredProducts, search]);

  // Handle keyboard navigation
  const handleKeyDown = (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      if (filteredProducts.length > 0) {
        handleSelect(filteredProducts[selectedIndex]);
      }
    } else if (e.key === "ArrowDown") {
      e.preventDefault();
      setSelectedIndex((prev) => 
        Math.min(prev + 1, filteredProducts.length - 1)
      );
    } else if (e.key === "ArrowUp") {
      e.preventDefault();
      setSelectedIndex((prev) => Math.max(prev - 1, 0));
    } else if (e.key === "Escape") {
      setShowResults(false);
      setSearch("");
      setSelectedIndex(0);
    }
  };

  // Reset selected index when search changes
  useEffect(() => {
    setSelectedIndex(0);
  }, [search]);

  // Close results when clicking outside
  useEffect(() => {
    const handleClickOutside = () => setShowResults(false);
    document.addEventListener("click", handleClickOutside);
    return () => document.removeEventListener("click", handleClickOutside);
  }, []);

  return (
    <div className="relative" onClick={(e) => e.stopPropagation()}>
      <div className="relative">
        <Search className="absolute left-3 top-1/2 h-4 w-4 sm:h-5 sm:w-5 -translate-y-1/2 text-muted-foreground" />
        <Input
          ref={inputRef}
          type="text"
          placeholder="Search product..."
          value={search}
          onChange={(e) => {
            setSearch(e.target.value);
            setShowResults(true);
          }}
          onFocus={() => setShowResults(true)}
          onKeyDown={handleKeyDown}
          className="pl-9 sm:pl-10 pr-12 sm:pr-20 h-10 sm:h-12 text-sm sm:text-lg"
          autoFocus
          disabled={isLoading}
        />
        <Button
          type="button"
          variant="ghost"
          size="icon"
          className="absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 h-8 w-8"
          title="Scan barcode"
        >
          <Barcode className="h-4 w-4 sm:h-5 sm:w-5" />
        </Button>
      </div>

      {/* Loading indicator */}
      {showResults && isLoading && (
        <div className="absolute z-50 mt-1 w-full rounded-md border bg-popover shadow-lg p-4 text-center text-muted-foreground">
          Loading products...
        </div>
      )}

      {/* Search Results */}
      {showResults && filteredProducts.length > 0 && !isLoading && (
        <div className="absolute z-50 mt-1 w-full rounded-md border bg-popover shadow-lg max-h-[300px] sm:max-h-[400px] overflow-y-auto">
          {filteredProducts.map((product, index) => (
            <button
              key={product.id}
              type="button"
              className={`w-full px-3 sm:px-4 py-2 sm:py-3 text-left hover:bg-muted flex items-center justify-between border-b last:border-0 gap-2 ${
                index === selectedIndex ? "bg-muted" : ""
              }`}
              onClick={() => handleSelect(product)}
              onMouseEnter={() => setSelectedIndex(index)}
            >
              <div className="min-w-0 flex-1">
                <div className="flex items-center gap-2 flex-wrap">
                  <p className="font-medium text-sm sm:text-base truncate">
                    {product.name || product.productName}
                  </p>
                  {product.matchType?.includes("barcode") && (
                    <Badge variant="secondary" className="text-xs">
                      Barcode
                    </Badge>
                  )}
                  {product.matchType?.includes("generic") && (
                    <Badge variant="default" className="text-xs">
                      Generic
                    </Badge>
                  )}
                  {product.matchType?.includes("fuzzy") && (
                    <Badge variant="outline" className="text-xs">
                      Similar
                    </Badge>
                  )}
                  {product.isPrescriptionRequired && (
                    <Badge variant="destructive" className="text-xs">
                       Rx
                    </Badge>
                  )}
                  {product.isNarcotic && (
                    <Badge variant="destructive" className="text-xs">
                      Narcotic
                    </Badge>
                  )}
                  {product.isRefrigerated && (
                    <Badge variant="default" className="text-xs">
                       Cold
                    </Badge>
                  )}
                </div>
                <div className="space-y-0.5 mt-1">
                  <p className="text-xs sm:text-sm text-muted-foreground truncate">
                    {product.sku || product.productCode} {(product.barcode) && ` ${product.barcode}`}
                  </p>
                  {product.genericName && (
                    <p className="text-xs text-muted-foreground truncate">
                      <span className="font-semibold">Generic:</span> {product.genericName}
                    </p>
                  )}
                  {(product.strength || product.dosageForm) && (
                    <p className="text-xs text-muted-foreground truncate">
                      {product.strength} {product.dosageForm && ` ${product.dosageForm}`}
                    </p>
                  )}
                  {product.manufacturer && (
                    <p className="text-xs text-muted-foreground truncate">
                      <span className="font-semibold">Mfr:</span> {product.manufacturer}
                    </p>
                  )}
                  {product.drugSchedule && (
                    <p className="text-xs text-muted-foreground">
                      <span className="font-semibold">Schedule:</span> {product.drugSchedule}
                    </p>
                  )}
                </div>
              </div>
              <div className="text-right shrink-0">
                <p className="font-bold text-sm sm:text-base">
                  {formatCurrency(product.sellingPrice || product.price)}
                </p>
                {product.mrp && (
                  <p className="text-xs text-muted-foreground">
                    MRP: {formatCurrency(product.mrp)}
                  </p>
                )}
                <Badge
                  variant={
                    (product.stockQuantity || product.quantity || 0) > 10
                      ? "default"
                      : (product.stockQuantity || product.quantity || 0) > 0
                      ? "warning"
                      : "destructive"
                  }
                  className="mt-1 text-xs"
                >
                  Stock: {product.stockQuantity || product.quantity || 0}
                </Badge>
              </div>
            </button>
          ))}
        </div>
      )}

      {showResults &&
        search.length >= 1 &&
        filteredProducts.length === 0 &&
        !isLoading && (
          <div className="absolute z-50 mt-1 w-full rounded-md border bg-popover shadow-lg p-4 text-center text-muted-foreground">
            No products found for "{search}"
          </div>
        )}
    </div>
  );
};

export default POSProductSearch;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\sales\components\POSTotals.jsx"   & echo.. 
/**
 * POS Totals Component
 * Displays cart totals and checkout controls
 */

import { useState, useMemo } from "react";
import {
  Percent,
  DollarSign,
  CreditCard,
  Banknote,
  QrCode,
  AlertTriangle,
  Info,
} from "lucide-react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Separator } from "@/components/ui/separator";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Alert, AlertDescription } from "@/components/ui/alert";
import { formatCurrency } from "@/utils/formatters";
import { usePOSStore } from "../store";
import { ButtonSpinner } from "@/components/common";
import { PAYMENT_METHOD } from "@/constants/paymentMethods";

const paymentMethods = [
  { value: PAYMENT_METHOD.CASH, label: "Cash", icon: Banknote },
  { value: PAYMENT_METHOD.CARD, label: "Card", icon: CreditCard },
  { value: PAYMENT_METHOD.UPI, label: "UPI / QR", icon: QrCode },
];

const POSTotals = ({ onCheckout, isProcessing, hasBranch = true }) => {
  const items = usePOSStore((state) => state.items);
  const customer = usePOSStore((state) => state.customer);
  const discount = usePOSStore((state) => state.discount);
  const payment = usePOSStore((state) => state.payment);
  const setDiscount = usePOSStore((state) => state.setDiscount);
  const setPayment = usePOSStore((state) => state.setPayment);
  const clearCart = usePOSStore((state) => state.clearCart);
  const holdSale = usePOSStore((state) => state.holdSale);

  const subtotal = usePOSStore((state) => state.getSubtotal());
  const itemDiscountTotal = usePOSStore((state) =>
    state.getItemDiscountTotal()
  );
  const cartDiscount = usePOSStore((state) => state.getCartDiscount());
  const taxTotal = usePOSStore((state) => state.getTaxTotal());
  const grandTotal = usePOSStore((state) => state.getGrandTotal());
  const changeDue = usePOSStore((state) => state.getChangeDue());

  const [discountType, setDiscountType] = useState(discount.type);
  const [discountValue, setDiscountValue] = useState(discount.value);

  // Check for special product requirements and warnings
  const cartWarnings = useMemo(() => {
    const warnings = {
      prescriptionRequired: false,
      narcoticPresent: false,
      refrigeratedItems: false,
      expiringItems: [],
      lowStockItems: [],
    };

    const today = new Date();
    const thirtyDaysFromNow = new Date(today);
    thirtyDaysFromNow.setDate(today.getDate() + 30);

    items.forEach((item) => {
      if (item.isPrescriptionRequired) warnings.prescriptionRequired = true;
      if (item.isNarcotic) warnings.narcoticPresent = true;
      if (item.isRefrigerated) warnings.refrigeratedItems = true;

      // Check expiry date
      if (item.expiryDate) {
        const expiryDate = new Date(item.expiryDate);
        if (expiryDate < thirtyDaysFromNow) {
          warnings.expiringItems.push({
            name: item.productName,
            expiryDate: item.expiryDate,
            isExpired: expiryDate < today,
          });
        }
      }

      // Check low stock
      if (item.maxQuantity <= 10) {
        warnings.lowStockItems.push({
          name: item.productName,
          stock: item.maxQuantity,
        });
      }
    });

    return warnings;
  }, [items]);

  const handleDiscountChange = (value) => {
    setDiscountValue(value);
    setDiscount({ type: discountType, value: parseFloat(value) || 0 });
  };

  const handleDiscountTypeChange = (type) => {
    setDiscountType(type);
    setDiscount({ type, value: discountValue });
  };

  const handleCheckout = () => {
    if (payment.method === PAYMENT_METHOD.CASH && payment.amountTendered < grandTotal) {
      return; // Not enough cash
    }
    
    // For non-cash payments, ensure amountTendered equals grandTotal
    const finalPayment = {
      ...payment,
      amountTendered: payment.method === PAYMENT_METHOD.CASH 
        ? payment.amountTendered 
        : grandTotal
    };
    
    onCheckout?.({
      items,
      customer,
      discount,
      payment: finalPayment,
      subtotal,
      taxTotal,
      grandTotal,
    });
  };

  const handleHold = () => {
    holdSale();
  };

  return (
    <Card>
      <CardContent className="p-3 sm:p-4 space-y-3 sm:space-y-4">
        {/* Branch Warning */}
        {!hasBranch && (
          <Alert variant="destructive" className="py-2">
            <AlertTriangle className="h-4 w-4" />
            <AlertDescription className="text-xs">
               No branch selected. Please select a branch from settings to complete sales.
            </AlertDescription>
          </Alert>
        )}
        
        {/* Warnings Section */}
        {(cartWarnings.prescriptionRequired ||
          cartWarnings.narcoticPresent ||
          cartWarnings.refrigeratedItems ||
          cartWarnings.expiringItems.length > 0 ||
          cartWarnings.lowStockItems.length > 0) && (
          <div className="space-y-2">
            {cartWarnings.prescriptionRequired && (
              <Alert variant="destructive" className="py-2">
                <AlertTriangle className="h-4 w-4" />
                <AlertDescription className="text-xs">
                   Prescription required for some items
                </AlertDescription>
              </Alert>
            )}
            {cartWarnings.narcoticPresent && (
              <Alert variant="destructive" className="py-2">
                <AlertTriangle className="h-4 w-4" />
                <AlertDescription className="text-xs">
                  Narcotic/Schedule X drug in cart - requires documentation
                </AlertDescription>
              </Alert>
            )}
            {cartWarnings.refrigeratedItems && (
              <Alert className="py-2">
                <Info className="h-4 w-4" />
                <AlertDescription className="text-xs">
                   Cold storage items - handle with care
                </AlertDescription>
              </Alert>
            )}
            {cartWarnings.expiringItems.length > 0 && (
              <Alert variant="warning" className="py-2">
                <AlertTriangle className="h-4 w-4" />
                <AlertDescription className="text-xs">
                  {cartWarnings.expiringItems.some((i) => i.isExpired)
                    ? " EXPIRED products in cart!"
                    : ` ${cartWarnings.expiringItems.length} item(s) expiring within 30 days`}
                </AlertDescription>
              </Alert>
            )}
            {cartWarnings.lowStockItems.length > 0 && (
              <Alert variant="warning" className="py-2">
                <Info className="h-4 w-4" />
                <AlertDescription className="text-xs">
                   Low stock: {cartWarnings.lowStockItems.length} item(s)
                </AlertDescription>
              </Alert>
            )}
            <Separator />
          </div>
        )}

        {/* Totals */}
        <div className="space-y-2">
          <div className="flex justify-between text-xs sm:text-sm">
            <span>Subtotal ({items.length} items)</span>
            <span>{formatCurrency(subtotal)}</span>
          </div>
          {itemDiscountTotal > 0 && (
            <div className="flex justify-between text-xs sm:text-sm text-muted-foreground">
              <span>Item Discounts</span>
              <span>-{formatCurrency(itemDiscountTotal)}</span>
            </div>
          )}
          {cartDiscount > 0 && (
            <div className="flex justify-between text-xs sm:text-sm text-muted-foreground">
              <span>Cart Discount</span>
              <span>-{formatCurrency(cartDiscount)}</span>
            </div>
          )}
          {taxTotal > 0 && (
            <div className="flex justify-between text-xs sm:text-sm text-muted-foreground">
              <span>Tax</span>
              <span>+{formatCurrency(taxTotal)}</span>
            </div>
          )}
          <Separator />
          <div className="flex justify-between text-lg sm:text-xl font-bold">
            <span>Total</span>
            <span>{formatCurrency(grandTotal)}</span>
          </div>
        </div>

        <Separator />

        {/* Cart Discount */}
        <div className="space-y-2">
          <Label className="text-sm">Cart Discount</Label>
          <div className="flex gap-2">
            <Select
              value={discountType}
              onValueChange={handleDiscountTypeChange}
            >
              <SelectTrigger className="w-20">
                <SelectValue />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="percentage">%</SelectItem>
                <SelectItem value="fixed">Rs.</SelectItem>
              </SelectContent>
            </Select>
            <div className="relative flex-1">
              {discountType === "percentage" ? (
                <Percent className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
              ) : (
                <DollarSign className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
              )}
              <Input
                type="number"
                value={discountValue}
                onChange={(e) => handleDiscountChange(e.target.value)}
                className="pl-9"
                min={0}
                max={discountType === "percentage" ? 100 : subtotal}
              />
            </div>
          </div>
        </div>

        <Separator />

        {/* Payment Method */}
        <div className="space-y-2">
          <Label className="text-sm">Payment Method</Label>
          <div className="grid grid-cols-3 gap-2">
            {paymentMethods.map((method) => {
              const Icon = method.icon;
              return (
                <Button
                  key={method.value}
                  variant={
                    payment.method === method.value ? "default" : "outline"
                  }
                  className="flex flex-col h-auto py-3"
                  onClick={() => setPayment({ method: method.value })}
                >
                  <Icon className="h-5 w-5 mb-1" />
                  <span className="text-xs">{method.label}</span>
                </Button>
              );
            })}
          </div>
        </div>

        {/* Cash Tendered */}
        {payment.method === PAYMENT_METHOD.CASH && (
          <div className="space-y-2">
            <Label className="text-sm">Amount Tendered</Label>
            <Input
              type="number"
              value={payment.amountTendered || ""}
              onChange={(e) =>
                setPayment({ amountTendered: parseFloat(e.target.value) || 0 })
              }
              className="text-lg font-bold"
              min={0}
            />
            {payment.amountTendered >= grandTotal && (
              <div className="flex justify-between text-lg font-bold text-green-600">
                <span>Change</span>
                <span>{formatCurrency(changeDue)}</span>
              </div>
            )}
          </div>
        )}

        {/* Card Reference */}
        {payment.method === PAYMENT_METHOD.CARD && (
          <div className="space-y-2">
            <Label className="text-sm">Card Reference / Last 4 Digits</Label>
            <Input
              value={payment.reference || ""}
              onChange={(e) => setPayment({ reference: e.target.value })}
              placeholder="XXXX"
              maxLength={4}
            />
          </div>
        )}

        <Separator />

        {/* Action Buttons */}
        <div className="grid grid-cols-2 gap-2">
          <Button
            variant="outline"
            onClick={handleHold}
            disabled={items.length === 0}
          >
            Hold Sale
          </Button>
          <Button
            variant="outline"
            onClick={clearCart}
            disabled={items.length === 0}
          >
            Clear
          </Button>
        </div>

        <Button
          className="w-full h-12 sm:h-14 text-base sm:text-lg"
          onClick={handleCheckout}
          disabled={
            !hasBranch ||
            items.length === 0 ||
            isProcessing ||
            (payment.method === PAYMENT_METHOD.CASH && payment.amountTendered < grandTotal)
          }
        >
          {isProcessing && <ButtonSpinner />}
          Complete Sale
        </Button>
      </CardContent>
    </Card>
  );
};

export default POSTotals;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\suppliers\components\SupplierColumns.jsx"   & echo.. 
/**
 * Supplier Columns Definition
 * Defines the columns for the suppliers DataTable
 */

import { Checkbox } from "@/components/ui/checkbox";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import {
  MoreHorizontal,
  Eye,
  Edit,
  Trash2,
  CheckCircle,
  XCircle,
  ShoppingCart,
} from "lucide-react";
import { formatCurrency } from "@/utils/formatters";

/**
 * Get column definitions for suppliers table
 */
export const getSupplierColumns = ({
  onView,
  onEdit,
  onDelete,
  onActivate,
  onDeactivate,
  onCreatePO,
} = {}) => [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() ||
          (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
        className="translate-y-[2px]"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
        className="translate-y-[2px]"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: "supplierCode",
    header: "Code",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => (
      <span className="font-mono text-sm">{row.getValue("supplierCode")}</span>
    ),
  },
  {
    accessorKey: "supplierName",
    header: "Supplier Name",
    cell: ({ row }) => (
      <div className="max-w-[120px] sm:max-w-none">
        <div className="font-medium text-sm truncate">
          {row.getValue("supplierName")}
        </div>
        {row.original.contactPerson && (
          <div className="text-xs text-muted-foreground truncate hidden sm:block">
            Contact: {row.original.contactPerson}
          </div>
        )}
      </div>
    ),
  },
  {
    accessorKey: "phone",
    header: "Phone",
    meta: { className: "hidden sm:table-cell" },
    cell: ({ row }) => row.getValue("phone") || row.original.mobile || "-",
  },
  {
    accessorKey: "email",
    header: "Email",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => row.getValue("email") || "-",
  },
  {
    accessorKey: "city",
    header: "City",
    meta: { className: "hidden lg:table-cell" },
    cell: ({ row }) => row.getValue("city") || "-",
  },
  {
    accessorKey: "paymentTerms",
    header: "Payment Terms",
    meta: { className: "hidden xl:table-cell" },
    cell: ({ row }) => {
      const days = row.getValue("paymentTerms");
      return days ? `${days} days` : "-";
    },
  },
  {
    accessorKey: "outstandingBalance",
    header: "Outstanding",
    meta: { className: "hidden md:table-cell" },
    cell: ({ row }) => {
      const balance = row.getValue("outstandingBalance") || 0;
      return (
        <span
          className={
            balance > 0 ? "text-red-600 font-medium text-sm" : "text-sm"
          }
        >
          {formatCurrency(balance)}
        </span>
      );
    },
  },
  {
    accessorKey: "isActive",
    header: "Status",
    cell: ({ row }) => {
      const isActive = row.getValue("isActive");
      return (
        <Badge variant={isActive ? "default" : "secondary"}>
          {isActive ? "Active" : "Inactive"}
        </Badge>
      );
    },
  },
  {
    id: "actions",
    header: "Actions",
    cell: ({ row }) => {
      const supplier = row.original;

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuItem onClick={() => onView?.(supplier)}>
              <Eye className="mr-2 h-4 w-4" />
              View
            </DropdownMenuItem>
            <DropdownMenuItem onClick={() => onEdit?.(supplier)}>
              <Edit className="mr-2 h-4 w-4" />
              Edit
            </DropdownMenuItem>
            {supplier.isActive && (
              <DropdownMenuItem onClick={() => onCreatePO?.(supplier)}>
                <ShoppingCart className="mr-2 h-4 w-4" />
                Create PO
              </DropdownMenuItem>
            )}
            <DropdownMenuSeparator />
            {supplier.isActive ? (
              <DropdownMenuItem onClick={() => onDeactivate?.(supplier)}>
                <XCircle className="mr-2 h-4 w-4" />
                Deactivate
              </DropdownMenuItem>
            ) : (
              <DropdownMenuItem onClick={() => onActivate?.(supplier)}>
                <CheckCircle className="mr-2 h-4 w-4" />
                Activate
              </DropdownMenuItem>
            )}
            <DropdownMenuSeparator />
            <DropdownMenuItem
              onClick={() => onDelete?.(supplier)}
              className="text-destructive focus:text-destructive"
            >
              <Trash2 className="mr-2 h-4 w-4" />
              Delete
            </DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    enableSorting: false,
    enableHiding: false,
  },
];

export default getSupplierColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\suppliers\components\SupplierForm.jsx"   & echo.. 
/**
 * Supplier Form Component
 * Form for creating and editing suppliers
 */

import { useEffect } from "react";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Switch } from "@/components/ui/switch";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { ButtonSpinner } from "@/components/common";

// Validation schema
const supplierSchema = z.object({
  supplierName: z.string().min(1, "Supplier name is required").max(100),
  contactPerson: z.string().max(100).optional().nullable(),
  email: z.string().email("Invalid email").optional().or(z.literal("")),
  phone: z
    .string()
    .min(10, "Phone must be at least 10 digits")
    .max(15)
    .optional()
    .or(z.literal("")),
  mobile: z.string().max(15).optional().nullable(),
  fax: z.string().max(20).optional().nullable(),
  address: z.string().max(200).optional().nullable(),
  city: z.string().max(50).optional().nullable(),
  country: z.string().max(50).optional().nullable(),
  postalCode: z.string().max(20).optional().nullable(),
  taxId: z.string().max(50).optional().nullable(),
  bankName: z.string().max(100).optional().nullable(),
  bankAccountNo: z.string().max(50).optional().nullable(),
  bankBranch: z.string().max(100).optional().nullable(),
  paymentTerms: z.coerce.number().min(0).optional().nullable(),
  creditLimit: z.coerce.number().min(0).optional().nullable(),
  notes: z.string().max(500).optional().nullable(),
  isActive: z.boolean().default(true),
});

/**
 * SupplierForm component
 */
const SupplierForm = ({
  supplier,
  onSubmit,
  onCancel,
  isSubmitting = false,
}) => {
  const isEditing = Boolean(supplier);

  const form = useForm({
    resolver: zodResolver(supplierSchema),
    defaultValues: {
      supplierName: "",
      contactPerson: "",
      email: "",
      phone: "",
      mobile: "",
      fax: "",
      address: "",
      city: "",
      country: "",
      postalCode: "",
      taxId: "",
      bankName: "",
      bankAccountNo: "",
      bankBranch: "",
      paymentTerms: 30,
      creditLimit: 0,
      notes: "",
      isActive: true,
    },
  });

  // Populate form when editing
  useEffect(() => {
    if (supplier) {
      form.reset({
        supplierName: supplier.supplierName || "",
        contactPerson: supplier.contactPerson || "",
        email: supplier.email || "",
        phone: supplier.phone || "",
        mobile: supplier.mobile || "",
        fax: supplier.fax || "",
        address: supplier.address || "",
        city: supplier.city || "",
        country: supplier.country || "",
        postalCode: supplier.postalCode || "",
        taxId: supplier.taxId || "",
        bankName: supplier.bankName || "",
        bankAccountNo: supplier.bankAccountNo || "",
        bankBranch: supplier.bankBranch || "",
        paymentTerms: supplier.paymentTerms || 30,
        creditLimit: supplier.creditLimit || 0,
        notes: supplier.notes || "",
        isActive: supplier.isActive ?? true,
      });
    }
  }, [supplier, form]);

  const handleSubmit = (data) => {
    onSubmit(data);
  };

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-6">
        {/* Basic Information */}
        <Card>
          <CardHeader>
            <CardTitle>Basic Information</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="supplierName"
              render={({ field }) => (
                <FormItem className="md:col-span-2">
                  <FormLabel>Supplier Name *</FormLabel>
                  <FormControl>
                    <Input placeholder="ABC Pharmaceuticals" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="contactPerson"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Contact Person</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="John Smith"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="taxId"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Tax ID / VAT Number</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Tax registration number"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Contact Information */}
        <Card>
          <CardHeader>
            <CardTitle>Contact Information</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="email"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Email</FormLabel>
                  <FormControl>
                    <Input
                      type="email"
                      placeholder="supplier@example.com"
                      {...field}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="phone"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Phone</FormLabel>
                  <FormControl>
                    <Input placeholder="+94 11 234 5678" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="mobile"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Mobile</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="+94 77 123 4567"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="fax"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Fax</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="+94 11 234 5679"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Address */}
        <Card>
          <CardHeader>
            <CardTitle>Address</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="address"
              render={({ field }) => (
                <FormItem className="md:col-span-2">
                  <FormLabel>Street Address</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="123 Industrial Zone"
                      className="resize-none"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="city"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>City</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Colombo"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="country"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Country</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Sri Lanka"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="postalCode"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Postal Code</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="00100"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Bank Details */}
        <Card>
          <CardHeader>
            <CardTitle>Bank Details</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="bankName"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Bank Name</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Commercial Bank"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="bankBranch"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Branch</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="Main Branch"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="bankAccountNo"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Account Number</FormLabel>
                  <FormControl>
                    <Input
                      placeholder="1234567890"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Payment Terms */}
        <Card>
          <CardHeader>
            <CardTitle>Payment & Credit</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="grid gap-4 md:grid-cols-2">
              <FormField
                control={form.control}
                name="paymentTerms"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Payment Terms (Days)</FormLabel>
                    <FormControl>
                      <Input type="number" min="0" {...field} />
                    </FormControl>
                    <FormDescription>
                      Number of days for payment after invoice
                    </FormDescription>
                    <FormMessage />
                  </FormItem>
                )}
              />

              <FormField
                control={form.control}
                name="creditLimit"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Credit Limit</FormLabel>
                    <FormControl>
                      <Input type="number" min="0" step="0.01" {...field} />
                    </FormControl>
                    <FormDescription>
                      Maximum credit allowed from this supplier
                    </FormDescription>
                    <FormMessage />
                  </FormItem>
                )}
              />
            </div>

            <FormField
              control={form.control}
              name="notes"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Notes</FormLabel>
                  <FormControl>
                    <Textarea
                      placeholder="Any additional notes about this supplier..."
                      className="resize-none"
                      {...field}
                      value={field.value || ""}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="isActive"
              render={({ field }) => (
                <FormItem className="flex flex-row items-center justify-between rounded-lg border p-3">
                  <div className="space-y-0.5">
                    <FormLabel>Active Status</FormLabel>
                    <FormDescription>
                      Inactive suppliers won't appear in purchase orders
                    </FormDescription>
                  </div>
                  <FormControl>
                    <Switch
                      checked={field.value}
                      onCheckedChange={field.onChange}
                    />
                  </FormControl>
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Actions */}
        <div className="flex justify-end gap-4">
          <Button type="button" variant="outline" onClick={onCancel}>
            Cancel
          </Button>
          <Button type="submit" disabled={isSubmitting}>
            {isSubmitting && <ButtonSpinner />}
            {isEditing ? "Update Supplier" : "Create Supplier"}
          </Button>
        </div>
      </form>
    </Form>
  );
};

export default SupplierForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\users\components\UserColumns.jsx"   & echo.. 
/**
 * User Columns Definition
 * Defines the columns for the users DataTable
 */

import { Checkbox } from "@/components/ui/checkbox";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import {
  MoreHorizontal,
  Eye,
  Edit,
  Trash2,
  UserCheck,
  UserX,
  KeyRound,
} from "lucide-react";
import { ROLE_LABELS } from "@/constants";

/**
 * Get initials from name
 */
const getInitials = (fullName) => {
  if (!fullName) return "??";
  const parts = fullName.trim().split(/\s+/);
  if (parts.length === 1) return parts[0].substring(0, 2).toUpperCase();
  return `${parts[0][0]}${parts[parts.length - 1][0]}`.toUpperCase();
};

/**
 * Get role badge variant
 */
const getRoleBadgeVariant = (role) => {
  switch (role) {
    case "SUPER_ADMIN":
      return "destructive";
    case "ADMIN":
    case "OWNER":
      return "default";
    case "BRANCH_MANAGER":
    case "BRANCH_ADMIN":
      return "secondary";
    default:
      return "outline";
  }
};

/**
 * Get column definitions for users table
 */
export const getUserColumns = ({
  onView,
  onEdit,
  onDelete,
  onActivate,
  onDeactivate,
  onResetPassword,
} = {}) => [
  {
    id: "select",
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() ||
          (table.getIsSomePageRowsSelected() && "indeterminate")
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
        className="translate-y-[2px]"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
        className="translate-y-[2px]"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    id: "user",
    header: "User",
    accessorFn: (row) => row.fullName,
    cell: ({ row }) => (
      <div className="flex items-center gap-3">
        <Avatar className="h-8 w-8">
          <AvatarImage src={row.original.avatarUrl} />
          <AvatarFallback>{getInitials(row.original.fullName)}</AvatarFallback>
        </Avatar>
        <div>
          <div className="font-medium">{row.original.fullName}</div>
          <div className="text-sm text-muted-foreground">
            @{row.original.username}
          </div>
        </div>
      </div>
    ),
  },
  {
    accessorKey: "email",
    header: "Email",
    cell: ({ row }) => row.getValue("email"),
  },
  {
    accessorKey: "role",
    header: "Role",
    cell: ({ row }) => {
      const role = row.getValue("role");
      return (
        <Badge variant={getRoleBadgeVariant(role)}>
          {ROLE_LABELS[role] || role}
        </Badge>
      );
    },
    filterFn: (row, id, value) => {
      if (!value) return true;
      return row.getValue(id) === value;
    },
  },
  {
    accessorKey: "branch",
    header: "Branch",
    cell: ({ row }) => (
      <span className="text-muted-foreground">
        {row.original.branch?.branchName || "All Branches"}
      </span>
    ),
  },
  {
    accessorKey: "phoneNumber",
    header: "Phone",
    cell: ({ row }) => row.getValue("phoneNumber") || "-",
  },
  {
    accessorKey: "isActive",
    header: "Status",
    cell: ({ row }) => {
      const isActive = row.getValue("isActive");
      return (
        <Badge variant={isActive ? "default" : "secondary"}>
          {isActive ? "Active" : "Inactive"}
        </Badge>
      );
    },
  },
  {
    id: "actions",
    header: "Actions",
    cell: ({ row }) => {
      const user = row.original;

      return (
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="h-8 w-8 p-0">
              <span className="sr-only">Open menu</span>
              <MoreHorizontal className="h-4 w-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end">
            <DropdownMenuItem onClick={() => onView?.(user)}>
              <Eye className="mr-2 h-4 w-4" />
              View
            </DropdownMenuItem>
            <DropdownMenuItem onClick={() => onEdit?.(user)}>
              <Edit className="mr-2 h-4 w-4" />
              Edit
            </DropdownMenuItem>
            <DropdownMenuItem onClick={() => onResetPassword?.(user)}>
              <KeyRound className="mr-2 h-4 w-4" />
              Reset Password
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            {user.isActive ? (
              <DropdownMenuItem onClick={() => onDeactivate?.(user)}>
                <UserX className="mr-2 h-4 w-4" />
                Deactivate
              </DropdownMenuItem>
            ) : (
              <DropdownMenuItem onClick={() => onActivate?.(user)}>
                <UserCheck className="mr-2 h-4 w-4" />
                Activate
              </DropdownMenuItem>
            )}
            <DropdownMenuSeparator />
            <DropdownMenuItem
              onClick={() => onDelete?.(user)}
              className="text-destructive focus:text-destructive"
            >
              <Trash2 className="mr-2 h-4 w-4" />
              Delete
            </DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      );
    },
    enableSorting: false,
    enableHiding: false,
  },
];

export default getUserColumns;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\features\users\components\UserForm.jsx"   & echo.. 
/**
 * User Form Component
 * Form for creating and editing users
 */

import { useEffect } from "react";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Input } from "@/components/ui/input";
import { Switch } from "@/components/ui/switch";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { ButtonSpinner } from "@/components/common";
import { ROLES, ROLE_LABELS } from "@/constants";

// Validation schema for creating user
const createUserSchema = z
  .object({
    username: z
      .string()
      .min(3, "Username must be at least 3 characters")
      .max(100),
    password: z.string().min(6, "Password must be at least 6 characters"),
    confirmPassword: z.string().min(1, "Please confirm password"),
    fullName: z.string().min(1, "Full name is required").max(200),
    email: z.string().email("Invalid email").min(1, "Email is required"),
    phoneNumber: z.string().optional().or(z.literal("")),
    role: z.string().min(1, "Role is required"),
    branchId: z.string().optional(),
    employeeCode: z.string().optional().or(z.literal("")),
    discountLimit: z.string().optional().or(z.literal("")),
    creditTransactionLimit: z.string().optional().or(z.literal("")),
    isActive: z.boolean().default(true),
  })
  .refine((data) => data.password === data.confirmPassword, {
    message: "Passwords don't match",
    path: ["confirmPassword"],
  });

// Validation schema for editing user
const editUserSchema = z.object({
  fullName: z.string().min(1, "Full name is required").max(200),
  email: z.string().email("Invalid email").min(1, "Email is required"),
  phoneNumber: z.string().optional().or(z.literal("")),
  role: z.string().min(1, "Role is required"),
  discountLimit: z.string().optional().or(z.literal("")),
  creditTransactionLimit: z.string().optional().or(z.literal("")),
  isActive: z.boolean().default(true),
});

/**
 * UserForm component
 * @param {Object} props
 * @param {Object} props.user - User to edit (null for create)
 * @param {Array} props.branches - Available branches
 * @param {Function} props.onSubmit - Submit handler
 * @param {Function} props.onCancel - Cancel handler
 * @param {boolean} props.isSubmitting - Loading state
 */
const UserForm = ({
  user,
  branches = [],
  onSubmit,
  onCancel,
  isSubmitting = false,
}) => {
  const isEditing = Boolean(user);

  const form = useForm({
    resolver: zodResolver(isEditing ? editUserSchema : createUserSchema),
    defaultValues: {
      username: "",
      password: "",
      confirmPassword: "",
      fullName: "",
      email: "",
      phoneNumber: "",
      role: "",
      branchId: "",
      employeeCode: "",
      discountLimit: "",
      creditTransactionLimit: "",
      isActive: true,
    },
  });

  // Populate form when editing
  useEffect(() => {
    if (user) {
      form.reset({
        fullName: user.fullName || "",
        email: user.email || "",
        phoneNumber: user.phoneNumber || "",
        role: user.role || "",
        discountLimit: user.discountLimit ? String(user.discountLimit) : "",
        creditTransactionLimit: user.creditTransactionLimit
          ? String(user.creditTransactionLimit)
          : "",
        isActive: user.isActive ?? true,
      });
    }
  }, [user, form]);

  const handleSubmit = (data) => {
    if (isEditing) {
      // For update: only send UpdateUserRequest fields
      const updatePayload = {
        fullName: data.fullName,
        email: data.email,
        phoneNumber: data.phoneNumber || null,
        role: data.role,
        isActive: data.isActive,
        discountLimit: data.discountLimit
          ? parseFloat(data.discountLimit)
          : null,
        creditTransactionLimit: data.creditTransactionLimit
          ? parseFloat(data.creditTransactionLimit)
          : null,
      };
      onSubmit(updatePayload);
    } else {
      // For create: send CreateUserRequest fields
      const { confirmPassword, ...rest } = data;
      const createPayload = {
        ...rest,
        branchId: data.branchId ? Number(data.branchId) : null,
        discountLimit: data.discountLimit
          ? parseFloat(data.discountLimit)
          : null,
        creditTransactionLimit: data.creditTransactionLimit
          ? parseFloat(data.creditTransactionLimit)
          : null,
      };
      onSubmit(createPayload);
    }
  };

  // Filter roles based on permissions (you might want to get this from context)
  const availableRoles = Object.entries(ROLE_LABELS);

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-6">
        {/* Personal Information */}
        <Card>
          <CardHeader>
            <CardTitle>Personal Information</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            <FormField
              control={form.control}
              name="fullName"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Full Name *</FormLabel>
                  <FormControl>
                    <Input placeholder="John Doe" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="email"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Email *</FormLabel>
                  <FormControl>
                    <Input
                      type="email"
                      placeholder="john@example.com"
                      {...field}
                    />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="phoneNumber"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Phone Number</FormLabel>
                  <FormControl>
                    <Input placeholder="+94 77 123 4567" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Account Information */}
        <Card>
          <CardHeader>
            <CardTitle>Account Information</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-2">
            {!isEditing && (
              <>
                <FormField
                  control={form.control}
                  name="username"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Username *</FormLabel>
                      <FormControl>
                        <Input placeholder="johndoe" {...field} />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                <FormField
                  control={form.control}
                  name="employeeCode"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Employee Code</FormLabel>
                      <FormControl>
                        <Input placeholder="EMP001" {...field} />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />
              </>
            )}

            <FormField
              control={form.control}
              name="role"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Role *</FormLabel>
                  <Select onValueChange={field.onChange} value={field.value}>
                    <FormControl>
                      <SelectTrigger>
                        <SelectValue placeholder="Select role" />
                      </SelectTrigger>
                    </FormControl>
                    <SelectContent>
                      {availableRoles.map(([value, label]) => (
                        <SelectItem key={value} value={value}>
                          {label}
                        </SelectItem>
                      ))}
                    </SelectContent>
                  </Select>
                  <FormMessage />
                </FormItem>
              )}
            />

            {!isEditing && (
              <FormField
                control={form.control}
                name="branchId"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Assigned Branch</FormLabel>
                    <Select
                      onValueChange={field.onChange}
                      value={field.value || "none"}
                    >
                      <FormControl>
                        <SelectTrigger>
                          <SelectValue placeholder="Select branch" />
                        </SelectTrigger>
                      </FormControl>
                      <SelectContent>
                        <SelectItem value="none">No specific branch</SelectItem>
                        {branches.map((branch) => (
                          <SelectItem key={branch.id} value={String(branch.id)}>
                            {branch.branchName}
                          </SelectItem>
                        ))}
                      </SelectContent>
                    </Select>
                    <FormDescription>
                      Branch the user is assigned to work at
                    </FormDescription>
                    <FormMessage />
                  </FormItem>
                )}
              />
            )}

            <FormField
              control={form.control}
              name="discountLimit"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Discount Limit</FormLabel>
                  <FormControl>
                    <Input
                      type="number"
                      step="0.01"
                      placeholder="0.00"
                      {...field}
                    />
                  </FormControl>
                  <FormDescription>
                    Maximum discount percentage this user can apply
                  </FormDescription>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={form.control}
              name="creditTransactionLimit"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Credit Transaction Limit</FormLabel>
                  <FormControl>
                    <Input
                      type="number"
                      step="0.01"
                      placeholder="0.00"
                      {...field}
                    />
                  </FormControl>
                  <FormDescription>
                    Maximum credit amount this user can authorize
                  </FormDescription>
                  <FormMessage />
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Password */}
        {!isEditing && (
          <Card>
            <CardHeader>
              <CardTitle>Set Password</CardTitle>
            </CardHeader>
            <CardContent className="grid gap-4 md:grid-cols-2">
              <FormField
                control={form.control}
                name="password"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Password *</FormLabel>
                    <FormControl>
                      <Input
                        type="password"
                        placeholder=""
                        {...field}
                      />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />

              <FormField
                control={form.control}
                name="confirmPassword"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Confirm Password *</FormLabel>
                    <FormControl>
                      <Input
                        type="password"
                        placeholder=""
                        {...field}
                      />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />
            </CardContent>
          </Card>
        )}

        {/* Status */}
        <Card>
          <CardContent className="pt-6">
            <FormField
              control={form.control}
              name="isActive"
              render={({ field }) => (
                <FormItem className="flex flex-row items-center justify-between rounded-lg border p-3">
                  <div className="space-y-0.5">
                    <FormLabel>Active Status</FormLabel>
                    <FormDescription>
                      Inactive users cannot log in to the system
                    </FormDescription>
                  </div>
                  <FormControl>
                    <Switch
                      checked={field.value}
                      onCheckedChange={field.onChange}
                    />
                  </FormControl>
                </FormItem>
              )}
            />
          </CardContent>
        </Card>

        {/* Actions */}
        <div className="flex justify-end gap-4">
          <Button type="button" variant="outline" onClick={onCancel}>
            Cancel
          </Button>
          <Button type="submit" disabled={isSubmitting}>
            {isSubmitting && <ButtonSpinner />}
            {isEditing ? "Update User" : "Create User"}
          </Button>
        </div>
      </form>
    </Form>
  );
};

export default UserForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\auth\LoginPage.jsx"   & echo.. 
/**
 * LoginPage Component
 * Authentication page with login form
 */

import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { LoginForm } from "@/features/auth";

/**
 * LoginPage component
 */
const LoginPage = () => {
  return (
    <div className="w-full">
      <Card className="border-0 shadow-none lg:border lg:shadow-sm">
        <CardHeader className="space-y-1 text-center lg:text-left">
          <CardTitle className="text-2xl font-bold">Welcome back</CardTitle>
          <CardDescription>
            Enter your credentials to access your account
          </CardDescription>
        </CardHeader>
        <CardContent>
          <LoginForm />
        </CardContent>
      </Card>

      {/* Demo Credentials (remove in production) */}
      {import.meta.env.DEV && (
        <div className="mt-6 p-4 rounded-lg bg-muted/50 text-sm">
          <p className="font-medium text-muted-foreground mb-2">
            Demo Credentials:
          </p>
          <div className="grid grid-cols-2 gap-2 text-xs">
            <div>
              <span className="font-medium">Super Admin:</span>
              <br />
              superadmin / admin123
            </div>
            <div>
              <span className="font-medium">Pharmacist:</span>
              <br />
              pharmacist / pharm123
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default LoginPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\branches\BranchesPage.jsx"   & echo.. 
/**
 * Branches Page
 * Lists all branches with filtering and actions
 */

import { useState, useMemo, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import { Plus, Building2 } from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { DataTable, PageHeader, ConfirmDialog } from "@/components/common";
import {
  useBranches,
  useDeleteBranch,
  useActivateBranch,
  useDeactivateBranch,
  getBranchColumns,
} from "@/features/branches";

const BranchesPage = () => {
  const navigate = useNavigate();
  const [search, setSearch] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");
  const [deleteDialog, setDeleteDialog] = useState({
    open: false,
    branch: null,
  });

  // Query params
  const params = useMemo(
    () => ({
      search: search || undefined,
      isActive: statusFilter !== "all" ? statusFilter === "active" : undefined,
    }),
    [search, statusFilter]
  );

  // Queries and mutations
  const { data: branchesData, isLoading } = useBranches(params);
  const deleteMutation = useDeleteBranch();
  const activateMutation = useActivateBranch();
  const deactivateMutation = useDeactivateBranch();

  const branches = branchesData?.content || branchesData || [];

  // Handlers
  const handleView = useCallback(
    (branch) => {
      navigate(ROUTES.BRANCHES.EDIT.replace(":id", branch.id));
    },
    [navigate]
  );

  const handleEdit = useCallback(
    (branch) => {
      navigate(ROUTES.BRANCHES.EDIT.replace(":id", branch.id));
    },
    [navigate]
  );

  const handleDeleteClick = useCallback((branch) => {
    setDeleteDialog({ open: true, branch });
  }, []);

  const handleDeleteConfirm = useCallback(() => {
    if (deleteDialog.branch) {
      deleteMutation.mutate(deleteDialog.branch.id, {
        onSuccess: () => setDeleteDialog({ open: false, branch: null }),
      });
    }
  }, [deleteDialog.branch, deleteMutation]);

  const handleActivate = useCallback(
    (branch) => {
      activateMutation.mutate(branch.id);
    },
    [activateMutation]
  );

  const handleDeactivate = useCallback(
    (branch) => {
      deactivateMutation.mutate(branch.id);
    },
    [deactivateMutation]
  );

  // Columns
  const columns = useMemo(
    () =>
      getBranchColumns({
        onView: handleView,
        onEdit: handleEdit,
        onDelete: handleDeleteClick,
        onActivate: handleActivate,
        onDeactivate: handleDeactivate,
      }),
    [
      handleView,
      handleEdit,
      handleDeleteClick,
      handleActivate,
      handleDeactivate,
    ]
  );

  return (
    <div className="space-y-6">
      <PageHeader
        title="Branches"
        description="Manage your pharmacy branch locations"
        icon={Building2}
        actions={
          <Button onClick={() => navigate(ROUTES.BRANCHES.NEW)}>
            <Plus className="mr-2 h-4 w-4" />
            Add Branch
          </Button>
        }
      />

      {/* Filters */}
      <div className="flex flex-col gap-4 sm:flex-row">
        <Input
          placeholder="Search branches..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="sm:w-[300px]"
        />
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="sm:w-[150px]">
            <SelectValue placeholder="Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="active">Active</SelectItem>
            <SelectItem value="inactive">Inactive</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={branches}
        isLoading={isLoading}
        searchable={false}
      />

      {/* Delete Confirmation */}
      <ConfirmDialog
        open={deleteDialog.open}
        onOpenChange={(open) => setDeleteDialog({ open, branch: null })}
        title="Delete Branch"
        description={`Are you sure you want to delete "${deleteDialog.branch?.branchName}"? This action cannot be undone.`}
        confirmText="Delete"
        cancelText="Cancel"
        variant="destructive"
        onConfirm={handleDeleteConfirm}
        isLoading={deleteMutation.isPending}
      />
    </div>
  );
};

export default BranchesPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\branches\BranchFormPage.jsx"   & echo.. 
/**
 * Branch Form Page
 * Create or edit a branch
 */

import { useEffect } from "react";
import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft, Building2 } from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { PageHeader, LoadingSpinner } from "@/components/common";
import {
  useBranch,
  useCreateBranch,
  useUpdateBranch,
  BranchForm,
} from "@/features/branches";

const BranchFormPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const isEditing = Boolean(id);

  // Queries
  const { data: branch, isLoading: isBranchLoading } = useBranch(id);
  const createMutation = useCreateBranch();
  const updateMutation = useUpdateBranch();

  const isLoading = isEditing && isBranchLoading;
  const isSubmitting = createMutation.isPending || updateMutation.isPending;

  // Handle form submission
  const handleSubmit = (data) => {
    if (isEditing) {
      updateMutation.mutate(
        { id, data },
        { onSuccess: () => navigate(ROUTES.BRANCHES.ROOT) }
      );
    } else {
      createMutation.mutate(data, {
        onSuccess: () => navigate(ROUTES.BRANCHES.ROOT),
      });
    }
  };

  const handleCancel = () => {
    navigate(ROUTES.BRANCHES.ROOT);
  };

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <LoadingSpinner size="lg" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title={isEditing ? "Edit Branch" : "Create Branch"}
        description={
          isEditing
            ? "Update branch information"
            : "Add a new pharmacy branch location"
        }
        icon={Building2}
        actions={
          <Button variant="ghost" onClick={handleCancel}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back to Branches
          </Button>
        }
      />

      <div className="max-w-3xl">
        <BranchForm
          branch={branch}
          onSubmit={handleSubmit}
          onCancel={handleCancel}
          isSubmitting={isSubmitting}
        />
      </div>
    </div>
  );
};

export default BranchFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\categories\CategoriesPage.jsx"   & echo.. 
/**
 * Categories Page
 * Displays all categories with dialog-based CRUD
 */

import { useState, useMemo, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import { Plus, Download } from "lucide-react";
import { toast } from "sonner";
import { ROUTES } from "@/config";
import {
  useCategories,
  useCreateCategory,
  useUpdateCategory,
  useDeleteCategory,
  getCategoryColumns,
  CategoryFormDialog,
} from "@/features/categories";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { useConfirm } from "@/components/common/ConfirmDialog";

/**
 * CategoriesPage component
 */
const CategoriesPage = () => {
  const navigate = useNavigate();
  const { confirm } = useConfirm();

  // Search state
  const [searchQuery, setSearchQuery] = useState("");

  // Dialog state
  const [dialogOpen, setDialogOpen] = useState(false);
  const [selectedCategory, setSelectedCategory] = useState(null);

  // Pagination state
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  // Sorting state
  const [sorting, setSorting] = useState([]);

  // Fetch categories (no query params - we'll filter client-side)
  const { data: apiData, isLoading, isFetching } = useCategories();

  // Filter categories based on search query and exclude deleted items
  const data = useMemo(() => {
    if (!apiData?.content) return apiData;

    // First, filter out deleted/inactive categories
    const activeCategories = apiData.content.filter(
      (category) => category.isActive !== false
    );

    // Then apply search filter if there's a search query
    if (!searchQuery.trim()) {
      return {
        ...apiData,
        content: activeCategories,
        totalElements: activeCategories.length,
        totalPages: Math.ceil(activeCategories.length / pagination.pageSize),
      };
    }

    const query = searchQuery.toLowerCase().trim();
    const filteredContent = activeCategories.filter((category) => {
      return (
        category.categoryName?.toLowerCase().includes(query) ||
        category.description?.toLowerCase().includes(query) ||
        category.categoryCode?.toLowerCase().includes(query)
      );
    });

    return {
      ...apiData,
      content: filteredContent,
      totalElements: filteredContent.length,
      totalPages: Math.ceil(filteredContent.length / pagination.pageSize),
    };
  }, [apiData, searchQuery, pagination.pageSize]);

  // Mutations
  const createCategory = useCreateCategory();
  const updateCategory = useUpdateCategory();
  const deleteCategory = useDeleteCategory();

  // Handlers
  const handleAdd = useCallback(() => {
    setSelectedCategory(null);
    setDialogOpen(true);
  }, []);

  const handleEdit = useCallback((category) => {
    setSelectedCategory(category);
    setDialogOpen(true);
  }, []);

  const handleView = useCallback(
    (category) => {
      // Navigate to products filtered by category
      navigate(`${ROUTES.PRODUCTS.LIST}?categoryId=${category.id}`);
    },
    [navigate]
  );

  const handleToggleStatus = useCallback(
    async (category) => {
      const isActivating = !category.isActive;
      const confirmed = await confirm({
        title: isActivating ? "Activate Category?" : "Deactivate Category?",
        description: isActivating
          ? `"${category.categoryName}" will be visible and available for use.`
          : `"${category.categoryName}" will be hidden from active lists. Products in this category will remain unchanged.`,
        confirmText: isActivating ? "Yes, Activate" : "Yes, Deactivate",
        cancelText: "Cancel",
        variant: "warning",
      });

      if (confirmed) {
        updateCategory.mutate({
          id: category.id,
          data: { 
            categoryName: category.categoryName, 
            description: category.description,
            isActive: isActivating
          },
        });
      }
    },
    [confirm, updateCategory]
  );

  const handleDelete = useCallback(
    async (category) => {
      const productCount = category.productCount || 0;
      const confirmed = await confirm({
        title: "Delete Category?",
        description:
          productCount > 0
            ? `"${category.categoryName}" has ${productCount} product${
                productCount > 1 ? "s" : ""
              }. These products will need to be reassigned. This action cannot be undone.`
            : `Are you sure you want to delete "${category.categoryName}"? This action cannot be undone.`,
        confirmText: "Yes, Delete",
        cancelText: "Cancel",
        variant: "danger",
      });

      if (confirmed) {
        deleteCategory.mutate(category.id);
      }
    },
    [confirm, deleteCategory]
  );

  const handleSubmit = useCallback(
    (data) => {
      if (selectedCategory) {
        updateCategory.mutate(
          { id: selectedCategory.id, data },
          { onSuccess: () => setDialogOpen(false) }
        );
      } else {
        createCategory.mutate(data, {
          onSuccess: () => setDialogOpen(false),
        });
      }
    },
    [selectedCategory, createCategory, updateCategory]
  );

  // Get columns with handlers
  const columns = useMemo(
    () =>
      getCategoryColumns({
        onView: handleView,
        onEdit: handleEdit,
        onToggleStatus: handleToggleStatus,
        onDelete: handleDelete,
      }),
    [handleView, handleEdit, handleToggleStatus, handleDelete]
  );

  return (
    <div className="space-y-6">
      <PageHeader
        title="Categories"
        description="Organize your products into categories"
        actions={
          <div className="flex gap-2">
            <Button variant="outline" size="sm">
              <Download className="mr-2 h-4 w-4" />
              Export
            </Button>
            <Button onClick={handleAdd}>
              <Plus className="mr-2 h-4 w-4" />
              Add Category
            </Button>
          </div>
        }
      />

      {/* Search */}
      <div className="flex items-center gap-4">
        <div className="relative flex-1 max-w-sm">
          <Input
            placeholder="Search categories by name, code, or description..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="pr-8"
          />
          {searchQuery && (
            <Button
              variant="ghost"
              size="sm"
              className="absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0"
              onClick={() => setSearchQuery("")}
            >
              <span className="sr-only">Clear search</span>
            </Button>
          )}
        </div>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={data?.content || []}
        isLoading={isLoading}
        isFetching={isFetching}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          pageCount: data?.totalPages || 0,
          total: data?.totalElements || 0,
        }}
        onPaginationChange={setPagination}
        sorting={sorting}
        onSortingChange={setSorting}
      />

      {/* Form Dialog */}
      <CategoryFormDialog
        open={dialogOpen}
        onOpenChange={setDialogOpen}
        category={selectedCategory}
        onSubmit={handleSubmit}
        isSubmitting={createCategory.isPending || updateCategory.isPending}
      />
    </div>
  );
};

export default CategoriesPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\customers\CreditAccountsPage.jsx"   & echo.. 
/**
 * Credit Accounts Page
 * Displays customers with outstanding credit balances
 */

import { useState, useMemo, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import { Download, DollarSign, TrendingUp, AlertTriangle } from "lucide-react";
import { ROUTES } from "@/config";
import { useCustomers } from "@/features/customers";
import { getCreditAccountColumns } from "@/features/customers/components/CreditAccountColumns";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { formatCurrency } from "@/utils/formatters";

/**
 * CreditAccountsPage component
 */
const CreditAccountsPage = () => {
  const navigate = useNavigate();

  // Filters state
  const [searchQuery, setSearchQuery] = useState("");
  const [creditFilter, setcreditFilter] = useState("all");

  // Pagination state
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  // Sorting state
  const [sorting, setSorting] = useState([
    { id: "currentBalance", desc: true },
  ]);

  // Build query params - only get customers with credit limits
  const queryParams = useMemo(
    () => ({
      page: pagination.pageIndex,
      size: pagination.pageSize,
      sort:
        sorting.length > 0
          ? `${sorting[0].id},${sorting[0].desc ? "desc" : "asc"}`
          : "currentBalance,desc",
      ...(searchQuery && { search: searchQuery }),
      isActive: true, // Only active customers
    }),
    [pagination, sorting, searchQuery]
  );

  // Fetch customers
  const { data, isLoading, isFetching } = useCustomers(queryParams);

  // Filter customers with credit limits and apply credit filter
  const filteredData = useMemo(() => {
    if (!data?.content) return [];

    let filtered = data.content.filter((customer) => {
      const creditLimit = customer.creditLimit || 0;
      const balance = customer.currentBalance || 0;

      // Only show customers with credit limits set
      if (creditLimit <= 0) return false;

      // Apply credit filter
      if (creditFilter === "outstanding") {
        return balance > 0;
      } else if (creditFilter === "overLimit") {
        return balance > creditLimit;
      } else if (creditFilter === "nearLimit") {
        return balance >= creditLimit * 0.75 && balance < creditLimit;
      }

      return true; // "all" filter
    });

    return filtered;
  }, [data?.content, creditFilter]);

  // Calculate statistics
  const stats = useMemo(() => {
    if (!filteredData.length)
      return {
        totalCustomers: 0,
        totalOutstanding: 0,
        totalCreditLimit: 0,
        overLimitCount: 0,
      };

    const totalOutstanding = filteredData.reduce(
      (sum, customer) => sum + (customer.currentBalance || 0),
      0
    );
    const totalCreditLimit = filteredData.reduce(
      (sum, customer) => sum + (customer.creditLimit || 0),
      0
    );
    const overLimitCount = filteredData.filter(
      (customer) => customer.currentBalance > customer.creditLimit
    ).length;

    return {
      totalCustomers: filteredData.length,
      totalOutstanding,
      totalCreditLimit,
      overLimitCount,
    };
  }, [filteredData]);

  // Handlers
  const handleView = useCallback(
    (customer) => {
      navigate(ROUTES.CUSTOMERS.VIEW(customer.id));
    },
    [navigate]
  );

  const handleManageCredit = useCallback(
    (customer) => {
      navigate(ROUTES.CUSTOMERS.EDIT(customer.id));
    },
    [navigate]
  );

  const handleExport = useCallback(() => {
    // TODO: Implement export functionality
    console.log("Export credit accounts");
  }, []);

  // Get columns
  const columns = useMemo(
    () =>
      getCreditAccountColumns({
        onView: handleView,
        onManageCredit: handleManageCredit,
      }),
    [handleView, handleManageCredit]
  );

  // Prepare pagination data for server-side mode
  const paginationData = useMemo(() => {
    const start = pagination.pageIndex * pagination.pageSize;
    const paginatedItems = filteredData.slice(
      start,
      start + pagination.pageSize
    );

    return {
      content: paginatedItems,
      total: filteredData.length,
      pageCount: Math.ceil(filteredData.length / pagination.pageSize),
    };
  }, [filteredData, pagination.pageIndex, pagination.pageSize]);

  return (
    <div className="space-y-6">
      {/* Page Header */}
      <PageHeader
        title="Credit Accounts"
        description="Manage customer credit accounts and outstanding balances"
      />

      {/* Statistics Cards */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Total Customers
            </CardTitle>
            <DollarSign className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.totalCustomers}</div>
            <p className="text-xs text-muted-foreground">
              With credit accounts
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Outstanding Balance
            </CardTitle>
            <TrendingUp className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {formatCurrency(stats.totalOutstanding)}
            </div>
            <p className="text-xs text-muted-foreground">Total receivables</p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Total Credit Limit
            </CardTitle>
            <DollarSign className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {formatCurrency(stats.totalCreditLimit)}
            </div>
            <p className="text-xs text-muted-foreground">Available credit</p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Over Limit</CardTitle>
            <AlertTriangle className="h-4 w-4 text-destructive" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-destructive">
              {stats.overLimitCount}
            </div>
            <p className="text-xs text-muted-foreground">
              Customers exceeding limit
            </p>
          </CardContent>
        </Card>
      </div>

      {/* Filters and Actions */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search by name, code, phone..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
        <div className="flex flex-col sm:flex-row gap-2">
          <Select value={creditFilter} onValueChange={setcreditFilter}>
            <SelectTrigger className="w-full sm:w-[180px]">
              <SelectValue placeholder="Filter by credit" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="all">All Accounts</SelectItem>
              <SelectItem value="outstanding">With Balance</SelectItem>
              <SelectItem value="overLimit">Over Limit</SelectItem>
              <SelectItem value="nearLimit">Near Limit (75%+)</SelectItem>
            </SelectContent>
          </Select>
          <Button variant="outline" onClick={handleExport}>
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={paginationData.content}
        isLoading={isLoading}
        isFetching={isFetching}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: paginationData.total,
          pageCount: paginationData.pageCount,
        }}
        onPaginationChange={(updater) => {
          setPagination((old) =>
            typeof updater === "function" ? updater(old) : updater
          );
        }}
        sorting={sorting}
        onSortingChange={setSorting}
        manualPagination={false}
        manualSorting={false}
        showPagination={true}
        emptyMessage="No credit accounts found."
      />
    </div>
  );
};

export default CreditAccountsPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\customers\CustomerFormPage.jsx"   & echo.. 
/**
 * Customer Form Page
 * Create or edit a customer
 */

import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useCustomer,
  useCreateCustomer,
  useUpdateCustomer,
  CustomerForm,
} from "@/features/customers";
import { PageHeader, PageLoader } from "@/components/common";
import { Button } from "@/components/ui/button";

/**
 * CustomerFormPage component
 */
const CustomerFormPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const isEditing = Boolean(id);

  // Fetch customer if editing
  const { data: customer, isLoading } = useCustomer(id);

  // Mutations
  const createCustomer = useCreateCustomer();
  const updateCustomer = useUpdateCustomer();

  const handleSubmit = (data) => {
    if (isEditing) {
      updateCustomer.mutate(
        { id, data },
        {
          onSuccess: () => navigate(ROUTES.CUSTOMERS.LIST),
        }
      );
    } else {
      createCustomer.mutate(data, {
        onSuccess: () => navigate(ROUTES.CUSTOMERS.LIST),
      });
    }
  };

  const handleCancel = () => {
    navigate(-1);
  };

  if (isEditing && isLoading) {
    return <PageLoader message="Loading customer..." />;
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title={isEditing ? "Edit Customer" : "Add New Customer"}
        description={
          isEditing
            ? `Editing: ${customer?.firstName} ${customer?.lastName}`
            : "Create a new customer record"
        }
        actions={
          <Button variant="ghost" onClick={() => navigate(-1)}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back
          </Button>
        }
      />

      <div className="max-w-4xl">
        <CustomerForm
          customer={customer}
          onSubmit={handleSubmit}
          onCancel={handleCancel}
          isSubmitting={createCustomer.isPending || updateCustomer.isPending}
        />
      </div>
    </div>
  );
};

export default CustomerFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\customers\CustomersPage.jsx"   & echo.. 
/**
 * Customers List Page
 * Displays all customers with filtering, sorting, and pagination
 */

import { useState, useMemo, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import { Plus, Download, Upload } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useCustomers,
  useDeleteCustomer,
  useActivateCustomer,
  useDeactivateCustomer,
  getCustomerColumns,
} from "@/features/customers";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { useConfirm } from "@/components/common/ConfirmDialog";

/**
 * CustomersPage component
 */
const CustomersPage = () => {
  const navigate = useNavigate();
  const confirm = useConfirm();

  // Filters state
  const [searchQuery, setSearchQuery] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");

  // Pagination state
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  // Sorting state
  const [sorting, setSorting] = useState([]);

  // Build query params
  const queryParams = useMemo(
    () => ({
      page: pagination.pageIndex,
      size: pagination.pageSize,
      sortBy:
        sorting.length > 0
          ? sorting[0].id
          : "customerName",
      sortDir:
        sorting.length > 0
          ? (sorting[0].desc ? "desc" : "asc")
          : "asc",
      ...(searchQuery && { search: searchQuery }),
      ...(statusFilter &&
        statusFilter !== "all" && { isActive: statusFilter === "active" }),
    }),
    [pagination, sorting, searchQuery, statusFilter]
  );

  // Fetch customers
  const { data, isLoading, isFetching } = useCustomers(queryParams);
  const deleteCustomer = useDeleteCustomer();
  const activateCustomer = useActivateCustomer();
  const deactivateCustomer = useDeactivateCustomer();

  // Handlers
  const handleView = useCallback(
    (customer) => {
      navigate(ROUTES.CUSTOMERS.VIEW(customer.id));
    },
    [navigate]
  );

  const handleEdit = useCallback(
    (customer) => {
      navigate(ROUTES.CUSTOMERS.EDIT(customer.id));
    },
    [navigate]
  );

  const handleDelete = useCallback(
    async (customer) => {
      const confirmed = await confirm({
        title: "Delete Customer",
        description: `Are you sure you want to delete "${customer.customerName}"? This action cannot be undone.`,
        confirmText: "Delete",
        cancelText: "Cancel",
        variant: "destructive",
      });

      if (confirmed) {
        deleteCustomer.mutate(customer.id);
      }
    },
    [confirm, deleteCustomer]
  );

  const handleActivate = useCallback(
    async (customer) => {
      activateCustomer.mutate(customer.id);
    },
    [activateCustomer]
  );

  const handleDeactivate = useCallback(
    async (customer) => {
      const confirmed = await confirm({
        title: "Deactivate Customer",
        description: `Deactivate "${customer.firstName} ${customer.lastName}"? They won't be able to make purchases.`,
        confirmText: "Deactivate",
        cancelText: "Cancel",
      });

      if (confirmed) {
        deactivateCustomer.mutate(customer.id);
      }
    },
    [confirm, deactivateCustomer]
  );

  // Get columns with handlers
  const columns = useMemo(
    () =>
      getCustomerColumns({
        onView: handleView,
        onEdit: handleEdit,
        onDelete: handleDelete,
        onActivate: handleActivate,
        onDeactivate: handleDeactivate,
      }),
    [handleView, handleEdit, handleDelete, handleActivate, handleDeactivate]
  );

  return (
    <div className="space-y-6">
      <PageHeader
        title="Customers"
        description="Manage your customer database"
        actions={
          <div className="flex flex-wrap gap-2">
            <Button variant="outline" size="sm" className="flex-1 sm:flex-none">
              <Upload className="mr-2 h-4 w-4" />
              <span className="hidden sm:inline">Import</span>
            </Button>
            <Button variant="outline" size="sm" className="flex-1 sm:flex-none">
              <Download className="mr-2 h-4 w-4" />
              <span className="hidden sm:inline">Export</span>
            </Button>
            <Button
              onClick={() => navigate(ROUTES.CUSTOMERS.NEW)}
              className="flex-1 sm:flex-none"
            >
              <Plus className="mr-2 h-4 w-4" />
              Add Customer
            </Button>
          </div>
        }
      />

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <Input
          placeholder="Search customers..."
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          className="w-full sm:w-80"
        />
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="w-full sm:w-[180px]">
            <SelectValue placeholder="Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All</SelectItem>
            <SelectItem value="active">Active</SelectItem>
            <SelectItem value="inactive">Inactive</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={data?.content || []}
        isLoading={isLoading}
        isFetching={isFetching}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          pageCount: data?.totalPages || 0,
          total: data?.totalElements || 0,
        }}
        onPaginationChange={setPagination}
        sorting={sorting}
        onSortingChange={setSorting}
      />
    </div>
  );
};

export default CustomersPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\dashboard\DashboardPage.jsx"   & echo.. 
/**
 * DashboardPage Component
 * Main dashboard entry point - routes to role-specific dashboard
 */

import { DashboardRouter } from "@/features/dashboard";

/**
 * DashboardPage - Entry point that delegates to role-specific dashboards
 */
const DashboardPage = () => {
  return <DashboardRouter />;
};

export default DashboardPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\employees\EmployeeAttendancePage.jsx"   & echo.. 
/**
 * Employee Attendance Page
 * Track and manage employee attendance records
 */

import { useNavigate } from "react-router-dom";
import { ArrowLeft } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { PageHeader } from "@/components/common";
import { ROUTES } from "@/config";

const EmployeeAttendancePage = () => {
  const navigate = useNavigate();

  return (
    <div className="container mx-auto py-6 space-y-6">
      <PageHeader
        title="Employee Attendance"
        description="Track and manage employee attendance records"
      >
        <Button
          variant="outline"
          onClick={() => navigate(ROUTES.EMPLOYEES.LIST)}
        >
          <ArrowLeft className="mr-2 h-4 w-4" />
          Back to Employees
        </Button>
      </PageHeader>

      <Card>
        <CardContent className="py-12">
          <div className="flex flex-col items-center justify-center text-center space-y-4">
            <div className="text-6xl"></div>
            <h2 className="text-2xl font-bold">
              Attendance Feature Coming Soon
            </h2>
            <p className="text-muted-foreground max-w-md">
              The attendance tracking feature is currently under development.
              This feature will allow you to track employee attendance,
              check-in/check-out times, and generate attendance reports.
            </p>
            <Button
              onClick={() => navigate(ROUTES.EMPLOYEES.LIST)}
              className="mt-4"
            >
              Return to Employees
            </Button>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

export default EmployeeAttendancePage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\employees\EmployeeFormPage.jsx"   & echo.. 
/**
 * Employee Form Page
 * Create and edit employee records
 */

import { useEffect } from "react";
import { useNavigate, useParams } from "react-router-dom";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { ArrowLeft } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { PageHeader } from "@/components/common";
import { useUser, useCreateUser, useUpdateUser } from "@/features/users";
import { useActiveBranches } from "@/features/branches";
import { ROUTES } from "@/config";
import { ROLES } from "@/constants";
import { toast } from "sonner";

// Validation schema for creating employee
const createEmployeeSchema = z.object({
  username: z.string().min(3, "Username must be at least 3 characters"),
  password: z.string().min(6, "Password must be at least 6 characters"),
  fullName: z.string().min(1, "Full name is required"),
  email: z.string().email("Invalid email address"),
  phoneNumber: z.string().optional().or(z.literal("")),
  role: z.string().min(1, "Role is required"),
  branchId: z.string().optional(),
  employeeCode: z.string().optional(),
});

// Validation schema for editing employee
const editEmployeeSchema = z.object({
  username: z.string().min(3, "Username must be at least 3 characters"),
  fullName: z.string().min(1, "Full name is required"),
  email: z.string().email("Invalid email address"),
  phoneNumber: z.string().optional().or(z.literal("")),
  role: z.string().min(1, "Role is required"),
  branchId: z.string().optional(),
  employeeCode: z.string().optional(),
});

const EmployeeFormPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const isEditing = Boolean(id);

  // Queries
  const { data: employee, isLoading: loadingEmployee } = useUser(id, {
    enabled: isEditing,
  });
  const { data: branchesData } = useActiveBranches();
  const branches = branchesData || [];

  // Mutations
  const createMutation = useCreateUser();
  const updateMutation = useUpdateUser();

  // Form
  const form = useForm({
    resolver: zodResolver(
      isEditing ? editEmployeeSchema : createEmployeeSchema
    ),
    defaultValues: {
      username: "",
      password: "",
      fullName: "",
      email: "",
      phoneNumber: "",
      role: "",
      branchId: "",
      employeeCode: "",
    },
  });

  // Load employee data
  useEffect(() => {
    if (employee) {
      form.reset({
        username: employee.username || "",
        fullName: employee.fullName || "",
        email: employee.email || "",
        phoneNumber: employee.phoneNumber || "",
        role: employee.role || "",
        branchId: employee.branchId ? String(employee.branchId) : "",
        employeeCode: employee.employeeCode || "",
      });
    }
  }, [employee, form]);

  // Submit handler
  const onSubmit = async (data) => {
    try {
      if (isEditing) {
        // For update - only send fields that UpdateUserRequest accepts
        const updatePayload = {
          fullName: data.fullName,
          email: data.email,
          phoneNumber: data.phoneNumber || null,
          role: data.role,
        };
        await updateMutation.mutateAsync({ id, data: updatePayload });
        toast.success("Employee updated successfully");
      } else {
        // For create - send all fields including username, password, etc.
        const createPayload = {
          username: data.username,
          password: data.password,
          fullName: data.fullName,
          email: data.email,
          phoneNumber: data.phoneNumber || null,
          role: data.role,
          branchId:
            data.branchId && data.branchId !== "all"
              ? parseInt(data.branchId)
              : null,
          employeeCode: data.employeeCode || null,
        };
        await createMutation.mutateAsync(createPayload);
        toast.success("Employee created successfully");
      }
      navigate(ROUTES.EMPLOYEES.LIST);
    } catch (error) {
      toast.error(error.message || "Failed to save employee");
    }
  };

  if (isEditing && loadingEmployee) {
    return <div className="container mx-auto py-6">Loading...</div>;
  }

  return (
    <div className="container mx-auto py-6 space-y-6">
      <PageHeader
        title={isEditing ? "Edit Employee" : "Add New Employee"}
        description={
          isEditing
            ? "Update employee information"
            : "Create a new employee record"
        }
      >
        <Button
          variant="outline"
          onClick={() => navigate(ROUTES.EMPLOYEES.LIST)}
        >
          <ArrowLeft className="mr-2 h-4 w-4" />
          Back to List
        </Button>
      </PageHeader>

      <Card>
        <CardHeader>
          <CardTitle>Employee Information</CardTitle>
          <CardDescription>
            Fill in the details below to {isEditing ? "update" : "create"} an
            employee
          </CardDescription>
        </CardHeader>
        <CardContent>
          <Form {...form}>
            <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
              {/* Personal Information */}
              <div className="grid gap-4 md:grid-cols-2">
                <FormField
                  control={form.control}
                  name="username"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Username *</FormLabel>
                      <FormControl>
                        <Input
                          placeholder="johndoe"
                          {...field}
                          disabled={isEditing}
                        />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                <FormField
                  control={form.control}
                  name="employeeCode"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Employee Code</FormLabel>
                      <FormControl>
                        <Input
                          placeholder="EMP001"
                          {...field}
                          disabled={isEditing}
                        />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />
              </div>

              <FormField
                control={form.control}
                name="fullName"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Full Name *</FormLabel>
                    <FormControl>
                      <Input placeholder="John Doe" {...field} />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />

              {!isEditing && (
                <FormField
                  control={form.control}
                  name="password"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Password *</FormLabel>
                      <FormControl>
                        <Input
                          type="password"
                          placeholder=""
                          {...field}
                        />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />
              )}

              {/* Contact Information */}
              <div className="grid gap-4 md:grid-cols-2">
                <FormField
                  control={form.control}
                  name="email"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Email *</FormLabel>
                      <FormControl>
                        <Input
                          type="email"
                          placeholder="john.doe@example.com"
                          {...field}
                        />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                <FormField
                  control={form.control}
                  name="phoneNumber"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Phone</FormLabel>
                      <FormControl>
                        <Input placeholder="+94 XX XXX XXXX" {...field} />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />
              </div>

              {/* Work Information */}
              <div className="grid gap-4 md:grid-cols-2">
                <FormField
                  control={form.control}
                  name="role"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Role *</FormLabel>
                      <Select
                        onValueChange={field.onChange}
                        defaultValue={field.value}
                      >
                        <FormControl>
                          <SelectTrigger>
                            <SelectValue placeholder="Select role" />
                          </SelectTrigger>
                        </FormControl>
                        <SelectContent>
                          <SelectItem value={ROLES.PHARMACIST}>
                            Pharmacist
                          </SelectItem>
                          <SelectItem value={ROLES.CASHIER}>Cashier</SelectItem>
                          <SelectItem value={ROLES.INVENTORY_MANAGER}>
                            Inventory Manager
                          </SelectItem>
                          <SelectItem value={ROLES.BRANCH_MANAGER}>
                            Branch Manager
                          </SelectItem>
                          <SelectItem value={ROLES.ACCOUNTANT}>
                            Accountant
                          </SelectItem>
                        </SelectContent>
                      </Select>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                <FormField
                  control={form.control}
                  name="branchId"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Branch</FormLabel>
                      <Select
                        onValueChange={field.onChange}
                        defaultValue={field.value}
                        disabled={isEditing}
                      >
                        <FormControl>
                          <SelectTrigger>
                            <SelectValue placeholder="Select branch" />
                          </SelectTrigger>
                        </FormControl>
                        <SelectContent>
                          <SelectItem value="all">All Branches</SelectItem>
                          {branches.map((branch) => (
                            <SelectItem
                              key={branch.id}
                              value={String(branch.id)}
                            >
                              {branch.name}
                            </SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                      <FormDescription>
                        {isEditing
                          ? "Branch cannot be changed after creation"
                          : "Leave empty for multi-branch access"}
                      </FormDescription>
                      <FormMessage />
                    </FormItem>
                  )}
                />
              </div>

              {/* Form Actions */}
              <div className="flex justify-end gap-4">
                <Button
                  type="button"
                  variant="outline"
                  onClick={() => navigate(ROUTES.EMPLOYEES.LIST)}
                >
                  Cancel
                </Button>
                <Button
                  type="submit"
                  disabled={
                    createMutation.isPending || updateMutation.isPending
                  }
                >
                  {createMutation.isPending || updateMutation.isPending
                    ? "Saving..."
                    : isEditing
                    ? "Update Employee"
                    : "Create Employee"}
                </Button>
              </div>
            </form>
          </Form>
        </CardContent>
      </Card>
    </div>
  );
};

export default EmployeeFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\employees\EmployeesPage.jsx"   & echo.. 
/**
 * Employees Page
 * Manage staff and employee information
 */

import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { Plus, Edit, Trash2, Eye, Calendar, Clock } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
} from "@/components/ui/alert-dialog";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { PageHeader, DataTable } from "@/components/common";
import { useUsers, useDeleteUser } from "@/features/users";
import { useActiveBranches } from "@/features/branches";
import { ROUTES } from "@/config";

// Status badge variants
const statusConfig = {
  ACTIVE: { label: "Active", variant: "success" },
  INACTIVE: { label: "Inactive", variant: "secondary" },
  SUSPENDED: { label: "Suspended", variant: "destructive" },
};

const EmployeesPage = () => {
  const navigate = useNavigate();
  const [filters, setFilters] = useState({
    search: "",
    branchId: "all",
    status: "all",
    page: 0,
    size: 20,
  });
  const [deleteDialog, setDeleteDialog] = useState({
    open: false,
    employee: null,
  });

  // Queries
  const { data, isLoading } = useUsers({
    ...filters,
    branchId: filters.branchId === "all" ? undefined : filters.branchId,
    status: filters.status === "all" ? undefined : filters.status,
  });
  const { data: branchesData } = useActiveBranches();
  const deleteMutation = useDeleteUser();

  const employees = data?.content || data || [];
  const branches = branchesData || [];
  const totalPages = data?.totalPages || 1;

  // Handle delete
  const handleDelete = () => {
    if (deleteDialog.employee) {
      deleteMutation.mutate(deleteDialog.employee.id, {
        onSuccess: () => setDeleteDialog({ open: false, employee: null }),
      });
    }
  };

  // Columns
  const columns = [
    {
      accessorKey: "name",
      header: "Name",
      cell: ({ row }) => {
        const user = row.original;
        return (
          <div>
            <p className="font-medium">{user.fullName || user.username}</p>
            <p className="text-sm text-muted-foreground">{user.email}</p>
          </div>
        );
      },
    },
    {
      accessorKey: "role",
      header: "Role",
      cell: ({ row }) => (
        <Badge variant="outline">{row.getValue("role")}</Badge>
      ),
    },
    {
      accessorKey: "branchName",
      header: "Branch",
      cell: ({ row }) => row.getValue("branchName") || "All Branches",
    },
    {
      accessorKey: "phoneNumber",
      header: "Phone",
    },
    {
      accessorKey: "status",
      header: "Status",
      cell: ({ row }) => {
        const status = row.getValue("status") || "ACTIVE";
        const config = statusConfig[status] || statusConfig.ACTIVE;
        return <Badge variant={config.variant}>{config.label}</Badge>;
      },
    },
    {
      id: "actions",
      header: "Actions",
      cell: ({ row }) => {
        const employee = row.original;
        return (
          <div className="flex gap-1">
            <Button
              variant="ghost"
              size="icon"
              onClick={() => navigate(ROUTES.EMPLOYEES.VIEW(employee.id))}
              title="View"
            >
              <Eye className="h-4 w-4" />
            </Button>
            <Button
              variant="ghost"
              size="icon"
              onClick={() => navigate(ROUTES.EMPLOYEES.EDIT(employee.id))}
              title="Edit"
            >
              <Edit className="h-4 w-4" />
            </Button>
            <Button
              variant="ghost"
              size="icon"
              onClick={() => setDeleteDialog({ open: true, employee })}
              title="Delete"
            >
              <Trash2 className="h-4 w-4 text-destructive" />
            </Button>
          </div>
        );
      },
    },
  ];

  return (
    <div className="container mx-auto py-6 space-y-6">
      <PageHeader
        title="Employees"
        description="Manage your staff and employee information"
      >
        <div className="flex gap-2">
          <Button
            variant="outline"
            onClick={() => navigate(ROUTES.EMPLOYEES.ATTENDANCE)}
          >
            <Clock className="h-4 w-4 mr-2" />
            Attendance
          </Button>
          <Button onClick={() => navigate(ROUTES.EMPLOYEES.NEW)}>
            <Plus className="h-4 w-4 mr-2" />
            Add Employee
          </Button>
        </div>
      </PageHeader>

      <Tabs defaultValue="list">
        <TabsList>
          <TabsTrigger value="list">Employee List</TabsTrigger>
          <TabsTrigger value="attendance">Attendance Summary</TabsTrigger>
        </TabsList>

        <TabsContent value="list" className="space-y-4">
          {/* Filters */}
          <div className="flex flex-col sm:flex-row gap-4">
            <Input
              placeholder="Search employees..."
              value={filters.search}
              onChange={(e) =>
                setFilters({ ...filters, search: e.target.value, page: 0 })
              }
              className="sm:w-80"
            />
            <Select
              value={filters.branchId}
              onValueChange={(value) =>
                setFilters({ ...filters, branchId: value, page: 0 })
              }
            >
              <SelectTrigger className="w-48">
                <SelectValue placeholder="All Branches" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">All Branches</SelectItem>
                {branches.map((branch) => (
                  <SelectItem key={branch.id} value={String(branch.id)}>
                    {branch.name}
                  </SelectItem>
                ))}
              </SelectContent>
            </Select>
            <Select
              value={filters.status}
              onValueChange={(value) =>
                setFilters({ ...filters, status: value, page: 0 })
              }
            >
              <SelectTrigger className="w-40">
                <SelectValue placeholder="All Status" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">All Status</SelectItem>
                <SelectItem value="ACTIVE">Active</SelectItem>
                <SelectItem value="INACTIVE">Inactive</SelectItem>
                <SelectItem value="SUSPENDED">Suspended</SelectItem>
              </SelectContent>
            </Select>
          </div>

          {/* Data Table */}
          <DataTable
            columns={columns}
            data={employees}
            isLoading={isLoading}
            pagination={{
              pageIndex: filters.page,
              pageSize: filters.size,
              pageCount: totalPages,
              onPageChange: (page) => setFilters({ ...filters, page }),
            }}
          />
        </TabsContent>

        <TabsContent value="attendance">
          <Card>
            <CardHeader>
              <CardTitle>Attendance Summary</CardTitle>
              <CardDescription>
                Overview of employee attendance for the current month
              </CardDescription>
            </CardHeader>
            <CardContent>
              <p className="text-muted-foreground text-center py-8">
                Attendance tracking coming soon...
              </p>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>

      {/* Delete Dialog */}
      <AlertDialog
        open={deleteDialog.open}
        onOpenChange={(open) => {
          if (!open) setDeleteDialog({ open: false, employee: null });
        }}
      >
        <AlertDialogContent>
          <AlertDialogHeader>
            <AlertDialogTitle>Delete Employee</AlertDialogTitle>
            <AlertDialogDescription>
              Are you sure you want to delete{" "}
              <strong>
                {deleteDialog.employee?.firstName}{" "}
                {deleteDialog.employee?.lastName}
              </strong>
              ? This action cannot be undone.
            </AlertDialogDescription>
          </AlertDialogHeader>
          <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction
              onClick={handleDelete}
              className="bg-destructive text-destructive-foreground hover:bg-destructive/90"
            >
              Delete
            </AlertDialogAction>
          </AlertDialogFooter>
        </AlertDialogContent>
      </AlertDialog>
    </div>
  );
};

export default EmployeesPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\employees\EmployeeViewPage.jsx"   & echo.. 
/**
 * Employee View Page
 * Display detailed employee information
 */

import { useNavigate, useParams } from "react-router-dom";
import {
  ArrowLeft,
  Edit,
  Mail,
  Phone,
  MapPin,
  Calendar,
  Briefcase,
} from "lucide-react";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import { PageHeader } from "@/components/common";
import { useUser } from "@/features/users";
import { ROUTES } from "@/config";
import { formatDate } from "@/utils/formatters";
import { ROLE_LABELS } from "@/constants/roles";

const EmployeeViewPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();

  const { data: employee, isLoading } = useUser(id);

  if (isLoading) {
    return (
      <div className="container mx-auto py-6">
        <div className="animate-pulse space-y-4">
          <div className="h-8 bg-muted rounded w-1/4"></div>
          <div className="h-32 bg-muted rounded"></div>
        </div>
      </div>
    );
  }

  if (!employee) {
    return (
      <div className="container mx-auto py-6">
        <p className="text-muted-foreground">Employee not found</p>
      </div>
    );
  }

  const statusConfig = {
    ACTIVE: { label: "Active", variant: "success" },
    INACTIVE: { label: "Inactive", variant: "secondary" },
    SUSPENDED: { label: "Suspended", variant: "destructive" },
  };

  const status = employee.status || "ACTIVE";
  const statusInfo = statusConfig[status] || statusConfig.ACTIVE;

  return (
    <div className="container mx-auto py-6 space-y-6">
      <PageHeader
        title={employee.fullName || employee.username}
        description="Employee details and information"
      >
        <div className="flex gap-2">
          <Button
            variant="outline"
            onClick={() => navigate(ROUTES.EMPLOYEES.LIST)}
          >
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back
          </Button>
          <Button onClick={() => navigate(ROUTES.EMPLOYEES.EDIT(id))}>
            <Edit className="mr-2 h-4 w-4" />
            Edit
          </Button>
        </div>
      </PageHeader>

      <div className="grid gap-6 md:grid-cols-3">
        {/* Main Information */}
        <Card className="md:col-span-2">
          <CardHeader>
            <div className="flex items-start justify-between">
              <div>
                <CardTitle className="text-2xl">
                  {employee.fullName || employee.username}
                </CardTitle>
                <CardDescription>
                  @{employee.username} &middot;{" "}
                  {ROLE_LABELS[employee.role] || employee.role}
                </CardDescription>
              </div>
              <Badge variant={statusInfo.variant}>{statusInfo.label}</Badge>
            </div>
          </CardHeader>
          <CardContent className="space-y-6">
            {/* Contact Information */}
            <div>
              <h3 className="font-semibold mb-3">Contact Information</h3>
              <div className="space-y-2">
                <div className="flex items-center gap-3 text-sm">
                  <Mail className="h-4 w-4 text-muted-foreground" />
                  <span>{employee.email}</span>
                </div>
                {employee.phoneNumber && (
                  <div className="flex items-center gap-3 text-sm">
                    <Phone className="h-4 w-4 text-muted-foreground" />
                    <span>{employee.phoneNumber}</span>
                  </div>
                )}
                {employee.employeeCode && (
                  <div className="flex items-center gap-3 text-sm">
                    <Briefcase className="h-4 w-4 text-muted-foreground" />
                    <span className="text-muted-foreground">Code:</span>
                    <span className="font-medium">{employee.employeeCode}</span>
                  </div>
                )}
              </div>
            </div>

            <Separator />

            {/* Work Information */}
            <div>
              <h3 className="font-semibold mb-3">Work Information</h3>
              <div className="space-y-2">
                <div className="flex items-center gap-3 text-sm">
                  <Briefcase className="h-4 w-4 text-muted-foreground" />
                  <span className="text-muted-foreground w-32">Role:</span>
                  <span className="font-medium">
                    {ROLE_LABELS[employee.role] || employee.role}
                  </span>
                </div>
                <div className="flex items-center gap-3 text-sm">
                  <MapPin className="h-4 w-4 text-muted-foreground" />
                  <span className="text-muted-foreground w-32">Branch:</span>
                  <span className="font-medium">
                    {employee.branchName || "All Branches"}
                  </span>
                </div>
                {employee.createdAt && (
                  <div className="flex items-center gap-3 text-sm">
                    <Calendar className="h-4 w-4 text-muted-foreground" />
                    <span className="text-muted-foreground w-32">Joined:</span>
                    <span className="font-medium">
                      {formatDate(employee.createdAt)}
                    </span>
                  </div>
                )}
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Quick Stats */}
        <div className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="text-base">Account Status</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                <div>
                  <p className="text-sm text-muted-foreground">Status</p>
                  <Badge variant={statusInfo.variant} className="mt-1">
                    {statusInfo.label}
                  </Badge>
                </div>
                <div>
                  <p className="text-sm text-muted-foreground">Employee ID</p>
                  <p className="text-sm font-medium">#{employee.id}</p>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle className="text-base">Quick Actions</CardTitle>
            </CardHeader>
            <CardContent className="space-y-2">
              <Button
                variant="outline"
                className="w-full justify-start"
                onClick={() => navigate(ROUTES.PAYROLL.SALARIES)}
              >
                View Salary Records
              </Button>
              <Button
                variant="outline"
                className="w-full justify-start"
                onClick={() => navigate(ROUTES.PAYROLL.ATTENDANCE)}
              >
                View Attendance
              </Button>
            </CardContent>
          </Card>
        </div>
      </div>
    </div>
  );
};

export default EmployeeViewPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\BanksPage.jsx"   & echo.. 
/**
 * Banks Page
 * Manages bank accounts
 */

import { useState, useMemo } from "react";
import { Plus, Download, Building2 } from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatCurrency } from "@/utils/formatters";

const BanksPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "bankName",
        header: "Bank Name",
        cell: ({ row }) => (
          <div className="flex items-center gap-2">
            <Building2 className="h-4 w-4 text-muted-foreground" />
            <span className="font-medium">{row.getValue("bankName")}</span>
          </div>
        ),
      },
      {
        accessorKey: "accountNumber",
        header: "Account Number",
        cell: ({ row }) => (
          <span className="font-mono text-sm">
            {row.getValue("accountNumber")}
          </span>
        ),
      },
      {
        accessorKey: "accountType",
        header: "Type",
        meta: { className: "hidden md:table-cell" },
        cell: ({ row }) => row.getValue("accountType") || "CURRENT",
      },
      {
        accessorKey: "branchName",
        header: "Branch",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => row.getValue("branchName") || "-",
      },
      {
        accessorKey: "currentBalance",
        header: "Balance",
        cell: ({ row }) => (
          <span className="font-semibold text-lg">
            {formatCurrency(row.getValue("currentBalance") || 0)}
          </span>
        ),
      },
      {
        accessorKey: "isActive",
        header: "Status",
        cell: ({ row }) => {
          const isActive = row.getValue("isActive");
          return (
            <Badge variant={isActive ? "success" : "secondary"}>
              {isActive ? "Active" : "Inactive"}
            </Badge>
          );
        },
      },
    ],
    []
  );

  const stats = {
    totalBanks: 0,
    totalBalance: 0,
    activeAccounts: 0,
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title="Bank Accounts"
        description="Manage bank accounts and balances"
      >
        <div className="flex gap-2">
          <Button>
            <Plus className="mr-2 h-4 w-4" />
            Add Bank Account
          </Button>
          <Button variant="outline">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      </PageHeader>

      {/* Statistics */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-3">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Total Banks</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.totalBanks}</div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Total Balance</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {formatCurrency(stats.totalBalance)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Active Accounts
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.activeAccounts}</div>
          </CardContent>
        </Card>
      </div>

      {/* Search */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search bank accounts..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        emptyMessage="No bank accounts found."
      />
    </div>
  );
};

export default BanksPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\CashBookPage.jsx"   & echo.. 
import React, { useState } from "react";
import { Calendar, DollarSign, TrendingUp, TrendingDown, Download, Filter } from "lucide-react";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "../../components/ui/card";
import { Button } from "../../components/ui/button";
import { Input } from "../../components/ui/input";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "../../components/ui/select";
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "../../components/ui/table";
import { Badge } from "../../components/ui/badge";

/**
 * Cash Book Page - Track all cash transactions
 * Records cash receipts and payments with running balance
 */
const CashBookPage = () => {
  const [filters, setFilters] = useState({
    startDate: new Date().toISOString().split("T")[0],
    endDate: new Date().toISOString().split("T")[0],
    type: "all",
  });

  // Mock data - replace with actual API calls
  const cashTransactions = [
    {
      id: 1,
      date: "2026-01-03",
      time: "09:30",
      reference: "SALE-0001",
      description: "Cash Sale - Bill #0001",
      type: "RECEIPT",
      amount: 1250.00,
      runningBalance: 15250.00,
    },
    {
      id: 2,
      date: "2026-01-03",
      time: "10:15",
      reference: "SALE-0002",
      description: "Cash Sale - Bill #0002",
      type: "RECEIPT",
      amount: 3500.00,
      runningBalance: 18750.00,
    },
    {
      id: 3,
      date: "2026-01-03",
      time: "11:00",
      reference: "EXP-001",
      description: "Utility Bills Payment",
      type: "PAYMENT",
      amount: 2000.00,
      runningBalance: 16750.00,
    },
    {
      id: 4,
      date: "2026-01-03",
      time: "12:30",
      reference: "SALE-0003",
      description: "Cash Sale - Bill #0003",
      type: "RECEIPT",
      amount: 850.00,
      runningBalance: 17600.00,
    },
    {
      id: 5,
      date: "2026-01-03",
      time: "14:00",
      reference: "PAY-GRN-001",
      description: "Supplier Payment - ABC Pharma",
      type: "PAYMENT",
      amount: 5000.00,
      runningBalance: 12600.00,
    },
  ];

  const summary = {
    openingBalance: 14000.00,
    totalReceipts: 5600.00,
    totalPayments: 7000.00,
    closingBalance: 12600.00,
  };

  const handleExport = () => {
    console.log("Exporting cash book data...");
    // Implement actual export logic
  };

  return (
    <div className="p-6 space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold">Cash Book</h1>
          <p className="text-gray-600 mt-1">Track all cash receipts and payments</p>
        </div>
        <Button onClick={handleExport}>
          <Download className="mr-2 h-4 w-4" />
          Export Cash Book
        </Button>
      </div>

      {/* Summary Cards */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm font-medium text-gray-600">
              Opening Balance
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {summary.openingBalance.toLocaleString()}
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm font-medium text-gray-600 flex items-center">
              <TrendingUp className="mr-1 h-4 w-4 text-green-600" />
              Total Receipts
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {summary.totalReceipts.toLocaleString()}
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm font-medium text-gray-600 flex items-center">
              <TrendingDown className="mr-1 h-4 w-4 text-red-600" />
              Total Payments
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-red-600">
              {summary.totalPayments.toLocaleString()}
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm font-medium text-gray-600">
              Closing Balance
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {summary.closingBalance.toLocaleString()}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Filters */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center">
            <Filter className="mr-2 h-5 w-5" />
            Filters
          </CardTitle>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div>
              <label className="text-sm font-medium mb-2 block">Start Date</label>
              <Input
                type="date"
                value={filters.startDate}
                onChange={(e) =>
                  setFilters((prev) => ({ ...prev, startDate: e.target.value }))
                }
              />
            </div>
            <div>
              <label className="text-sm font-medium mb-2 block">End Date</label>
              <Input
                type="date"
                value={filters.endDate}
                onChange={(e) =>
                  setFilters((prev) => ({ ...prev, endDate: e.target.value }))
                }
              />
            </div>
            <div>
              <label className="text-sm font-medium mb-2 block">Type</label>
              <Select
                value={filters.type}
                onValueChange={(value) =>
                  setFilters((prev) => ({ ...prev, type: value }))
                }
              >
                <SelectTrigger>
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="all">All Transactions</SelectItem>
                  <SelectItem value="RECEIPT">Receipts Only</SelectItem>
                  <SelectItem value="PAYMENT">Payments Only</SelectItem>
                </SelectContent>
              </Select>
            </div>
            <div className="flex items-end">
              <Button className="w-full">Apply Filters</Button>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Cash Book Table */}
      <Card>
        <CardHeader>
          <CardTitle>Cash Book Entries</CardTitle>
          <CardDescription>
            Chronological record of all cash transactions
          </CardDescription>
        </CardHeader>
        <CardContent>
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>Date & Time</TableHead>
                <TableHead>Reference</TableHead>
                <TableHead>Description</TableHead>
                <TableHead>Type</TableHead>
                <TableHead className="text-right">Receipt ()</TableHead>
                <TableHead className="text-right">Payment ()</TableHead>
                <TableHead className="text-right">Balance ()</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              <TableRow className="bg-gray-50 font-medium">
                <TableCell colSpan={6}>Opening Balance</TableCell>
                <TableCell className="text-right">
                  {summary.openingBalance.toLocaleString()}
                </TableCell>
              </TableRow>
              {cashTransactions.map((transaction) => (
                <TableRow key={transaction.id}>
                  <TableCell>
                    <div>
                      <div className="font-medium">{transaction.date}</div>
                      <div className="text-sm text-gray-500">{transaction.time}</div>
                    </div>
                  </TableCell>
                  <TableCell>
                    <code className="text-xs bg-gray-100 px-2 py-1 rounded">
                      {transaction.reference}
                    </code>
                  </TableCell>
                  <TableCell>{transaction.description}</TableCell>
                  <TableCell>
                    <Badge
                      variant={
                        transaction.type === "RECEIPT" ? "success" : "destructive"
                      }
                    >
                      {transaction.type}
                    </Badge>
                  </TableCell>
                  <TableCell className="text-right text-green-600 font-medium">
                    {transaction.type === "RECEIPT"
                      ? `${transaction.amount.toLocaleString()}`
                      : "-"}
                  </TableCell>
                  <TableCell className="text-right text-red-600 font-medium">
                    {transaction.type === "PAYMENT"
                      ? `${transaction.amount.toLocaleString()}`
                      : "-"}
                  </TableCell>
                  <TableCell className="text-right font-bold">
                    {transaction.runningBalance.toLocaleString()}
                  </TableCell>
                </TableRow>
              ))}
              <TableRow className="bg-gray-100 font-bold">
                <TableCell colSpan={4}>Totals</TableCell>
                <TableCell className="text-right text-green-600">
                  {summary.totalReceipts.toLocaleString()}
                </TableCell>
                <TableCell className="text-right text-red-600">
                  {summary.totalPayments.toLocaleString()}
                </TableCell>
                <TableCell className="text-right">
                  {summary.closingBalance.toLocaleString()}
                </TableCell>
              </TableRow>
            </TableBody>
          </Table>
        </CardContent>
      </Card>
    </div>
  );
};

export default CashBookPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\CashRegisterFormDialog.jsx"   & echo.. 
/**
 * Cash Register Form Dialog
 * Form for recording cash in/out transactions
 */

import { useForm } from "react-hook-form";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";

const CashRegisterFormDialog = ({ open, onOpenChange, onSubmit }) => {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    setValue,
    watch,
  } = useForm({
    defaultValues: {
      type: "CASH_IN",
      amount: "",
      description: "",
      reference: "",
    },
  });

  const transactionType = watch("type");

  const handleFormSubmit = async (data) => {
    try {
      await onSubmit(data);
      onOpenChange(false);
    } catch (error) {
      console.error("Failed to submit transaction:", error);
    }
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-[500px]">
        <DialogHeader>
          <DialogTitle>New Cash Transaction</DialogTitle>
          <DialogDescription>
            Record a cash in or cash out transaction
          </DialogDescription>
        </DialogHeader>

        <form onSubmit={handleSubmit(handleFormSubmit)} className="space-y-4">
          <div className="space-y-2">
            <Label htmlFor="type">Transaction Type *</Label>
            <Select
              defaultValue="CASH_IN"
              onValueChange={(value) => setValue("type", value)}
            >
              <SelectTrigger>
                <SelectValue placeholder="Select type" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="CASH_IN">Cash In</SelectItem>
                <SelectItem value="CASH_OUT">Cash Out</SelectItem>
                <SelectItem value="OPENING">Opening Balance</SelectItem>
                <SelectItem value="CLOSING">Closing Balance</SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="space-y-2">
            <Label htmlFor="amount">Amount *</Label>
            <Input
              id="amount"
              type="number"
              step="0.01"
              placeholder="0.00"
              {...register("amount", {
                required: "Amount is required",
                min: { value: 0.01, message: "Amount must be greater than 0" },
              })}
            />
            {errors.amount && (
              <p className="text-sm text-destructive">
                {errors.amount.message}
              </p>
            )}
          </div>

          <div className="space-y-2">
            <Label htmlFor="reference">Reference Number</Label>
            <Input
              id="reference"
              placeholder="e.g., REC-001, INV-123"
              {...register("reference")}
            />
          </div>

          <div className="space-y-2">
            <Label htmlFor="description">Description *</Label>
            <Textarea
              id="description"
              placeholder={
                transactionType === "CASH_IN"
                  ? "e.g., Sales payment, Customer payment"
                  : transactionType === "CASH_OUT"
                  ? "e.g., Petty expenses, Supplier payment"
                  : "Enter transaction details"
              }
              rows={3}
              {...register("description", {
                required: "Description is required",
              })}
            />
            {errors.description && (
              <p className="text-sm text-destructive">
                {errors.description.message}
              </p>
            )}
          </div>

          <DialogFooter>
            <Button
              type="button"
              variant="outline"
              onClick={() => onOpenChange(false)}
              disabled={isSubmitting}
            >
              Cancel
            </Button>
            <Button type="submit" disabled={isSubmitting}>
              {isSubmitting ? "Recording..." : "Record Transaction"}
            </Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </Dialog>
  );
};

export default CashRegisterFormDialog;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\CashRegisterPage.jsx"   & echo.. 
/**
 * Cash Register Page
 * Manages daily cash register operations and balances
 */

import { useState, useMemo, useCallback } from "react";
import {
  Plus,
  Download,
  DollarSign,
  TrendingUp,
  TrendingDown,
} from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatCurrency, formatDate, formatDateTime } from "@/utils/formatters";
import CashRegisterFormDialog from "./CashRegisterFormDialog";
import { toast } from "sonner";

const CashRegisterPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [typeFilter, setTypeFilter] = useState("all");
  const [isFormOpen, setIsFormOpen] = useState(false);
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });
  const [sorting, setSorting] = useState([{ id: "timestamp", desc: true }]);

  // Mock data
  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "timestamp",
        header: "Date & Time",
        cell: ({ row }) => formatDateTime(row.getValue("timestamp")),
      },
      {
        accessorKey: "type",
        header: "Type",
        cell: ({ row }) => {
          const type = row.getValue("type");
          const variant =
            type === "CASH_IN"
              ? "success"
              : type === "CASH_OUT"
              ? "destructive"
              : "default";
          return (
            <Badge variant={variant}>
              {type === "CASH_IN"
                ? "Cash In"
                : type === "CASH_OUT"
                ? "Cash Out"
                : type}
            </Badge>
          );
        },
      },
      {
        accessorKey: "amount",
        header: "Amount",
        cell: ({ row }) => {
          const amount = row.getValue("amount");
          const type = row.original.type;
          return (
            <span
              className={`font-semibold ${
                type === "CASH_IN" ? "text-green-600" : "text-red-600"
              }`}
            >
              {type === "CASH_IN" ? "+" : "-"}
              {formatCurrency(amount)}
            </span>
          );
        },
      },
      {
        accessorKey: "description",
        header: "Description",
        meta: { className: "hidden md:table-cell" },
      },
      {
        accessorKey: "reference",
        header: "Reference",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => {
          const ref = row.getValue("reference");
          return ref ? <span className="font-mono text-sm">{ref}</span> : "-";
        },
      },
      {
        accessorKey: "handledBy",
        header: "Handled By",
        meta: { className: "hidden xl:table-cell" },
        cell: ({ row }) => row.getValue("handledBy") || "-",
      },
      {
        accessorKey: "balance",
        header: "Balance",
        cell: ({ row }) => (
          <span className="font-semibold">
            {formatCurrency(row.getValue("balance") || 0)}
          </span>
        ),
      },
    ],
    []
  );

  const stats = {
    openingBalance: 0,
    cashIn: 0,
    cashOut: 0,
    currentBalance: 0,
  };

  const handleCashTransaction = useCallback(async (data) => {
    try {
      // TODO: Call API to record cash transaction
      console.log("Recording cash transaction:", data);

      toast.success("Transaction Recorded", {
        description:
          "Cash register transaction has been recorded successfully.",
      });

      // TODO: Refresh data after creation
    } catch (error) {
      toast.error("Error", {
        description: "Failed to record transaction. Please try again.",
      });
    }
  }, []);

  return (
    <div className="space-y-6">
      <PageHeader
        title="Cash Register"
        description="Manage daily cash register operations"
      >
        <div className="flex gap-2">
          <Button onClick={() => setIsFormOpen(true)}>
            <Plus className="mr-2 h-4 w-4" />
            New Transaction
          </Button>
          <Button variant="outline">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      </PageHeader>

      <CashRegisterFormDialog
        open={isFormOpen}
        onOpenChange={setIsFormOpen}
        onSubmit={handleCashTransaction}
      />

      {/* Statistics */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Opening Balance
            </CardTitle>
            <DollarSign className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {formatCurrency(stats.openingBalance)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Cash In</CardTitle>
            <TrendingUp className="h-4 w-4 text-green-600" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {formatCurrency(stats.cashIn)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Cash Out</CardTitle>
            <TrendingDown className="h-4 w-4 text-red-600" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-red-600">
              {formatCurrency(stats.cashOut)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Current Balance
            </CardTitle>
            <DollarSign className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {formatCurrency(stats.currentBalance)}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search transactions..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
        <Select value={typeFilter} onValueChange={setTypeFilter}>
          <SelectTrigger className="w-full sm:w-[180px]">
            <SelectValue placeholder="Filter by type" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Types</SelectItem>
            <SelectItem value="CASH_IN">Cash In</SelectItem>
            <SelectItem value="CASH_OUT">Cash Out</SelectItem>
            <SelectItem value="OPENING">Opening Balance</SelectItem>
            <SelectItem value="CLOSING">Closing Balance</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        sorting={sorting}
        onSortingChange={setSorting}
        emptyMessage="No cash register transactions found."
      />
    </div>
  );
};

export default CashRegisterPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\ChequeFormDialog.jsx"   & echo.. 
/**
 * Cheque Form Dialog
 * Form for creating/editing cheques
 */

import { useForm } from "react-hook-form";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";

const ChequeFormDialog = ({ open, onOpenChange, onSubmit, cheque }) => {
  const isEditing = !!cheque;

  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    setValue,
  } = useForm({
    defaultValues: cheque || {
      chequeNumber: "",
      chequeDate: new Date().toISOString().split("T")[0],
      bankName: "",
      branchName: "",
      payeeName: "",
      amount: "",
      notes: "",
    },
  });

  const handleFormSubmit = async (data) => {
    try {
      await onSubmit(data);
      onOpenChange(false);
    } catch (error) {
      console.error("Failed to submit cheque:", error);
    }
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-[600px]">
        <DialogHeader>
          <DialogTitle>{isEditing ? "Edit Cheque" : "New Cheque"}</DialogTitle>
          <DialogDescription>
            {isEditing
              ? "Update cheque details"
              : "Record a new cheque payment or collection"}
          </DialogDescription>
        </DialogHeader>

        <form onSubmit={handleSubmit(handleFormSubmit)} className="space-y-4">
          <div className="grid grid-cols-2 gap-4">
            <div className="space-y-2">
              <Label htmlFor="chequeNumber">Cheque Number *</Label>
              <Input
                id="chequeNumber"
                placeholder="e.g., 123456"
                {...register("chequeNumber", {
                  required: "Cheque number is required",
                })}
              />
              {errors.chequeNumber && (
                <p className="text-sm text-destructive">
                  {errors.chequeNumber.message}
                </p>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="chequeDate">Cheque Date *</Label>
              <Input
                id="chequeDate"
                type="date"
                {...register("chequeDate", {
                  required: "Cheque date is required",
                })}
              />
              {errors.chequeDate && (
                <p className="text-sm text-destructive">
                  {errors.chequeDate.message}
                </p>
              )}
            </div>
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div className="space-y-2">
              <Label htmlFor="bankName">Bank Name *</Label>
              <Input
                id="bankName"
                placeholder="e.g., Commercial Bank"
                {...register("bankName", {
                  required: "Bank name is required",
                })}
              />
              {errors.bankName && (
                <p className="text-sm text-destructive">
                  {errors.bankName.message}
                </p>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="branchName">Branch Name</Label>
              <Input
                id="branchName"
                placeholder="e.g., Main Branch"
                {...register("branchName")}
              />
            </div>
          </div>

          <div className="space-y-2">
            <Label htmlFor="payeeName">Payee Name *</Label>
            <Input
              id="payeeName"
              placeholder="Name of the payee"
              {...register("payeeName", {
                required: "Payee name is required",
              })}
            />
            {errors.payeeName && (
              <p className="text-sm text-destructive">
                {errors.payeeName.message}
              </p>
            )}
          </div>

          <div className="space-y-2">
            <Label htmlFor="amount">Amount *</Label>
            <Input
              id="amount"
              type="number"
              step="0.01"
              placeholder="0.00"
              {...register("amount", {
                required: "Amount is required",
                min: { value: 0.01, message: "Amount must be greater than 0" },
              })}
            />
            {errors.amount && (
              <p className="text-sm text-destructive">
                {errors.amount.message}
              </p>
            )}
          </div>

          <div className="space-y-2">
            <Label htmlFor="notes">Notes</Label>
            <Textarea
              id="notes"
              placeholder="Additional notes"
              rows={2}
              {...register("notes")}
            />
          </div>

          <DialogFooter>
            <Button
              type="button"
              variant="outline"
              onClick={() => onOpenChange(false)}
              disabled={isSubmitting}
            >
              Cancel
            </Button>
            <Button type="submit" disabled={isSubmitting}>
              {isSubmitting
                ? "Saving..."
                : isEditing
                ? "Update Cheque"
                : "Create Cheque"}
            </Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </Dialog>
  );
};

export default ChequeFormDialog;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\ChequesPage.jsx"   & echo.. 
/**
 * Cheques Page
 * Manages cheque payments and collections
 */

import { useState, useMemo, useCallback } from "react";
import { Plus, Download } from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatCurrency, formatDate } from "@/utils/formatters";
import { CHEQUE_STATUS } from "@/constants";
import ChequeFormDialog from "./ChequeFormDialog";
import { toast } from "sonner";

const ChequesPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");
  const [isFormOpen, setIsFormOpen] = useState(false);
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });
  const [sorting, setSorting] = useState([{ id: "chequeDate", desc: true }]);

  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "chequeNumber",
        header: "Cheque #",
        cell: ({ row }) => (
          <span className="font-mono text-sm">
            {row.getValue("chequeNumber")}
          </span>
        ),
      },
      {
        accessorKey: "chequeDate",
        header: "Cheque Date",
        cell: ({ row }) => formatDate(row.getValue("chequeDate")),
      },
      {
        accessorKey: "bankName",
        header: "Bank",
        meta: { className: "hidden md:table-cell" },
      },
      {
        accessorKey: "payeeName",
        header: "Payee",
        meta: { className: "hidden lg:table-cell" },
      },
      {
        accessorKey: "amount",
        header: "Amount",
        cell: ({ row }) => (
          <span className="font-semibold">
            {formatCurrency(row.getValue("amount"))}
          </span>
        ),
      },
      {
        accessorKey: "status",
        header: "Status",
        cell: ({ row }) => {
          const status = row.getValue("status");
          const variant =
            status === "CLEARED"
              ? "success"
              : status === "PENDING"
              ? "warning"
              : status === "BOUNCED"
              ? "destructive"
              : "default";
          return <Badge variant={variant}>{status}</Badge>;
        },
      },
      {
        accessorKey: "clearanceDate",
        header: "Clearance Date",
        meta: { className: "hidden xl:table-cell" },
        cell: ({ row }) => {
          const date = row.getValue("clearanceDate");
          return date ? formatDate(date) : "-";
        },
      },
    ],
    []
  );

  const stats = {
    totalCheques: 0,
    pendingAmount: 0,
    clearedAmount: 0,
    bouncedCount: 0,
  };

  const handleCreateCheque = useCallback(async (data) => {
    try {
      // TODO: Call API to create cheque
      console.log("Creating cheque:", data);

      toast.success("Cheque Created", {
        description: "The cheque has been successfully recorded.",
      });

      // TODO: Refresh data after creation
    } catch (error) {
      toast.error("Error", {
        description: "Failed to create cheque. Please try again.",
      });
    }
  }, []);

  return (
    <div className="space-y-6">
      <PageHeader
        title="Cheques"
        description="Track cheque payments and collections"
      >
        <div className="flex gap-2">
          <Button onClick={() => setIsFormOpen(true)}>
            <Plus className="mr-2 h-4 w-4" />
            New Cheque
          </Button>
          <Button variant="outline">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      </PageHeader>

      <ChequeFormDialog
        open={isFormOpen}
        onOpenChange={setIsFormOpen}
        onSubmit={handleCreateCheque}
      />

      {/* Statistics */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Total Cheques</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.totalCheques}</div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Pending Amount
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-orange-600">
              {formatCurrency(stats.pendingAmount)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Cleared Amount
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {formatCurrency(stats.clearedAmount)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Bounced</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-red-600">
              {stats.bouncedCount}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search cheques..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="w-full sm:w-[180px]">
            <SelectValue placeholder="Filter by status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="PENDING">Pending</SelectItem>
            <SelectItem value="CLEARED">Cleared</SelectItem>
            <SelectItem value="BOUNCED">Bounced</SelectItem>
            <SelectItem value="CANCELLED">Cancelled</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        sorting={sorting}
        onSortingChange={setSorting}
        emptyMessage="No cheques found."
      />
    </div>
  );
};

export default ChequesPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\FinancePage.jsx"   & echo.. 
/**
 * Finance Overview Page
 * Hub for finance-related features
 */

import { useNavigate } from "react-router-dom";
import {
  DollarSign,
  FileText,
  CreditCard,
  Wallet,
  Building2,
  BookOpen,
  TrendingUp,
} from "lucide-react";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { PageHeader } from "@/components/common";
import { ROUTES } from "@/config";

const financeFeatures = [
  {
    title: "Transactions",
    description: "View and manage financial transactions",
    icon: DollarSign,
    href: ROUTES.FINANCE.TRANSACTIONS,
    color: "text-green-600",
    bgColor: "bg-green-100 dark:bg-green-900/30",
  },
  {
    title: "Invoices",
    description: "Manage customer and supplier invoices",
    icon: FileText,
    href: ROUTES.FINANCE.INVOICES,
    color: "text-blue-600",
    bgColor: "bg-blue-100 dark:bg-blue-900/30",
  },
  {
    title: "Cheques",
    description: "Track cheque payments and collections",
    icon: CreditCard,
    href: ROUTES.FINANCE.CHEQUES,
    color: "text-purple-600",
    bgColor: "bg-purple-100 dark:bg-purple-900/30",
  },
  {
    title: "Cash Register",
    description: "Manage cash register operations",
    icon: Wallet,
    href: ROUTES.FINANCE.CASH_REGISTER,
    color: "text-yellow-600",
    bgColor: "bg-yellow-100 dark:bg-yellow-900/30",
  },
  {
    title: "Banks",
    description: "Bank accounts and reconciliation",
    icon: Building2,
    href: ROUTES.FINANCE.BANKS,
    color: "text-indigo-600",
    bgColor: "bg-indigo-100 dark:bg-indigo-900/30",
  },
  {
    title: "Cash Book",
    description: "Daily cash book entries",
    icon: BookOpen,
    href: ROUTES.FINANCE.CASH_BOOK,
    color: "text-orange-600",
    bgColor: "bg-orange-100 dark:bg-orange-900/30",
  },
  {
    title: "Financial Summary",
    description: "Overall financial health summary",
    icon: TrendingUp,
    href: ROUTES.FINANCE.SUMMARY,
    color: "text-emerald-600",
    bgColor: "bg-emerald-100 dark:bg-emerald-900/30",
  },
];

const FinancePage = () => {
  const navigate = useNavigate();

  return (
    <div className="container mx-auto py-6 space-y-6">
      <PageHeader
        title="Finance"
        description="Manage all financial aspects of your pharmacy"
      />

      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
        {financeFeatures.map((feature) => {
          const Icon = feature.icon;
          return (
            <Card
              key={feature.title}
              className="cursor-pointer hover:shadow-lg transition-shadow"
              onClick={() => navigate(feature.href)}
            >
              <CardHeader>
                <div className="flex items-center gap-4">
                  <div className={`p-3 rounded-lg ${feature.bgColor}`}>
                    <Icon className={`h-6 w-6 ${feature.color}`} />
                  </div>
                  <div>
                    <CardTitle className="text-lg">{feature.title}</CardTitle>
                    <CardDescription>{feature.description}</CardDescription>
                  </div>
                </div>
              </CardHeader>
            </Card>
          );
        })}
      </div>

      {/* Quick Stats */}
      <div className="grid gap-4 md:grid-cols-4 mt-8">
        <Card>
          <CardContent className="p-6">
            <p className="text-sm text-muted-foreground">Today's Revenue</p>
            <p className="text-2xl font-bold">Rs. 0.00</p>
            <p className="text-xs text-muted-foreground mt-1">Loading...</p>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-6">
            <p className="text-sm text-muted-foreground">Pending Receivables</p>
            <p className="text-2xl font-bold">Rs. 0.00</p>
            <p className="text-xs text-muted-foreground mt-1">Loading...</p>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-6">
            <p className="text-sm text-muted-foreground">Pending Payables</p>
            <p className="text-2xl font-bold">Rs. 0.00</p>
            <p className="text-xs text-muted-foreground mt-1">Loading...</p>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-6">
            <p className="text-sm text-muted-foreground">Cash in Hand</p>
            <p className="text-2xl font-bold">Rs. 0.00</p>
            <p className="text-xs text-muted-foreground mt-1">Loading...</p>
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default FinancePage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\FinancialSummaryPage.jsx"   & echo.. 
import React, { useState } from "react";
import {
  TrendingUp,
  TrendingDown,
  DollarSign,
  CreditCard,
  Wallet,
  FileText,
  Download,
  Calendar,
} from "lucide-react";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "../../components/ui/card";
import { Button } from "../../components/ui/button";
import { Input } from "../../components/ui/input";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "../../components/ui/select";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "../../components/ui/tabs";
import { Badge } from "../../components/ui/badge";

/**
 * Financial Summary Page - Comprehensive financial overview
 * Shows income, expenses, profitability, and cash flow
 */
const FinancialSummaryPage = () => {
  const [period, setPeriod] = useState("month");
  const [dateRange, setDateRange] = useState({
    start: new Date().toISOString().split("T")[0],
    end: new Date().toISOString().split("T")[0],
  });

  // Mock financial data - replace with actual API calls
  const financialSummary = {
    revenue: {
      totalSales: 1250000,
      cashSales: 750000,
      creditSales: 500000,
      returnsRefunds: 25000,
      netRevenue: 1225000,
    },
    expenses: {
      purchases: 850000,
      salaries: 120000,
      rent: 50000,
      utilities: 15000,
      transportation: 8000,
      marketing: 12000,
      miscellaneous: 10000,
      totalExpenses: 1065000,
    },
    profitability: {
      grossProfit: 375000,
      grossMargin: 30.6,
      netProfit: 160000,
      netMargin: 13.1,
    },
    cashFlow: {
      openingCash: 250000,
      cashIn: 800000,
      cashOut: 720000,
      closingCash: 330000,
    },
    accountsReceivable: 125000,
    accountsPayable: 180000,
  };

  const monthlyTrend = [
    { month: "Aug", revenue: 980000, expense: 820000, profit: 160000 },
    { month: "Sep", revenue: 1050000, expense: 880000, profit: 170000 },
    { month: "Oct", revenue: 1120000, expense: 940000, profit: 180000 },
    { month: "Nov", revenue: 1180000, expense: 990000, profit: 190000 },
    { month: "Dec", revenue: 1250000, expense: 1065000, profit: 185000 },
    { month: "Jan", revenue: 1250000, expense: 1065000, profit: 160000 },
  ];

  const handleExport = () => {
    console.log("Exporting financial summary...");
    // Implement actual export logic
  };

  return (
    <div className="p-6 space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold">Financial Summary</h1>
          <p className="text-gray-600 mt-1">
            Comprehensive financial performance overview
          </p>
        </div>
        <div className="flex gap-2">
          <Button variant="outline" onClick={handleExport}>
            <Download className="mr-2 h-4 w-4" />
            Export Report
          </Button>
        </div>
      </div>

      {/* Period Selector */}
      <Card>
        <CardContent className="pt-6">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div>
              <label className="text-sm font-medium mb-2 block">Period</label>
              <Select value={period} onValueChange={setPeriod}>
                <SelectTrigger>
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="today">Today</SelectItem>
                  <SelectItem value="week">This Week</SelectItem>
                  <SelectItem value="month">This Month</SelectItem>
                  <SelectItem value="quarter">This Quarter</SelectItem>
                  <SelectItem value="year">This Year</SelectItem>
                  <SelectItem value="custom">Custom Range</SelectItem>
                </SelectContent>
              </Select>
            </div>
            <div>
              <label className="text-sm font-medium mb-2 block">Start Date</label>
              <Input
                type="date"
                value={dateRange.start}
                onChange={(e) =>
                  setDateRange((prev) => ({ ...prev, start: e.target.value }))
                }
              />
            </div>
            <div>
              <label className="text-sm font-medium mb-2 block">End Date</label>
              <Input
                type="date"
                value={dateRange.end}
                onChange={(e) =>
                  setDateRange((prev) => ({ ...prev, end: e.target.value }))
                }
              />
            </div>
            <div className="flex items-end">
              <Button className="w-full">Generate Report</Button>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Key Metrics */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm font-medium text-gray-600">
              Net Revenue
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {financialSummary.revenue.netRevenue.toLocaleString()}
            </div>
            <div className="flex items-center text-sm text-green-600 mt-1">
              <TrendingUp className="mr-1 h-4 w-4" />
              +12.5% from last period
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm font-medium text-gray-600">
              Total Expenses
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {financialSummary.expenses.totalExpenses.toLocaleString()}
            </div>
            <div className="flex items-center text-sm text-orange-600 mt-1">
              <TrendingUp className="mr-1 h-4 w-4" />
              +8.2% from last period
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm font-medium text-gray-600">
              Net Profit
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {financialSummary.profitability.netProfit.toLocaleString()}
            </div>
            <div className="flex items-center text-sm text-green-600 mt-1">
              <Badge variant="success">
                {financialSummary.profitability.netMargin}% Margin
              </Badge>
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="pb-2">
            <CardTitle className="text-sm font-medium text-gray-600">
              Cash in Hand
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {financialSummary.cashFlow.closingCash.toLocaleString()}
            </div>
            <div className="flex items-center text-sm text-blue-600 mt-1">
              <Wallet className="mr-1 h-4 w-4" />
              Available Balance
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Detailed Tabs */}
      <Tabs defaultValue="revenue" className="space-y-4">
        <TabsList className="grid w-full grid-cols-4">
          <TabsTrigger value="revenue">Revenue</TabsTrigger>
          <TabsTrigger value="expenses">Expenses</TabsTrigger>
          <TabsTrigger value="profitability">Profitability</TabsTrigger>
          <TabsTrigger value="cashflow">Cash Flow</TabsTrigger>
        </TabsList>

        {/* Revenue Tab */}
        <TabsContent value="revenue">
          <Card>
            <CardHeader>
              <CardTitle>Revenue Breakdown</CardTitle>
              <CardDescription>Detailed revenue analysis</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid grid-cols-2 gap-4">
                <div className="space-y-2">
                  <div className="flex justify-between py-2 border-b">
                    <span className="text-gray-600">Total Sales</span>
                    <span className="font-semibold">
                      {financialSummary.revenue.totalSales.toLocaleString()}
                    </span>
                  </div>
                  <div className="flex justify-between py-2 border-b">
                    <span className="text-gray-600 ml-4">Cash Sales</span>
                    <span className="font-medium text-green-600">
                      {financialSummary.revenue.cashSales.toLocaleString()}
                    </span>
                  </div>
                  <div className="flex justify-between py-2 border-b">
                    <span className="text-gray-600 ml-4">Credit Sales</span>
                    <span className="font-medium text-orange-600">
                      {financialSummary.revenue.creditSales.toLocaleString()}
                    </span>
                  </div>
                </div>
                <div className="space-y-2">
                  <div className="flex justify-between py-2 border-b">
                    <span className="text-gray-600">Returns & Refunds</span>
                    <span className="font-medium text-red-600">
                      -{financialSummary.revenue.returnsRefunds.toLocaleString()}
                    </span>
                  </div>
                  <div className="flex justify-between py-2 border-b bg-blue-50 px-2">
                    <span className="font-semibold">Net Revenue</span>
                    <span className="font-bold text-blue-600">
                      {financialSummary.revenue.netRevenue.toLocaleString()}
                    </span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Expenses Tab */}
        <TabsContent value="expenses">
          <Card>
            <CardHeader>
              <CardTitle>Expense Breakdown</CardTitle>
              <CardDescription>Detailed expense analysis</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-2">
                {Object.entries(financialSummary.expenses)
                  .filter(([key]) => key !== "totalExpenses")
                  .map(([category, amount]) => (
                    <div key={category} className="flex justify-between py-2 border-b">
                      <span className="text-gray-600 capitalize">
                        {category.replace(/([A-Z])/g, " $1").trim()}
                      </span>
                      <div className="flex items-center gap-4">
                        <div className="w-48 bg-gray-200 rounded-full h-2">
                          <div
                            className="bg-blue-600 h-2 rounded-full"
                            style={{
                              width: `${
                                (amount / financialSummary.expenses.totalExpenses) *
                                100
                              }%`,
                            }}
                          />
                        </div>
                        <span className="font-semibold w-32 text-right">
                          {amount.toLocaleString()}
                        </span>
                      </div>
                    </div>
                  ))}
                <div className="flex justify-between py-3 border-t-2 bg-red-50 px-2 mt-4">
                  <span className="font-bold">Total Expenses</span>
                  <span className="font-bold text-red-600">
                    {financialSummary.expenses.totalExpenses.toLocaleString()}
                  </span>
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Profitability Tab */}
        <TabsContent value="profitability">
          <Card>
            <CardHeader>
              <CardTitle>Profitability Analysis</CardTitle>
              <CardDescription>Profit margins and trends</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid grid-cols-2 gap-6">
                <div className="space-y-4">
                  <div className="p-4 bg-green-50 rounded-lg">
                    <div className="text-sm text-gray-600 mb-1">Gross Profit</div>
                    <div className="text-3xl font-bold text-green-600">
                      {financialSummary.profitability.grossProfit.toLocaleString()}
                    </div>
                    <div className="text-sm text-gray-600 mt-2">
                      Margin: {financialSummary.profitability.grossMargin}%
                    </div>
                  </div>
                  <div className="p-4 bg-blue-50 rounded-lg">
                    <div className="text-sm text-gray-600 mb-1">Net Profit</div>
                    <div className="text-3xl font-bold text-blue-600">
                      {financialSummary.profitability.netProfit.toLocaleString()}
                    </div>
                    <div className="text-sm text-gray-600 mt-2">
                      Margin: {financialSummary.profitability.netMargin}%
                    </div>
                  </div>
                </div>
                <div className="space-y-2">
                  <h3 className="font-semibold mb-3">6-Month Trend</h3>
                  {monthlyTrend.map((month) => (
                    <div key={month.month} className="flex justify-between py-1">
                      <span className="text-gray-600">{month.month}</span>
                      <span
                        className={`font-semibold ${
                          month.profit > 170000
                            ? "text-green-600"
                            : "text-orange-600"
                        }`}
                      >
                        {month.profit.toLocaleString()}
                      </span>
                    </div>
                  ))}
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Cash Flow Tab */}
        <TabsContent value="cashflow">
          <Card>
            <CardHeader>
              <CardTitle>Cash Flow Statement</CardTitle>
              <CardDescription>Cash movement analysis</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="space-y-3">
                <div className="flex justify-between py-3 border-b-2">
                  <span className="font-semibold">Opening Cash Balance</span>
                  <span className="font-bold">
                    {financialSummary.cashFlow.openingCash.toLocaleString()}
                  </span>
                </div>
                <div className="flex justify-between py-2 ml-4">
                  <span className="text-green-600">+ Cash Inflow</span>
                  <span className="font-semibold text-green-600">
                    {financialSummary.cashFlow.cashIn.toLocaleString()}
                  </span>
                </div>
                <div className="flex justify-between py-2 ml-4">
                  <span className="text-red-600">- Cash Outflow</span>
                  <span className="font-semibold text-red-600">
                    {financialSummary.cashFlow.cashOut.toLocaleString()}
                  </span>
                </div>
                <div className="flex justify-between py-3 border-t-2 bg-blue-50 px-2">
                  <span className="font-bold">Closing Cash Balance</span>
                  <span className="font-bold text-blue-600">
                    {financialSummary.cashFlow.closingCash.toLocaleString()}
                  </span>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4 mt-6 pt-6 border-t">
                <Card>
                  <CardHeader className="pb-2">
                    <CardTitle className="text-sm">Accounts Receivable</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="text-2xl font-bold text-orange-600">
                      {financialSummary.accountsReceivable.toLocaleString()}
                    </div>
                    <p className="text-xs text-gray-600 mt-1">
                      Amount to be collected from customers
                    </p>
                  </CardContent>
                </Card>
                <Card>
                  <CardHeader className="pb-2">
                    <CardTitle className="text-sm">Accounts Payable</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="text-2xl font-bold text-red-600">
                      {financialSummary.accountsPayable.toLocaleString()}
                    </div>
                    <p className="text-xs text-gray-600 mt-1">
                      Amount to be paid to suppliers
                    </p>
                  </CardContent>
                </Card>
              </div>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>
    </div>
  );
};

export default FinancialSummaryPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\InvoiceFormDialog.jsx"   & echo.. 
/**
 * Invoice Form Dialog
 * Form for creating/editing invoices
 */

import { useForm } from "react-hook-form";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { INVOICE_STATUS, PAYMENT_STATUS } from "@/constants";

const InvoiceFormDialog = ({ open, onOpenChange, onSubmit, invoice }) => {
  const isEditing = !!invoice;

  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    setValue,
  } = useForm({
    defaultValues: invoice || {
      invoiceDate: new Date().toISOString().split("T")[0],
      dueDate: "",
      customerName: "",
      totalAmount: "",
      discount: 0,
      notes: "",
    },
  });

  const handleFormSubmit = async (data) => {
    try {
      await onSubmit(data);
      onOpenChange(false);
    } catch (error) {
      console.error("Failed to submit invoice:", error);
    }
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-[600px]">
        <DialogHeader>
          <DialogTitle>
            {isEditing ? "Edit Invoice" : "New Invoice"}
          </DialogTitle>
          <DialogDescription>
            {isEditing
              ? "Update invoice details"
              : "Create a new invoice for a customer"}
          </DialogDescription>
        </DialogHeader>

        <form onSubmit={handleSubmit(handleFormSubmit)} className="space-y-4">
          <div className="grid grid-cols-2 gap-4">
            <div className="space-y-2">
              <Label htmlFor="invoiceDate">Invoice Date *</Label>
              <Input
                id="invoiceDate"
                type="date"
                {...register("invoiceDate", {
                  required: "Invoice date is required",
                })}
              />
              {errors.invoiceDate && (
                <p className="text-sm text-destructive">
                  {errors.invoiceDate.message}
                </p>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="dueDate">Due Date</Label>
              <Input id="dueDate" type="date" {...register("dueDate")} />
            </div>
          </div>

          <div className="space-y-2">
            <Label htmlFor="customerName">Customer Name *</Label>
            <Input
              id="customerName"
              placeholder="Enter customer name"
              {...register("customerName", {
                required: "Customer name is required",
              })}
            />
            {errors.customerName && (
              <p className="text-sm text-destructive">
                {errors.customerName.message}
              </p>
            )}
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div className="space-y-2">
              <Label htmlFor="totalAmount">Total Amount *</Label>
              <Input
                id="totalAmount"
                type="number"
                step="0.01"
                placeholder="0.00"
                {...register("totalAmount", {
                  required: "Total amount is required",
                  min: {
                    value: 0.01,
                    message: "Amount must be greater than 0",
                  },
                })}
              />
              {errors.totalAmount && (
                <p className="text-sm text-destructive">
                  {errors.totalAmount.message}
                </p>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="discount">Discount</Label>
              <Input
                id="discount"
                type="number"
                step="0.01"
                placeholder="0.00"
                {...register("discount")}
              />
            </div>
          </div>

          <div className="space-y-2">
            <Label htmlFor="notes">Notes</Label>
            <Textarea
              id="notes"
              placeholder="Additional notes or description"
              rows={3}
              {...register("notes")}
            />
          </div>

          <DialogFooter>
            <Button
              type="button"
              variant="outline"
              onClick={() => onOpenChange(false)}
              disabled={isSubmitting}
            >
              Cancel
            </Button>
            <Button type="submit" disabled={isSubmitting}>
              {isSubmitting
                ? "Saving..."
                : isEditing
                ? "Update Invoice"
                : "Create Invoice"}
            </Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </Dialog>
  );
};

export default InvoiceFormDialog;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\InvoicesPage.jsx"   & echo.. 
/**
 * Invoices Page
 * Manages customer and supplier invoices
 */

import { useState, useMemo, useCallback } from "react";
import { Plus, Download, Eye, Edit, FileText } from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { MoreHorizontal } from "lucide-react";
import { formatCurrency, formatDate } from "@/utils/formatters";
import { INVOICE_STATUS, PAYMENT_STATUS } from "@/constants";
import InvoiceFormDialog from "./InvoiceFormDialog";
import { toast } from "sonner";

const InvoicesPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");
  const [isFormOpen, setIsFormOpen] = useState(false);
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });
  const [sorting, setSorting] = useState([{ id: "invoiceDate", desc: true }]);

  // Mock data
  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "invoiceNumber",
        header: "Invoice #",
        cell: ({ row }) => (
          <span className="font-mono text-sm">
            {row.getValue("invoiceNumber")}
          </span>
        ),
      },
      {
        accessorKey: "invoiceDate",
        header: "Date",
        cell: ({ row }) => formatDate(row.getValue("invoiceDate")),
      },
      {
        accessorKey: "customerName",
        header: "Customer",
        meta: { className: "hidden md:table-cell" },
      },
      {
        accessorKey: "totalAmount",
        header: "Amount",
        cell: ({ row }) => (
          <span className="font-semibold">
            {formatCurrency(row.getValue("totalAmount"))}
          </span>
        ),
      },
      {
        accessorKey: "balanceAmount",
        header: "Balance",
        meta: { className: "hidden sm:table-cell" },
        cell: ({ row }) => {
          const balance = row.getValue("balanceAmount");
          return (
            <span className={balance > 0 ? "text-orange-600 font-medium" : ""}>
              {formatCurrency(balance)}
            </span>
          );
        },
      },
      {
        accessorKey: "paymentStatus",
        header: "Payment",
        cell: ({ row }) => {
          const status = row.getValue("paymentStatus");
          const variant =
            status === "PAID"
              ? "success"
              : status === "PARTIAL"
              ? "warning"
              : "destructive";
          return <Badge variant={variant}>{status}</Badge>;
        },
      },
      {
        accessorKey: "status",
        header: "Status",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => {
          const status = row.getValue("status");
          return <Badge variant="outline">{status}</Badge>;
        },
      },
      {
        id: "actions",
        header: "Actions",
        cell: ({ row }) => (
          <DropdownMenu>
            <DropdownMenuTrigger asChild>
              <Button variant="ghost" size="sm" className="h-8 w-8 p-0">
                <MoreHorizontal className="h-4 w-4" />
              </Button>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end">
              <DropdownMenuItem>
                <Eye className="mr-2 h-4 w-4" />
                View
              </DropdownMenuItem>
              <DropdownMenuItem>
                <Edit className="mr-2 h-4 w-4" />
                Edit
              </DropdownMenuItem>
              <DropdownMenuItem>
                <FileText className="mr-2 h-4 w-4" />
                Download PDF
              </DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        ),
        enableSorting: false,
      },
    ],
    []
  );

  const stats = {
    totalInvoices: 0,
    totalAmount: 0,
    paidAmount: 0,
    outstandingAmount: 0,
  };

  const handleCreateInvoice = useCallback(async (data) => {
    try {
      // TODO: Call API to create invoice
      console.log("Creating invoice:", data);

      toast.success("Invoice Created", {
        description: "The invoice has been successfully created.",
      });

      // TODO: Refresh data after creation
    } catch (error) {
      toast.error("Error", {
        description: "Failed to create invoice. Please try again.",
      });
    }
  }, []);

  return (
    <div className="space-y-6">
      <PageHeader title="Invoices" description="Manage all invoices">
        <div className="flex gap-2">
          <Button onClick={() => setIsFormOpen(true)}>
            <Plus className="mr-2 h-4 w-4" />
            New Invoice
          </Button>
          <Button variant="outline">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      </PageHeader>

      <InvoiceFormDialog
        open={isFormOpen}
        onOpenChange={setIsFormOpen}
        onSubmit={handleCreateInvoice}
      />

      {/* Statistics */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Total Invoices
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.totalInvoices}</div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Total Amount</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {formatCurrency(stats.totalAmount)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Paid Amount</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {formatCurrency(stats.paidAmount)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Outstanding</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-orange-600">
              {formatCurrency(stats.outstandingAmount)}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search invoices..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="w-full sm:w-[180px]">
            <SelectValue placeholder="Filter by status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="PAID">Paid</SelectItem>
            <SelectItem value="PARTIAL">Partial</SelectItem>
            <SelectItem value="UNPAID">Unpaid</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        sorting={sorting}
        onSortingChange={setSorting}
        emptyMessage="No invoices found."
      />
    </div>
  );
};

export default InvoicesPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\TransactionFormDialog.jsx"   & echo.. 
/**
 * Transaction Form Dialog
 * Form for creating/editing financial transactions
 */

import { useState } from "react";
import { useForm } from "react-hook-form";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { TRANSACTION_TYPE, PAYMENT_METHOD } from "@/constants";

const TransactionFormDialog = ({
  open,
  onOpenChange,
  onSubmit,
  transaction,
}) => {
  const isEditing = !!transaction;

  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    setValue,
    watch,
  } = useForm({
    defaultValues: transaction || {
      date: new Date().toISOString().split("T")[0],
      type: "INCOME",
      amount: "",
      description: "",
      paymentMethod: "CASH",
      reference: "",
    },
  });

  const transactionType = watch("type");

  const handleFormSubmit = async (data) => {
    try {
      await onSubmit(data);
      onOpenChange(false);
    } catch (error) {
      console.error("Failed to submit transaction:", error);
    }
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-[500px]">
        <DialogHeader>
          <DialogTitle>
            {isEditing ? "Edit Transaction" : "New Transaction"}
          </DialogTitle>
          <DialogDescription>
            {isEditing
              ? "Update transaction details"
              : "Create a new financial transaction"}
          </DialogDescription>
        </DialogHeader>

        <form onSubmit={handleSubmit(handleFormSubmit)} className="space-y-4">
          <div className="grid grid-cols-2 gap-4">
            <div className="space-y-2">
              <Label htmlFor="date">Date *</Label>
              <Input
                id="date"
                type="date"
                {...register("date", { required: "Date is required" })}
              />
              {errors.date && (
                <p className="text-sm text-destructive">
                  {errors.date.message}
                </p>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="type">Transaction Type *</Label>
              <Select
                defaultValue={transaction?.type || "INCOME"}
                onValueChange={(value) => setValue("type", value)}
              >
                <SelectTrigger>
                  <SelectValue placeholder="Select type" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="INCOME">Income</SelectItem>
                  <SelectItem value="EXPENSE">Expense</SelectItem>
                  <SelectItem value="TRANSFER">Transfer</SelectItem>
                  <SelectItem value="ADJUSTMENT">Adjustment</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </div>

          <div className="space-y-2">
            <Label htmlFor="amount">Amount *</Label>
            <Input
              id="amount"
              type="number"
              step="0.01"
              placeholder="0.00"
              {...register("amount", {
                required: "Amount is required",
                min: { value: 0.01, message: "Amount must be greater than 0" },
              })}
            />
            {errors.amount && (
              <p className="text-sm text-destructive">
                {errors.amount.message}
              </p>
            )}
          </div>

          <div className="space-y-2">
            <Label htmlFor="paymentMethod">Payment Method *</Label>
            <Select
              defaultValue={transaction?.paymentMethod || "CASH"}
              onValueChange={(value) => setValue("paymentMethod", value)}
            >
              <SelectTrigger>
                <SelectValue placeholder="Select payment method" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="CASH">Cash</SelectItem>
                <SelectItem value="CARD">Card</SelectItem>
                <SelectItem value="UPI">UPI</SelectItem>
                <SelectItem value="BANK_TRANSFER">Bank Transfer</SelectItem>
                <SelectItem value="CHEQUE">Cheque</SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="space-y-2">
            <Label htmlFor="reference">Reference Number</Label>
            <Input
              id="reference"
              placeholder="e.g., INV-001, CHQ-123"
              {...register("reference")}
            />
          </div>

          <div className="space-y-2">
            <Label htmlFor="description">Description *</Label>
            <Textarea
              id="description"
              placeholder="Enter transaction details"
              rows={3}
              {...register("description", {
                required: "Description is required",
              })}
            />
            {errors.description && (
              <p className="text-sm text-destructive">
                {errors.description.message}
              </p>
            )}
          </div>

          <DialogFooter>
            <Button
              type="button"
              variant="outline"
              onClick={() => onOpenChange(false)}
              disabled={isSubmitting}
            >
              Cancel
            </Button>
            <Button type="submit" disabled={isSubmitting}>
              {isSubmitting
                ? "Saving..."
                : isEditing
                ? "Update Transaction"
                : "Create Transaction"}
            </Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </Dialog>
  );
};

export default TransactionFormDialog;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\finance\TransactionsPage.jsx"   & echo.. 
/**
 * Transactions Page
 * Displays all financial transactions
 */

import { useState, useMemo, useCallback } from "react";
import { Plus, Download, Filter } from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatCurrency, formatDate } from "@/utils/formatters";
import { TRANSACTION_TYPE, PAYMENT_METHOD } from "@/constants";
import TransactionFormDialog from "./TransactionFormDialog";
import { toast } from "sonner";

const TransactionsPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [typeFilter, setTypeFilter] = useState("all");
  const [isFormOpen, setIsFormOpen] = useState(false);
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });
  const [sorting, setSorting] = useState([{ id: "date", desc: true }]);

  // Mock data - replace with actual API call
  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "date",
        header: "Date",
        cell: ({ row }) => formatDate(row.getValue("date")),
      },
      {
        accessorKey: "reference",
        header: "Reference",
        cell: ({ row }) => (
          <span className="font-mono text-sm">{row.getValue("reference")}</span>
        ),
      },
      {
        accessorKey: "type",
        header: "Type",
        cell: ({ row }) => {
          const type = row.getValue("type");
          const variant =
            type === "INCOME"
              ? "success"
              : type === "EXPENSE"
              ? "destructive"
              : "default";
          return <Badge variant={variant}>{type}</Badge>;
        },
      },
      {
        accessorKey: "description",
        header: "Description",
        meta: { className: "hidden md:table-cell" },
      },
      {
        accessorKey: "amount",
        header: "Amount",
        cell: ({ row }) => {
          const amount = row.getValue("amount");
          const type = row.original.type;
          return (
            <span
              className={`font-semibold ${
                type === "INCOME" ? "text-green-600" : "text-red-600"
              }`}
            >
              {type === "INCOME" ? "+" : "-"}
              {formatCurrency(amount)}
            </span>
          );
        },
      },
      {
        accessorKey: "paymentMethod",
        header: "Payment Method",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => row.getValue("paymentMethod") || "-",
      },
    ],
    []
  );

  const stats = {
    totalIncome: 0,
    totalExpense: 0,
    netBalance: 0,
    transactionCount: 0,
  };

  const handleCreateTransaction = useCallback(async (data) => {
    try {
      // TODO: Call API to create transaction
      console.log("Creating transaction:", data);

      toast.success("Transaction Created", {
        description: "The transaction has been successfully created.",
      });

      // TODO: Refresh data after creation
    } catch (error) {
      toast.error("Error", {
        description: "Failed to create transaction. Please try again.",
      });
    }
  }, []);

  return (
    <div className="space-y-6">
      <PageHeader
        title="Transactions"
        description="View and manage all financial transactions"
      >
        <div className="flex gap-2">
          <Button onClick={() => setIsFormOpen(true)}>
            <Plus className="mr-2 h-4 w-4" />
            New Transaction
          </Button>
          <Button variant="outline">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      </PageHeader>

      <TransactionFormDialog
        open={isFormOpen}
        onOpenChange={setIsFormOpen}
        onSubmit={handleCreateTransaction}
      />

      {/* Statistics */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Total Income</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {formatCurrency(stats.totalIncome)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Total Expenses
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-red-600">
              {formatCurrency(stats.totalExpense)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Net Balance</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {formatCurrency(stats.netBalance)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Transactions</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.transactionCount}</div>
          </CardContent>
        </Card>
      </div>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search transactions..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
        <Select value={typeFilter} onValueChange={setTypeFilter}>
          <SelectTrigger className="w-full sm:w-[180px]">
            <SelectValue placeholder="Filter by type" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Types</SelectItem>
            <SelectItem value="INCOME">Income</SelectItem>
            <SelectItem value="EXPENSE">Expense</SelectItem>
            <SelectItem value="TRANSFER">Transfer</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        sorting={sorting}
        onSortingChange={setSorting}
        emptyMessage="No transactions found."
      />
    </div>
  );
};

export default TransactionsPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\grn\DirectGRNFormPage.jsx"   & echo.. 
/**
 * Direct GRN Form Page
 * Create GRN without Purchase Order (Direct Purchase)
 */

import { useNavigate } from "react-router-dom";
import { useForm, useFieldArray, useWatch } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { ArrowLeft, Package, Plus, Trash2 } from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import {
  Card,
  CardContent,
  CardHeader,
  CardTitle,
  CardDescription,
} from "@/components/ui/card";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { PageHeader, LoadingSpinner, ButtonSpinner } from "@/components/common";
import { useCreateGRN } from "@/features/grn";
import { useActiveSuppliers } from "@/features/suppliers";
import { useProducts } from "@/features/products";
import { useBranchStore } from "@/store/branchStore";
import { toast } from "sonner";
import { formatCurrency } from "@/utils/formatters";

// Validation schema
const grnItemSchema = z.object({
  productId: z.string().min(1, "Product is required"),
  batchNumber: z.string().min(1, "Batch number is required"),
  quantity: z.number().min(1, "Quantity must be at least 1"),
  costPrice: z.number().min(0.01, "Cost price is required"),
  sellingPrice: z.number().min(0.01, "Selling price is required"),
  manufacturingDate: z.string().optional(),
  expiryDate: z.string().min(1, "Expiry date is required"),
  discountAmount: z.number().min(0).default(0),
});

const directGRNSchema = z.object({
  supplierId: z.string().min(1, "Supplier is required"),
  branchId: z.number().min(1, "Branch is required"),
  receivedDate: z.string().min(1, "Received date is required"),
  supplierInvoiceNumber: z.string().optional(),
  supplierInvoiceDate: z.string().optional(),
  remarks: z.string().max(1000).optional(),
  items: z.array(grnItemSchema).min(1, "At least one item is required"),
});

const DirectGRNFormPage = () => {
  const navigate = useNavigate();
  const selectedBranch = useBranchStore((state) => state.selectedBranch);

  // Queries
  const { data: suppliers, isLoading: isLoadingSuppliers } = useActiveSuppliers();
  const { data: productsData, isLoading: isLoadingProducts } = useProducts({ size: 1000 });
  const createMutation = useCreateGRN();

  const products = productsData?.content || [];

  // Debug: Log suppliers data
  console.log("Suppliers data:", suppliers);
  console.log("Is loading suppliers:", isLoadingSuppliers);

  const form = useForm({
    resolver: zodResolver(directGRNSchema),
    defaultValues: {
      supplierId: "",
      branchId: selectedBranch?.id || 0,
      receivedDate: new Date().toISOString().split("T")[0],
      supplierInvoiceNumber: "",
      supplierInvoiceDate: "",
      remarks: "",
      items: [
        {
          productId: "",
          batchNumber: "",
          quantity: 1,
          costPrice: 0,
          sellingPrice: 0,
          manufacturingDate: "",
          expiryDate: "",
          discountAmount: 0,
        },
      ],
    },
  });

  const { fields, append, remove } = useFieldArray({
    control: form.control,
    name: "items",
  });

  const items = useWatch({
    control: form.control,
    name: "items",
    defaultValue: [],
  });

  // Calculate totals
  const totalAmount = items.reduce((sum, item) => {
    const itemTotal = item.quantity * item.costPrice;
    const discount = item.discountAmount || 0;
    return sum + (itemTotal - discount);
  }, 0);

  const handleSubmit = (data) => {
    if (!selectedBranch?.id) {
      toast.error("Please select a branch");
      return;
    }

    const payload = {
      supplierId: parseInt(data.supplierId),
      branchId: selectedBranch.id,
      purchaseOrderId: null, // Direct purchase
      receivedDate: data.receivedDate,
      supplierInvoiceNumber: data.supplierInvoiceNumber || null,
      supplierInvoiceDate: data.supplierInvoiceDate || null,
      remarks: data.remarks || null,
      items: data.items.map((item) => ({
        productId: parseInt(item.productId),
        batchNumber: item.batchNumber,
        quantity: item.quantity,
        costPrice: item.costPrice,
        sellingPrice: item.sellingPrice,
        manufacturingDate: item.manufacturingDate || null,
        expiryDate: item.expiryDate,
        discountAmount: item.discountAmount || 0,
      })),
    };

    createMutation.mutate(payload, {
      onSuccess: () => {
        toast.success("Stock added successfully!");
        navigate(ROUTES.GRN.ROOT);
      },
      onError: (error) => {
        toast.error("Failed to add stock", {
          description: error.response?.data?.message || "Please try again",
        });
      },
    });
  };

  const handleCancel = () => {
    navigate(ROUTES.GRN.ROOT);
  };

  const addItem = () => {
    append({
      productId: "",
      batchNumber: "",
      quantity: 1,
      costPrice: 0,
      sellingPrice: 0,
      manufacturingDate: "",
      expiryDate: "",
      discountAmount: 0,
    });
  };

  if (isLoadingSuppliers || isLoadingProducts) {
    return (
      <div className="flex items-center justify-center h-64">
        <LoadingSpinner size="lg" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title="Direct Stock Receipt"
        description="Add stock without a purchase order"
        icon={Package}
        actions={
          <Button variant="ghost" onClick={handleCancel}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back to GRN List
          </Button>
        }
      />

      <Form {...form}>
        <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-6">
          {/* Basic Info */}
          <Card>
            <CardHeader>
              <CardTitle>Receipt Information</CardTitle>
              <CardDescription>
                Enter details about the stock receipt
              </CardDescription>
            </CardHeader>
            <CardContent className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
              <FormField
                control={form.control}
                name="supplierId"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Supplier *</FormLabel>
                    <Select value={field.value} onValueChange={field.onChange}>
                      <FormControl>
                        <SelectTrigger>
                          <SelectValue placeholder="Select supplier" />
                        </SelectTrigger>
                      </FormControl>
                      <SelectContent>
                        {suppliers?.map((supplier) => (
                          <SelectItem
                            key={supplier.id}
                            value={supplier.id?.toString()}
                          >
                            {supplier.supplierName || supplier.name}
                          </SelectItem>
                        ))}
                      </SelectContent>
                    </Select>
                    <FormMessage />
                  </FormItem>
                )}
              />

              <FormField
                control={form.control}
                name="receivedDate"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Received Date *</FormLabel>
                    <FormControl>
                      <Input type="date" {...field} />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />

              <FormField
                control={form.control}
                name="supplierInvoiceNumber"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Supplier Invoice No.</FormLabel>
                    <FormControl>
                      <Input placeholder="INV-001" {...field} />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />

              <FormField
                control={form.control}
                name="supplierInvoiceDate"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Invoice Date</FormLabel>
                    <FormControl>
                      <Input type="date" {...field} />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />

              <FormField
                control={form.control}
                name="remarks"
                render={({ field }) => (
                  <FormItem className="md:col-span-2">
                    <FormLabel>Remarks</FormLabel>
                    <FormControl>
                      <Textarea
                        placeholder="Additional notes..."
                        {...field}
                        rows={2}
                      />
                    </FormControl>
                    <FormMessage />
                  </FormItem>
                )}
              />
            </CardContent>
          </Card>

          {/* Items */}
          <Card>
            <CardHeader>
              <div className="flex items-center justify-between">
                <div>
                  <CardTitle>Items</CardTitle>
                  <CardDescription>
                    Add products with batch and pricing information
                  </CardDescription>
                </div>
                <Button type="button" onClick={addItem} size="sm">
                  <Plus className="mr-2 h-4 w-4" />
                  Add Item
                </Button>
              </div>
            </CardHeader>
            <CardContent>
              <div className="rounded-md border overflow-x-auto">
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead className="w-[200px]">Product *</TableHead>
                      <TableHead className="w-[150px]">Batch No. *</TableHead>
                      <TableHead className="w-[100px]">Qty *</TableHead>
                      <TableHead className="w-[120px]">Cost Price *</TableHead>
                      <TableHead className="w-[120px]">Selling Price *</TableHead>
                      <TableHead className="w-[130px]">Mfg. Date</TableHead>
                      <TableHead className="w-[130px]">Expiry Date *</TableHead>
                      <TableHead className="w-[100px]">Discount</TableHead>
                      <TableHead className="w-[100px] text-right">Total</TableHead>
                      <TableHead className="w-[60px]"></TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {fields.map((field, index) => {
                      const item = items[index] || {};
                      const lineTotal =
                        (item.quantity || 0) * (item.costPrice || 0) -
                        (item.discountAmount || 0);

                      return (
                        <TableRow key={field.id}>
                          <TableCell>
                            <FormField
                              control={form.control}
                              name={`items.${index}.productId`}
                              render={({ field }) => (
                                <FormItem>
                                  <Select
                                    value={field.value}
                                    onValueChange={field.onChange}
                                  >
                                    <FormControl>
                                      <SelectTrigger>
                                        <SelectValue placeholder="Select" />
                                      </SelectTrigger>
                                    </FormControl>
                                    <SelectContent>
                                      {products.map((product) => (
                                        <SelectItem
                                          key={product.id}
                                          value={product.id?.toString()}
                                        >
                                          {product.productName || product.name}
                                        </SelectItem>
                                      ))}
                                    </SelectContent>
                                  </Select>
                                  <FormMessage />
                                </FormItem>
                              )}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              placeholder="BATCH-001"
                              {...form.register(`items.${index}.batchNumber`)}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              min={1}
                              {...form.register(`items.${index}.quantity`, {
                                valueAsNumber: true,
                              })}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              step="0.01"
                              min={0}
                              {...form.register(`items.${index}.costPrice`, {
                                valueAsNumber: true,
                              })}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              step="0.01"
                              min={0}
                              {...form.register(`items.${index}.sellingPrice`, {
                                valueAsNumber: true,
                              })}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              type="date"
                              {...form.register(
                                `items.${index}.manufacturingDate`
                              )}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              type="date"
                              {...form.register(`items.${index}.expiryDate`)}
                            />
                          </TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              step="0.01"
                              min={0}
                              {...form.register(`items.${index}.discountAmount`, {
                                valueAsNumber: true,
                              })}
                            />
                          </TableCell>
                          <TableCell className="text-right font-medium">
                            {formatCurrency(lineTotal)}
                          </TableCell>
                          <TableCell>
                            <Button
                              type="button"
                              variant="ghost"
                              size="icon"
                              onClick={() => remove(index)}
                              disabled={fields.length === 1}
                            >
                              <Trash2 className="h-4 w-4 text-destructive" />
                            </Button>
                          </TableCell>
                        </TableRow>
                      );
                    })}
                  </TableBody>
                </Table>
              </div>

              {/* Total */}
              <div className="mt-4 flex justify-end">
                <div className="w-64 space-y-2">
                  <div className="flex justify-between text-lg font-bold">
                    <span>Total Amount:</span>
                    <span>{formatCurrency(totalAmount)}</span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          {/* Actions */}
          <Card>
            <CardContent className="pt-6">
              <div className="flex justify-end gap-4">
                <Button type="button" variant="outline" onClick={handleCancel}>
                  Cancel
                </Button>
                <Button
                  type="submit"
                  disabled={createMutation.isPending}
                  className="min-w-[200px]"
                >
                  {createMutation.isPending ? (
                    <>
                      <ButtonSpinner />
                      <span className="ml-2">Processing...</span>
                    </>
                  ) : (
                    <>
                      <Package className="mr-2 h-4 w-4" />
                      Add Stock to Inventory
                    </>
                  )}
                </Button>
              </div>
            </CardContent>
          </Card>
        </form>
      </Form>
    </div>
  );
};

export default DirectGRNFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\grn\GRNEditPage.jsx"   & echo.. 
/**
 * GRN Edit Page
 * Edit existing GRN to add/update batch information
 */

import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft, Package } from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { PageHeader, LoadingSpinner } from "@/components/common";
import { useUpdateGRN, useGRN, GRNForm } from "@/features/grn";

const GRNEditPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();

  // Queries
  const { data: grn, isLoading } = useGRN(id);
  const updateMutation = useUpdateGRN();

  // Handle form submission
  const handleSubmit = (data) => {
    console.log('GRN Edit - Submitting data:', JSON.stringify(data, null, 2));
    
    // Validate that all items have received quantity > 0
    const hasInvalidQuantity = data.items.some(item => !item.receivedQuantity || item.receivedQuantity <= 0);
    if (hasInvalidQuantity) {
      console.error('GRN Edit - Some items have invalid quantity');
      return;
    }
    
    // Transform form data to match backend API
    const apiData = {
      supplierId: grn?.supplier?.id || grn?.supplierId,
      branchId: grn?.branch?.id || grn?.branchId,
      purchaseOrderId: grn?.purchaseOrder?.id || grn?.purchaseOrderId,
      receivedDate: data.receivedDate,
      supplierInvoiceNumber: data.invoiceNumber || null,
      supplierInvoiceDate: data.invoiceDate || null,
      remarks: data.notes || null,
      items: data.items
        .filter(item => item.receivedQuantity > 0) // Only include items with quantity > 0
        .map(item => ({
          productId: parseInt(item.productId),
          batchNumber: item.batchNumber,
          quantity: parseInt(item.receivedQuantity),
          costPrice: parseFloat(item.unitPrice),
          sellingPrice: parseFloat(item.sellingPrice),
          mrp: parseFloat(item.mrp),
          manufacturingDate: item.manufacturingDate,
          expiryDate: item.expiryDate,
          discountAmount: 0,
        }))
    };
    
    console.log('GRN Edit - Transformed API data:', JSON.stringify(apiData, null, 2));
    
    updateMutation.mutate(
      { id: parseInt(id), data: apiData },
      {
        onSuccess: () => navigate(ROUTES.GRN.VIEW(id)),
      }
    );
  };

  const handleCancel = () => {
    navigate(ROUTES.GRN.VIEW(id));
  };

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <LoadingSpinner size="lg" />
      </div>
    );
  }

  if (!grn) {
    return (
      <div className="text-center py-12">
        <p className="text-muted-foreground">GRN not found.</p>
        <Button variant="link" onClick={() => navigate(ROUTES.GRN.ROOT)}>
          Back to GRN list
        </Button>
      </div>
    );
  }

  // Only allow editing PENDING, DRAFT, or RECEIVED status GRNs
  const allowedStatuses = ['PENDING', 'DRAFT', 'RECEIVED'];
  if (!allowedStatuses.includes(grn.status)) {
    return (
      <div className="text-center py-12">
        <p className="text-muted-foreground">
          This GRN cannot be edited. Only GRNs with PENDING, DRAFT, or RECEIVED status can be modified.
        </p>
        <Button variant="link" onClick={() => navigate(ROUTES.GRN.VIEW(id))}>
          Back to GRN details
        </Button>
      </div>
    );
  }

  // Transform GRN data to match form structure
  const purchaseOrderData = {
    id: grn.purchaseOrder?.id || grn.purchaseOrderId,
    poNumber: grn.purchaseOrder?.poNumber || grn.poNumber,
    supplier: grn.supplier,
    branch: grn.branch,
    items: grn.items?.map(item => ({
      productId: item.product?.id || item.productId,
      productName: item.product?.productName || item.productName,
      quantityOrdered: item.receivedQuantity || item.quantity,
      quantity: item.receivedQuantity || item.quantity,
      unitPrice: item.unitPrice || item.costPrice,
    })) || []
  };

  // Pre-populate form with existing GRN data
  const initialData = {
    purchaseOrderId: grn.purchaseOrder?.id?.toString() || grn.purchaseOrderId?.toString(),
    receivedDate: grn.receivedDate,
    invoiceNumber: grn.supplierInvoiceNumber || "",
    invoiceDate: grn.supplierInvoiceDate || "",
    notes: grn.remarks || "",
    items: grn.items?.map(item => ({
      productId: item.product?.id?.toString() || item.productId?.toString(),
      productName: item.product?.productName || item.productName || "",
      orderedQuantity: item.receivedQuantity || item.quantity,
      receivedQuantity: item.receivedQuantity || item.quantity,
      rejectedQuantity: 0,
      unitPrice: item.unitPrice || item.costPrice || 0,
      batchNumber: item.batchNumber || "",
      manufacturingDate: item.manufacturingDate || "",
      expiryDate: item.expiryDate || "",
      sellingPrice: item.sellingPrice || 0,
      mrp: item.mrp || 0,
      notes: "",
    })) || []
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title={`Edit GRN ${grn.grnNumber}`}
        description="Update batch information and item details"
        icon={Package}
        actions={
          <Button variant="ghost" onClick={handleCancel}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back to GRN Details
          </Button>
        }
      />

      <GRNForm
        purchaseOrder={purchaseOrderData}
        initialData={initialData}
        onSubmit={handleSubmit}
        onCancel={handleCancel}
        isSubmitting={updateMutation.isPending}
        isEditMode={true}
      />
    </div>
  );
};

export default GRNEditPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\grn\GRNFormPage.jsx"   & echo.. 
/**
 * GRN Form Page
 * Create GRN from Purchase Order
 */

import { useNavigate, useSearchParams } from "react-router-dom";
import { ArrowLeft, Package } from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { PageHeader, LoadingSpinner } from "@/components/common";
import { useCreateGRN, GRNForm } from "@/features/grn";
import {
  usePurchaseOrder,
  usePendingPurchaseOrders,
} from "@/features/purchase-orders";
import { useState, useEffect } from "react";

const GRNFormPage = () => {
  const navigate = useNavigate();
  const [searchParams] = useSearchParams();
  const poIdFromUrl = searchParams.get("poId");
  const [selectedPOId, setSelectedPOId] = useState(poIdFromUrl || "");

  // Queries
  const { data: pendingPOs, isLoading: isLoadingPOs } =
    usePendingPurchaseOrders();
  const { data: selectedPO, isLoading: isLoadingPO } =
    usePurchaseOrder(selectedPOId);

  const createMutation = useCreateGRN();

  // Debug: Log the pending POs data
  console.log('GRN Form - Pending POs:', pendingPOs);
  console.log('GRN Form - Is loading POs:', isLoadingPOs);

  const approvedPOs = (pendingPOs || []).filter(
    (po) =>
      po.status === "APPROVED" ||
      po.status === "ORDERED" ||
      po.status === "PARTIALLY_RECEIVED"
  );

  console.log('GRN Form - Approved POs after filter:', approvedPOs);
  console.log('GRN Form - Approved POs count:', approvedPOs.length);

  // Set selected PO from URL
  useEffect(() => {
    if (poIdFromUrl) {
      setSelectedPOId(poIdFromUrl);
    }
  }, [poIdFromUrl]);

  // Handle form submission
  const handleSubmit = (data) => {
    console.log('GRN Form - Submitting data:', JSON.stringify(data, null, 2));
    
    // Validate that all items have received quantity > 0
    const hasInvalidQuantity = data.items.some(item => !item.receivedQuantity || item.receivedQuantity <= 0);
    if (hasInvalidQuantity) {
      console.error('GRN Form - Some items have invalid quantity');
      return;
    }
    
    // Transform form data to match backend API
    const apiData = {
      supplierId: selectedPO?.supplier?.id || selectedPO?.supplierId,
      branchId: selectedPO?.branch?.id || selectedPO?.branchId,
      purchaseOrderId: parseInt(data.purchaseOrderId),
      receivedDate: data.receivedDate,
      supplierInvoiceNumber: data.invoiceNumber || null,
      supplierInvoiceDate: data.invoiceDate || null,
      remarks: data.notes || null,
      items: data.items
        .filter(item => item.receivedQuantity > 0) // Only include items with quantity > 0
        .map(item => ({
          productId: parseInt(item.productId),
          batchNumber: item.batchNumber,
          quantity: parseInt(item.receivedQuantity),
          costPrice: parseFloat(item.unitPrice),
          sellingPrice: parseFloat(item.sellingPrice),
          mrp: parseFloat(item.mrp),
          manufacturingDate: item.manufacturingDate,
          expiryDate: item.expiryDate,
          discountAmount: 0,
        }))
    };
    
    console.log('GRN Form - Transformed API data:', JSON.stringify(apiData, null, 2));
    
    createMutation.mutate(apiData, {
      onSuccess: () => navigate(ROUTES.GRN.ROOT),
    });
  };

  const handleCancel = () => {
    navigate(ROUTES.GRN.ROOT);
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title="New Goods Received Note"
        description="Record goods received from a supplier"
        icon={Package}
        actions={
          <Button variant="ghost" onClick={handleCancel}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back to GRN List
          </Button>
        }
      />

      {/* PO Selection */}
      {!selectedPOId && (
        <Card>
          <CardHeader>
            <CardTitle>Select Purchase Order</CardTitle>
          </CardHeader>
          <CardContent>
            {isLoadingPOs ? (
              <LoadingSpinner />
            ) : approvedPOs.length === 0 ? (
              <p className="text-muted-foreground">
                No approved purchase orders available. Create and approve a PO
                first.
              </p>
            ) : (
              <Select value={selectedPOId} onValueChange={setSelectedPOId}>
                <SelectTrigger className="w-full md:w-[400px]">
                  <SelectValue placeholder="Select a purchase order..." />
                </SelectTrigger>
                <SelectContent>
                  {approvedPOs.map((po) => (
                    <SelectItem key={po.id} value={po.id?.toString()}>
                      {po.poNumber} - {po.supplier?.name || "Unknown Supplier"}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            )}
          </CardContent>
        </Card>
      )}

      {/* GRN Form */}
      {selectedPOId && (
        <>
          {isLoadingPO ? (
            <div className="flex items-center justify-center h-64">
              <LoadingSpinner size="lg" />
            </div>
          ) : (
            <GRNForm
              purchaseOrder={selectedPO}
              onSubmit={handleSubmit}
              onCancel={handleCancel}
              isSubmitting={createMutation.isPending}
            />
          )}
        </>
      )}
    </div>
  );
};

export default GRNFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\grn\GRNListPage.jsx"   & echo.. 
/**
 * GRN List Page
 * Lists all Goods Received Notes with filtering and actions
 */

import { useState, useMemo, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import { Plus, Package } from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { DataTable, PageHeader, ConfirmDialog } from "@/components/common";
import {
  useGRNs,
  useCompleteGRN,
  getGRNColumns,
} from "@/features/grn";
import { toast } from "sonner";

const GRNListPage = () => {
  const navigate = useNavigate();
  const [search, setSearch] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");
  const [actionDialog, setActionDialog] = useState({
    open: false,
    grn: null,
    action: "",
  });

  // Query params
  const params = useMemo(
    () => ({
      search: search || undefined,
      status: statusFilter !== "all" ? statusFilter : undefined,
    }),
    [search, statusFilter]
  );

  // Queries and mutations
  const { data: grnsData, isLoading } = useGRNs(params);
  const completeMutation = useCompleteGRN();

  const grns = grnsData?.content || grnsData || [];

  // Handlers
  const handleView = useCallback(
    (grn) => {
      navigate(ROUTES.GRN.VIEW(grn.id));
    },
    [navigate]
  );

  const handleComplete = useCallback((grn) => {
    // Check if GRN has complete data for all items
    const items = grn.items || [];
    const hasCompleteData = items.every(item => 
      item.batchNumber && 
      item.manufacturingDate && 
      item.expiryDate && 
      item.sellingPrice && 
      item.mrp
    );

    if (!hasCompleteData) {
      toast.error("This GRN has missing required fields. Redirecting to edit page...", {
        description: "Please fill in batch number, dates, selling price, and MRP for all items."
      });
      // Redirect to edit page after a short delay
      setTimeout(() => {
        navigate(`${ROUTES.GRN.EDIT}/${grn.id}`);
      }, 1500);
      return;
    }

    setActionDialog({ open: true, grn, action: "complete" });
  }, [navigate]);

  const handleCreateReturn = useCallback(
    (grn) => {
      navigate(`${ROUTES.RGRN.CREATE}?grnId=${grn.id}`);
    },
    [navigate]
  );

  const handleActionConfirm = useCallback(() => {
    if (!actionDialog.grn) return;

    completeMutation.mutate(actionDialog.grn.id, {
      onSuccess: () => setActionDialog({ open: false, grn: null, action: "" }),
    });
  }, [actionDialog, completeMutation]);

  // Columns
  const columns = useMemo(
    () =>
      getGRNColumns({
        onView: handleView,
        onComplete: handleComplete,
        onCreateReturn: handleCreateReturn,
      }),
    [handleView, handleComplete, handleCreateReturn]
  );

  const getDialogTitle = () => {
    if (actionDialog.action === "complete") return "Complete GRN";
    return "";
  };

  const getDialogDescription = () => {
    if (actionDialog.action === "complete") {
      return `This will complete GRN "${actionDialog.grn?.grnNumber}" and update inventory stock levels. This action cannot be undone.`;
    }
    return "";
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title="Goods Received Notes"
        description="Manage goods received from suppliers"
        icon={Package}
        actions={
          <div className="flex gap-2">
            <Button
              variant="outline"
              onClick={() => navigate(ROUTES.GRN.DIRECT)}
            >
              <Plus className="mr-2 h-4 w-4" />
              Direct Stock
            </Button>
            <Button onClick={() => navigate(ROUTES.GRN.CREATE)}>
              <Plus className="mr-2 h-4 w-4" />
              New GRN
            </Button>
          </div>
        }
      />

      {/* Filters */}
      <div className="flex flex-col gap-4 sm:flex-row">
        <Input
          placeholder="Search by GRN number, PO, supplier..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="sm:w-[300px]"
        />
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="sm:w-[180px]">
            <SelectValue placeholder="Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="DRAFT">Draft</SelectItem>
            <SelectItem value="PENDING">Pending Verification</SelectItem>
            <SelectItem value="VERIFIED">Verified</SelectItem>
            <SelectItem value="COMPLETED">Completed</SelectItem>
            <SelectItem value="CANCELLED">Cancelled</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={grns}
        isLoading={isLoading}
        searchable={false}
      />

      {/* Action Confirmation */}
      <ConfirmDialog
        open={actionDialog.open}
        onOpenChange={(open) =>
          setActionDialog({ open, grn: null, action: "" })
        }
        title={getDialogTitle()}
        description={getDialogDescription()}
        confirmText={
          actionDialog.action === "complete"
            ? "Complete & Update Stock"
            : "Verify"
        }
        cancelText="Cancel"
        variant={actionDialog.action === "complete" ? "default" : "default"}
        onConfirm={handleActionConfirm}
        isLoading={completeMutation.isPending}
      />
    </div>
  );
};

export default GRNListPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\grn\GRNViewPage.jsx"   & echo.. 
/**
 * GRN View Page
 * Detailed view of a Goods Received Note
 */

import { useNavigate, useParams } from "react-router-dom";
import { 
  ArrowLeft, 
  Package, 
  CheckCircle, 
  Printer, 
  Undo2, 
  Edit, 
  AlertTriangle 
} from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
  TableFooter,
} from "@/components/ui/table";
import { PageHeader, LoadingSpinner } from "@/components/common";
import { useGRN, useCompleteGRN } from "@/features/grn";
import { formatDate, formatCurrency } from "@/utils/formatters";
import { toast } from "sonner";

// Status badge configuration
const statusConfig = {
  DRAFT: { label: "Draft", variant: "secondary" },
  PENDING: { label: "Pending Verification", variant: "warning" },
  VERIFIED: { label: "Verified", variant: "default" },
  COMPLETED: { label: "Completed", variant: "success" },
  CANCELLED: { label: "Cancelled", variant: "secondary" },
};

const GRNViewPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();

  // Queries
  const { data: grn, isLoading } = useGRN(id);
  const completeMutation = useCompleteGRN();

  const status = grn?.status;
  const canComplete = status === "DRAFT" || status === "PENDING" || status === "VERIFIED";
  const canReturn = status === "COMPLETED";
  const canEdit = status === "DRAFT" || status === "PENDING" || status === "RECEIVED";

  // Calculate totals from items
  const items = grn?.items || [];
  const totalAmount = items.reduce(
    (sum, item) => sum + item.receivedQuantity * item.unitPrice,
    0
  );

  // Check if GRN has complete data for all items
  const hasCompleteData = items.every(item => 
    item.batchNumber && 
    item.manufacturingDate && 
    item.expiryDate && 
    item.sellingPrice && 
    item.mrp
  );

  const handleComplete = () => {
    // Validate that all items have required fields
    if (!hasCompleteData) {
      toast.error("This GRN has missing required fields. Redirecting to edit page...", {
        description: "Please fill in batch number, dates, selling price, and MRP for all items."
      });
      // Redirect to edit page after a short delay
      setTimeout(() => {
        navigate(ROUTES.GRN.EDIT(id));
      }, 1500);
      return;
    }
    
    completeMutation.mutate(id);
  };

  const handleEdit = () => {
    navigate(ROUTES.GRN.EDIT(id));
  };

  const handleCreateReturn = () => {
    navigate(`${ROUTES.RGRN.CREATE}?grnId=${id}`);
  };

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <LoadingSpinner size="lg" />
      </div>
    );
  }

  if (!grn) {
    return (
      <div className="text-center py-12">
        <p className="text-muted-foreground">GRN not found.</p>
        <Button variant="link" onClick={() => navigate(ROUTES.GRN.ROOT)}>
          Back to GRN list
        </Button>
      </div>
    );
  }

  const statusInfo = statusConfig[status] || {
    label: status,
    variant: "secondary",
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title={`GRN ${grn.grnNumber}`}
        description={`Received on ${formatDate(grn.receivedDate)}`}
        icon={Package}
        actions={
          <div className="flex gap-2">
            <Button variant="ghost" onClick={() => navigate(ROUTES.GRN.ROOT)}>
              <ArrowLeft className="mr-2 h-4 w-4" />
              Back
            </Button>
            <Button variant="outline" onClick={() => window.print()}>
              <Printer className="mr-2 h-4 w-4" />
              Print
            </Button>
            {canEdit && (
              <Button variant="outline" onClick={handleEdit}>
                <Edit className="mr-2 h-4 w-4" />
                Edit GRN
              </Button>
            )}
            {canComplete && (
              <Button
                onClick={handleComplete}
                disabled={completeMutation.isPending || !hasCompleteData}
                title={!hasCompleteData ? "Cannot complete: some items have missing data" : ""}
              >
                <CheckCircle className="mr-2 h-4 w-4" />
                Complete & Update Stock
              </Button>
            )}
            {canReturn && (
              <Button variant="outline" onClick={handleCreateReturn}>
                <Undo2 className="mr-2 h-4 w-4" />
                Create Return
              </Button>
            )}
          </div>
        }
      />

      <div className="grid gap-6 lg:grid-cols-3">
        {/* GRN Info */}
        <Card className="lg:col-span-2">
          <CardHeader className="flex flex-row items-center justify-between">
            <CardTitle>Receipt Details</CardTitle>
            <Badge variant={statusInfo.variant}>{statusInfo.label}</Badge>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="grid gap-4 md:grid-cols-2">
              <div>
                <p className="text-sm text-muted-foreground">GRN Number</p>
                <p className="font-medium font-mono">{grn.grnNumber}</p>
              </div>
              <div>
                <p className="text-sm text-muted-foreground">PO Number</p>
                <p className="font-medium font-mono">
                  {grn.purchaseOrder?.poNumber || "-"}
                </p>
              </div>
              <div>
                <p className="text-sm text-muted-foreground">Received Date</p>
                <p className="font-medium">{formatDate(grn.receivedDate)}</p>
              </div>
              <div>
                <p className="text-sm text-muted-foreground">Branch</p>
                <p className="font-medium">{grn.branch?.branchName || "-"}</p>
              </div>
              {grn.invoiceNumber && (
                <div>
                  <p className="text-sm text-muted-foreground">
                    Invoice Number
                  </p>
                  <p className="font-medium">{grn.invoiceNumber}</p>
                </div>
              )}
              {grn.invoiceDate && (
                <div>
                  <p className="text-sm text-muted-foreground">Invoice Date</p>
                  <p className="font-medium">{formatDate(grn.invoiceDate)}</p>
                </div>
              )}
            </div>
            {grn.notes && (
              <>
                <Separator />
                <div>
                  <p className="text-sm text-muted-foreground">Notes</p>
                  <p className="mt-1">{grn.notes}</p>
                </div>
              </>
            )}
          </CardContent>
        </Card>

        {/* Supplier Info */}
        <Card>
          <CardHeader>
            <CardTitle>Supplier</CardTitle>
          </CardHeader>
          <CardContent className="space-y-2">
            <p className="font-medium">
              {grn.supplier?.name || grn.purchaseOrder?.supplier?.name || "-"}
            </p>
            {(grn.supplier?.phone || grn.purchaseOrder?.supplier?.phone) && (
              <p className="text-sm">
                {grn.supplier?.phone || grn.purchaseOrder?.supplier?.phone}
              </p>
            )}
            {(grn.supplier?.email || grn.purchaseOrder?.supplier?.email) && (
              <p className="text-sm">
                {grn.supplier?.email || grn.purchaseOrder?.supplier?.email}
              </p>
            )}
          </CardContent>
        </Card>
      </div>

      {/* Received Items */}
      <Card>
        <CardHeader>
          <CardTitle>Received Items</CardTitle>
        </CardHeader>
        <CardContent>
          {!hasCompleteData && (
            <div className="mb-4 p-4 bg-amber-50 border border-amber-300 rounded-lg">
              <div className="flex items-start gap-3">
                <AlertTriangle className="h-5 w-5 text-amber-600 mt-0.5" />
                <div className="flex-1">
                  <p className="font-semibold text-amber-900 mb-2">
                     Incomplete GRN Data
                  </p>
                  <p className="text-sm text-amber-800 mb-3">
                    Some items are missing required information. Items with missing data are highlighted in red below.
                  </p>
                  {canEdit && (
                    <Button 
                      size="sm" 
                      variant="default" 
                      onClick={handleEdit}
                      className="bg-amber-600 hover:bg-amber-700"
                    >
                      <Edit className="mr-2 h-3 w-3" />
                      Edit GRN to Complete Missing Data
                    </Button>
                  )}
                </div>
              </div>
            </div>
          )}
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead className="w-[40px]">#</TableHead>
                <TableHead>Product</TableHead>
                <TableHead className="text-right">Ordered</TableHead>
                <TableHead className="text-right">Received</TableHead>
                <TableHead className="text-right">Rejected</TableHead>
                <TableHead>Batch No.</TableHead>
                <TableHead>Expiry</TableHead>
                <TableHead className="text-right">Unit Price</TableHead>
                <TableHead className="text-right">Amount</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {items.map((item, index) => {
                const lineTotal =
                  (item.receivedQuantity || 0) * (item.unitPrice || 0);
                const hasDiscrepancy =
                  item.receivedQuantity !== item.orderedQuantity;
                
                // Check which fields are missing
                const missingFields = [];
                if (!item.batchNumber) missingFields.push("Batch #");
                if (!item.manufacturingDate) missingFields.push("Mfg Date");
                if (!item.expiryDate) missingFields.push("Expiry");
                if (!item.sellingPrice || item.sellingPrice === 0) missingFields.push("Selling Price");
                if (!item.mrp || item.mrp === 0) missingFields.push("MRP");
                const isIncomplete = missingFields.length > 0;

                return (
                  <TableRow
                    key={item.id || index}
                    className={isIncomplete ? "bg-red-50 border-l-4 border-red-500" : hasDiscrepancy ? "bg-yellow-50" : ""}
                  >
                    <TableCell>{index + 1}</TableCell>
                    <TableCell>
                      <div>
                        <p className="font-medium">
                          {item.product?.name || item.productName}
                        </p>
                        {item.product?.sku && (
                          <p className="text-sm text-muted-foreground">
                            {item.product.sku}
                          </p>
                        )}
                        {isIncomplete && (
                          <div className="mt-2 p-2 bg-red-100 border border-red-300 rounded">
                            <p className="text-xs font-semibold text-red-900">
                               Missing required data
                            </p>
                            <p className="text-xs text-red-700 mt-1">
                              Please add: {missingFields.join(", ")}
                            </p>
                          </div>
                        )}
                      </div>
                    </TableCell>
                    <TableCell className="text-right">
                      {item.orderedQuantity || "-"}
                    </TableCell>
                    <TableCell className="text-right font-medium">
                      {item.receivedQuantity}
                    </TableCell>
                    <TableCell className="text-right">
                      {item.rejectedQuantity > 0 ? (
                        <span className="text-destructive">
                          {item.rejectedQuantity}
                        </span>
                      ) : (
                        "-"
                      )}
                    </TableCell>
                    <TableCell>
                      {item.batchNumber ? (
                        item.batchNumber
                      ) : (
                        <span className="text-red-600 font-medium">-</span>
                      )}
                    </TableCell>
                    <TableCell>
                      {item.expiryDate ? (
                        formatDate(item.expiryDate)
                      ) : (
                        <span className="text-red-600 font-medium">-</span>
                      )}
                    </TableCell>
                    <TableCell className="text-right">
                      {formatCurrency(item.unitPrice)}
                    </TableCell>
                    <TableCell className="text-right font-medium">
                      {formatCurrency(lineTotal)}
                    </TableCell>
                  </TableRow>
                );
              })}
            </TableBody>
            <TableFooter>
              <TableRow className="font-bold">
                <TableCell colSpan={8} className="text-right">
                  Total Amount
                </TableCell>
                <TableCell className="text-right">
                  {formatCurrency(grn.totalAmount || totalAmount)}
                </TableCell>
              </TableRow>
            </TableFooter>
          </Table>
        </CardContent>
      </Card>

      {/* Audit Info */}
      {(grn.verifiedBy || grn.completedBy) && (
        <Card>
          <CardHeader>
            <CardTitle>Processing History</CardTitle>
          </CardHeader>
          <CardContent className="space-y-2 text-sm">
            {grn.verifiedBy && (
              <p>
                <span className="text-muted-foreground">Verified by:</span>{" "}
                {grn.verifiedBy.name || grn.verifiedBy} on{" "}
                {formatDate(grn.verifiedAt)}
              </p>
            )}
            {grn.completedBy && (
              <p>
                <span className="text-muted-foreground">Completed by:</span>{" "}
                {grn.completedBy.name || grn.completedBy} on{" "}
                {formatDate(grn.completedAt)}
              </p>
            )}
          </CardContent>
        </Card>
      )}
    </div>
  );
};

export default GRNViewPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\AvailableStockPage.jsx"   & echo.. 
/**
 * Available Stock Page
 * Display all available stocks in inventory with filtering and search
 */

import { useState, useMemo, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import {
  Package,
  Search,
  Filter,
  Download,
  Eye,
  AlertCircle,
  CheckCircle,
  TrendingDown,
  SlidersHorizontal,
  X,
} from "lucide-react";
import { ROUTES } from "@/config";
import { useInventory } from "@/features/inventory";
import { useCategories } from "@/features/categories";
import { useBranchStore } from "@/store/branchStore";
import { useDebounce } from "@/hooks";
import {
  PageHeader,
  SearchInput,
  LoadingSpinner,
  EmptyState,
} from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Badge } from "@/components/ui/badge";
import { Skeleton } from "@/components/ui/skeleton";
import { Label } from "@/components/ui/label";
import { toast } from "sonner";
import { formatCurrency, formatDate } from "@/utils/formatters";
import { downloadCSV } from "@/utils/exportImport";

/**
 * AvailableStockPage component
 */
const AvailableStockPage = () => {
  const navigate = useNavigate();
  const selectedBranch = useBranchStore((state) => state.selectedBranch);

  const [searchQuery, setSearchQuery] = useState("");
  const [categoryFilter, setCategoryFilter] = useState("all");
  const [stockFilter, setStockFilter] = useState("all"); // all, in-stock, low-stock, out-of-stock
  const [sortBy, setSortBy] = useState("name-asc");
  const [showFilters, setShowFilters] = useState(false);
  const [page, setPage] = useState(0);
  const [size] = useState(20);

  // Debounce search query
  const debouncedSearch = useDebounce(searchQuery, 500);

  // Fetch categories for filter
  const { data: categoriesData } = useCategories({ size: 100 });
  const categories = categoriesData?.content || [];

  // Reset page when filters change
  useEffect(() => {
    setPage(0);
  }, [debouncedSearch, categoryFilter, stockFilter, sortBy]);

  // Build sort parameter
  const getSortParam = () => {
    switch (sortBy) {
      case "name-asc":
        return "product.productName,asc";
      case "name-desc":
        return "product.productName,desc";
      case "quantity-asc":
        return "quantityAvailable,asc";
      case "quantity-desc":
        return "quantityAvailable,desc";
      case "value-asc":
        return "product.costPrice,asc";
      case "value-desc":
        return "product.costPrice,desc";
      default:
        return "product.productName,asc";
    }
  };

  // Fetch inventory data
  const { data, isLoading, error, refetch } = useInventory(
    selectedBranch?.id,
    {
      page,
      size,
      sort: getSortParam(),
    }
  );

  const inventory = data?.content || [];
  const totalElements = data?.totalElements || 0;
  const totalPages = data?.totalPages || 0;

  // Filter inventory based on search and filters
  const filteredInventory = useMemo(() => {
    if (!inventory) return [];

    let filtered = [...inventory];

    // Apply search filter
    if (debouncedSearch) {
      const query = debouncedSearch.toLowerCase();
      filtered = filtered.filter(
        (item) =>
          item.product?.productName?.toLowerCase().includes(query) ||
          item.product?.productCode?.toLowerCase().includes(query) ||
          item.product?.genericName?.toLowerCase().includes(query) ||
          item.product?.barcode?.toLowerCase().includes(query)
      );
    }

    // Apply category filter
    if (categoryFilter !== "all") {
      filtered = filtered.filter(
        (item) => item.product?.category?.id === parseInt(categoryFilter)
      );
    }

    // Apply stock filter
    if (stockFilter === "in-stock") {
      filtered = filtered.filter((item) => item.quantityAvailable > 0);
    } else if (stockFilter === "low-stock") {
      filtered = filtered.filter(
        (item) =>
          item.quantityAvailable > 0 &&
          item.quantityAvailable <= (item.product?.reorderLevel || 10)
      );
    } else if (stockFilter === "out-of-stock") {
      filtered = filtered.filter((item) => item.quantityAvailable === 0);
    }

    return filtered;
  }, [inventory, debouncedSearch, categoryFilter, stockFilter]);

  // Clear all filters
  const clearFilters = () => {
    setSearchQuery("");
    setCategoryFilter("all");
    setStockFilter("all");
    setSortBy("name-asc");
  };

  // Check if any filters are active
  const hasActiveFilters = searchQuery || categoryFilter !== "all" || stockFilter !== "all" || sortBy !== "name-asc";

  // Get stock status
  const getStockStatus = (item) => {
    if (item.quantityAvailable === 0) {
      return { label: "Out of Stock", variant: "destructive", icon: AlertCircle };
    } else if (
      item.quantityAvailable <= (item.product?.reorderLevel || 10)
    ) {
      return { label: "Low Stock", variant: "warning", icon: TrendingDown };
    } else {
      return { label: "In Stock", variant: "success", icon: CheckCircle };
    }
  };

  // Export to CSV
  const handleExport = () => {
    if (filteredInventory.length === 0) {
      toast.error("No data to export");
      return;
    }

    const exportData = filteredInventory.map((item) => ({
      "Product Code": item.product?.productCode || "",
      "Product Name": item.product?.productName || "",
      "Generic Name": item.product?.genericName || "",
      Category: item.product?.categoryName || "",
      "Available Quantity": item.quantityAvailable || 0,
      "Reserved Quantity": item.quantityReserved || 0,
      "Reorder Level": item.product?.reorderLevel || 0,
      "Unit": item.product?.unitName || "",
      "Selling Price": item.product?.sellingPrice || 0,
      "Cost Price": item.product?.costPrice || 0,
      "Total Value": (item.quantityAvailable || 0) * (item.product?.costPrice || 0),
      Status: getStockStatus(item).label,
    }));

    const timestamp = new Date().toISOString().split("T")[0];
    const filename = `available-stock-${timestamp}.csv`;
    downloadCSV(exportData, filename);
    toast.success(`Exported ${exportData.length} items successfully`);
  };

  // View product details
  const handleViewProduct = (productId) => {
    navigate(ROUTES.PRODUCTS.VIEW(productId));
  };

  // Calculate summary stats
  const stats = useMemo(() => {
    return {
      totalItems: inventory.length,
      inStock: inventory.filter((item) => item.quantityAvailable > 0).length,
      lowStock: inventory.filter(
        (item) =>
          item.quantityAvailable > 0 &&
          item.quantityAvailable <= (item.product?.reorderLevel || 10)
      ).length,
      outOfStock: inventory.filter((item) => item.quantityAvailable === 0).length,
      totalValue: inventory.reduce(
        (sum, item) =>
          sum + (item.quantityAvailable || 0) * (item.product?.costPrice || 0),
        0
      ),
    };
  }, [inventory]);

  if (!selectedBranch) {
    return (
      <div className="space-y-6">
        <PageHeader
          title="Available Stock"
          description="View all available stock in inventory"
          icon={Package}
        />
        <EmptyState
          icon={AlertCircle}
          title="No Branch Selected"
          description="Please select a branch to view available stock"
        />
      </div>
    );
  }

  if (error) {
    return (
      <div className="space-y-6">
        <PageHeader
          title="Available Stock"
          description="View all available stock in inventory"
          icon={Package}
        />
        <EmptyState
          icon={AlertCircle}
          title="Error Loading Stock"
          description={error.message || "Failed to load inventory data"}
          action={
            <Button onClick={() => refetch()}>
              Try Again
            </Button>
          }
        />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <PageHeader
        title="Available Stock"
        description={`View all available stock in ${selectedBranch.branchName}`}
        icon={Package}
        actions={
          <Button onClick={handleExport} disabled={filteredInventory.length === 0}>
            <Download className="mr-2 h-4 w-4" />
            Export to CSV
          </Button>
        }
      />

      {/* Summary Stats */}
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-5">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Total Items</CardTitle>
            <Package className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.totalItems}</div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">In Stock</CardTitle>
            <CheckCircle className="h-4 w-4 text-green-500" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">{stats.inStock}</div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Low Stock</CardTitle>
            <TrendingDown className="h-4 w-4 text-orange-500" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-orange-600">{stats.lowStock}</div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Out of Stock</CardTitle>
            <AlertCircle className="h-4 w-4 text-red-500" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-red-600">{stats.outOfStock}</div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Total Value</CardTitle>
            <Package className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{formatCurrency(stats.totalValue)}</div>
          </CardContent>
        </Card>
      </div>

      {/* Filters and Search */}
      <Card>
        <CardHeader>
          <div className="flex items-center justify-between">
            <div>
              <CardTitle>Inventory List</CardTitle>
              <CardDescription>
                Search and filter available stock items
              </CardDescription>
            </div>
            <div className="flex items-center gap-2">
              {hasActiveFilters && (
                <Button
                  variant="ghost"
                  size="sm"
                  onClick={clearFilters}
                  className="h-8"
                >
                  <X className="mr-2 h-4 w-4" />
                  Clear Filters
                </Button>
              )}
              <Button
                variant="outline"
                size="sm"
                onClick={() => setShowFilters(!showFilters)}
                className="h-8"
              >
                <SlidersHorizontal className="mr-2 h-4 w-4" />
                {showFilters ? "Hide" : "Show"} Filters
              </Button>
            </div>
          </div>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* Search Bar */}
          <div className="flex flex-col gap-4 sm:flex-row">
            <div className="flex-1">
              <SearchInput
                value={searchQuery}
                onChange={setSearchQuery}
                placeholder="Search by product name, code, generic name, or barcode..."
              />
            </div>
            <div className="flex gap-2">
              <Select value={sortBy} onValueChange={setSortBy}>
                <SelectTrigger className="w-[180px]">
                  <SelectValue placeholder="Sort by" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="name-asc">Name (A-Z)</SelectItem>
                  <SelectItem value="name-desc">Name (Z-A)</SelectItem>
                  <SelectItem value="quantity-asc">Quantity (Low-High)</SelectItem>
                  <SelectItem value="quantity-desc">Quantity (High-Low)</SelectItem>
                  <SelectItem value="value-asc">Value (Low-High)</SelectItem>
                  <SelectItem value="value-desc">Value (High-Low)</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </div>

          {/* Advanced Filters */}
          {showFilters && (
            <div className="grid gap-4 p-4 border rounded-lg bg-muted/50 md:grid-cols-3">
              <div className="space-y-2">
                <Label htmlFor="category-filter">Category</Label>
                <Select
                  value={categoryFilter}
                  onValueChange={setCategoryFilter}
                >
                  <SelectTrigger id="category-filter">
                    <SelectValue placeholder="All Categories" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="all">All Categories</SelectItem>
                    {categories.map((category) => (
                      <SelectItem
                        key={category.id}
                        value={category.id.toString()}
                      >
                        {category.categoryName}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>

              <div className="space-y-2">
                <Label htmlFor="stock-filter">Stock Status</Label>
                <Select value={stockFilter} onValueChange={setStockFilter}>
                  <SelectTrigger id="stock-filter">
                    <SelectValue placeholder="All Items" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="all">All Items</SelectItem>
                    <SelectItem value="in-stock">In Stock</SelectItem>
                    <SelectItem value="low-stock">Low Stock</SelectItem>
                    <SelectItem value="out-of-stock">Out of Stock</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              <div className="space-y-2">
                <Label>Active Filters</Label>
                <div className="flex flex-wrap gap-2">
                  {searchQuery && (
                    <Badge variant="secondary">
                      Search: {searchQuery}
                    </Badge>
                  )}
                  {categoryFilter !== "all" && (
                    <Badge variant="secondary">
                      Category:{" "}
                      {categories.find((c) => c.id === parseInt(categoryFilter))
                        ?.categoryName || "Unknown"}
                    </Badge>
                  )}
                  {stockFilter !== "all" && (
                    <Badge variant="secondary">
                      Status: {stockFilter.replace("-", " ")}
                    </Badge>
                  )}
                  {!hasActiveFilters && (
                    <span className="text-sm text-muted-foreground">
                      No filters applied
                    </span>
                  )}
                </div>
              </div>
            </div>
          )}
        </CardContent>
      </Card>

      {/* Stock Table */}
      <Card>
        <CardContent className="pt-6">
          {isLoading ? (
            <div className="rounded-md border">
              <Table>
                <TableHeader>
                  <TableRow>
                    <TableHead>Product Code</TableHead>
                    <TableHead>Product Name</TableHead>
                    <TableHead>Category</TableHead>
                    <TableHead className="text-right">Available</TableHead>
                    <TableHead className="text-right">Reserved</TableHead>
                    <TableHead className="text-right">Reorder Level</TableHead>
                    <TableHead>Status</TableHead>
                    <TableHead className="text-right">Value</TableHead>
                    <TableHead className="text-right">Actions</TableHead>
                  </TableRow>
                </TableHeader>
                <TableBody>
                  <LoadingSkeleton />
                </TableBody>
              </Table>
            </div>
          ) : filteredInventory.length === 0 ? (
            <EmptyState
              icon={Package}
              title="No Stock Items Found"
              description={
                searchQuery || stockFilter !== "all"
                  ? "Try adjusting your search or filters"
                  : "No inventory items available"
              }
            />
          ) : (
            <div className="rounded-md border">
              <Table>
                <TableHeader>
                  <TableRow>
                    <TableHead>Product Code</TableHead>
                    <TableHead>Product Name</TableHead>
                    <TableHead>Category</TableHead>
                    <TableHead className="text-right">Available</TableHead>
                    <TableHead className="text-right">Reserved</TableHead>
                    <TableHead className="text-right">Reorder Level</TableHead>
                    <TableHead>Status</TableHead>
                    <TableHead className="text-right">Value</TableHead>
                    <TableHead className="text-right">Actions</TableHead>
                  </TableRow>
                </TableHeader>
                <TableBody>
                  {filteredInventory.map((item) => {
                    const status = getStockStatus(item);
                    const StatusIcon = status.icon;
                    const stockValue =
                      (item.quantityAvailable || 0) *
                      (item.product?.costPrice || 0);

                    return (
                      <TableRow key={item.id}>
                        <TableCell className="font-medium">
                          {item.product?.productCode || "N/A"}
                        </TableCell>
                        <TableCell>
                          <div>
                            <div className="font-medium">
                              {item.product?.productName || "Unknown"}
                            </div>
                            {item.product?.genericName && (
                              <div className="text-sm text-muted-foreground">
                                {item.product.genericName}
                              </div>
                            )}
                          </div>
                        </TableCell>
                        <TableCell>
                          <span className="text-sm">
                            {item.product?.categoryName || "N/A"}
                          </span>
                        </TableCell>
                        <TableCell className="text-right font-medium">
                          {item.quantityAvailable || 0} {item.product?.unitName || ""}
                        </TableCell>
                        <TableCell className="text-right">
                          {item.quantityReserved || 0}
                        </TableCell>
                        <TableCell className="text-right">
                          {item.product?.reorderLevel || 0}
                        </TableCell>
                        <TableCell>
                          <Badge variant={status.variant} className="gap-1">
                            <StatusIcon className="h-3 w-3" />
                            {status.label}
                          </Badge>
                        </TableCell>
                        <TableCell className="text-right font-medium">
                          {formatCurrency(stockValue)}
                        </TableCell>
                        <TableCell className="text-right">
                          <Button
                            variant="ghost"
                            size="icon"
                            onClick={() =>
                              handleViewProduct(item.product?.id)
                            }
                          >
                            <Eye className="h-4 w-4" />
                          </Button>
                        </TableCell>
                      </TableRow>
                    );
                  })}
                </TableBody>
              </Table>
            </div>
          )}

          {/* Pagination */}
          {!isLoading && totalPages > 1 && (
            <div className="flex items-center justify-between px-2 py-4">
              <div className="text-sm text-muted-foreground">
                Showing {page * size + 1} to{" "}
                {Math.min((page + 1) * size, totalElements)} of {totalElements}{" "}
                items
              </div>
              <div className="flex gap-2">
                <Button
                  variant="outline"
                  size="sm"
                  onClick={() => setPage((p) => Math.max(0, p - 1))}
                  disabled={page === 0}
                >
                  Previous
                </Button>
                <Button
                  variant="outline"
                  size="sm"
                  onClick={() => setPage((p) => Math.min(totalPages - 1, p + 1))}
                  disabled={page >= totalPages - 1}
                >
                  Next
                </Button>
              </div>
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
};

// Loading skeleton
const LoadingSkeleton = () => (
  <>
    {[...Array(10)].map((_, i) => (
      <TableRow key={i}>
        <TableCell>
          <Skeleton className="h-4 w-20" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-40" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-24" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-16" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-16" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-16" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-6 w-20" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-20" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-8 w-8" />
        </TableCell>
      </TableRow>
    ))}
  </>
);

export default AvailableStockPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\BatchTrackingPage.jsx"   & echo.. 
/**
 * Batch Tracking Page
 * Displays and manages product batches
 */

import { useState, useMemo } from "react";
import { Download, Package2 } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Badge } from "@/components/ui/badge";
import { Skeleton } from "@/components/ui/skeleton";
import { useApiQuery } from "@/hooks";
import { API_ENDPOINTS } from "@/config";
import { useBranchStore } from "@/store";
import { formatDate } from "@/utils/formatters";

/**
 * BatchTrackingPage component
 */
const BatchTrackingPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const selectedBranch = useBranchStore((state) => state.selectedBranch);

  // Fetch inventory data with batches
  const { data, isLoading } = useApiQuery(
    ["inventory-batches", selectedBranch?.id],
    selectedBranch?.id
      ? API_ENDPOINTS.INVENTORY.BY_BRANCH(selectedBranch.id)
      : null,
    {
      params: { size: 1000 }, // Get all for filtering
      enabled: !!selectedBranch?.id,
    }
  );

  const batches = useMemo(() => {
    if (!data?.content) return [];
    
    // Extract all batches from inventory items
    const allBatches = [];
    data.content.forEach((inventory) => {
      if (inventory.batches && inventory.batches.length > 0) {
        inventory.batches.forEach((batch) => {
          allBatches.push({
            ...batch,
            productName: inventory.product?.productName || "Unknown Product",
            productCode: inventory.product?.productCode || "",
          });
        });
      }
    });
    
    return allBatches;
  }, [data]);

  // Filter batches based on search query
  const filteredBatches = useMemo(() => {
    if (!searchQuery) return batches;
    
    const query = searchQuery.toLowerCase();
    return batches.filter(
      (batch) =>
        batch.batchNumber?.toLowerCase().includes(query) ||
        batch.productName?.toLowerCase().includes(query) ||
        batch.productCode?.toLowerCase().includes(query)
    );
  }, [batches, searchQuery]);

  const getExpiryStatus = (expiryDate) => {
    const today = new Date();
    const expiry = new Date(expiryDate);
    const daysUntilExpiry = Math.ceil((expiry - today) / (1000 * 60 * 60 * 24));

    if (daysUntilExpiry < 0)
      return { label: "Expired", variant: "destructive" };
    if (daysUntilExpiry <= 30)
      return { label: "Critical", variant: "destructive" };
    if (daysUntilExpiry <= 90) return { label: "Warning", variant: "warning" };
    return { label: "Good", variant: "default" };
  };

  // Export function
  const handleExport = () => {
    if (filteredBatches.length === 0) return;
    
    const csv = [
      ["Batch Number", "Product", "Quantity", "Manufacturing Date", "Expiry Date", "Status"],
      ...filteredBatches.map((batch) => {
        const status = getExpiryStatus(batch.expiryDate);
        return [
          batch.batchNumber,
          batch.productName,
          batch.quantityAvailable || 0,
          formatDate(batch.manufacturingDate),
          formatDate(batch.expiryDate),
          status.label,
        ];
      }),
    ]
      .map((row) => row.join(","))
      .join("\n");
    
    const blob = new Blob([csv], { type: "text/csv" });
    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.href = url;
    link.download = `batch-tracking-${new Date().toISOString().split("T")[0]}.csv`;
    link.click();
  };

  return (
    <div className="space-y-6">
      <Card>
        <CardHeader className="flex flex-row items-center justify-between">
          <div>
            <CardTitle>Batch Tracking</CardTitle>
            <CardDescription>
              Track product batches, expiry dates, and stock levels
            </CardDescription>
          </div>
          <Button variant="outline" size="sm" onClick={handleExport} disabled={isLoading || filteredBatches.length === 0}>
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* Filters */}
          <div className="flex items-center gap-4">
            <Input
              placeholder="Search by product or batch number..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="max-w-sm"
            />
          </div>

          {/* Table */}
          <div className="rounded-md border">
            <Table>
              <TableHeader>
                <TableRow>
                  <TableHead>Batch Number</TableHead>
                  <TableHead>Product</TableHead>
                  <TableHead>Quantity</TableHead>
                  <TableHead>Manufacturing Date</TableHead>
                  <TableHead>Expiry Date</TableHead>
                  <TableHead>Status</TableHead>
                </TableRow>
              </TableHeader>
              <TableBody>
                {isLoading ? (
                  [...Array(5)].map((_, i) => (
                    <TableRow key={i}>
                      <TableCell>
                        <Skeleton className="h-4 w-24" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-32" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-16" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-24" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-24" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-20" />
                      </TableCell>
                    </TableRow>
                  ))
                ) : filteredBatches.length === 0 ? (
                  <TableRow>
                    <TableCell colSpan={6} className="h-24 text-center">
                      <div className="flex flex-col items-center gap-2 text-muted-foreground">
                        <Package2 className="h-8 w-8" />
                        <p>
                          {searchQuery
                            ? "No batches match your search"
                            : "No batches found"}
                        </p>
                      </div>
                    </TableCell>
                  </TableRow>
                ) : (
                  filteredBatches.map((batch) => {
                    const status = getExpiryStatus(batch.expiryDate);
                    return (
                      <TableRow key={batch.id}>
                        <TableCell className="font-mono">
                          {batch.batchNumber}
                        </TableCell>
                        <TableCell>
                          <div>
                            <div className="font-medium">{batch.productName}</div>
                            {batch.productCode && (
                              <div className="text-xs text-muted-foreground">
                                {batch.productCode}
                              </div>
                            )}
                          </div>
                        </TableCell>
                        <TableCell>{batch.quantityAvailable || 0}</TableCell>
                        <TableCell>
                          {batch.manufacturingDate
                            ? formatDate(batch.manufacturingDate)
                            : "N/A"}
                        </TableCell>
                        <TableCell>{formatDate(batch.expiryDate)}</TableCell>
                        <TableCell>
                          <Badge variant={status.variant}>{status.label}</Badge>
                        </TableCell>
                      </TableRow>
                    );
                  })
                )}
              </TableBody>
            </Table>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

export default BatchTrackingPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\ExpiringPage.jsx"   & echo.. 
/**
 * Expiring Products Page
 * Displays products approaching expiry or already expired
 */

import { useState, useMemo } from "react";
import { Download, AlertTriangle } from "lucide-react";
import {
  useExpiringProducts,
  useExpiredProducts,
  getExpiringColumns,
} from "@/features/inventory";
import { DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";

/**
 * ExpiringPage component
 */
const ExpiringPage = () => {
  const [activeTab, setActiveTab] = useState("expiring");

  // Pagination state
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 20,
  });

  // Sorting state
  const [sorting, setSorting] = useState([]);

  // Build query params
  const queryParams = useMemo(
    () => ({
      page: pagination.pageIndex,
      size: pagination.pageSize,
      sort:
        sorting.length > 0
          ? `${sorting[0].id},${sorting[0].desc ? "desc" : "asc"}`
          : "expiryDate,asc",
    }),
    [pagination, sorting]
  );

  // Fetch data
  const expiringQuery = useExpiringProducts({ ...queryParams, days: 90 });
  const expiredQuery = useExpiredProducts(queryParams);

  // Select data based on active tab
  const data =
    activeTab === "expiring" ? expiringQuery.data : expiredQuery.data;
  const isLoading =
    activeTab === "expiring" ? expiringQuery.isLoading : expiredQuery.isLoading;
  const isFetching =
    activeTab === "expiring"
      ? expiringQuery.isFetching
      : expiredQuery.isFetching;

  // Get columns
  const columns = useMemo(() => getExpiringColumns(), []);

  return (
    <div className="space-y-4 sm:space-y-6">
      <Card>
        <CardHeader className="flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-6">
          <div>
            <CardTitle className="text-lg sm:text-xl">
              Expiry Management
            </CardTitle>
            <CardDescription className="text-xs sm:text-sm">
              Track products approaching expiry and manage expired stock
            </CardDescription>
          </div>
          <Button variant="outline" size="sm" className="w-full sm:w-auto">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </CardHeader>
        <CardContent className="space-y-4 p-2 sm:p-6">
          <Tabs value={activeTab} onValueChange={setActiveTab}>
            <TabsList className="w-full justify-start overflow-x-auto">
              <TabsTrigger value="expiring" className="text-xs sm:text-sm">
                <span className="hidden sm:inline">Expiring Soon</span>
                <span className="sm:hidden">Expiring</span>
                {(expiringQuery.data?.totalElements || 0) > 0 && (
                  <span className="ml-1 sm:ml-2 bg-orange-500 text-white rounded-full px-1.5 sm:px-2 py-0.5 text-xs">
                    {expiringQuery.data?.totalElements}
                  </span>
                )}
              </TabsTrigger>
              <TabsTrigger value="expired" className="text-xs sm:text-sm">
                Expired
                {(expiredQuery.data?.totalElements || 0) > 0 && (
                  <span className="ml-1 sm:ml-2 bg-destructive text-destructive-foreground rounded-full px-1.5 sm:px-2 py-0.5 text-xs">
                    {expiredQuery.data?.totalElements}
                  </span>
                )}
              </TabsTrigger>
            </TabsList>

            <TabsContent value="expiring" className="mt-4">
              <DataTable
                columns={columns}
                data={data?.content || []}
                isLoading={isLoading}
                isFetching={isFetching}
                pagination={{
                  pageIndex: pagination.pageIndex,
                  pageSize: pagination.pageSize,
                  pageCount: data?.totalPages || 0,
                  total: data?.totalElements || 0,
                }}
                onPaginationChange={setPagination}
                sorting={sorting}
                onSortingChange={setSorting}
              />
            </TabsContent>

            <TabsContent value="expired" className="mt-4">
              {(expiredQuery.data?.totalElements || 0) > 0 && (
                <div className="mb-4 p-3 sm:p-4 bg-destructive/10 border border-destructive/20 rounded-lg flex items-start sm:items-center gap-2 sm:gap-3">
                  <AlertTriangle className="h-4 w-4 sm:h-5 sm:w-5 text-destructive shrink-0 mt-0.5 sm:mt-0" />
                  <div>
                    <p className="font-medium text-destructive text-sm sm:text-base">
                      {expiredQuery.data?.totalElements} expired products
                    </p>
                    <p className="text-xs sm:text-sm text-muted-foreground">
                      Remove and dispose properly.
                    </p>
                  </div>
                </div>
              )}
              <DataTable
                columns={columns}
                data={data?.content || []}
                isLoading={isLoading}
                isFetching={isFetching}
                pagination={{
                  pageIndex: pagination.pageIndex,
                  pageSize: pagination.pageSize,
                  pageCount: data?.totalPages || 0,
                  total: data?.totalElements || 0,
                }}
                onPaginationChange={setPagination}
                sorting={sorting}
                onSortingChange={setSorting}
              />
            </TabsContent>
          </Tabs>
        </CardContent>
      </Card>
    </div>
  );
};

export default ExpiringPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\InventoryPage.jsx"   & echo.. 
/**
 * Inventory Overview Page
 * Comprehensive inventory management with overview, available stock, and direct stock addition
 */

import { useState, useMemo } from "react";
import { useNavigate } from "react-router-dom";
import {
  Package,
  AlertTriangle,
  Clock,
  ArrowLeftRight,
  TrendingDown,
  AlertCircle,
  Plus,
  Download,
  Eye,
  CheckCircle,
  X,
  SlidersHorizontal,
} from "lucide-react";
import { ROUTES } from "@/config";
import {
  useLowStockProducts,
  useExpiringProducts,
  useInventory,
} from "@/features/inventory";
import { useCategories } from "@/features/categories";
import { useBranch } from "@/hooks";
import { useDebounce } from "@/hooks/useDebounce";
import { PageHeader, StatCard, SearchInput, EmptyState } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";
import { Badge } from "@/components/ui/badge";
import { Label } from "@/components/ui/label";
import { Skeleton } from "@/components/ui/skeleton";
import { formatCurrency } from "@/utils/formatters";

// Import sub-pages
import LowStockPage from "./LowStockPage";
import ExpiringPage from "./ExpiringPage";
import StockTransfersPage from "./StockTransfersPage";

// Import Direct Stock Form
import DirectStockForm from "./components/DirectStockForm";

/**
 * InventoryPage component
 */
const InventoryPage = () => {
  const navigate = useNavigate();
  const { selectedBranch } = useBranch();
  const [activeTab, setActiveTab] = useState("overview");
  const [isDirectStockDialogOpen, setIsDirectStockDialogOpen] = useState(false);

  // Available Stock State
  const [searchQuery, setSearchQuery] = useState("");
  const [categoryFilter, setCategoryFilter] = useState("all");
  const [stockFilter, setStockFilter] = useState("all");
  const [sortBy, setSortBy] = useState("name-asc");
  const [showFilters, setShowFilters] = useState(false);
  const [page, setPage] = useState(0);
  const size = 20;

  // Fetch summary data
  const { data: lowStockData } = useLowStockProducts({ size: 1 });
  const { data: expiringData } = useExpiringProducts({ size: 1, days: 90 });
  const { data: categories } = useCategories();

  // Debounced search
  const debouncedSearch = useDebounce(searchQuery, 500);

  // Fetch inventory data for available stock tab
  // Use larger page size when searching to ensure search results are found
  const effectiveSize = debouncedSearch ? 1000 : size;
  
  const {
    data: inventoryData,
    isLoading: isLoadingInventory,
    error: inventoryError,
    refetch: refetchInventory,
  } = useInventory(
    selectedBranch?.id,
    {
      page: debouncedSearch ? 0 : page, // Always start from page 0 when searching
      size: effectiveSize,
      sort: sortBy.includes("name")
        ? `product.productName,${sortBy.split("-")[1]}`
        : sortBy.includes("quantity")
        ? `quantityAvailable,${sortBy.split("-")[1]}`
        : sortBy.includes("value")
        ? `product.costPrice,${sortBy.split("-")[1]}`
        : "product.productName,asc",
    },
    { enabled: !!selectedBranch && activeTab === "available-stock" }
  );

  const inventory = inventoryData?.content || [];
  const totalPages = inventoryData?.totalPages || 0;
  const totalElements = inventoryData?.totalElements || 0;

  const lowStockCount = lowStockData?.totalElements || 0;
  const expiringCount = expiringData?.totalElements || 0;

  // Filter inventory based on search and filters
  const filteredInventory = useMemo(() => {
    if (!inventory) return [];

    let filtered = [...inventory];

    // Search filter
    if (debouncedSearch) {
      const searchLower = debouncedSearch.toLowerCase();
      filtered = filtered.filter(
        (item) =>
          item.product?.productName?.toLowerCase().includes(searchLower) ||
          item.product?.productCode?.toLowerCase().includes(searchLower) ||
          item.product?.genericName?.toLowerCase().includes(searchLower) ||
          item.product?.barcode?.toLowerCase().includes(searchLower)
      );
    }

    // Category filter
    if (categoryFilter !== "all") {
      filtered = filtered.filter(
        (item) => item.product?.categoryId === parseInt(categoryFilter)
      );
    }

    // Stock status filter
    if (stockFilter !== "all") {
      filtered = filtered.filter((item) => {
        const available = item.quantityAvailable || 0;
        const reorderLevel = item.reorderLevel || 0;

        if (stockFilter === "in-stock") {
          return available > reorderLevel;
        } else if (stockFilter === "low-stock") {
          return available > 0 && available <= reorderLevel;
        } else if (stockFilter === "out-of-stock") {
          return available === 0;
        }
        return true;
      });
    }

    return filtered;
  }, [inventory, debouncedSearch, categoryFilter, stockFilter]);

  // Reset pagination when filters change
  useMemo(() => {
    setPage(0);
  }, [debouncedSearch, categoryFilter, stockFilter, sortBy]);

  // Calculate stats for available stock
  const stats = useMemo(() => {
    return {
      totalItems: inventory.length,
      inStock: inventory.filter((item) => item.quantityAvailable > 0).length,
      lowStock: inventory.filter(
        (item) =>
          item.quantityAvailable > 0 &&
          item.quantityAvailable <= (item.reorderLevel || 0)
      ).length,
      outOfStock: inventory.filter((item) => item.quantityAvailable === 0)
        .length,
      totalValue: inventory.reduce(
        (sum, item) =>
          sum + (item.quantityAvailable || 0) * (item.product?.costPrice || 0),
        0
      ),
    };
  }, [inventory]);

  const hasActiveFilters =
    searchQuery || categoryFilter !== "all" || stockFilter !== "all";

  const clearFilters = () => {
    setSearchQuery("");
    setCategoryFilter("all");
    setStockFilter("all");
  };

  const getStockStatus = (item) => {
    const available = item.quantityAvailable || 0;
    const reorderLevel = item.reorderLevel || 0;

    if (available === 0) {
      return {
        label: "Out of Stock",
        variant: "destructive",
        icon: AlertCircle,
      };
    } else if (available <= reorderLevel) {
      return { label: "Low Stock", variant: "warning", icon: TrendingDown };
    } else {
      return { label: "In Stock", variant: "success", icon: CheckCircle };
    }
  };

  const handleViewProduct = (productId) => {
    if (productId) {
      navigate(ROUTES.PRODUCTS.VIEW(productId));
    }
  };

  const handleExport = () => {
    if (filteredInventory.length === 0) {
      return;
    }

    const exportData = filteredInventory.map((item) => ({
      "Product Code": item.product?.productCode || "",
      "Product Name": item.product?.productName || "",
      "Generic Name": item.product?.genericName || "",
      Category: item.product?.categoryName || "",
      "Available Quantity": item.quantityAvailable || 0,
      "Reserved Quantity": item.quantityReserved || 0,
      "Reorder Level": item.reorderLevel || 0,
      Status: getStockStatus(item).label,
      "Unit Price": item.product?.costPrice || 0,
      "Total Value":
        (item.quantityAvailable || 0) * (item.product?.costPrice || 0),
    }));

    const csv = [
      Object.keys(exportData[0]).join(","),
      ...exportData.map((row) => Object.values(row).join(",")),
    ].join("\n");

    const blob = new Blob([csv], { type: "text/csv" });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `inventory-${selectedBranch?.branchName || "all"}-${
      new Date().toISOString().split("T")[0]
    }.csv`;
    a.click();
    window.URL.revokeObjectURL(url);
  };

  const overviewStats = [
    {
      title: "Low Stock Items",
      value: lowStockCount,
      icon: TrendingDown,
      trend: lowStockCount > 10 ? "Needs attention" : "Good",
      trendUp: lowStockCount <= 10,
      onClick: () => setActiveTab("low-stock"),
    },
    {
      title: "Expiring Soon",
      value: expiringCount,
      icon: Clock,
      description: "Within 90 days",
      onClick: () => setActiveTab("expiring"),
    },
    {
      title: "Out of Stock",
      value:
        lowStockData?.content?.filter((p) => p.currentStock === 0).length || 0,
      icon: AlertCircle,
      variant: "destructive",
    },
  ];

  return (
    <div className="space-y-6">
      <PageHeader
        title="Inventory Management"
        description="Monitor stock levels, expiry dates, and manage stock transfers"
        actions={
          <div className="flex gap-2">
            <Dialog
              open={isDirectStockDialogOpen}
              onOpenChange={setIsDirectStockDialogOpen}
            >
              <DialogTrigger asChild>
                <Button variant="outline">
                  <Plus className="mr-2 h-4 w-4" />
                  Add Direct Stock
                </Button>
              </DialogTrigger>
              <DialogContent className="max-w-[95vw] sm:max-w-6xl max-h-[95vh] p-0 gap-0">
                <DialogHeader className="px-4 sm:px-6 pt-6 pb-4 border-b">
                  <DialogTitle className="text-xl sm:text-2xl">Add Direct Stock to Inventory</DialogTitle>
                  <DialogDescription className="text-sm sm:text-base">
                    Add stock directly to your inventory without a GRN process
                  </DialogDescription>
                </DialogHeader>
                <div className="overflow-y-auto px-4 sm:px-6 py-4 max-h-[calc(95vh-140px)]">
                  <DirectStockForm
                    onSuccess={() => {
                      setIsDirectStockDialogOpen(false);
                      refetchInventory();
                    }}
                  />
                </div>
              </DialogContent>
            </Dialog>
            <Button
              onClick={() => navigate(ROUTES.INVENTORY.TRANSFERS.NEW)}
              className="w-full sm:w-auto"
            >
              <ArrowLeftRight className="mr-2 h-4 w-4" />
              <span className="hidden sm:inline">New </span>Stock Transfer
            </Button>
          </div>
        }
      />

      <Tabs value={activeTab} onValueChange={setActiveTab}>
        <TabsList className="w-full justify-start overflow-x-auto">
          <TabsTrigger value="overview" className="flex-shrink-0">
            Overview
          </TabsTrigger>
          <TabsTrigger value="available-stock" className="flex-shrink-0">
            Available Stock
          </TabsTrigger>
          <TabsTrigger value="low-stock" className="flex-shrink-0">
            Low Stock
            {lowStockCount > 0 && (
              <span className="ml-2 bg-destructive text-destructive-foreground rounded-full px-2 py-0.5 text-xs">
                {lowStockCount}
              </span>
            )}
          </TabsTrigger>
          <TabsTrigger value="expiring" className="flex-shrink-0">
            Expiring
            {expiringCount > 0 && (
              <span className="ml-2 bg-orange-500 text-white rounded-full px-2 py-0.5 text-xs">
                {expiringCount}
              </span>
            )}
          </TabsTrigger>
          <TabsTrigger value="transfers">Stock Transfers</TabsTrigger>
        </TabsList>

        <TabsContent value="overview" className="space-y-6">
          {/* Stats Grid */}
          <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
            {overviewStats.map((stat, index) => (
              <StatCard
                key={index}
                title={stat.title}
                value={stat.value}
                icon={stat.icon}
                description={stat.description}
                trend={stat.trend}
                trendUp={stat.trendUp}
                className={
                  stat.onClick
                    ? "cursor-pointer hover:shadow-md transition-shadow"
                    : ""
                }
                onClick={stat.onClick}
              />
            ))}
          </div>

          {/* Quick Actions */}
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
            <Card
              className="cursor-pointer hover:shadow-md transition-shadow"
              onClick={() => setActiveTab("available-stock")}
            >
              <CardHeader>
                <div className="flex items-center gap-4">
                  <div className="p-2 bg-blue-100 rounded-lg">
                    <Package className="h-6 w-6 text-blue-600" />
                  </div>
                  <div>
                    <CardTitle className="text-base">View All Stock</CardTitle>
                    <CardDescription>
                      Browse complete inventory
                    </CardDescription>
                  </div>
                </div>
              </CardHeader>
            </Card>

            <Card
              className="cursor-pointer hover:shadow-md transition-shadow"
              onClick={() => setActiveTab("low-stock")}
            >
              <CardHeader>
                <div className="flex items-center gap-4">
                  <div className="p-2 bg-orange-100 rounded-lg">
                    <TrendingDown className="h-6 w-6 text-orange-600" />
                  </div>
                  <div>
                    <CardTitle className="text-base">Low Stock Alert</CardTitle>
                    <CardDescription>
                      {lowStockCount} items need reordering
                    </CardDescription>
                  </div>
                </div>
              </CardHeader>
            </Card>

            <Card
              className="cursor-pointer hover:shadow-md transition-shadow"
              onClick={() => setActiveTab("expiring")}
            >
              <CardHeader>
                <div className="flex items-center gap-4">
                  <div className="p-2 bg-yellow-100 rounded-lg">
                    <Clock className="h-6 w-6 text-yellow-600" />
                  </div>
                  <div>
                    <CardTitle className="text-base">Expiry Tracking</CardTitle>
                    <CardDescription>
                      {expiringCount} items expiring soon
                    </CardDescription>
                  </div>
                </div>
              </CardHeader>
            </Card>
          </div>
        </TabsContent>

        <TabsContent value="available-stock" className="space-y-6">
          {!selectedBranch ? (
            <EmptyState
              icon={AlertCircle}
              title="No Branch Selected"
              description="Please select a branch to view available stock"
            />
          ) : inventoryError ? (
            <EmptyState
              icon={AlertCircle}
              title="Error Loading Stock"
              description={
                inventoryError.message || "Failed to load inventory data"
              }
              action={
                <Button onClick={() => refetchInventory()}>Try Again</Button>
              }
            />
          ) : (
            <>
              {/* Summary Stats */}
              <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-5">
                <Card>
                  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                    <CardTitle className="text-sm font-medium">
                      Total Items
                    </CardTitle>
                    <Package className="h-4 w-4 text-muted-foreground" />
                  </CardHeader>
                  <CardContent>
                    <div className="text-2xl font-bold">{stats.totalItems}</div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                    <CardTitle className="text-sm font-medium">
                      In Stock
                    </CardTitle>
                    <CheckCircle className="h-4 w-4 text-green-500" />
                  </CardHeader>
                  <CardContent>
                    <div className="text-2xl font-bold text-green-600">
                      {stats.inStock}
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                    <CardTitle className="text-sm font-medium">
                      Low Stock
                    </CardTitle>
                    <TrendingDown className="h-4 w-4 text-orange-500" />
                  </CardHeader>
                  <CardContent>
                    <div className="text-2xl font-bold text-orange-600">
                      {stats.lowStock}
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                    <CardTitle className="text-sm font-medium">
                      Out of Stock
                    </CardTitle>
                    <AlertCircle className="h-4 w-4 text-red-500" />
                  </CardHeader>
                  <CardContent>
                    <div className="text-2xl font-bold text-red-600">
                      {stats.outOfStock}
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                    <CardTitle className="text-sm font-medium">
                      Total Value
                    </CardTitle>
                    <Package className="h-4 w-4 text-muted-foreground" />
                  </CardHeader>
                  <CardContent>
                    <div className="text-2xl font-bold">
                      {formatCurrency(stats.totalValue)}
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Filters and Search */}
              <Card>
                <CardHeader>
                  <div className="flex items-center justify-between">
                    <div>
                      <CardTitle>Inventory List</CardTitle>
                      <CardDescription>
                        Search and filter available stock items
                      </CardDescription>
                    </div>
                    <div className="flex items-center gap-2">
                      {hasActiveFilters && (
                        <Button
                          variant="ghost"
                          size="sm"
                          onClick={clearFilters}
                          className="h-8"
                        >
                          <X className="mr-2 h-4 w-4" />
                          Clear Filters
                        </Button>
                      )}
                      <Button
                        variant="outline"
                        size="sm"
                        onClick={() => setShowFilters(!showFilters)}
                        className="h-8"
                      >
                        <SlidersHorizontal className="mr-2 h-4 w-4" />
                        {showFilters ? "Hide" : "Show"} Filters
                      </Button>
                      <Button
                        onClick={handleExport}
                        disabled={filteredInventory.length === 0}
                        size="sm"
                        className="h-8"
                      >
                        <Download className="mr-2 h-4 w-4" />
                        Export
                      </Button>
                    </div>
                  </div>
                </CardHeader>
                <CardContent className="space-y-4">
                  {/* Search Bar */}
                  <div className="flex flex-col gap-4 sm:flex-row">
                    <div className="flex-1">
                      <SearchInput
                        value={searchQuery}
                        onChange={setSearchQuery}
                        placeholder="Search by product name, code, generic name, or barcode..."
                      />
                    </div>
                    <div className="flex gap-2">
                      <Select value={sortBy} onValueChange={setSortBy}>
                        <SelectTrigger className="w-[180px]">
                          <SelectValue placeholder="Sort by" />
                        </SelectTrigger>
                        <SelectContent>
                          <SelectItem value="name-asc">Name (A-Z)</SelectItem>
                          <SelectItem value="name-desc">Name (Z-A)</SelectItem>
                          <SelectItem value="quantity-asc">
                            Quantity (Low-High)
                          </SelectItem>
                          <SelectItem value="quantity-desc">
                            Quantity (High-Low)
                          </SelectItem>
                          <SelectItem value="value-asc">
                            Value (Low-High)
                          </SelectItem>
                          <SelectItem value="value-desc">
                            Value (High-Low)
                          </SelectItem>
                        </SelectContent>
                      </Select>
                    </div>
                  </div>

                  {/* Advanced Filters */}
                  {showFilters && (
                    <div className="grid gap-4 p-4 border rounded-lg bg-muted/50 md:grid-cols-3">
                      <div className="space-y-2">
                        <Label htmlFor="category-filter">Category</Label>
                        <Select
                          value={categoryFilter}
                          onValueChange={setCategoryFilter}
                        >
                          <SelectTrigger id="category-filter">
                            <SelectValue placeholder="All Categories" />
                          </SelectTrigger>
                          <SelectContent>
                            <SelectItem value="all">All Categories</SelectItem>
                            {categories?.map((category) => (
                              <SelectItem
                                key={category.id}
                                value={category.id.toString()}
                              >
                                {category.categoryName}
                              </SelectItem>
                            ))}
                          </SelectContent>
                        </Select>
                      </div>

                      <div className="space-y-2">
                        <Label htmlFor="stock-filter">Stock Status</Label>
                        <Select
                          value={stockFilter}
                          onValueChange={setStockFilter}
                        >
                          <SelectTrigger id="stock-filter">
                            <SelectValue placeholder="All Items" />
                          </SelectTrigger>
                          <SelectContent>
                            <SelectItem value="all">All Items</SelectItem>
                            <SelectItem value="in-stock">In Stock</SelectItem>
                            <SelectItem value="low-stock">Low Stock</SelectItem>
                            <SelectItem value="out-of-stock">
                              Out of Stock
                            </SelectItem>
                          </SelectContent>
                        </Select>
                      </div>

                      <div className="space-y-2">
                        <Label>Active Filters</Label>
                        <div className="flex flex-wrap gap-2">
                          {searchQuery && (
                            <Badge variant="secondary">
                              Search: {searchQuery}
                            </Badge>
                          )}
                          {categoryFilter !== "all" && (
                            <Badge variant="secondary">
                              Category:{" "}
                              {categories?.find(
                                (c) => c.id === parseInt(categoryFilter)
                              )?.categoryName || "Unknown"}
                            </Badge>
                          )}
                          {stockFilter !== "all" && (
                            <Badge variant="secondary">
                              Status: {stockFilter.replace("-", " ")}
                            </Badge>
                          )}
                          {!hasActiveFilters && (
                            <span className="text-sm text-muted-foreground">
                              No filters applied
                            </span>
                          )}
                        </div>
                      </div>
                    </div>
                  )}
                </CardContent>
              </Card>

              {/* Stock Table */}
              <Card>
                <CardContent className="pt-6">
                  {/* Search Results Info */}
                  {debouncedSearch && !isLoadingInventory && (
                    <div className="mb-4 px-2">
                      <p className="text-sm text-muted-foreground">
                        Found {filteredInventory.length} result{filteredInventory.length !== 1 ? 's' : ''} for "{debouncedSearch}"
                      </p>
                    </div>
                  )}
                  
                  {isLoadingInventory ? (
                    <div className="rounded-md border">
                      <Table>
                        <TableHeader>
                          <TableRow>
                            <TableHead>Product Code</TableHead>
                            <TableHead>Product Name</TableHead>
                            <TableHead>Category</TableHead>
                            <TableHead className="text-right">
                              Available
                            </TableHead>
                            <TableHead className="text-right">
                              Reserved
                            </TableHead>
                            <TableHead className="text-right">
                              Reorder Level
                            </TableHead>
                            <TableHead>Status</TableHead>
                            <TableHead className="text-right">Value</TableHead>
                            <TableHead className="text-right">
                              Actions
                            </TableHead>
                          </TableRow>
                        </TableHeader>
                        <TableBody>
                          <LoadingSkeleton />
                        </TableBody>
                      </Table>
                    </div>
                  ) : filteredInventory.length === 0 ? (
                    <EmptyState
                      icon={Package}
                      title="No Stock Items Found"
                      description={
                        searchQuery || stockFilter !== "all"
                          ? "Try adjusting your search or filters"
                          : "No inventory items available"
                      }
                    />
                  ) : (
                    <div className="rounded-md border">
                      <Table>
                        <TableHeader>
                          <TableRow>
                            <TableHead>Product Code</TableHead>
                            <TableHead>Product Name</TableHead>
                            <TableHead>Category</TableHead>
                            <TableHead className="text-right">
                              Available
                            </TableHead>
                            <TableHead className="text-right">
                              Reserved
                            </TableHead>
                            <TableHead className="text-right">
                              Reorder Level
                            </TableHead>
                            <TableHead>Status</TableHead>
                            <TableHead className="text-right">Value</TableHead>
                            <TableHead className="text-right">
                              Actions
                            </TableHead>
                          </TableRow>
                        </TableHeader>
                        <TableBody>
                          {filteredInventory.map((item) => {
                            const status = getStockStatus(item);
                            const StatusIcon = status.icon;
                            const stockValue =
                              (item.quantityAvailable || 0) *
                              (item.product?.costPrice || 0);

                            return (
                              <TableRow key={item.id}>
                                <TableCell className="font-medium">
                                  {item.product?.productCode || "N/A"}
                                </TableCell>
                                <TableCell>
                                  <div>
                                    <div className="font-medium">
                                      {item.product?.productName || "Unknown"}
                                    </div>
                                    {item.product?.genericName && (
                                      <div className="text-sm text-muted-foreground">
                                        {item.product.genericName}
                                      </div>
                                    )}
                                  </div>
                                </TableCell>
                                <TableCell>
                                  <span className="text-sm">
                                    {item.product?.categoryName || "N/A"}
                                  </span>
                                </TableCell>
                                <TableCell className="text-right font-medium">
                                  {item.quantityAvailable || 0}{" "}
                                  {item.product?.unitName || ""}
                                </TableCell>
                                <TableCell className="text-right">
                                  {item.quantityReserved || 0}
                                </TableCell>
                                <TableCell className="text-right">
                                  {item.reorderLevel || 0}
                                </TableCell>
                                <TableCell>
                                  <Badge
                                    variant={status.variant}
                                    className="gap-1"
                                  >
                                    <StatusIcon className="h-3 w-3" />
                                    {status.label}
                                  </Badge>
                                </TableCell>
                                <TableCell className="text-right font-medium">
                                  {formatCurrency(stockValue)}
                                </TableCell>
                                <TableCell className="text-right">
                                  <Button
                                    variant="ghost"
                                    size="icon"
                                    onClick={() =>
                                      handleViewProduct(item.product?.id)
                                    }
                                  >
                                    <Eye className="h-4 w-4" />
                                  </Button>
                                </TableCell>
                              </TableRow>
                            );
                          })}
                        </TableBody>
                      </Table>
                    </div>
                  )}

                  {/* Pagination */}
                  {!isLoadingInventory && !debouncedSearch && totalPages > 1 && (
                    <div className="flex items-center justify-between px-2 py-4">
                      <div className="text-sm text-muted-foreground">
                        Showing {page * size + 1} to{" "}
                        {Math.min((page + 1) * size, totalElements)} of{" "}
                        {totalElements} items
                      </div>
                      <div className="flex gap-2">
                        <Button
                          variant="outline"
                          size="sm"
                          onClick={() => setPage((p) => Math.max(0, p - 1))}
                          disabled={page === 0}
                        >
                          Previous
                        </Button>
                        <Button
                          variant="outline"
                          size="sm"
                          onClick={() =>
                            setPage((p) => Math.min(totalPages - 1, p + 1))
                          }
                          disabled={page >= totalPages - 1}
                        >
                          Next
                        </Button>
                      </div>
                    </div>
                  )}
                </CardContent>
              </Card>
            </>
          )}
        </TabsContent>

        <TabsContent value="low-stock">
          <LowStockPage />
        </TabsContent>

        <TabsContent value="expiring">
          <ExpiringPage />
        </TabsContent>

        <TabsContent value="transfers">
          <StockTransfersPage />
        </TabsContent>
      </Tabs>
    </div>
  );
};

// Loading skeleton component
const LoadingSkeleton = () => (
  <>
    {[...Array(10)].map((_, i) => (
      <TableRow key={i}>
        <TableCell>
          <Skeleton className="h-4 w-20" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-40" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-24" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-16" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-16" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-16" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-6 w-20" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-4 w-20" />
        </TableCell>
        <TableCell>
          <Skeleton className="h-8 w-8" />
        </TableCell>
      </TableRow>
    ))}
  </>
);

export default InventoryPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\LowStockPage.jsx"   & echo.. 
/**
 * Low Stock Page
 * Displays products that need reordering
 */

import { useState, useMemo } from "react";
import { useNavigate } from "react-router-dom";
import { Download, ShoppingCart } from "lucide-react";
import { useLowStockProducts, getLowStockColumns } from "@/features/inventory";
import { DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { ROUTES } from "@/config";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";

/**
 * LowStockPage component
 */
const LowStockPage = () => {
  const navigate = useNavigate();

  // Pagination state
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 20,
  });

  // Sorting state
  const [sorting, setSorting] = useState([]);

  // Build query params
  const queryParams = useMemo(
    () => ({
      page: pagination.pageIndex,
      size: pagination.pageSize,
      sort:
        sorting.length > 0
          ? `${sorting[0].id},${sorting[0].desc ? "desc" : "asc"}`
          : "currentStock,asc",
    }),
    [pagination, sorting]
  );

  // Fetch low stock products
  const { data, isLoading, isFetching } = useLowStockProducts(queryParams);

  // Get columns
  const columns = useMemo(() => getLowStockColumns(), []);

  // Calculate out of stock count
  const outOfStockCount =
    data?.content?.filter((p) => p.currentStock === 0).length || 0;

  return (
    <div className="space-y-4 sm:space-y-6">
      <Card>
        <CardHeader className="flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-6">
          <div>
            <CardTitle className="text-lg sm:text-xl">
              Low Stock Products
            </CardTitle>
            <CardDescription className="text-xs sm:text-sm">
              Products below reorder level  {outOfStockCount} out of stock
            </CardDescription>
          </div>
          <div className="flex flex-wrap gap-2">
            <Button variant="outline" size="sm" className="flex-1 sm:flex-none">
              <Download className="mr-2 h-4 w-4" />
              <span className="hidden sm:inline">Export</span>
            </Button>
            <Button
              size="sm"
              className="flex-1 sm:flex-none"
              onClick={() => navigate(ROUTES.PURCHASE_ORDERS.NEW)}
            >
              <ShoppingCart className="mr-2 h-4 w-4" />
              <span className="hidden sm:inline">Create PO</span>
              <span className="sm:hidden">New PO</span>
            </Button>
          </div>
        </CardHeader>
        <CardContent className="p-2 sm:p-6">
          <DataTable
            columns={columns}
            data={data?.content || []}
            isLoading={isLoading}
            isFetching={isFetching}
            pagination={{
              pageIndex: pagination.pageIndex,
              pageSize: pagination.pageSize,
              pageCount: data?.totalPages || 0,
              total: data?.totalElements || 0,
            }}
            onPaginationChange={setPagination}
            sorting={sorting}
            onSortingChange={setSorting}
          />
        </CardContent>
      </Card>
    </div>
  );
};

export default LowStockPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\StockAdjustmentFormPage.jsx"   & echo.. 
/**
 * Stock Adjustment Form Page
 * Create new stock adjustments
 */

import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { ArrowLeft, Plus, Trash2 } from "lucide-react";
import { ROUTES } from "@/config";
import { PageHeader } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";

// Validation schema
const adjustmentSchema = z.object({
  adjustmentType: z.string().min(1, "Adjustment type is required"),
  reason: z.string().min(1, "Reason is required"),
  notes: z.string().optional(),
});

const ADJUSTMENT_TYPES = [
  { value: "DAMAGE", label: "Damage" },
  { value: "LOSS", label: "Loss" },
  { value: "EXPIRY", label: "Expiry" },
  { value: "CORRECTION", label: "Correction" },
  { value: "COUNT", label: "Physical Count" },
];

/**
 * StockAdjustmentFormPage component
 */
const StockAdjustmentFormPage = () => {
  const navigate = useNavigate();
  const [items, setItems] = useState([]);
  const [isSubmitting, setIsSubmitting] = useState(false);

  const form = useForm({
    resolver: zodResolver(adjustmentSchema),
    defaultValues: {
      adjustmentType: "",
      reason: "",
      notes: "",
    },
  });

  // Add item to adjustment
  const handleAddItem = () => {
    setItems([
      ...items,
      {
        id: Date.now(),
        productId: "",
        productName: "",
        currentStock: 0,
        adjustmentQty: 0,
        newStock: 0,
      },
    ]);
  };

  // Remove item from adjustment
  const handleRemoveItem = (id) => {
    setItems(items.filter((item) => item.id !== id));
  };

  // Handle form submission
  const onSubmit = async (data) => {
    if (items.length === 0) {
      return;
    }

    setIsSubmitting(true);
    try {
      // TODO: Implement actual API call
      console.log("Submitting adjustment:", { ...data, items });
      navigate(ROUTES.INVENTORY.ADJUSTMENTS.LIST);
    } catch (error) {
      console.error("Error creating adjustment:", error);
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title="New Stock Adjustment"
        description="Create a new stock adjustment for damage, loss, or corrections"
        actions={
          <Button
            variant="outline"
            onClick={() => navigate(ROUTES.INVENTORY.ADJUSTMENTS.LIST)}
          >
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back to Adjustments
          </Button>
        }
      />

      <Form {...form}>
        <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
          {/* Adjustment Details */}
          <Card>
            <CardHeader>
              <CardTitle>Adjustment Details</CardTitle>
              <CardDescription>
                Enter the adjustment type and reason
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid gap-4 md:grid-cols-2">
                <FormField
                  control={form.control}
                  name="adjustmentType"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Adjustment Type</FormLabel>
                      <Select
                        onValueChange={field.onChange}
                        defaultValue={field.value}
                      >
                        <FormControl>
                          <SelectTrigger>
                            <SelectValue placeholder="Select type" />
                          </SelectTrigger>
                        </FormControl>
                        <SelectContent>
                          {ADJUSTMENT_TYPES.map((type) => (
                            <SelectItem key={type.value} value={type.value}>
                              {type.label}
                            </SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                <FormField
                  control={form.control}
                  name="reason"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Reason</FormLabel>
                      <FormControl>
                        <Input placeholder="Enter reason" {...field} />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />
              </div>

              <FormField
                control={form.control}
                name="notes"
                render={({ field }) => (
                  <FormItem>
                    <FormLabel>Notes (Optional)</FormLabel>
                    <FormControl>
                      <Textarea
                        placeholder="Additional notes..."
                        className="resize-none"
                        {...field}
                      />
                    </FormControl>
                    <FormDescription>
                      Any additional information about this adjustment
                    </FormDescription>
                    <FormMessage />
                  </FormItem>
                )}
              />
            </CardContent>
          </Card>

          {/* Adjustment Items */}
          <Card>
            <CardHeader className="flex flex-row items-center justify-between">
              <div>
                <CardTitle>Adjustment Items</CardTitle>
                <CardDescription>Add products to adjust</CardDescription>
              </div>
              <Button type="button" variant="outline" onClick={handleAddItem}>
                <Plus className="mr-2 h-4 w-4" />
                Add Item
              </Button>
            </CardHeader>
            <CardContent>
              {items.length === 0 ? (
                <div className="text-center py-8 text-muted-foreground">
                  No items added. Click "Add Item" to add products to adjust.
                </div>
              ) : (
                <div className="rounded-md border">
                  <Table>
                    <TableHeader>
                      <TableRow>
                        <TableHead>Product</TableHead>
                        <TableHead>Current Stock</TableHead>
                        <TableHead>Adjustment Qty</TableHead>
                        <TableHead>New Stock</TableHead>
                        <TableHead className="w-10"></TableHead>
                      </TableRow>
                    </TableHeader>
                    <TableBody>
                      {items.map((item) => (
                        <TableRow key={item.id}>
                          <TableCell>
                            <Input placeholder="Search product..." />
                          </TableCell>
                          <TableCell>{item.currentStock}</TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              placeholder="0"
                              className="w-24"
                            />
                          </TableCell>
                          <TableCell>{item.newStock}</TableCell>
                          <TableCell>
                            <Button
                              type="button"
                              variant="ghost"
                              size="icon"
                              onClick={() => handleRemoveItem(item.id)}
                            >
                              <Trash2 className="h-4 w-4 text-destructive" />
                            </Button>
                          </TableCell>
                        </TableRow>
                      ))}
                    </TableBody>
                  </Table>
                </div>
              )}
            </CardContent>
          </Card>

          {/* Actions */}
          <div className="flex justify-end gap-4">
            <Button
              type="button"
              variant="outline"
              onClick={() => navigate(ROUTES.INVENTORY.ADJUSTMENTS.LIST)}
            >
              Cancel
            </Button>
            <Button type="submit" disabled={isSubmitting || items.length === 0}>
              {isSubmitting ? "Creating..." : "Create Adjustment"}
            </Button>
          </div>
        </form>
      </Form>
    </div>
  );
};

export default StockAdjustmentFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\StockAdjustmentsPage.jsx"   & echo.. 
/**
 * Stock Adjustments Page
 * Displays and manages stock adjustments
 */

import { useState, useMemo } from "react";
import { useNavigate } from "react-router-dom";
import { Download, Plus, Package } from "lucide-react";
import { ROUTES } from "@/config";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Input } from "@/components/ui/input";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Badge } from "@/components/ui/badge";
import { Skeleton } from "@/components/ui/skeleton";

/**
 * StockAdjustmentsPage component
 */
const StockAdjustmentsPage = () => {
  const navigate = useNavigate();
  const [adjustmentType, setAdjustmentType] = useState("all");
  const [searchQuery, setSearchQuery] = useState("");

  // TODO: Replace with actual API call
  const isLoading = false;
  const adjustments = [];

  return (
    <div className="space-y-6">
      <Card>
        <CardHeader className="flex flex-row items-center justify-between">
          <div>
            <CardTitle>Stock Adjustments</CardTitle>
            <CardDescription>
              Manage stock adjustments for damage, loss, or corrections
            </CardDescription>
          </div>
          <div className="flex gap-2">
            <Button variant="outline" size="sm">
              <Download className="mr-2 h-4 w-4" />
              Export
            </Button>
            <Button onClick={() => navigate(ROUTES.INVENTORY.ADJUSTMENTS.NEW)}>
              <Plus className="mr-2 h-4 w-4" />
              New Adjustment
            </Button>
          </div>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* Filters */}
          <div className="flex items-center gap-4">
            <Input
              placeholder="Search by product..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="max-w-sm"
            />
            <Select value={adjustmentType} onValueChange={setAdjustmentType}>
              <SelectTrigger className="w-[200px]">
                <SelectValue placeholder="Adjustment Type" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">All Types</SelectItem>
                <SelectItem value="DAMAGE">Damage</SelectItem>
                <SelectItem value="LOSS">Loss</SelectItem>
                <SelectItem value="EXPIRY">Expiry</SelectItem>
                <SelectItem value="CORRECTION">Correction</SelectItem>
                <SelectItem value="COUNT">Physical Count</SelectItem>
              </SelectContent>
            </Select>
          </div>

          {/* Table */}
          <div className="rounded-md border">
            <Table>
              <TableHeader>
                <TableRow>
                  <TableHead>Date</TableHead>
                  <TableHead>Product</TableHead>
                  <TableHead>Type</TableHead>
                  <TableHead>Quantity</TableHead>
                  <TableHead>Reason</TableHead>
                  <TableHead>Adjusted By</TableHead>
                  <TableHead>Status</TableHead>
                </TableRow>
              </TableHeader>
              <TableBody>
                {isLoading ? (
                  [...Array(5)].map((_, i) => (
                    <TableRow key={i}>
                      <TableCell>
                        <Skeleton className="h-4 w-24" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-32" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-20" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-16" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-32" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-24" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-20" />
                      </TableCell>
                    </TableRow>
                  ))
                ) : adjustments.length === 0 ? (
                  <TableRow>
                    <TableCell colSpan={7} className="h-24 text-center">
                      <div className="flex flex-col items-center gap-2 text-muted-foreground">
                        <Package className="h-8 w-8" />
                        <p>No stock adjustments found</p>
                      </div>
                    </TableCell>
                  </TableRow>
                ) : (
                  adjustments.map((adjustment) => (
                    <TableRow key={adjustment.id}>
                      <TableCell>{adjustment.date}</TableCell>
                      <TableCell>{adjustment.productName}</TableCell>
                      <TableCell>
                        <Badge variant="outline">{adjustment.type}</Badge>
                      </TableCell>
                      <TableCell
                        className={
                          adjustment.quantity > 0
                            ? "text-green-600"
                            : "text-red-600"
                        }
                      >
                        {adjustment.quantity > 0 ? "+" : ""}
                        {adjustment.quantity}
                      </TableCell>
                      <TableCell>{adjustment.reason}</TableCell>
                      <TableCell>{adjustment.adjustedBy}</TableCell>
                      <TableCell>
                        <Badge
                          variant={
                            adjustment.status === "APPROVED"
                              ? "default"
                              : "secondary"
                          }
                        >
                          {adjustment.status}
                        </Badge>
                      </TableCell>
                    </TableRow>
                  ))
                )}
              </TableBody>
            </Table>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

export default StockAdjustmentsPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\StockMovementsPage.jsx"   & echo.. 
/**
 * Stock Movements Page
 * Displays stock movement history
 */

import { useState, useMemo } from "react";
import { Download, ArrowUpDown } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Input } from "@/components/ui/input";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Badge } from "@/components/ui/badge";
import { Skeleton } from "@/components/ui/skeleton";

/**
 * StockMovementsPage component
 */
const StockMovementsPage = () => {
  const [movementType, setMovementType] = useState("all");
  const [searchQuery, setSearchQuery] = useState("");

  // TODO: Replace with actual API call
  const isLoading = false;
  const movements = [];

  return (
    <div className="space-y-6">
      <Card>
        <CardHeader className="flex flex-row items-center justify-between">
          <div>
            <CardTitle>Stock Movements</CardTitle>
            <CardDescription>
              Track all stock movements including sales, purchases, transfers,
              and adjustments
            </CardDescription>
          </div>
          <Button variant="outline" size="sm">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* Filters */}
          <div className="flex items-center gap-4">
            <Input
              placeholder="Search by product..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="max-w-sm"
            />
            <Select value={movementType} onValueChange={setMovementType}>
              <SelectTrigger className="w-[200px]">
                <SelectValue placeholder="Movement Type" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">All Types</SelectItem>
                <SelectItem value="SALE">Sale</SelectItem>
                <SelectItem value="PURCHASE">Purchase</SelectItem>
                <SelectItem value="TRANSFER_IN">Transfer In</SelectItem>
                <SelectItem value="TRANSFER_OUT">Transfer Out</SelectItem>
                <SelectItem value="ADJUSTMENT">Adjustment</SelectItem>
                <SelectItem value="RETURN">Return</SelectItem>
              </SelectContent>
            </Select>
          </div>

          {/* Table */}
          <div className="rounded-md border">
            <Table>
              <TableHeader>
                <TableRow>
                  <TableHead>Date</TableHead>
                  <TableHead>Product</TableHead>
                  <TableHead>Type</TableHead>
                  <TableHead>Quantity</TableHead>
                  <TableHead>Reference</TableHead>
                  <TableHead>User</TableHead>
                </TableRow>
              </TableHeader>
              <TableBody>
                {isLoading ? (
                  [...Array(5)].map((_, i) => (
                    <TableRow key={i}>
                      <TableCell>
                        <Skeleton className="h-4 w-24" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-32" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-20" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-16" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-24" />
                      </TableCell>
                      <TableCell>
                        <Skeleton className="h-4 w-24" />
                      </TableCell>
                    </TableRow>
                  ))
                ) : movements.length === 0 ? (
                  <TableRow>
                    <TableCell colSpan={6} className="h-24 text-center">
                      <div className="flex flex-col items-center gap-2 text-muted-foreground">
                        <ArrowUpDown className="h-8 w-8" />
                        <p>No stock movements found</p>
                      </div>
                    </TableCell>
                  </TableRow>
                ) : (
                  movements.map((movement) => (
                    <TableRow key={movement.id}>
                      <TableCell>{movement.date}</TableCell>
                      <TableCell>{movement.productName}</TableCell>
                      <TableCell>
                        <Badge variant="outline">{movement.type}</Badge>
                      </TableCell>
                      <TableCell
                        className={
                          movement.quantity > 0
                            ? "text-green-600"
                            : "text-red-600"
                        }
                      >
                        {movement.quantity > 0 ? "+" : ""}
                        {movement.quantity}
                      </TableCell>
                      <TableCell>{movement.reference}</TableCell>
                      <TableCell>{movement.user}</TableCell>
                    </TableRow>
                  ))
                )}
              </TableBody>
            </Table>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

export default StockMovementsPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\StockTransferFormPage.jsx"   & echo.. 
/**
 * Stock Transfer Form Page
 * Create or edit stock transfers
 */

import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useStockTransfer,
  useCreateStockTransfer,
  StockTransferForm,
} from "@/features/inventory";
import { PageHeader } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { Skeleton } from "@/components/ui/skeleton";

/**
 * StockTransferFormPage component
 */
const StockTransferFormPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const isEditing = Boolean(id);

  // Fetch existing transfer if editing
  const { data: transfer, isLoading: isLoadingTransfer } = useStockTransfer(id);

  // Mutation
  const createTransfer = useCreateStockTransfer();

  // Handle form submission
  const handleSubmit = (data) => {
    createTransfer.mutate(data, {
      onSuccess: () => {
        navigate(ROUTES.INVENTORY.TRANSFERS.LIST);
      },
    });
  };

  // Handle cancel
  const handleCancel = () => {
    navigate(ROUTES.INVENTORY.TRANSFERS.LIST);
  };

  // Loading state for edit mode
  if (isEditing && isLoadingTransfer) {
    return (
      <div className="space-y-6">
        <PageHeader
          title="Loading..."
          backButton={{
            label: "Back to Transfers",
            onClick: () => navigate(ROUTES.INVENTORY.TRANSFERS.LIST),
          }}
        />
        <Card>
          <CardContent className="pt-6 space-y-4">
            <Skeleton className="h-10 w-full" />
            <Skeleton className="h-10 w-full" />
            <Skeleton className="h-32 w-full" />
          </CardContent>
        </Card>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title={isEditing ? "Edit Stock Transfer" : "New Stock Transfer"}
        description={
          isEditing
            ? "Update stock transfer details"
            : "Create a new stock transfer between branches"
        }
        actions={
          <Button
            variant="outline"
            onClick={() => navigate(ROUTES.INVENTORY.TRANSFERS.LIST)}
          >
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back to Transfers
          </Button>
        }
      />

      <Card>
        <CardContent className="pt-6">
          <StockTransferForm
            initialData={transfer}
            onSubmit={handleSubmit}
            onCancel={handleCancel}
            isSubmitting={createTransfer.isPending}
          />
        </CardContent>
      </Card>
    </div>
  );
};

export default StockTransferFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\StockTransfersPage.jsx"   & echo.. 
/**
 * Stock Transfers Page
 * Displays and manages stock transfers between branches
 */

import { useState, useMemo, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import { Plus, Download } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useStockTransfers,
  useApproveStockTransfer,
  useRejectStockTransfer,
  useDispatchStockTransfer,
  getStockTransferColumns,
} from "@/features/inventory";
import { DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { useConfirm } from "@/components/common/ConfirmDialog";
import { TRANSFER_STATUS, TRANSFER_STATUS_LABELS } from "@/constants";

/**
 * StockTransfersPage component
 */
const StockTransfersPage = () => {
  const navigate = useNavigate();
  const confirm = useConfirm();

  // Filters state
  const [statusFilter, setStatusFilter] = useState("all");

  // Pagination state
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  // Sorting state
  const [sorting, setSorting] = useState([]);

  // Build query params
  const queryParams = useMemo(
    () => ({
      page: pagination.pageIndex,
      size: pagination.pageSize,
      sort:
        sorting.length > 0
          ? `${sorting[0].id},${sorting[0].desc ? "desc" : "asc"}`
          : "requestedDate,desc",
      ...(statusFilter && statusFilter !== "all" && { status: statusFilter }),
    }),
    [pagination, sorting, statusFilter]
  );

  // Fetch stock transfers
  const { data, isLoading, isFetching } = useStockTransfers(queryParams);

  // Mutations
  const approveTransfer = useApproveStockTransfer();
  const rejectTransfer = useRejectStockTransfer();
  const dispatchTransfer = useDispatchStockTransfer();

  // Handlers
  const handleView = useCallback(
    (transfer) => {
      navigate(ROUTES.INVENTORY.TRANSFERS.VIEW(transfer.id));
    },
    [navigate]
  );

  const handleApprove = useCallback(
    async (transfer) => {
      const confirmed = await confirm({
        title: "Approve Stock Transfer",
        description: `Approve transfer ${transfer.transferNumber}?`,
        confirmText: "Approve",
        cancelText: "Cancel",
      });

      if (confirmed) {
        approveTransfer.mutate(transfer.id);
      }
    },
    [confirm, approveTransfer]
  );

  const handleReject = useCallback(
    async (transfer) => {
      const confirmed = await confirm({
        title: "Reject Stock Transfer",
        description: `Are you sure you want to reject transfer ${transfer.transferNumber}?`,
        confirmText: "Reject",
        cancelText: "Cancel",
        variant: "destructive",
      });

      if (confirmed) {
        rejectTransfer.mutate({ id: transfer.id, reason: "Rejected by user" });
      }
    },
    [confirm, rejectTransfer]
  );

  const handleDispatch = useCallback(
    async (transfer) => {
      const confirmed = await confirm({
        title: "Dispatch Stock Transfer",
        description: `Mark transfer ${transfer.transferNumber} as dispatched?`,
        confirmText: "Dispatch",
        cancelText: "Cancel",
      });

      if (confirmed) {
        dispatchTransfer.mutate(transfer.id);
      }
    },
    [confirm, dispatchTransfer]
  );

  const handleReceive = useCallback(
    (transfer) => {
      navigate(ROUTES.INVENTORY.TRANSFERS.RECEIVE(transfer.id));
    },
    [navigate]
  );

  // Get columns
  const columns = useMemo(
    () =>
      getStockTransferColumns({
        onView: handleView,
        onApprove: handleApprove,
        onReject: handleReject,
        onDispatch: handleDispatch,
        onReceive: handleReceive,
      }),
    [handleView, handleApprove, handleReject, handleDispatch, handleReceive]
  );

  return (
    <div className="space-y-6">
      <Card>
        <CardHeader className="flex flex-row items-center justify-between">
          <div>
            <CardTitle>Stock Transfers</CardTitle>
            <CardDescription>
              Manage stock transfers between branches
            </CardDescription>
          </div>
          <div className="flex gap-2">
            <Button variant="outline" size="sm">
              <Download className="mr-2 h-4 w-4" />
              Export
            </Button>
            <Button onClick={() => navigate(ROUTES.INVENTORY.TRANSFERS.NEW)}>
              <Plus className="mr-2 h-4 w-4" />
              New Transfer
            </Button>
          </div>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* Filters */}
          <div className="flex items-center gap-4">
            <Select value={statusFilter} onValueChange={setStatusFilter}>
              <SelectTrigger className="w-[200px]">
                <SelectValue placeholder="Filter by status" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">All Statuses</SelectItem>
                {Object.entries(TRANSFER_STATUS_LABELS).map(
                  ([value, label]) => (
                    <SelectItem key={value} value={value}>
                      {label}
                    </SelectItem>
                  )
                )}
              </SelectContent>
            </Select>
          </div>

          {/* Data Table */}
          <DataTable
            columns={columns}
            data={data?.content || []}
            isLoading={isLoading}
            isFetching={isFetching}
            pagination={{
              pageIndex: pagination.pageIndex,
              pageSize: pagination.pageSize,
              pageCount: data?.totalPages || 0,
              total: data?.totalElements || 0,
            }}
            onPaginationChange={setPagination}
            sorting={sorting}
            onSortingChange={setSorting}
          />
        </CardContent>
      </Card>
    </div>
  );
};

export default StockTransfersPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\inventory\components\DirectStockForm.jsx"   & echo.. 
/**
 * Direct Stock Form Component
 * Add stock directly to inventory without GRN process
 */

import { useForm, useFieldArray, useWatch } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { Plus, Trash2, Package } from "lucide-react";

import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { ButtonSpinner } from "@/components/common";
import { useCreateGRN } from "@/features/grn";
import { useActiveSuppliers } from "@/features/suppliers";
import { useProducts } from "@/features/products";
import { useBranch } from "@/hooks";
import { toast } from "sonner";
import { formatCurrency } from "@/utils/formatters";

// Validation schema
const grnItemSchema = z.object({
  productId: z.string().min(1, "Product is required"),
  batchNumber: z.string().min(1, "Batch number is required"),
  quantity: z.number().min(1, "Quantity must be at least 1"),
  costPrice: z.number().min(0.01, "Cost price is required"),
  sellingPrice: z.number().min(0.01, "Selling price is required"),
  manufacturingDate: z.string().optional(),
  expiryDate: z.string().min(1, "Expiry date is required"),
  discountAmount: z.number().min(0).default(0),
});

const directGRNSchema = z.object({
  supplierId: z.string().min(1, "Supplier is required"),
  branchId: z.number().min(1, "Branch is required"),
  receivedDate: z.string().min(1, "Received date is required"),
  supplierInvoiceNumber: z.string().optional(),
  supplierInvoiceDate: z.string().optional(),
  remarks: z.string().max(1000).optional(),
  items: z.array(grnItemSchema).min(1, "At least one item is required"),
});

const DirectStockForm = ({ onSuccess }) => {
  const { selectedBranch } = useBranch();

  // Queries
  const { data: suppliers, isLoading: isLoadingSuppliers } = useActiveSuppliers();
  const { data: productsData, isLoading: isLoadingProducts } = useProducts({
    size: 1000,
  });
  const createMutation = useCreateGRN();

  const products = productsData?.content || [];

  const form = useForm({
    resolver: zodResolver(directGRNSchema),
    defaultValues: {
      supplierId: "",
      branchId: selectedBranch?.id || 0,
      receivedDate: new Date().toISOString().split("T")[0],
      supplierInvoiceNumber: "",
      supplierInvoiceDate: "",
      remarks: "",
      items: [
        {
          productId: "",
          batchNumber: "",
          quantity: 1,
          costPrice: 0,
          sellingPrice: 0,
          manufacturingDate: "",
          expiryDate: "",
          discountAmount: 0,
        },
      ],
    },
  });

  const { fields, append, remove } = useFieldArray({
    control: form.control,
    name: "items",
  });

  const items = useWatch({ control: form.control, name: "items" });

  // Calculate totals
  const calculateItemTotal = (item) => {
    const quantity = Number(item.quantity) || 0;
    const costPrice = Number(item.costPrice) || 0;
    const discount = Number(item.discountAmount) || 0;
    return quantity * costPrice - discount;
  };

  const subtotal = items.reduce(
    (sum, item) => sum + calculateItemTotal(item),
    0
  );
  const totalDiscount = items.reduce(
    (sum, item) => sum + (Number(item.discountAmount) || 0),
    0
  );
  const grandTotal = subtotal;

  const onSubmit = async (data) => {
    try {
      // Transform items - remove empty fields and convert to numbers
      const transformedData = {
        ...data,
        items: data.items.map((item) => ({
          productId: parseInt(item.productId),
          batchNumber: item.batchNumber,
          quantity: Number(item.quantity),
          costPrice: Number(item.costPrice),
          sellingPrice: Number(item.sellingPrice),
          manufacturingDate: item.manufacturingDate || null,
          expiryDate: item.expiryDate,
          discountAmount: Number(item.discountAmount) || 0,
        })),
        supplierId: parseInt(data.supplierId),
      };

      await createMutation.mutateAsync(transformedData);
      toast.success("Stock added successfully to inventory");
      form.reset();
      onSuccess?.();
    } catch (error) {
      console.error("Failed to add stock:", error);
      toast.error(
        error.response?.data?.message || "Failed to add stock to inventory"
      );
    }
  };

  const addItem = () => {
    append({
      productId: "",
      batchNumber: "",
      quantity: 1,
      costPrice: 0,
      sellingPrice: 0,
      manufacturingDate: "",
      expiryDate: "",
      discountAmount: 0,
    });
  };

  if (isLoadingSuppliers || isLoadingProducts) {
    return (
      <div className="flex items-center justify-center p-8">
        <ButtonSpinner />
        <span className="ml-2">Loading...</span>
      </div>
    );
  }

  if (!selectedBranch) {
    return (
      <div className="p-4 text-center text-muted-foreground">
        Please select a branch first
      </div>
    );
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4 sm:space-y-6">
        {/* Header Information */}
        <div className="grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2">
          <FormField
            control={form.control}
            name="supplierId"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Supplier *</FormLabel>
                <Select
                  onValueChange={field.onChange}
                  defaultValue={field.value}
                >
                  <FormControl>
                    <SelectTrigger>
                      <SelectValue placeholder="Select supplier" />
                    </SelectTrigger>
                  </FormControl>
                  <SelectContent>
                    {suppliers?.map((supplier) => (
                      <SelectItem
                        key={supplier.id}
                        value={supplier.id.toString()}
                      >
                        {supplier.supplierName}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
                <FormMessage />
              </FormItem>
            )}
          />

          <FormField
            control={form.control}
            name="receivedDate"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Received Date *</FormLabel>
                <FormControl>
                  <Input type="date" {...field} />
                </FormControl>
                <FormMessage />
              </FormItem>
            )}
          />

          <FormField
            control={form.control}
            name="supplierInvoiceNumber"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Supplier Invoice Number</FormLabel>
                <FormControl>
                  <Input placeholder="INV-12345" {...field} />
                </FormControl>
                <FormMessage />
              </FormItem>
            )}
          />

          <FormField
            control={form.control}
            name="supplierInvoiceDate"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Supplier Invoice Date</FormLabel>
                <FormControl>
                  <Input type="date" {...field} />
                </FormControl>
                <FormMessage />
              </FormItem>
            )}
          />
        </div>

        {/* Items Table */}
        <div className="space-y-3 sm:space-y-4">
          <div className="flex items-center justify-between">
            <h3 className="text-base sm:text-lg font-medium">Items</h3>
            <Button type="button" size="sm" onClick={addItem}>
              <Plus className="mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4" />
              <span className="hidden sm:inline">Add Item</span>
              <span className="sm:hidden">Add</span>
            </Button>
          </div>

          <div className="border rounded-lg overflow-x-auto shadow-sm">
            <Table>
              <TableHeader>
                <TableRow className="bg-muted/50">
                  <TableHead className="min-w-[200px] text-xs sm:text-sm font-semibold">Product *</TableHead>
                  <TableHead className="min-w-[150px] text-xs sm:text-sm font-semibold">Batch Number *</TableHead>
                  <TableHead className="w-[100px] text-xs sm:text-sm font-semibold">Qty *</TableHead>
                  <TableHead className="w-[120px] text-xs sm:text-sm font-semibold">Cost Price *</TableHead>
                  <TableHead className="w-[120px] text-xs sm:text-sm font-semibold">Sell Price *</TableHead>
                  <TableHead className="min-w-[150px] text-xs sm:text-sm font-semibold">MFG Date</TableHead>
                  <TableHead className="min-w-[150px] text-xs sm:text-sm font-semibold">Expiry Date *</TableHead>
                  <TableHead className="w-[100px] text-xs sm:text-sm font-semibold">Discount</TableHead>
                  <TableHead className="w-[120px] text-xs sm:text-sm font-semibold">Total</TableHead>
                  <TableHead className="w-[80px]"></TableHead>
                </TableRow>
              </TableHeader>
              <TableBody>
                {fields.map((field, index) => (
                  <TableRow key={field.id}>
                    <TableCell>
                      <FormField
                        control={form.control}
                        name={`items.${index}.productId`}
                        render={({ field }) => (
                          <FormItem>
                            <Select
                              onValueChange={field.onChange}
                              defaultValue={field.value}
                            >
                              <FormControl>
                                <SelectTrigger>
                                  <SelectValue placeholder="Select" />
                                </SelectTrigger>
                              </FormControl>
                              <SelectContent>
                                {products.map((product) => (
                                  <SelectItem
                                    key={product.id}
                                    value={product.id.toString()}
                                  >
                                    {product.productName}
                                  </SelectItem>
                                ))}
                              </SelectContent>
                            </Select>
                            <FormMessage />
                          </FormItem>
                        )}
                      />
                    </TableCell>
                    <TableCell>
                      <FormField
                        control={form.control}
                        name={`items.${index}.batchNumber`}
                        render={({ field }) => (
                          <FormItem>
                            <FormControl>
                              <Input placeholder="BATCH-001" className="h-9 text-sm" {...field} />
                            </FormControl>
                            <FormMessage />
                          </FormItem>
                        )}
                      />
                    </TableCell>
                    <TableCell>
                      <FormField
                        control={form.control}
                        name={`items.${index}.quantity`}
                        render={({ field }) => (
                          <FormItem>
                            <FormControl>
                              <Input
                                type="number"
                                min="1"
                                className="h-9 text-sm"
                                {...field}
                                onChange={(e) =>
                                  field.onChange(Number(e.target.value))
                                }
                              />
                            </FormControl>
                            <FormMessage />
                          </FormItem>
                        )}
                      />
                    </TableCell>
                    <TableCell>
                      <FormField
                        control={form.control}
                        name={`items.${index}.costPrice`}
                        render={({ field }) => (
                          <FormItem>
                            <FormControl>
                              <Input
                                type="number"
                                step="0.01"
                                min="0"
                                className="h-9 text-sm"
                                {...field}
                                onChange={(e) =>
                                  field.onChange(Number(e.target.value))
                                }
                              />
                            </FormControl>
                            <FormMessage />
                          </FormItem>
                        )}
                      />
                    </TableCell>
                    <TableCell>
                      <FormField
                        control={form.control}
                        name={`items.${index}.sellingPrice`}
                        render={({ field }) => (
                          <FormItem>
                            <FormControl>
                              <Input
                                type="number"
                                step="0.01"
                                min="0"
                                className="h-9 text-sm"
                                {...field}
                                onChange={(e) =>
                                  field.onChange(Number(e.target.value))
                                }
                              />
                            </FormControl>
                            <FormMessage />
                          </FormItem>
                        )}
                      />
                    </TableCell>
                    <TableCell>
                      <FormField
                        control={form.control}
                        name={`items.${index}.manufacturingDate`}
                        render={({ field }) => (
                          <FormItem>
                            <FormControl>
                              <Input type="date" className="h-9 text-sm" {...field} />
                            </FormControl>
                            <FormMessage />
                          </FormItem>
                        )}
                      />
                    </TableCell>
                    <TableCell>
                      <FormField
                        control={form.control}
                        name={`items.${index}.expiryDate`}
                        render={({ field }) => (
                          <FormItem>
                            <FormControl>
                              <Input type="date" className="h-9 text-sm" {...field} />
                            </FormControl>
                            <FormMessage />
                          </FormItem>
                        )}
                      />
                    </TableCell>
                    <TableCell>
                      <FormField
                        control={form.control}
                        name={`items.${index}.discountAmount`}
                        render={({ field }) => (
                          <FormItem>
                            <FormControl>
                              <Input
                                type="number"
                                step="0.01"
                                min="0"
                                className="h-9 text-sm"
                                {...field}
                                onChange={(e) =>
                                  field.onChange(Number(e.target.value))
                                }
                              />
                            </FormControl>
                            <FormMessage />
                          </FormItem>
                        )}
                      />
                    </TableCell>
                    <TableCell className="text-right">
                      <span className="text-sm font-semibold text-primary">
                        {formatCurrency(calculateItemTotal(items[index]))}
                      </span>
                    </TableCell>
                    <TableCell>
                      {fields.length > 1 && (
                        <Button
                          type="button"
                          variant="ghost"
                          size="icon"
                          className="h-9 w-9 text-destructive hover:text-destructive hover:bg-destructive/10"
                          onClick={() => remove(index)}
                        >
                          <Trash2 className="h-4 w-4" />
                        </Button>
                      )}
                    </TableCell>
                  </TableRow>
                ))}
              </TableBody>
            </Table>
          </div>
        </div>

        {/* Totals */}
        <div className="flex justify-end">
          <div className="w-full sm:max-w-sm space-y-2 bg-muted/30 p-4 rounded-lg border">
            <div className="flex justify-between text-xs sm:text-sm">
              <span className="text-muted-foreground">Subtotal:</span>
              <span className="font-medium">{formatCurrency(subtotal)}</span>
            </div>
            <div className="flex justify-between text-xs sm:text-sm">
              <span className="text-muted-foreground">Total Discount:</span>
              <span className="font-medium text-red-600">
                -{formatCurrency(totalDiscount)}
              </span>
            </div>
            <div className="flex justify-between text-base sm:text-lg font-bold border-t pt-2 mt-2">
              <span>Grand Total:</span>
              <span className="text-primary">{formatCurrency(grandTotal)}</span>
            </div>
          </div>
        </div>

        {/* Remarks */}
        <FormField
          control={form.control}
          name="remarks"
          render={({ field }) => (
            <FormItem>
              <FormLabel className="text-sm sm:text-base">Remarks</FormLabel>
              <FormControl>
                <Textarea
                  placeholder="Additional notes or comments..."
                  className="min-h-[80px] sm:min-h-[100px] resize-none"
                  {...field}
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />

        {/* Submit Button */}
        <div className="flex justify-end pt-2 border-t">
          <Button
            type="submit"
            disabled={createMutation.isPending}
            size="lg"
            className="w-full sm:w-auto"
          >
            {createMutation.isPending ? (
              <>
                <ButtonSpinner />
                <span className="ml-2">Processing...</span>
              </>
            ) : (
              <>
                <Package className="mr-2 h-4 w-4" />
                <span className="hidden sm:inline">Add Stock to Inventory</span>
                <span className="sm:hidden">Add to Inventory</span>
              </>
            )}
          </Button>
        </div>
      </form>
    </Form>
  );
};

export default DirectStockForm;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\payroll\AdvanceFormDialog.jsx"   & echo.. 
/**
 * Advance Form Dialog
 * Form for creating salary advances
 */

import { useForm } from "react-hook-form";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";

const AdvanceFormDialog = ({ open, onOpenChange, onSubmit }) => {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm({
    defaultValues: {
      date: new Date().toISOString().split("T")[0],
      employeeName: "",
      amount: "",
      reason: "",
    },
  });

  const handleFormSubmit = async (data) => {
    try {
      await onSubmit(data);
      onOpenChange(false);
    } catch (error) {
      console.error("Failed to create advance:", error);
    }
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-[500px]">
        <DialogHeader>
          <DialogTitle>New Salary Advance</DialogTitle>
          <DialogDescription>
            Record a salary advance for an employee
          </DialogDescription>
        </DialogHeader>

        <form onSubmit={handleSubmit(handleFormSubmit)} className="space-y-4">
          <div className="space-y-2">
            <Label htmlFor="date">Date *</Label>
            <Input
              id="date"
              type="date"
              {...register("date", { required: "Date is required" })}
            />
            {errors.date && (
              <p className="text-sm text-destructive">{errors.date.message}</p>
            )}
          </div>

          <div className="space-y-2">
            <Label htmlFor="employeeName">Employee Name *</Label>
            <Input
              id="employeeName"
              placeholder="Enter employee name"
              {...register("employeeName", {
                required: "Employee name is required",
              })}
            />
            {errors.employeeName && (
              <p className="text-sm text-destructive">
                {errors.employeeName.message}
              </p>
            )}
          </div>

          <div className="space-y-2">
            <Label htmlFor="amount">Advance Amount *</Label>
            <Input
              id="amount"
              type="number"
              step="0.01"
              placeholder="0.00"
              {...register("amount", {
                required: "Amount is required",
                min: { value: 0.01, message: "Amount must be greater than 0" },
              })}
            />
            {errors.amount && (
              <p className="text-sm text-destructive">
                {errors.amount.message}
              </p>
            )}
          </div>

          <div className="space-y-2">
            <Label htmlFor="reason">Reason *</Label>
            <Textarea
              id="reason"
              placeholder="Enter reason for advance"
              rows={3}
              {...register("reason", { required: "Reason is required" })}
            />
            {errors.reason && (
              <p className="text-sm text-destructive">
                {errors.reason.message}
              </p>
            )}
          </div>

          <DialogFooter>
            <Button
              type="button"
              variant="outline"
              onClick={() => onOpenChange(false)}
              disabled={isSubmitting}
            >
              Cancel
            </Button>
            <Button type="submit" disabled={isSubmitting}>
              {isSubmitting ? "Creating..." : "Create Advance"}
            </Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </Dialog>
  );
};

export default AdvanceFormDialog;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\payroll\AdvancesPage.jsx"   & echo.. 
/**
 * Advances Page
 * Manage salary advances and loans
 */

import { useState, useMemo, useCallback } from "react";
import { Plus, Download } from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatCurrency, formatDate } from "@/utils/formatters";
import AdvanceFormDialog from "./AdvanceFormDialog";
import { toast } from "sonner";

const AdvancesPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");
  const [isFormOpen, setIsFormOpen] = useState(false);
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "employeeName",
        header: "Employee",
        cell: ({ row }) => (
          <div>
            <div className="font-medium">{row.getValue("employeeName")}</div>
            <div className="text-xs text-muted-foreground">
              {row.original.employeeCode}
            </div>
          </div>
        ),
      },
      {
        accessorKey: "date",
        header: "Date",
        cell: ({ row }) => formatDate(row.getValue("date")),
      },
      {
        accessorKey: "amount",
        header: "Amount",
        cell: ({ row }) => (
          <span className="font-semibold">
            {formatCurrency(row.getValue("amount"))}
          </span>
        ),
      },
      {
        accessorKey: "repaidAmount",
        header: "Repaid",
        meta: { className: "hidden md:table-cell" },
        cell: ({ row }) => formatCurrency(row.getValue("repaidAmount") || 0),
      },
      {
        accessorKey: "balance",
        header: "Balance",
        cell: ({ row }) => (
          <span className="text-orange-600 font-medium">
            {formatCurrency(row.getValue("balance") || 0)}
          </span>
        ),
      },
      {
        accessorKey: "status",
        header: "Status",
        cell: ({ row }) => {
          const status = row.getValue("status");
          const variant =
            status === "PAID"
              ? "success"
              : status === "PENDING"
              ? "warning"
              : "default";
          return <Badge variant={variant}>{status}</Badge>;
        },
      },
      {
        accessorKey: "reason",
        header: "Reason",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => row.getValue("reason") || "-",
      },
    ],
    []
  );

  const stats = {
    totalAdvances: 0,
    totalAmount: 0,
    repaidAmount: 0,
    pendingAmount: 0,
  };

  const handleCreateAdvance = useCallback(async (data) => {
    try {
      console.log("Creating advance:", data);

      toast.success("Advance Created", {
        description: "Salary advance has been recorded successfully.",
      });
    } catch (error) {
      toast.error("Error", {
        description: "Failed to create advance. Please try again.",
      });
    }
  }, []);

  return (
    <div className="space-y-6">
      <PageHeader
        title="Salary Advances"
        description="Manage employee salary advances and loans"
      >
        <div className="flex gap-2">
          <Button onClick={() => setIsFormOpen(true)}>
            <Plus className="mr-2 h-4 w-4" />
            New Advance
          </Button>
          <Button variant="outline">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      </PageHeader>

      <AdvanceFormDialog
        open={isFormOpen}
        onOpenChange={setIsFormOpen}
        onSubmit={handleCreateAdvance}
      />

      {/* Statistics */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Total Advances
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.totalAdvances}</div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Total Amount</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {formatCurrency(stats.totalAmount)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Repaid</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {formatCurrency(stats.repaidAmount)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Pending</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-orange-600">
              {formatCurrency(stats.pendingAmount)}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search by employee name..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="w-full sm:w-[180px]">
            <SelectValue placeholder="Filter by status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="PENDING">Pending</SelectItem>
            <SelectItem value="PARTIAL">Partial</SelectItem>
            <SelectItem value="PAID">Paid</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        emptyMessage="No salary advances found."
      />
    </div>
  );
};

export default AdvancesPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\payroll\AttendanceFormDialog.jsx"   & echo.. 
/**
 * Attendance Form Dialog
 * Form for marking employee attendance
 */

import { useForm } from "react-hook-form";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";

const AttendanceFormDialog = ({ open, onOpenChange, onSubmit }) => {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    setValue,
  } = useForm({
    defaultValues: {
      date: new Date().toISOString().split("T")[0],
      employeeName: "",
      checkIn: "",
      checkOut: "",
      status: "PRESENT",
      notes: "",
    },
  });

  const handleFormSubmit = async (data) => {
    try {
      await onSubmit(data);
      onOpenChange(false);
    } catch (error) {
      console.error("Failed to mark attendance:", error);
    }
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-[500px]">
        <DialogHeader>
          <DialogTitle>Mark Attendance</DialogTitle>
          <DialogDescription>
            Record employee attendance for the day
          </DialogDescription>
        </DialogHeader>

        <form onSubmit={handleSubmit(handleFormSubmit)} className="space-y-4">
          <div className="space-y-2">
            <Label htmlFor="date">Date *</Label>
            <Input
              id="date"
              type="date"
              {...register("date", { required: "Date is required" })}
            />
            {errors.date && (
              <p className="text-sm text-destructive">{errors.date.message}</p>
            )}
          </div>

          <div className="space-y-2">
            <Label htmlFor="employeeName">Employee Name *</Label>
            <Input
              id="employeeName"
              placeholder="Enter employee name"
              {...register("employeeName", {
                required: "Employee name is required",
              })}
            />
            {errors.employeeName && (
              <p className="text-sm text-destructive">
                {errors.employeeName.message}
              </p>
            )}
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div className="space-y-2">
              <Label htmlFor="checkIn">Check In</Label>
              <Input id="checkIn" type="time" {...register("checkIn")} />
            </div>

            <div className="space-y-2">
              <Label htmlFor="checkOut">Check Out</Label>
              <Input id="checkOut" type="time" {...register("checkOut")} />
            </div>
          </div>

          <div className="space-y-2">
            <Label htmlFor="status">Status *</Label>
            <Select
              defaultValue="PRESENT"
              onValueChange={(value) => setValue("status", value)}
            >
              <SelectTrigger>
                <SelectValue placeholder="Select status" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="PRESENT">Present</SelectItem>
                <SelectItem value="ABSENT">Absent</SelectItem>
                <SelectItem value="LATE">Late</SelectItem>
                <SelectItem value="HALF_DAY">Half Day</SelectItem>
                <SelectItem value="ON_LEAVE">On Leave</SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="space-y-2">
            <Label htmlFor="notes">Notes</Label>
            <Textarea
              id="notes"
              placeholder="Additional notes"
              rows={2}
              {...register("notes")}
            />
          </div>

          <DialogFooter>
            <Button
              type="button"
              variant="outline"
              onClick={() => onOpenChange(false)}
              disabled={isSubmitting}
            >
              Cancel
            </Button>
            <Button type="submit" disabled={isSubmitting}>
              {isSubmitting ? "Saving..." : "Mark Attendance"}
            </Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </Dialog>
  );
};

export default AttendanceFormDialog;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\payroll\AttendancePage.jsx"   & echo.. 
/**
 * Attendance Page
 * Track employee attendance records
 */

import { useState, useMemo, useCallback } from "react";
import { Download, Calendar } from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatDate } from "@/utils/formatters";
import AttendanceFormDialog from "./AttendanceFormDialog";
import { toast } from "sonner";

const AttendancePage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [isFormOpen, setIsFormOpen] = useState(false);
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "employeeName",
        header: "Employee",
        cell: ({ row }) => (
          <div>
            <div className="font-medium">{row.getValue("employeeName")}</div>
            <div className="text-xs text-muted-foreground">
              {row.original.employeeCode}
            </div>
          </div>
        ),
      },
      {
        accessorKey: "date",
        header: "Date",
        cell: ({ row }) => formatDate(row.getValue("date")),
      },
      {
        accessorKey: "checkIn",
        header: "Check In",
        meta: { className: "hidden md:table-cell" },
        cell: ({ row }) => row.getValue("checkIn") || "-",
      },
      {
        accessorKey: "checkOut",
        header: "Check Out",
        meta: { className: "hidden md:table-cell" },
        cell: ({ row }) => row.getValue("checkOut") || "-",
      },
      {
        accessorKey: "workHours",
        header: "Work Hours",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => {
          const hours = row.getValue("workHours");
          return hours ? `${hours}h` : "-";
        },
      },
      {
        accessorKey: "status",
        header: "Status",
        cell: ({ row }) => {
          const status = row.getValue("status");
          const variant =
            status === "PRESENT"
              ? "success"
              : status === "ABSENT"
              ? "destructive"
              : status === "LATE"
              ? "warning"
              : "default";
          return <Badge variant={variant}>{status}</Badge>;
        },
      },
    ],
    []
  );

  const stats = {
    totalEmployees: 0,
    presentToday: 0,
    absentToday: 0,
    lateToday: 0,
  };

  const handleMarkAttendance = useCallback(async (data) => {
    try {
      console.log("Marking attendance:", data);

      toast.success("Attendance Marked", {
        description: "Employee attendance has been recorded successfully.",
      });
    } catch (error) {
      toast.error("Error", {
        description: "Failed to mark attendance. Please try again.",
      });
    }
  }, []);

  return (
    <div className="space-y-6">
      <PageHeader
        title="Employee Attendance"
        description="Track daily attendance records"
      >
        <div className="flex gap-2">
          <Button variant="outline" onClick={() => setIsFormOpen(true)}>
            <Calendar className="mr-2 h-4 w-4" />
            Mark Attendance
          </Button>
          <Button variant="outline">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      </PageHeader>

      <AttendanceFormDialog
        open={isFormOpen}
        onOpenChange={setIsFormOpen}
        onSubmit={handleMarkAttendance}
      />

      {/* Statistics */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Total Employees
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.totalEmployees}</div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Present Today</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {stats.presentToday}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Absent Today</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-red-600">
              {stats.absentToday}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Late Today</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-orange-600">
              {stats.lateToday}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Search */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search by employee name..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        emptyMessage="No attendance records found."
      />
    </div>
  );
};

export default AttendancePage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\payroll\PayrollPage.jsx"   & echo.. 
/**
 * Payroll Overview Page
 * Hub for payroll management features
 */

import { useNavigate } from "react-router-dom";
import {
  DollarSign,
  Users,
  Calendar,
  CreditCard,
  FileText,
} from "lucide-react";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { PageHeader } from "@/components/common";
import { ROUTES } from "@/config";

const payrollFeatures = [
  {
    title: "Salaries",
    description: "Manage employee salaries and payments",
    icon: DollarSign,
    href: ROUTES.PAYROLL.SALARIES,
    color: "text-green-600",
    bgColor: "bg-green-100 dark:bg-green-900/30",
  },
  {
    title: "Attendance",
    description: "Track employee attendance records",
    icon: Calendar,
    href: ROUTES.PAYROLL.ATTENDANCE,
    color: "text-blue-600",
    bgColor: "bg-blue-100 dark:bg-blue-900/30",
  },
  {
    title: "Advances",
    description: "Manage salary advances and loans",
    icon: CreditCard,
    href: ROUTES.PAYROLL.ADVANCES,
    color: "text-orange-600",
    bgColor: "bg-orange-100 dark:bg-orange-900/30",
  },
];

const PayrollPage = () => {
  const navigate = useNavigate();

  return (
    <div className="container mx-auto py-6 space-y-6">
      <PageHeader
        title="Payroll Management"
        description="Manage employee salaries, attendance, and advances"
      />

      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
        {payrollFeatures.map((feature) => {
          const Icon = feature.icon;
          return (
            <Card
              key={feature.title}
              className="cursor-pointer hover:shadow-lg transition-shadow"
              onClick={() => navigate(feature.href)}
            >
              <CardHeader>
                <div className="flex items-center gap-4">
                  <div className={`p-3 rounded-lg ${feature.bgColor}`}>
                    <Icon className={`h-6 w-6 ${feature.color}`} />
                  </div>
                  <div>
                    <CardTitle className="text-lg">{feature.title}</CardTitle>
                    <CardDescription>{feature.description}</CardDescription>
                  </div>
                </div>
              </CardHeader>
            </Card>
          );
        })}
      </div>

      {/* Quick Stats */}
      <div className="grid gap-4 md:grid-cols-4 mt-8">
        <Card>
          <CardContent className="p-6">
            <p className="text-sm text-muted-foreground">Total Employees</p>
            <p className="text-2xl font-bold">0</p>
            <p className="text-xs text-muted-foreground mt-1">Loading...</p>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-6">
            <p className="text-sm text-muted-foreground">This Month Salary</p>
            <p className="text-2xl font-bold">Rs. 0.00</p>
            <p className="text-xs text-muted-foreground mt-1">Loading...</p>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-6">
            <p className="text-sm text-muted-foreground">Pending Advances</p>
            <p className="text-2xl font-bold">Rs. 0.00</p>
            <p className="text-xs text-muted-foreground mt-1">Loading...</p>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-6">
            <p className="text-sm text-muted-foreground">Present Today</p>
            <p className="text-2xl font-bold">0 / 0</p>
            <p className="text-xs text-muted-foreground mt-1">Loading...</p>
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default PayrollPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\payroll\SalariesPage.jsx"   & echo.. 
/**
 * Salaries Page
 * Manage employee salary payments
 */

import { useState, useMemo, useCallback } from "react";
import { Plus, Download } from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatCurrency, formatDate } from "@/utils/formatters";
import SalaryPaymentDialog from "./SalaryPaymentDialog";
import { toast } from "sonner";

const SalariesPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");
  const [isFormOpen, setIsFormOpen] = useState(false);
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });
  const [sorting, setSorting] = useState([{ id: "date", desc: true }]);

  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "employeeName",
        header: "Employee",
        cell: ({ row }) => (
          <div>
            <div className="font-medium">{row.getValue("employeeName")}</div>
            <div className="text-xs text-muted-foreground">
              {row.original.employeeCode}
            </div>
          </div>
        ),
      },
      {
        accessorKey: "month",
        header: "Month",
        meta: { className: "hidden md:table-cell" },
      },
      {
        accessorKey: "basicSalary",
        header: "Basic Salary",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => formatCurrency(row.getValue("basicSalary") || 0),
      },
      {
        accessorKey: "allowances",
        header: "Allowances",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => formatCurrency(row.getValue("allowances") || 0),
      },
      {
        accessorKey: "deductions",
        header: "Deductions",
        meta: { className: "hidden xl:table-cell" },
        cell: ({ row }) => (
          <span className="text-red-600">
            {formatCurrency(row.getValue("deductions") || 0)}
          </span>
        ),
      },
      {
        accessorKey: "netSalary",
        header: "Net Salary",
        cell: ({ row }) => (
          <span className="font-semibold text-lg">
            {formatCurrency(row.getValue("netSalary") || 0)}
          </span>
        ),
      },
      {
        accessorKey: "status",
        header: "Status",
        cell: ({ row }) => {
          const status = row.getValue("status");
          const variant =
            status === "PAID"
              ? "success"
              : status === "PENDING"
              ? "warning"
              : "default";
          return <Badge variant={variant}>{status}</Badge>;
        },
      },
    ],
    []
  );

  const stats = {
    totalSalaries: 0,
    paidAmount: 0,
    pendingAmount: 0,
    employeeCount: 0,
  };

  const handlePaySalary = useCallback(async (data) => {
    try {
      console.log("Processing salary payment:", data);

      toast.success("Salary Paid", {
        description: "Salary payment has been recorded successfully.",
      });
    } catch (error) {
      toast.error("Error", {
        description: "Failed to process salary payment. Please try again.",
      });
    }
  }, []);

  return (
    <div className="space-y-6">
      <PageHeader
        title="Employee Salaries"
        description="Manage monthly salary payments"
      >
        <div className="flex gap-2">
          <Button onClick={() => setIsFormOpen(true)}>
            <Plus className="mr-2 h-4 w-4" />
            Pay Salary
          </Button>
          <Button variant="outline">
            <Download className="mr-2 h-4 w-4" />
            Export
          </Button>
        </div>
      </PageHeader>

      <SalaryPaymentDialog
        open={isFormOpen}
        onOpenChange={setIsFormOpen}
        onSubmit={handlePaySalary}
      />

      {/* Statistics */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Total Salaries
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">
              {formatCurrency(stats.totalSalaries)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Paid</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {formatCurrency(stats.paidAmount)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Pending</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-orange-600">
              {formatCurrency(stats.pendingAmount)}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Employees</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.employeeCount}</div>
          </CardContent>
        </Card>
      </div>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search by employee name..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="w-full sm:w-[180px]">
            <SelectValue placeholder="Filter by status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="PAID">Paid</SelectItem>
            <SelectItem value="PENDING">Pending</SelectItem>
            <SelectItem value="PROCESSING">Processing</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        sorting={sorting}
        onSortingChange={setSorting}
        emptyMessage="No salary records found."
      />
    </div>
  );
};

export default SalariesPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\payroll\SalaryPaymentDialog.jsx"   & echo.. 
/**
 * Salary Payment Dialog
 * Form for processing salary payments
 */

import { useForm } from "react-hook-form";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { PAYMENT_METHOD } from "@/constants";

const SalaryPaymentDialog = ({ open, onOpenChange, onSubmit }) => {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    setValue,
  } = useForm({
    defaultValues: {
      month: new Date().toISOString().slice(0, 7),
      employeeName: "",
      basicSalary: "",
      allowances: 0,
      deductions: 0,
      paymentMethod: "BANK_TRANSFER",
      notes: "",
    },
  });

  const handleFormSubmit = async (data) => {
    try {
      await onSubmit(data);
      onOpenChange(false);
    } catch (error) {
      console.error("Failed to process salary:", error);
    }
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-[600px]">
        <DialogHeader>
          <DialogTitle>Process Salary Payment</DialogTitle>
          <DialogDescription>
            Record salary payment for an employee
          </DialogDescription>
        </DialogHeader>

        <form onSubmit={handleSubmit(handleFormSubmit)} className="space-y-4">
          <div className="grid grid-cols-2 gap-4">
            <div className="space-y-2">
              <Label htmlFor="month">Month *</Label>
              <Input
                id="month"
                type="month"
                {...register("month", { required: "Month is required" })}
              />
              {errors.month && (
                <p className="text-sm text-destructive">
                  {errors.month.message}
                </p>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="employeeName">Employee *</Label>
              <Input
                id="employeeName"
                placeholder="Employee name"
                {...register("employeeName", {
                  required: "Employee name is required",
                })}
              />
              {errors.employeeName && (
                <p className="text-sm text-destructive">
                  {errors.employeeName.message}
                </p>
              )}
            </div>
          </div>

          <div className="grid grid-cols-3 gap-4">
            <div className="space-y-2">
              <Label htmlFor="basicSalary">Basic Salary *</Label>
              <Input
                id="basicSalary"
                type="number"
                step="0.01"
                placeholder="0.00"
                {...register("basicSalary", {
                  required: "Basic salary is required",
                  min: { value: 0, message: "Must be positive" },
                })}
              />
              {errors.basicSalary && (
                <p className="text-sm text-destructive">
                  {errors.basicSalary.message}
                </p>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="allowances">Allowances</Label>
              <Input
                id="allowances"
                type="number"
                step="0.01"
                placeholder="0.00"
                {...register("allowances")}
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="deductions">Deductions</Label>
              <Input
                id="deductions"
                type="number"
                step="0.01"
                placeholder="0.00"
                {...register("deductions")}
              />
            </div>
          </div>

          <div className="space-y-2">
            <Label htmlFor="paymentMethod">Payment Method *</Label>
            <Select
              defaultValue="BANK_TRANSFER"
              onValueChange={(value) => setValue("paymentMethod", value)}
            >
              <SelectTrigger>
                <SelectValue placeholder="Select payment method" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="BANK_TRANSFER">Bank Transfer</SelectItem>
                <SelectItem value="CASH">Cash</SelectItem>
                <SelectItem value="CHEQUE">Cheque</SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="space-y-2">
            <Label htmlFor="notes">Notes</Label>
            <Textarea
              id="notes"
              placeholder="Additional notes"
              rows={2}
              {...register("notes")}
            />
          </div>

          <DialogFooter>
            <Button
              type="button"
              variant="outline"
              onClick={() => onOpenChange(false)}
              disabled={isSubmitting}
            >
              Cancel
            </Button>
            <Button type="submit" disabled={isSubmitting}>
              {isSubmitting ? "Processing..." : "Process Payment"}
            </Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </Dialog>
  );
};

export default SalaryPaymentDialog;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\pos\POSPage.jsx"   & echo.. 
/**
 * POS Page
 * Main point of sale terminal interface
 */

import { useState, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import { User, Clock, PauseCircle, Receipt, Menu, AlertTriangle } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Separator } from "@/components/ui/separator";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
  SheetTrigger,
} from "@/components/ui/sheet";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Alert, AlertDescription, AlertTitle } from "@/components/ui/alert";
import { PageHeader } from "@/components/common";
import { useProducts } from "@/features/products";
import { useCustomers } from "@/features/customers";
import {
  POSProductSearch,
  POSCart,
  POSTotals,
  usePOSStore,
  useCreateSale,
} from "@/features/sales";
import { formatCurrency, formatDateTime } from "@/utils/formatters";
import { useAuthStore } from "@/store/authStore";
import { useBranchStore } from "@/store/branchStore";
import { ROUTES } from "@/config";
import { toast } from "sonner";

const POSPage = () => {
  const navigate = useNavigate();
  const { user } = useAuthStore();
  const selectedBranch = useBranchStore((state) => state.selectedBranch);
  const [customerSearch, setCustomerSearch] = useState("");
  const [showCustomerDialog, setShowCustomerDialog] = useState(false);
  const [showHeldSalesSheet, setShowHeldSalesSheet] = useState(false);
  const [showReceiptDialog, setShowReceiptDialog] = useState(false);
  const [lastSale, setLastSale] = useState(null);
  const [currentTime, setCurrentTime] = useState(new Date());

  // Store
  const customer = usePOSStore((state) => state.customer);
  const setCustomer = usePOSStore((state) => state.setCustomer);
  const clearCustomer = usePOSStore((state) => state.clearCustomer);
  const heldSales = usePOSStore((state) => state.heldSales);
  const recallSale = usePOSStore((state) => state.recallSale);
  const removeHeldSale = usePOSStore((state) => state.removeHeldSale);
  const clearCart = usePOSStore((state) => state.clearCart);

  // Queries
  const { data: productsData, isLoading: productsLoading } = useProducts({
    inStock: true,
  });
  const { data: customersData } = useCustomers();
  const createSaleMutation = useCreateSale();

  const products = productsData?.content || productsData || [];
  const customers = customersData?.content || customersData || [];

  // Update time every second
  useEffect(() => {
    const interval = setInterval(() => setCurrentTime(new Date()), 1000);
    return () => clearInterval(interval);
  }, []);

  // Filter customers
  const filteredCustomers =
    customerSearch.length >= 2
      ? customers
          .filter(
            (c) =>
              c.name?.toLowerCase().includes(customerSearch.toLowerCase()) ||
              c.phone?.includes(customerSearch)
          )
          .slice(0, 5)
      : [];

  // Handle checkout
  const handleCheckout = async (saleData) => {
    // Get branch ID from branch store
    const branchId = selectedBranch?.id;
    
    if (!branchId) {
      toast.error("No Branch Selected", {
        description: "Please select a branch from the header dropdown to complete the sale.",
      });
      return;
    }

    // Validate items
    if (!saleData.items || saleData.items.length === 0) {
      toast.error("Cart is Empty", {
        description: "Please add items to cart before checkout.",
      });
      return;
    }

    // Calculate total discount amount based on type
    const subtotal = saleData.subtotal || 0;
    const itemDiscountTotal = saleData.items.reduce((sum, item) => {
      const itemTotal = item.unitPrice * item.quantity;
      const discount = item.discount || 0;
      return sum + (itemTotal * discount) / 100;
    }, 0);
    
    const afterItemDiscount = subtotal - itemDiscountTotal;
    
    // For cart-level discount: send either percentage or fixed amount
    const cartDiscountPercent = saleData.discount?.type === "percentage" 
      ? Number(saleData.discount.value) || 0
      : 0;
      
    const cartDiscountAmount = saleData.discount?.type === "fixed"
      ? Math.min(Number(saleData.discount.value) || 0, afterItemDiscount)
      : 0;

    // Ensure paidAmount is valid
    const paidAmount = Number(saleData.payment?.amountTendered) || Number(saleData.grandTotal) || 0;

    const payload = {
      customerId: saleData.customer?.id || null,
      branchId: branchId,
      items: saleData.items.map((item) => {
        const itemTotal = item.unitPrice * item.quantity;
        const itemDiscount = item.discount || 0;
        return {
          productId: item.productId,
          inventoryBatchId: item.batchId || null,
          quantity: Number(item.quantity),
          discountAmount: Number((itemTotal * itemDiscount / 100).toFixed(2)),
        };
      }),
      discountAmount: Number(cartDiscountAmount.toFixed(2)),
      discountPercent: Number(cartDiscountPercent.toFixed(2)),
      paymentMethod: saleData.payment?.method || "CASH",
      paidAmount: Number(paidAmount.toFixed(2)),
      patientName: saleData.customer?.name || null,
      remarks: saleData.payment?.reference || null,
    };

    // Log payload for debugging
    console.log("Sale Payload:", JSON.stringify(payload, null, 2));

    try {
      const result = await createSaleMutation.mutateAsync(payload);
      if (result) {
        setLastSale(result);
        setShowReceiptDialog(true);
        clearCart();
      }
    } catch (error) {
      console.error("Sale creation failed:", error);
      console.error("Error response:", error.response?.data);
      
      // Extract error information
      const errorData = error.response?.data;
      const errorStatus = errorData?.error || errorData?.status;
      const errorMessage = errorData?.message || "Failed to complete sale. Please try again.";
      
      // Handle specific error types
      if (errorStatus === "Insufficient Stock" || errorMessage.includes("No available stock")) {
        const productName = errorMessage.match(/product: (.+)/)?.[1] || "product";
        toast.error("Insufficient Stock", {
          description: `${productName} is out of stock or has no available batches. Please check inventory or remove this item.`,
          duration: 5000,
        });
      } else if (errorData?.details || errorData?.errors) {
        toast.error("Sale Failed", {
          description: `${errorMessage}\n${JSON.stringify(errorData.details || errorData.errors)}`,
          duration: 5000,
        });
      } else {
        toast.error("Sale Failed", {
          description: errorMessage,
          duration: 5000,
        });
      }
    }
  };

  // Handle customer selection
  const handleSelectCustomer = (cust) => {
    setCustomer(cust);
    setShowCustomerDialog(false);
    setCustomerSearch("");
  };

  return (
    <div className="h-[calc(100vh-4rem)] sm:h-screen flex flex-col">
      {/* Top Bar */}
      <div className="border-b bg-background px-2 sm:px-4 py-2 flex items-center justify-between gap-2">
        <div className="flex items-center gap-2 sm:gap-4 min-w-0">
          <h1 className="text-lg sm:text-xl font-bold truncate">POS</h1>
          <Badge variant="outline" className="gap-1 hidden sm:flex">
            <User className="h-3 w-3" />
            {user?.firstName || user?.username}
          </Badge>
          {selectedBranch ? (
            <Badge variant="secondary" className="gap-1 hidden lg:flex">
               {selectedBranch.branchName || selectedBranch.name}
            </Badge>
          ) : (
            <Badge variant="destructive" className="gap-1 hidden lg:flex">
               No Branch Selected
            </Badge>
          )}
        </div>
        <div className="flex items-center gap-1 sm:gap-2 md:gap-4">
          <Badge variant="outline" className="gap-1 hidden md:flex">
            <Clock className="h-3 w-3" />
            {currentTime.toLocaleTimeString()}
          </Badge>
          <Sheet open={showHeldSalesSheet} onOpenChange={setShowHeldSalesSheet}>
            <SheetTrigger asChild>
              <Button
                variant="outline"
                size="sm"
                className="gap-1 sm:gap-2 px-2 sm:px-3"
              >
                <PauseCircle className="h-4 w-4" />
                <span className="hidden sm:inline">Held</span> (
                {heldSales.length})
              </Button>
            </SheetTrigger>
            <SheetContent>
              <SheetHeader>
                <SheetTitle>Held Sales</SheetTitle>
                <SheetDescription>
                  Resume a held sale to continue
                </SheetDescription>
              </SheetHeader>
              <div className="mt-6 space-y-3">
                {heldSales.length === 0 ? (
                  <p className="text-muted-foreground text-center py-8">
                    No held sales
                  </p>
                ) : (
                  heldSales.map((sale) => (
                    <Card key={sale.id}>
                      <CardContent className="p-4">
                        <div className="flex justify-between items-start mb-2">
                          <div>
                            <p className="font-medium">{sale.name}</p>
                            <p className="text-sm text-muted-foreground">
                              {formatDateTime(sale.timestamp)}
                            </p>
                          </div>
                          <p className="font-bold">{sale.items.length} items</p>
                        </div>
                        <div className="flex gap-2">
                          <Button
                            size="sm"
                            onClick={() => {
                              recallSale(sale.id);
                              setShowHeldSalesSheet(false);
                            }}
                          >
                            Resume
                          </Button>
                          <Button
                            variant="destructive"
                            size="sm"
                            onClick={() => removeHeldSale(sale.id)}
                          >
                            Delete
                          </Button>
                        </div>
                      </CardContent>
                    </Card>
                  ))
                )}
              </div>
            </SheetContent>
          </Sheet>
          <Button
            variant="outline"
            size="sm"
            className="px-2 sm:px-3"
            onClick={() => navigate(ROUTES.SALES.LIST)}
          >
            <Receipt className="h-4 w-4 sm:mr-2" />
            <span className="hidden sm:inline">History</span>
          </Button>
          <Button
            variant="outline"
            size="sm"
            className="px-2 sm:px-3 hidden md:flex"
            onClick={() => navigate(ROUTES.SALE_RETURNS.CREATE)}
          >
            <Receipt className="h-4 w-4 mr-2" />
            Return
          </Button>
        </div>
      </div>

      {/* Main Content */}
      <div className="flex-1 flex flex-col lg:flex-row overflow-hidden">
        {/* Left Panel - Products & Cart */}
        <div className="flex-1 flex flex-col p-2 sm:p-4 overflow-hidden">
          {/* Branch Warning Alert */}
          {!selectedBranch && (
            <Alert variant="destructive" className="mb-4">
              <AlertTriangle className="h-4 w-4" />
              <AlertTitle>No Branch Selected</AlertTitle>
              <AlertDescription>
                Please select a branch from the dropdown in the header to process sales.
              </AlertDescription>
            </Alert>
          )}

          {/* Product Search */}
          <POSProductSearch products={products} isLoading={productsLoading} />

          {/* Customer Selection */}
          <div className="mt-2 sm:mt-4 flex flex-wrap items-center gap-2">
            <Button
              variant="outline"
              className="gap-2 text-sm"
              size="sm"
              onClick={() => setShowCustomerDialog(true)}
            >
              <User className="h-4 w-4" />
              <span className="truncate max-w-[100px] sm:max-w-none">
                {customer ? customer.name : "Walk-in"}
              </span>
            </Button>
            {customer && (
              <>
                <Badge variant="secondary" className="text-xs">
                  {customer.loyaltyPoints || 0} pts
                </Badge>
                <Button variant="ghost" size="sm" onClick={clearCustomer}>
                  Clear
                </Button>
              </>
            )}
          </div>

          <Separator className="my-2 sm:my-4" />

          {/* Cart */}
          <POSCart />
        </div>

        {/* Right Panel - Totals */}
        <div className="w-full lg:w-80 border-t lg:border-t-0 lg:border-l p-2 sm:p-4 flex flex-col shrink-0">
          <POSTotals
            onCheckout={handleCheckout}
            isProcessing={createSaleMutation.isPending}
            hasBranch={!!selectedBranch}
          />
        </div>
      </div>

      {/* Customer Search Dialog */}
      <Dialog open={showCustomerDialog} onOpenChange={setShowCustomerDialog}>
        <DialogContent>
          <DialogHeader>
            <DialogTitle>Select Customer</DialogTitle>
            <DialogDescription>
              Search for an existing customer or continue as walk-in
            </DialogDescription>
          </DialogHeader>
          <div className="space-y-4">
            <div>
              <Label>Search Customer</Label>
              <Input
                placeholder="Search by name or phone..."
                value={customerSearch}
                onChange={(e) => setCustomerSearch(e.target.value)}
              />
            </div>
            {filteredCustomers.length > 0 && (
              <div className="border rounded-md divide-y">
                {filteredCustomers.map((cust) => (
                  <button
                    key={cust.id}
                    className="w-full p-3 text-left hover:bg-muted flex justify-between"
                    onClick={() => handleSelectCustomer(cust)}
                  >
                    <div>
                      <p className="font-medium">{cust.name}</p>
                      <p className="text-sm text-muted-foreground">
                        {cust.phone}
                      </p>
                    </div>
                    <Badge variant="outline">
                      {cust.loyaltyPoints || 0} pts
                    </Badge>
                  </button>
                ))}
              </div>
            )}
          </div>
          <DialogFooter>
            <Button
              variant="outline"
              onClick={() => setShowCustomerDialog(false)}
            >
              Cancel
            </Button>
            <Button
              onClick={() => {
                clearCustomer();
                setShowCustomerDialog(false);
              }}
            >
              Walk-in Customer
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Receipt Dialog */}
      <Dialog open={showReceiptDialog} onOpenChange={setShowReceiptDialog}>
        <DialogContent className="sm:max-w-md">
          <DialogHeader>
            <DialogTitle className="text-center text-green-600">
              Sale Complete!
            </DialogTitle>
          </DialogHeader>
          {lastSale && (
            <div className="text-center space-y-4 py-4">
              <Receipt className="h-16 w-16 mx-auto text-muted-foreground" />
              <div>
                <p className="text-sm text-muted-foreground">Invoice Number</p>
                <p className="text-xl font-bold">{lastSale.invoiceNumber}</p>
              </div>
              <div>
                <p className="text-sm text-muted-foreground">Total Amount</p>
                <p className="text-3xl font-bold">
                  {formatCurrency(lastSale.totalAmount)}
                </p>
              </div>
              {lastSale.change > 0 && (
                <div>
                  <p className="text-sm text-muted-foreground">Change</p>
                  <p className="text-xl font-bold text-green-600">
                    {formatCurrency(lastSale.change)}
                  </p>
                </div>
              )}
            </div>
          )}
          <DialogFooter className="gap-2 sm:gap-0">
            <Button
              variant="outline"
              onClick={() => setShowReceiptDialog(false)}
            >
              New Sale
            </Button>
            <Button onClick={() => window.print()}>Print Receipt</Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default POSPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\products\ProductFormPage.jsx"   & echo.. 
/**
 * Product Form Page
 * Create or edit a product
 */

import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useProduct,
  useCreateProduct,
  useUpdateProduct,
  ProductForm,
} from "@/features/products";
import { PageHeader, PageLoader } from "@/components/common";
import { Button } from "@/components/ui/button";

/**
 * ProductFormPage component
 */
const ProductFormPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const isEditing = Boolean(id);

  // Fetch product if editing
  const { data: product, isLoading } = useProduct(id);

  // Mutations
  const createProduct = useCreateProduct();
  const updateProduct = useUpdateProduct();

  const handleSubmit = (data) => {
    if (isEditing) {
      updateProduct.mutate(
        { id, data },
        {
          onSuccess: () => navigate(ROUTES.PRODUCTS.LIST),
        }
      );
    } else {
      createProduct.mutate(data, {
        onSuccess: () => navigate(ROUTES.PRODUCTS.LIST),
      });
    }
  };

  const handleCancel = () => {
    navigate(-1);
  };

  if (isEditing && isLoading) {
    return <PageLoader message="Loading product..." />;
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title={isEditing ? "Edit Product" : "Add New Product"}
        description={
          isEditing
            ? `Editing: ${product?.productName}`
            : "Create a new product in your catalog"
        }
        actions={
          <Button variant="ghost" onClick={() => navigate(-1)}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back
          </Button>
        }
      />

      <div className="max-w-4xl">
        <ProductForm
          product={product}
          onSubmit={handleSubmit}
          onCancel={handleCancel}
          isSubmitting={createProduct.isPending || updateProduct.isPending}
        />
      </div>
    </div>
  );
};

export default ProductFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\products\ProductsPage.jsx"   & echo.. 
/**
 * Products List Page
 * Displays all products with filtering, sorting, and pagination
 */

import { useState, useMemo, useRef } from "react";
import { useNavigate } from "react-router-dom";
import {
  Plus,
  Download,
  Upload,
  MoreHorizontal,
  Eye,
  Edit,
  Trash2,
  FileDown,
} from "lucide-react";
import { ROUTES } from "@/config";
import { useProducts, useDeleteProduct } from "@/features/products";
import { useCategories } from "@/features/categories";
import { useDebounce } from "@/hooks/useDebounce";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { Skeleton } from "@/components/ui/skeleton";
import { formatCurrency } from "@/utils/formatters";
import { downloadCSV, readFileAsText, csvToJSON } from "@/utils/exportImport";
import { useConfirm } from "@/components/common/ConfirmDialog";
import { productService } from "@/services";
import { toast } from "sonner";

/**
 * Advanced product search algorithm
 * Supports: exact barcode match, name search, generic name search, SKU search, partial matches
 */
const searchProducts = (products, searchTerm) => {
  if (!searchTerm || searchTerm.trim().length === 0) return products;

  const query = searchTerm.trim().toLowerCase();
  const results = [];

  products.forEach((product) => {
    // Handle various possible field names from API
    const name = (product.productName || product.name || "").toLowerCase();
    const sku = (product.productCode || product.sku || "").toLowerCase();
    const barcode = (product.barcode || "").toLowerCase();
    const genericName = (product.genericName || "").toLowerCase();
    const manufacturer = (product.manufacturer || "").toLowerCase();
    const description = (product.description || "").toLowerCase();
    const category = (product.category?.categoryName || "").toLowerCase();

    let score = 0;
    let matchType = "";

    // Priority 1: Exact barcode match
    if (barcode && barcode === query) {
      score = 1000;
      matchType = "barcode-exact";
    }
    // Priority 2: Barcode starts with query
    else if (barcode && barcode.startsWith(query)) {
      score = 900;
      matchType = "barcode-prefix";
    }
    // Priority 3: Barcode contains query
    else if (barcode && barcode.includes(query)) {
      score = 800;
      matchType = "barcode-partial";
    }
    // Priority 4: Exact SKU match
    else if (sku && sku === query) {
      score = 700;
      matchType = "sku-exact";
    }
    // Priority 5: SKU starts with query
    else if (sku && sku.startsWith(query)) {
      score = 600;
      matchType = "sku-prefix";
    }
    // Priority 6: Product name OR Generic name exact match
    else if ((name && name === query) || (genericName && genericName === query)) {
      score = 550;
      matchType = (genericName && genericName === query) ? "generic-exact" : "name-exact";
    }
    // Priority 7: Product name OR Generic name starts with query
    else if ((name && name.startsWith(query)) || (genericName && genericName.startsWith(query))) {
      score = 500;
      matchType = (genericName && genericName.startsWith(query)) ? "generic-prefix" : "name-prefix";
    }
    // Priority 8: Product name OR Generic name contains whole word match
    else if (
      (name && (name.includes(` ${query} `) || name.startsWith(`${query} `) || name.endsWith(` ${query}`))) ||
      (genericName && (genericName.includes(` ${query} `) || genericName.startsWith(`${query} `) || genericName.endsWith(` ${query}`)))
    ) {
      score = 450;
      const genericMatch = genericName && (genericName.includes(` ${query} `) || genericName.startsWith(`${query} `) || genericName.endsWith(` ${query}`));
      matchType = genericMatch ? "generic-word" : "name-word";
    }
    // Priority 9: Product name OR Generic name contains query anywhere
    else if ((name && name.includes(query)) || (genericName && genericName.includes(query))) {
      score = 400;
      matchType = (genericName && genericName.includes(query)) ? "generic-partial" : "name-partial";
    }
    // Priority 10: Category contains query
    else if (category && category.includes(query)) {
      score = 300;
      matchType = "category";
    }
    // Priority 11: Description contains query
    else if (description && description.includes(query)) {
      score = 250;
      matchType = "description";
    }
    // Priority 12: SKU contains query
    else if (sku && sku.includes(query)) {
      score = 200;
      matchType = "sku-partial";
    }
    // Priority 13: Manufacturer match
    else if (manufacturer && manufacturer.includes(query)) {
      score = 150;
      matchType = "manufacturer";
    }

    // Fuzzy matching for typos (check both name and generic name)
    if (score === 0 && query.length >= 3) {
      if (name && isCloseMatch(name, query)) {
        score = 100;
        matchType = "fuzzy-name";
      } else if (genericName && isCloseMatch(genericName, query)) {
        score = 95;
        matchType = "fuzzy-generic";
      }
    }

    if (score > 0) {
      results.push({
        ...product,
        searchScore: score,
        matchType,
      });
    }
  });

  // Sort by score (highest first)
  return results.sort((a, b) => b.searchScore - a.searchScore);
};

/**
 * Basic fuzzy matching - checks if strings are similar within 1-2 character differences
 */
const isCloseMatch = (str, query) => {
  const words = str.split(" ");
  return words.some(word => {
    if (word.length < query.length) return false;
    let differences = 0;
    for (let i = 0; i < Math.min(word.length, query.length); i++) {
      if (word[i] !== query[i]) differences++;
      if (differences > 2) return false;
    }
    return differences <= 2 && Math.abs(word.length - query.length) <= 1;
  });
};

/**
 * ProductsPage component
 */
const ProductsPage = () => {
  const navigate = useNavigate();
  const { confirm } = useConfirm();
  const [searchQuery, setSearchQuery] = useState("");
  const [isExporting, setIsExporting] = useState(false);
  const [isImporting, setIsImporting] = useState(false);
  const fileInputRef = useRef(null);

  // Debounce search for performance
  const debouncedSearch = useDebounce(searchQuery, 300);

  // Fetch all products (removed search param for client-side filtering)
  const { data, isLoading, error, refetch } = useProducts({
    page: 0,
    size: 1000, // Fetch more products for better search results
    sort: "productName,asc",
  });

  // Fetch all categories to map category IDs to names
  const { data: categoriesData } = useCategories();

  const deleteProduct = useDeleteProduct();

  // Create category lookup map
  const categoryMap = useMemo(() => {
    if (!categoriesData?.content) return {};
    return categoriesData.content.reduce((map, category) => {
      map[category.id] = category;
      return map;
    }, {});
  }, [categoriesData]);

  // Extract all products from response and map categories
  const allProducts = useMemo(() => {
    if (!data) return [];
    let products = [];
    if (Array.isArray(data)) products = data;
    else if (data.content && Array.isArray(data.content)) products = data.content;
    
    // Map category IDs to category objects
    return products.map(product => {
      if (product.categoryId && categoryMap[product.categoryId]) {
        return {
          ...product,
          category: categoryMap[product.categoryId]
        };
      }
      return product;
    });
  }, [data, categoryMap]);

  // Filter products using advanced search
  const products = useMemo(() => {
    return searchProducts(allProducts, debouncedSearch);
  }, [allProducts, debouncedSearch]);

  // Handlers
  const handleView = (product) => {
    navigate(ROUTES.PRODUCTS.VIEW(product.id));
  };

  const handleEdit = (product) => {
    navigate(ROUTES.PRODUCTS.EDIT(product.id));
  };

  const handleDelete = async (product) => {
    const confirmed = await confirm({
      title: "Delete Product",
      description: `Are you sure you want to delete "${product.productName}"?`,
      confirmText: "Delete",
      variant: "destructive",
    });

    if (confirmed) {
      deleteProduct.mutate(product.id);
    }
  };

  // Export products to CSV
  const handleExport = async () => {
    try {
      setIsExporting(true);

      // Prepare data for export
      const exportData = products.map((product) => ({
        Code: product.productCode,
        Name: product.productName,
        "Generic Name": product.genericName || "",
        Category: product.category?.categoryName || "",
        "Dosage Form": product.dosageForm || "",
        Strength: product.strength || "",
        Manufacturer: product.manufacturer || "",
        Barcode: product.barcode || "",
        "Selling Price": product.sellingPrice || 0,
        "Cost Price": product.costPrice || 0,
        "Reorder Level": product.reorderLevel || 0,
        "Min Order Qty": product.minOrderQuantity || 0,
        "Pack Size": product.packSize || 1,
        Unit: product.unit || "",
        Status: product.isActive ? "Active" : "Inactive",
        Description: product.description || "",
      }));

      // Generate filename with timestamp
      const timestamp = new Date().toISOString().split("T")[0];
      const filename = `products-export-${timestamp}.csv`;

      // Download CSV
      downloadCSV(exportData, filename);

      toast.success(`Exported ${exportData.length} products successfully`);
    } catch (error) {
      console.error("Export error:", error);
      toast.error("Failed to export products");
    } finally {
      setIsExporting(false);
    }
  };

  // Handle file selection for import
  const handleImportClick = () => {
    fileInputRef.current?.click();
  };

  // Download CSV template
  const handleDownloadTemplate = () => {
    const template = [
      {
        Code: "PROD001",
        Name: "Product Name",
        "Generic Name": "Generic Name",
        Category: "Category Name",
        "Dosage Form": "Tablet",
        Strength: "500mg",
        Manufacturer: "Manufacturer Name",
        Barcode: "1234567890123",
        "Selling Price": "100.00",
        "Cost Price": "80.00",
        "Reorder Level": "10",
        "Min Order Qty": "5",
        "Pack Size": "10",
        Unit: "Box",
        Status: "Active",
        Description: "Product description",
      },
    ];

    downloadCSV(template, "product-import-template.csv");
    toast.success("Template downloaded successfully");
  };

  // Import products from CSV
  const handleFileChange = async (event) => {
    const file = event.target.files?.[0];
    if (!file) return;

    // Validate file type
    if (!file.name.endsWith(".csv")) {
      toast.error("Please select a CSV file");
      return;
    }

    try {
      setIsImporting(true);

      // Read file content
      const content = await readFileAsText(file);
      const importedData = csvToJSON(content);

      if (importedData.length === 0) {
        toast.error("The CSV file is empty");
        return;
      }

      // Validate required fields
      const requiredFields = ["Code", "Name", "Selling Price"];
      const firstRow = importedData[0];
      const missingFields = requiredFields.filter(
        (field) => !Object.keys(firstRow).includes(field)
      );

      if (missingFields.length > 0) {
        toast.error(
          `Missing required columns: ${missingFields.join(", ")}`
        );
        return;
      }

      // Transform data to match API format
      const productsToImport = importedData.map((row) => ({
        productCode: row.Code,
        productName: row.Name,
        genericName: row["Generic Name"],
        dosageForm: row["Dosage Form"],
        strength: row.Strength,
        manufacturer: row.Manufacturer,
        barcode: row.Barcode,
        sellingPrice: parseFloat(row["Selling Price"]) || 0,
        costPrice: parseFloat(row["Cost Price"]) || 0,
        reorderLevel: parseInt(row["Reorder Level"]) || 0,
        minOrderQuantity: parseInt(row["Min Order Qty"]) || 0,
        packSize: parseInt(row["Pack Size"]) || 1,
        unit: row.Unit,
        isActive: row.Status?.toLowerCase() === "active",
        description: row.Description,
      }));

      // Call backend API to bulk import
      try {
        // Create a new CSV file from the parsed data
        const csvContent = [
          // Header row
          Object.keys(productsToImport[0]).join(","),
          // Data rows
          ...productsToImport.map(product => 
            Object.values(product).map(val => 
              typeof val === 'string' && val.includes(',') ? `"${val}"` : val
            ).join(",")
          )
        ].join("\n");
        
        const blob = new Blob([csvContent], { type: "text/csv" });
        const file = new File([blob], "products_import.csv", { type: "text/csv" });
        
        // Upload to backend
        await productService.import(file);
        
        toast.success(
          `Successfully imported ${productsToImport.length} products!`
        );
        
        // Refresh product list
        refetch();
      } catch (apiError) {
        console.error("Backend import error:", apiError);
        // Fallback: show data ready message if backend is not available
        toast.info(
          `Parsed ${productsToImport.length} products. Backend import endpoint may need configuration.`
        );
      }
    } catch (error) {
      console.error("Import error:", error);
      toast.error("Failed to import products");
    } finally {
      setIsImporting(false);
      // Reset file input
      if (fileInputRef.current) {
        fileInputRef.current.value = "";
      }
    }
  };

  // Loading skeleton
  const LoadingSkeleton = () => (
    <>
      {[...Array(5)].map((_, i) => (
        <TableRow key={i}>
          <TableCell>
            <Skeleton className="h-4 w-20" />
          </TableCell>
          <TableCell>
            <Skeleton className="h-4 w-40" />
          </TableCell>
          <TableCell>
            <Skeleton className="h-4 w-24" />
          </TableCell>
          <TableCell>
            <Skeleton className="h-4 w-16" />
          </TableCell>
          <TableCell>
            <Skeleton className="h-4 w-20" />
          </TableCell>
          <TableCell>
            <Skeleton className="h-4 w-16" />
          </TableCell>
          <TableCell>
            <Skeleton className="h-8 w-8" />
          </TableCell>
        </TableRow>
      ))}
    </>
  );

  return (
    <div className="flex flex-col gap-6">
      {/* Header */}
      <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
        <div>
          <h1 className="text-xl sm:text-2xl font-bold tracking-tight">
            Products
          </h1>
          <p className="text-sm text-muted-foreground">
            Manage your product catalog
          </p>
        </div>
        <div className="flex flex-wrap gap-2">
          <input
            ref={fileInputRef}
            type="file"
            accept=".csv"
            onChange={handleFileChange}
            className="hidden"
          />
          <DropdownMenu>
            <DropdownMenuTrigger asChild>
              <Button
                variant="outline"
                size="sm"
                className="flex-1 sm:flex-none"
                disabled={isImporting}
              >
                <Upload className="mr-2 h-4 w-4" />
                <span className="hidden sm:inline">
                  {isImporting ? "Importing..." : "Import"}
                </span>
              </Button>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end">
              <DropdownMenuLabel>Import Products</DropdownMenuLabel>
              <DropdownMenuSeparator />
              <DropdownMenuItem onClick={handleImportClick}>
                <Upload className="mr-2 h-4 w-4" />
                Upload CSV File
              </DropdownMenuItem>
              <DropdownMenuItem onClick={handleDownloadTemplate}>
                <FileDown className="mr-2 h-4 w-4" />
                Download Template
              </DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
          <Button
            variant="outline"
            size="sm"
            className="flex-1 sm:flex-none"
            onClick={handleExport}
            disabled={isExporting || products.length === 0}
          >
            <Download className="mr-2 h-4 w-4" />
            <span className="hidden sm:inline">
              {isExporting ? "Exporting..." : "Export"}
            </span>
          </Button>
          <Button
            onClick={() => navigate(ROUTES.PRODUCTS.NEW)}
            className="flex-1 sm:flex-none"
          >
            <Plus className="mr-2 h-4 w-4" />
            Add Product
          </Button>
        </div>
      </div>

      {/* Filters Card */}
      <Card>
        <CardHeader className="pb-3 sm:pb-4">
          <CardTitle className="text-sm sm:text-base">Filters</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="flex flex-col sm:flex-row gap-3 sm:gap-4">
            <Input
              placeholder="Search products..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full sm:max-w-sm"
            />
          </div>
        </CardContent>
      </Card>

      {/* Products Table Card */}
      <Card>
        <CardHeader>
          <CardTitle>All Products</CardTitle>
          <CardDescription>
            {isLoading ? "Loading..." : `${products.length} products found`}
          </CardDescription>
        </CardHeader>
        <CardContent>
          {error ? (
            <div className="text-center py-10 text-destructive">
              Error loading products. Please try again.
            </div>
          ) : (
            <div className="rounded-md border overflow-x-auto -mx-4 sm:mx-0">
              <div className="min-w-[600px] sm:min-w-0">
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead className="whitespace-nowrap">Code</TableHead>
                      <TableHead className="whitespace-nowrap">
                        Product Name
                      </TableHead>
                      <TableHead className="whitespace-nowrap hidden sm:table-cell">
                        Category
                      </TableHead>
                      <TableHead className="whitespace-nowrap hidden md:table-cell">
                        Form
                      </TableHead>
                      <TableHead className="whitespace-nowrap">Price</TableHead>
                      <TableHead className="whitespace-nowrap hidden sm:table-cell">
                        Status
                      </TableHead>
                      <TableHead className="w-10"></TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {isLoading ? (
                      <LoadingSkeleton />
                    ) : products.length === 0 ? (
                      <TableRow>
                        <TableCell colSpan={7} className="h-24 text-center">
                          <div className="text-muted-foreground">
                            No products found. Click "Add Product" to create
                            your first product.
                          </div>
                        </TableCell>
                      </TableRow>
                    ) : (
                      products.map((product) => (
                        <TableRow key={product.id}>
                          <TableCell className="font-mono text-xs sm:text-sm whitespace-nowrap">
                            {product.productCode}
                          </TableCell>
                          <TableCell>
                            <div className="flex flex-col min-w-0">
                              <div className="flex items-center gap-2">
                                <span className="font-medium text-sm truncate max-w-[150px] sm:max-w-none">
                                  {product.productName}
                                </span>
                                {product.matchType?.includes("barcode") && (
                                  <Badge variant="secondary" className="text-xs">
                                    Barcode
                                  </Badge>
                                )}
                                {product.matchType?.includes("generic") && (
                                  <Badge variant="default" className="text-xs">
                                    Generic
                                  </Badge>
                                )}
                                {product.matchType?.includes("fuzzy") && (
                                  <Badge variant="outline" className="text-xs">
                                    Similar
                                  </Badge>
                                )}
                              </div>
                              {product.genericName && (
                                <span className="text-xs text-muted-foreground truncate max-w-[150px] sm:max-w-none">
                                  {product.genericName}
                                </span>
                              )}
                            </div>
                          </TableCell>
                          <TableCell className="hidden sm:table-cell">
                            <Badge
                              variant="outline"
                              className="whitespace-nowrap"
                            >
                              {product.category?.categoryName || "-"}
                            </Badge>
                          </TableCell>
                          <TableCell className="hidden md:table-cell whitespace-nowrap">
                            {product.dosageForm || "-"}
                          </TableCell>
                          <TableCell className="font-medium whitespace-nowrap">
                            {formatCurrency(product.sellingPrice)}
                          </TableCell>
                          <TableCell className="hidden sm:table-cell">
                            <Badge
                              variant={
                                product.isActive ? "default" : "secondary"
                              }
                            >
                              {product.isActive ? "Active" : "Inactive"}
                            </Badge>
                          </TableCell>
                          <TableCell>
                            <DropdownMenu>
                              <DropdownMenuTrigger asChild>
                                <Button
                                  variant="ghost"
                                  size="icon"
                                  className="h-8 w-8"
                                >
                                  <MoreHorizontal className="h-4 w-4" />
                                </Button>
                              </DropdownMenuTrigger>
                              <DropdownMenuContent align="end">
                                <DropdownMenuLabel>Actions</DropdownMenuLabel>
                                <DropdownMenuSeparator />
                                <DropdownMenuItem
                                  onClick={() => handleView(product)}
                                >
                                  <Eye className="mr-2 h-4 w-4" />
                                  View Details
                                </DropdownMenuItem>
                                <DropdownMenuItem
                                  onClick={() => handleEdit(product)}
                                >
                                  <Edit className="mr-2 h-4 w-4" />
                                  Edit
                                </DropdownMenuItem>
                                <DropdownMenuSeparator />
                                <DropdownMenuItem
                                  onClick={() => handleDelete(product)}
                                  className="text-destructive focus:text-destructive"
                                >
                                  <Trash2 className="mr-2 h-4 w-4" />
                                  Delete
                                </DropdownMenuItem>
                              </DropdownMenuContent>
                            </DropdownMenu>
                          </TableCell>
                        </TableRow>
                      ))
                    )}
                  </TableBody>
                </Table>
              </div>
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
};

export default ProductsPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\products\ProductViewPage.jsx"   & echo.. 
/**
 * Product View Page
 * Displays detailed product information
 */

import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft, Edit, Trash2, XCircle, Package } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useProduct,
  useDeleteProduct,
  useDiscontinueProduct,
} from "@/features/products";
import { PageHeader, PageLoader, StatusBadge } from "@/components/common";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Separator } from "@/components/ui/separator";
import { useConfirm } from "@/components/common/ConfirmDialog";
import { formatCurrency, formatDate } from "@/utils/formatters";
import { DOSAGE_FORM_LABELS, DRUG_SCHEDULE_LABELS } from "@/constants";

/**
 * ProductViewPage component
 */
const ProductViewPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const confirm = useConfirm();

  const { data: product, isLoading, error } = useProduct(id);
  const deleteProduct = useDeleteProduct();
  const discontinueProduct = useDiscontinueProduct();

  const handleEdit = () => {
    navigate(ROUTES.PRODUCTS.EDIT(id));
  };

  const handleDelete = async () => {
    const confirmed = await confirm({
      title: "Delete Product",
      description: `Are you sure you want to delete "${product?.productName}"? This action cannot be undone.`,
      confirmText: "Delete",
      cancelText: "Cancel",
      variant: "destructive",
    });

    if (confirmed) {
      deleteProduct.mutate(id, {
        onSuccess: () => navigate(ROUTES.PRODUCTS.LIST),
      });
    }
  };

  const handleDiscontinue = async () => {
    const confirmed = await confirm({
      title: "Discontinue Product",
      description: `Are you sure you want to discontinue "${product?.productName}"?`,
      confirmText: "Discontinue",
      cancelText: "Cancel",
      variant: "warning",
    });

    if (confirmed) {
      discontinueProduct.mutate(id);
    }
  };

  if (isLoading) {
    return <PageLoader message="Loading product..." />;
  }

  if (error || !product) {
    return (
      <div className="flex flex-col items-center justify-center min-h-[400px]">
        <Package className="h-16 w-16 text-muted-foreground mb-4" />
        <h2 className="text-xl font-semibold mb-2">Product Not Found</h2>
        <p className="text-muted-foreground mb-4">
          The product you're looking for doesn't exist.
        </p>
        <Button onClick={() => navigate(ROUTES.PRODUCTS.LIST)}>
          Back to Products
        </Button>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title={product.productName}
        description={product.genericName || "No generic name"}
        actions={
          <div className="flex gap-2">
            <Button variant="ghost" onClick={() => navigate(-1)}>
              <ArrowLeft className="mr-2 h-4 w-4" />
              Back
            </Button>
            <Button variant="outline" onClick={handleEdit}>
              <Edit className="mr-2 h-4 w-4" />
              Edit
            </Button>
            {!product.isDiscontinued && (
              <Button variant="outline" onClick={handleDiscontinue}>
                <XCircle className="mr-2 h-4 w-4" />
                Discontinue
              </Button>
            )}
            <Button variant="destructive" onClick={handleDelete}>
              <Trash2 className="mr-2 h-4 w-4" />
              Delete
            </Button>
          </div>
        }
      />

      <div className="grid gap-6 md:grid-cols-2">
        {/* Basic Info */}
        <Card>
          <CardHeader>
            <CardTitle>Basic Information</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex justify-between">
              <span className="text-muted-foreground">Product Code</span>
              <span className="font-mono">{product.productCode}</span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Category</span>
              <Badge variant="outline">
                {product.category?.categoryName || "-"}
              </Badge>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Dosage Form</span>
              <span>
                {DOSAGE_FORM_LABELS[product.dosageForm] ||
                  product.dosageForm ||
                  "-"}
              </span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Strength</span>
              <span>{product.strength || "-"}</span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Drug Schedule</span>
              {product.drugSchedule ? (
                <Badge
                  variant={
                    product.drugSchedule === "X" ? "destructive" : "secondary"
                  }
                >
                  {DRUG_SCHEDULE_LABELS[product.drugSchedule]}
                </Badge>
              ) : (
                <span>-</span>
              )}
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Manufacturer</span>
              <span>{product.manufacturer || "-"}</span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Barcode</span>
              <span className="font-mono">{product.barcode || "-"}</span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Status</span>
              <StatusBadge
                status={
                  product.isDiscontinued
                    ? "discontinued"
                    : product.isActive
                    ? "active"
                    : "inactive"
                }
              />
            </div>
          </CardContent>
        </Card>

        {/* Pricing */}
        <Card>
          <CardHeader>
            <CardTitle>Pricing</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex justify-between">
              <span className="text-muted-foreground">Cost Price</span>
              <span className="font-medium">
                {formatCurrency(product.costPrice)}
              </span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Selling Price</span>
              <span className="font-medium text-lg">
                {formatCurrency(product.sellingPrice)}
              </span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">MRP</span>
              <span>{formatCurrency(product.mrp)}</span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">GST Rate</span>
              <span>{product.gstRate ? `${product.gstRate}%` : "-"}</span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Profit Margin</span>
              <span className="text-green-600">
                {product.costPrice && product.sellingPrice
                  ? `${(
                      ((product.sellingPrice - product.costPrice) /
                        product.costPrice) *
                      100
                    ).toFixed(1)}%`
                  : "-"}
              </span>
            </div>
          </CardContent>
        </Card>

        {/* Inventory Settings */}
        <Card>
          <CardHeader>
            <CardTitle>Inventory Settings</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex justify-between">
              <span className="text-muted-foreground">Reorder Level</span>
              <span>{product.reorderLevel || "-"}</span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Minimum Stock</span>
              <span>{product.minimumStock || "-"}</span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Maximum Stock</span>
              <span>{product.maximumStock || "-"}</span>
            </div>
          </CardContent>
        </Card>

        {/* Additional Info */}
        <Card>
          <CardHeader>
            <CardTitle>Additional Information</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex justify-between">
              <span className="text-muted-foreground">
                Prescription Required
              </span>
              <Badge
                variant={
                  product.isPrescriptionRequired ? "destructive" : "secondary"
                }
              >
                {product.isPrescriptionRequired ? "Yes" : "No"}
              </Badge>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Narcotic Drug</span>
              <Badge variant={product.isNarcotic ? "destructive" : "secondary"}>
                {product.isNarcotic ? "Yes" : "No"}
              </Badge>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">
                Requires Refrigeration
              </span>
              <Badge variant={product.isRefrigerated ? "warning" : "secondary"}>
                {product.isRefrigerated ? "Yes" : "No"}
              </Badge>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Created</span>
              <span>{formatDate(product.createdAt)}</span>
            </div>
            <Separator />
            <div className="flex justify-between">
              <span className="text-muted-foreground">Last Updated</span>
              <span>{formatDate(product.updatedAt)}</span>
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Description */}
      {product.description && (
        <Card>
          <CardHeader>
            <CardTitle>Description</CardTitle>
          </CardHeader>
          <CardContent>
            <p className="text-muted-foreground">{product.description}</p>
          </CardContent>
        </Card>
      )}
    </div>
  );
};

export default ProductViewPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\purchase-orders\PurchaseOrderFormPage.jsx"   & echo.. 
/**
 * Purchase Order Form Page
 * Create or edit a purchase order
 */

import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft, ShoppingCart } from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { PageHeader, LoadingSpinner } from "@/components/common";
import {
  usePurchaseOrder,
  useCreatePurchaseOrder,
  useUpdatePurchaseOrder,
  PurchaseOrderForm,
} from "@/features/purchase-orders";
import { useActiveSuppliers } from "@/features/suppliers";
import { useProducts } from "@/features/products";
import { useBranchStore } from "@/store";

const PurchaseOrderFormPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const isEditing = Boolean(id);
  const { selectedBranch } = useBranchStore();

  // Queries
  const { data: purchaseOrder, isLoading: isPOLoading } = usePurchaseOrder(id);
  const { data: suppliersData, isLoading: isSuppliersLoading } = useActiveSuppliers();
  const { data: productsData, isLoading: isProductsLoading } = useProducts({ pageSize: 500 });

  const createMutation = useCreatePurchaseOrder();
  const updateMutation = useUpdatePurchaseOrder();

  const suppliers = suppliersData || [];

  // Debug: Log suppliers data
  console.log('PO Form - Suppliers data:', suppliersData);
  console.log('PO Form - Is loading suppliers:', isSuppliersLoading);
  console.log('PO Form - Suppliers array:', suppliers);
  
  // Debug: Log products data
  console.log('PO Form - Products data:', productsData);
  console.log('PO Form - Is loading products:', isProductsLoading);
  
  const products = productsData?.content || productsData || [];
  console.log('PO Form - Products array:', products);
  console.log('PO Form - Products array length:', products?.length);
  
  const isLoading = isEditing && isPOLoading;
  const isSubmitting = createMutation.isPending || updateMutation.isPending;

  // Handle form submission
  const handleSubmit = (data) => {
    console.log('PO Form - Submitting data:', JSON.stringify(data, null, 2));
    
    // Transform form data to match backend API
    const apiData = {
      supplierId: parseInt(data.supplierId),
      branchId: selectedBranch?.id,
      expectedDeliveryDate: data.expectedDate || null,
      remarks: data.notes || null,
      items: data.items.map(item => ({
        productId: parseInt(item.productId),
        quantityOrdered: parseInt(item.quantity),
        unitPrice: parseFloat(item.unitPrice),
        discountPercent: parseFloat(item.discount || 0),
        gstRate: parseFloat(item.taxRate || 0),
        remarks: null
      }))
    };
    
    console.log('PO Form - Transformed API data:', JSON.stringify(apiData, null, 2));
    
    if (isEditing) {
      updateMutation.mutate(
        { id, data: apiData },
        { onSuccess: () => navigate(ROUTES.PURCHASE_ORDERS.ROOT) }
      );
    } else {
      createMutation.mutate(apiData, {
        onSuccess: () => navigate(ROUTES.PURCHASE_ORDERS.ROOT),
      });
    }
  };

  const handleCancel = () => {
    navigate(ROUTES.PURCHASE_ORDERS.ROOT);
  };

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <LoadingSpinner size="lg" />
      </div>
    );
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title={isEditing ? "Edit Purchase Order" : "New Purchase Order"}
        description={
          isEditing
            ? "Update purchase order details"
            : "Create a new purchase order for a supplier"
        }
        icon={ShoppingCart}
        actions={
          <Button variant="ghost" onClick={handleCancel}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back to Orders
          </Button>
        }
      />

      <PurchaseOrderForm
        purchaseOrder={purchaseOrder}
        suppliers={suppliers}
        products={products}
        onSubmit={handleSubmit}
        onCancel={handleCancel}
        isSubmitting={isSubmitting}
      />
    </div>
  );
};

export default PurchaseOrderFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\purchase-orders\PurchaseOrdersPage.jsx"   & echo.. 
/**
 * Purchase Orders Page
 * Lists all purchase orders with filtering and actions
 */

import { useState, useMemo, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import { Plus, ShoppingCart } from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Textarea } from "@/components/ui/textarea";
import { DataTable, PageHeader, ConfirmDialog } from "@/components/common";
import {
  usePurchaseOrders,
  useDeletePurchaseOrder,
  useSubmitPurchaseOrder,
  useApprovePurchaseOrder,
  useRejectPurchaseOrder,
  getPurchaseOrderColumns,
} from "@/features/purchase-orders";
import { usePermissions } from "@/hooks";

const PurchaseOrdersPage = () => {
  const navigate = useNavigate();
  const { hasPermission } = usePermissions();
  const [search, setSearch] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");
  const [deleteDialog, setDeleteDialog] = useState({ open: false, po: null });
  const [rejectDialog, setRejectDialog] = useState({
    open: false,
    po: null,
    reason: "",
  });

  // Query params
  const params = useMemo(
    () => ({
      search: search || undefined,
      status: statusFilter !== "all" ? statusFilter : undefined,
    }),
    [search, statusFilter]
  );

  // Queries and mutations
  const { data: posData, isLoading } = usePurchaseOrders(params);
  const deleteMutation = useDeletePurchaseOrder();
  const submitMutation = useSubmitPurchaseOrder();
  const approveMutation = useApprovePurchaseOrder();
  const rejectMutation = useRejectPurchaseOrder();

  // Debug: Log purchase orders data
  console.log('PO Page - Raw data:', posData);
  console.log('PO Page - Is loading:', isLoading);
  console.log('PO Page - Content:', posData?.content);

  const purchaseOrders = posData?.content || posData || [];

  // Handlers
  const handleView = useCallback(
    (po) => {
      navigate(ROUTES.PURCHASE_ORDERS.VIEW(po.id));
    },
    [navigate]
  );

  const handleEdit = useCallback(
    (po) => {
      navigate(ROUTES.PURCHASE_ORDERS.EDIT(po.id));
    },
    [navigate]
  );

  const handleDeleteClick = useCallback((po) => {
    setDeleteDialog({ open: true, po });
  }, []);

  const handleDeleteConfirm = useCallback(() => {
    if (deleteDialog.po) {
      deleteMutation.mutate(deleteDialog.po.id, {
        onSuccess: () => setDeleteDialog({ open: false, po: null }),
      });
    }
  }, [deleteDialog.po, deleteMutation]);

  const handleSubmit = useCallback(
    (po) => {
      submitMutation.mutate(po.id);
    },
    [submitMutation]
  );

  const handleApprove = useCallback(
    (po) => {
      approveMutation.mutate(po.id);
    },
    [approveMutation]
  );

  const handleRejectClick = useCallback((po) => {
    setRejectDialog({ open: true, po, reason: "" });
  }, []);

  const handleRejectConfirm = useCallback(() => {
    if (rejectDialog.po) {
      rejectMutation.mutate(
        { id: rejectDialog.po.id, reason: rejectDialog.reason },
        {
          onSuccess: () =>
            setRejectDialog({ open: false, po: null, reason: "" }),
        }
      );
    }
  }, [rejectDialog, rejectMutation]);

  const handleReceive = useCallback(
    (po) => {
      // Navigate to GRN creation with PO context
      navigate(`${ROUTES.GRN.CREATE}?poId=${po.id}`);
    },
    [navigate]
  );

  // Columns
  const columns = useMemo(
    () =>
      getPurchaseOrderColumns({
        onView: handleView,
        onEdit: handleEdit,
        onDelete: handleDeleteClick,
        onSubmit: handleSubmit,
        onApprove: handleApprove,
        onReject: handleRejectClick,
        onReceive: handleReceive,
        hasPermission,
      }),
    [
      handleView,
      handleEdit,
      handleDeleteClick,
      handleSubmit,
      handleApprove,
      handleRejectClick,
      handleReceive,
      hasPermission,
    ]
  );

  return (
    <div className="space-y-6">
      <PageHeader
        title="Purchase Orders"
        description="Manage purchase orders with suppliers"
        icon={ShoppingCart}
        actions={
          <Button onClick={() => navigate(ROUTES.PURCHASE_ORDERS.NEW)}>
            <Plus className="mr-2 h-4 w-4" />
            New Order
          </Button>
        }
      />

      {/* Filters */}
      <div className="flex flex-col gap-4 sm:flex-row">
        <Input
          placeholder="Search by PO number, supplier..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="sm:w-[300px]"
        />
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="sm:w-[180px]">
            <SelectValue placeholder="Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="DRAFT">Draft</SelectItem>
            <SelectItem value="PENDING_APPROVAL">Pending Approval</SelectItem>
            <SelectItem value="APPROVED">Approved</SelectItem>
            <SelectItem value="REJECTED">Rejected</SelectItem>
            <SelectItem value="ORDERED">Ordered</SelectItem>
            <SelectItem value="PARTIALLY_RECEIVED">
              Partially Received
            </SelectItem>
            <SelectItem value="RECEIVED">Received</SelectItem>
            <SelectItem value="CANCELLED">Cancelled</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={purchaseOrders}
        isLoading={isLoading}
        searchable={false}
      />

      {/* Delete Confirmation */}
      <ConfirmDialog
        open={deleteDialog.open}
        onOpenChange={(open) => setDeleteDialog({ open, po: null })}
        title="Delete Purchase Order"
        description={`Are you sure you want to delete PO "${deleteDialog.po?.poNumber}"? This action cannot be undone.`}
        confirmText="Delete"
        cancelText="Cancel"
        variant="destructive"
        onConfirm={handleDeleteConfirm}
        isLoading={deleteMutation.isPending}
      />

      {/* Reject Dialog */}
      <Dialog
        open={rejectDialog.open}
        onOpenChange={(open) => setRejectDialog({ open, po: null, reason: "" })}
      >
        <DialogContent>
          <DialogHeader>
            <DialogTitle>Reject Purchase Order</DialogTitle>
            <DialogDescription>
              Please provide a reason for rejecting PO "
              {rejectDialog.po?.poNumber}".
            </DialogDescription>
          </DialogHeader>
          <Textarea
            placeholder="Enter rejection reason..."
            value={rejectDialog.reason}
            onChange={(e) =>
              setRejectDialog({ ...rejectDialog, reason: e.target.value })
            }
            rows={3}
          />
          <DialogFooter>
            <Button
              variant="outline"
              onClick={() =>
                setRejectDialog({ open: false, po: null, reason: "" })
              }
            >
              Cancel
            </Button>
            <Button
              variant="destructive"
              onClick={handleRejectConfirm}
              disabled={!rejectDialog.reason || rejectMutation.isPending}
            >
              Reject
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default PurchaseOrdersPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\purchase-orders\PurchaseOrderViewPage.jsx"   & echo.. 
/**
 * Purchase Order View Page
 * Detailed view of a purchase order
 */

import { useNavigate, useParams } from "react-router-dom";
import {
  ArrowLeft,
  ShoppingCart,
  Send,
  CheckCircle,
  XCircle,
  Package,
  Edit,
  Printer,
} from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
  TableFooter,
} from "@/components/ui/table";
import { PageHeader, LoadingSpinner } from "@/components/common";
import {
  usePurchaseOrder,
  useSubmitPurchaseOrder,
  useApprovePurchaseOrder,
  useCancelPurchaseOrder,
} from "@/features/purchase-orders";
import { usePermissions } from "@/hooks";
import { formatDate, formatCurrency } from "@/utils/formatters";

// Status badge configuration
const statusConfig = {
  DRAFT: { label: "Draft", variant: "secondary" },
  PENDING_APPROVAL: { label: "Pending Approval", variant: "warning" },
  APPROVED: { label: "Approved", variant: "default" },
  REJECTED: { label: "Rejected", variant: "destructive" },
  ORDERED: { label: "Ordered", variant: "outline" },
  PARTIALLY_RECEIVED: { label: "Partially Received", variant: "warning" },
  RECEIVED: { label: "Fully Received", variant: "success" },
  CANCELLED: { label: "Cancelled", variant: "secondary" },
};

const PurchaseOrderViewPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const { hasPermission } = usePermissions();

  // Queries
  const { data: po, isLoading } = usePurchaseOrder(id);
  const submitMutation = useSubmitPurchaseOrder();
  const approveMutation = useApprovePurchaseOrder();
  const cancelMutation = useCancelPurchaseOrder();

  const status = po?.status;
  
  // Permission checks combined with status checks
  // Note: SUPER_ADMIN creates orders directly as APPROVED, so they won't see DRAFT status
  const canEdit = status === "DRAFT" && hasPermission("purchaseOrders", "edit");
  const canSubmit = status === "DRAFT" && hasPermission("purchaseOrders", "edit");
  const canApprove = status === "PENDING_APPROVAL" && hasPermission("purchaseOrders", "approve");
  const canReceive = (status === "APPROVED" || status === "ORDERED") && hasPermission("grn", "create");
  const canCancel = (status === "DRAFT" || status === "PENDING_APPROVAL") && hasPermission("purchaseOrders", "edit");

  // Calculate totals from items
  const items = po?.items || [];
  const subtotal = items.reduce(
    (sum, item) => sum + item.quantity * item.unitPrice,
    0
  );
  const totalDiscount = items.reduce((sum, item) => {
    const itemSubtotal = item.quantity * item.unitPrice;
    return sum + itemSubtotal * (item.discount / 100);
  }, 0);
  const totalTax = items.reduce((sum, item) => {
    const itemSubtotal = item.quantity * item.unitPrice;
    const afterDiscount = itemSubtotal - itemSubtotal * (item.discount / 100);
    return sum + afterDiscount * (item.taxRate / 100);
  }, 0);

  const handleSubmit = () => {
    submitMutation.mutate(id);
  };

  const handleApprove = () => {
    approveMutation.mutate(id);
  };

  const handleCancel = () => {
    cancelMutation.mutate(id);
  };

  const handleReceive = () => {
    navigate(`${ROUTES.GRN.CREATE}?poId=${id}`);
  };

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <LoadingSpinner size="lg" />
      </div>
    );
  }

  if (!po) {
    return (
      <div className="text-center py-12">
        <p className="text-muted-foreground">Purchase order not found.</p>
        <Button
          variant="link"
          onClick={() => navigate(ROUTES.PURCHASE_ORDERS.ROOT)}
        >
          Back to orders
        </Button>
      </div>
    );
  }

  const statusInfo = statusConfig[status] || {
    label: status,
    variant: "secondary",
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title={`Purchase Order ${po.poNumber}`}
        description={`Created on ${formatDate(po.createdAt)}`}
        icon={ShoppingCart}
        actions={
          <div className="flex gap-2">
            <Button
              variant="ghost"
              onClick={() => navigate(ROUTES.PURCHASE_ORDERS.ROOT)}
            >
              <ArrowLeft className="mr-2 h-4 w-4" />
              Back
            </Button>
            <Button variant="outline" onClick={() => window.print()}>
              <Printer className="mr-2 h-4 w-4" />
              Print
            </Button>
            {canEdit && (
              <Button
                variant="outline"
                onClick={() => navigate(ROUTES.PURCHASE_ORDERS.EDIT(id))}
              >
                <Edit className="mr-2 h-4 w-4" />
                Edit
              </Button>
            )}
            {canSubmit && (
              <Button
                onClick={handleSubmit}
                disabled={submitMutation.isPending}
              >
                <Send className="mr-2 h-4 w-4" />
                Submit for Approval
              </Button>
            )}
            {canApprove && (
              <Button
                onClick={handleApprove}
                disabled={approveMutation.isPending}
              >
                <CheckCircle className="mr-2 h-4 w-4" />
                Approve
              </Button>
            )}
            {canReceive && (
              <Button onClick={handleReceive}>
                <Package className="mr-2 h-4 w-4" />
                Receive
              </Button>
            )}
            {canCancel && (
              <Button
                variant="destructive"
                onClick={handleCancel}
                disabled={cancelMutation.isPending}
              >
                <XCircle className="mr-2 h-4 w-4" />
                Cancel
              </Button>
            )}
          </div>
        }
      />

      <div className="grid gap-6 lg:grid-cols-3">
        {/* Order Info */}
        <Card className="lg:col-span-2">
          <CardHeader className="flex flex-row items-center justify-between">
            <CardTitle>Order Details</CardTitle>
            <Badge variant={statusInfo.variant}>{statusInfo.label}</Badge>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="grid gap-4 md:grid-cols-2">
              <div>
                <p className="text-sm text-muted-foreground">PO Number</p>
                <p className="font-medium font-mono">{po.poNumber}</p>
              </div>
              <div>
                <p className="text-sm text-muted-foreground">Order Date</p>
                <p className="font-medium">{formatDate(po.orderDate)}</p>
              </div>
              <div>
                <p className="text-sm text-muted-foreground">
                  Expected Delivery
                </p>
                <p className="font-medium">
                  {formatDate(po.expectedDate) || "-"}
                </p>
              </div>
              <div>
                <p className="text-sm text-muted-foreground">Branch</p>
                <p className="font-medium">{po.branch?.branchName || "-"}</p>
              </div>
            </div>
            {po.notes && (
              <>
                <Separator />
                <div>
                  <p className="text-sm text-muted-foreground">Notes</p>
                  <p className="mt-1">{po.notes}</p>
                </div>
              </>
            )}
          </CardContent>
        </Card>

        {/* Supplier Info */}
        <Card>
          <CardHeader>
            <CardTitle>Supplier</CardTitle>
          </CardHeader>
          <CardContent className="space-y-2">
            <p className="font-medium">{po.supplier?.name || "-"}</p>
            {po.supplier?.contactPerson && (
              <p className="text-sm text-muted-foreground">
                {po.supplier.contactPerson}
              </p>
            )}
            {po.supplier?.phone && (
              <p className="text-sm">{po.supplier.phone}</p>
            )}
            {po.supplier?.email && (
              <p className="text-sm">{po.supplier.email}</p>
            )}
          </CardContent>
        </Card>
      </div>

      {/* Order Items */}
      <Card>
        <CardHeader>
          <CardTitle>Order Items</CardTitle>
        </CardHeader>
        <CardContent>
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead className="w-[40px]">#</TableHead>
                <TableHead>Product</TableHead>
                <TableHead className="text-right">Qty</TableHead>
                <TableHead className="text-right">Unit Price</TableHead>
                <TableHead className="text-right">Discount</TableHead>
                <TableHead className="text-right">Tax</TableHead>
                <TableHead className="text-right">Total</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {items.map((item, index) => {
                const itemSubtotal = item.quantity * item.unitPrice;
                const discountAmount =
                  itemSubtotal * ((item.discount || 0) / 100);
                const afterDiscount = itemSubtotal - discountAmount;
                const taxAmount = afterDiscount * ((item.taxRate || 0) / 100);
                const lineTotal = afterDiscount + taxAmount;

                return (
                  <TableRow key={item.id || index}>
                    <TableCell>{index + 1}</TableCell>
                    <TableCell>
                      <div>
                        <p className="font-medium">
                          {item.product?.name || item.productName}
                        </p>
                        {item.product?.sku && (
                          <p className="text-sm text-muted-foreground">
                            {item.product.sku}
                          </p>
                        )}
                      </div>
                    </TableCell>
                    <TableCell className="text-right">
                      {item.quantity}
                    </TableCell>
                    <TableCell className="text-right">
                      {formatCurrency(item.unitPrice)}
                    </TableCell>
                    <TableCell className="text-right">
                      {item.discount || 0}%
                    </TableCell>
                    <TableCell className="text-right">
                      {item.taxRate || 0}%
                    </TableCell>
                    <TableCell className="text-right font-medium">
                      {formatCurrency(lineTotal)}
                    </TableCell>
                  </TableRow>
                );
              })}
            </TableBody>
            <TableFooter>
              <TableRow>
                <TableCell colSpan={6} className="text-right">
                  Subtotal
                </TableCell>
                <TableCell className="text-right">
                  {formatCurrency(subtotal)}
                </TableCell>
              </TableRow>
              <TableRow>
                <TableCell
                  colSpan={6}
                  className="text-right text-muted-foreground"
                >
                  Discount
                </TableCell>
                <TableCell className="text-right text-muted-foreground">
                  -{formatCurrency(totalDiscount)}
                </TableCell>
              </TableRow>
              <TableRow>
                <TableCell
                  colSpan={6}
                  className="text-right text-muted-foreground"
                >
                  Tax
                </TableCell>
                <TableCell className="text-right text-muted-foreground">
                  +{formatCurrency(totalTax)}
                </TableCell>
              </TableRow>
              <TableRow className="font-bold">
                <TableCell colSpan={6} className="text-right">
                  Grand Total
                </TableCell>
                <TableCell className="text-right">
                  {formatCurrency(po.totalAmount)}
                </TableCell>
              </TableRow>
            </TableFooter>
          </Table>
        </CardContent>
      </Card>

      {/* Audit Info */}
      {(po.approvedBy || po.rejectedBy) && (
        <Card>
          <CardHeader>
            <CardTitle>Approval History</CardTitle>
          </CardHeader>
          <CardContent className="space-y-2 text-sm">
            {po.approvedBy && (
              <p>
                <span className="text-muted-foreground">Approved by:</span>{" "}
                {po.approvedBy.name || po.approvedBy} on{" "}
                {formatDate(po.approvedAt)}
              </p>
            )}
            {po.rejectedBy && (
              <>
                <p>
                  <span className="text-muted-foreground">Rejected by:</span>{" "}
                  {po.rejectedBy.name || po.rejectedBy} on{" "}
                  {formatDate(po.rejectedAt)}
                </p>
                {po.rejectionReason && (
                  <p>
                    <span className="text-muted-foreground">Reason:</span>{" "}
                    {po.rejectionReason}
                  </p>
                )}
              </>
            )}
          </CardContent>
        </Card>
      )}
    </div>
  );
};

export default PurchaseOrderViewPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\reports\AuditPage.jsx"   & echo.. 
/**
 * Audit Trail Page
 * Display system audit logs and activity history
 */

import { useState, useMemo } from "react";
import { Download, Filter, Search } from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Badge } from "@/components/ui/badge";
import { formatDate } from "@/utils/formatters";

const AuditPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [actionFilter, setActionFilter] = useState("all");
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "timestamp",
        header: "Date & Time",
        cell: ({ row }) => (
          <div>
            <div className="font-medium">
              {formatDate(row.getValue("timestamp"))}
            </div>
            <div className="text-xs text-muted-foreground">
              {row.original.time}
            </div>
          </div>
        ),
      },
      {
        accessorKey: "user",
        header: "User",
        cell: ({ row }) => (
          <div>
            <div className="font-medium">{row.getValue("user")}</div>
            <div className="text-xs text-muted-foreground">
              {row.original.userRole}
            </div>
          </div>
        ),
      },
      {
        accessorKey: "action",
        header: "Action",
        cell: ({ row }) => {
          const action = row.getValue("action");
          const variant =
            action === "CREATE"
              ? "success"
              : action === "UPDATE"
              ? "default"
              : action === "DELETE"
              ? "destructive"
              : "secondary";
          return <Badge variant={variant}>{action}</Badge>;
        },
      },
      {
        accessorKey: "module",
        header: "Module",
        meta: { className: "hidden md:table-cell" },
      },
      {
        accessorKey: "description",
        header: "Description",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => (
          <span className="line-clamp-2">{row.getValue("description")}</span>
        ),
      },
      {
        accessorKey: "ipAddress",
        header: "IP Address",
        meta: { className: "hidden xl:table-cell" },
      },
    ],
    []
  );

  return (
    <div className="space-y-6">
      <PageHeader
        title="Audit Trail"
        description="System activity logs and user actions"
      >
        <Button variant="outline">
          <Download className="mr-2 h-4 w-4" />
          Export Logs
        </Button>
      </PageHeader>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
            <Input
              placeholder="Search by user, action, or description..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="pl-10"
            />
          </div>
        </div>
        <Select value={actionFilter} onValueChange={setActionFilter}>
          <SelectTrigger className="w-full sm:w-[180px]">
            <SelectValue placeholder="Filter by action" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Actions</SelectItem>
            <SelectItem value="CREATE">Create</SelectItem>
            <SelectItem value="UPDATE">Update</SelectItem>
            <SelectItem value="DELETE">Delete</SelectItem>
            <SelectItem value="VIEW">View</SelectItem>
            <SelectItem value="LOGIN">Login</SelectItem>
            <SelectItem value="LOGOUT">Logout</SelectItem>
          </SelectContent>
        </Select>
        <Button variant="outline" size="icon">
          <Filter className="h-4 w-4" />
        </Button>
      </div>

      {/* Info Card */}
      <div className="bg-muted/50 border border-border rounded-lg p-4">
        <div className="flex items-start gap-3">
          <div className="bg-primary/10 p-2 rounded-lg">
            <Search className="h-5 w-5 text-primary" />
          </div>
          <div className="flex-1">
            <h3 className="font-semibold text-sm mb-1">
              Audit Trail Information
            </h3>
            <p className="text-sm text-muted-foreground">
              All user actions are logged for security and compliance purposes.
              Logs include user identity, timestamp, action performed, and IP
              address. Data is retained for 90 days.
            </p>
          </div>
        </div>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        emptyMessage="No audit logs found."
      />
    </div>
  );
};

export default AuditPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\reports\EmployeeReportPage.jsx"   & echo.. 
/**
 * Employee Report Page
 * Display employee statistics and reports
 */

import { useState, useMemo } from "react";
import { Download, Users, TrendingUp, Calendar } from "lucide-react";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatDate } from "@/utils/formatters";

const EmployeeReportPage = () => {
  const [searchQuery, setSearchQuery] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  const mockData = {
    content: [],
    total: 0,
    pageCount: 0,
  };

  const columns = useMemo(
    () => [
      {
        accessorKey: "employeeName",
        header: "Employee",
        cell: ({ row }) => (
          <div>
            <div className="font-medium">{row.getValue("employeeName")}</div>
            <div className="text-xs text-muted-foreground">
              {row.original.employeeCode}
            </div>
          </div>
        ),
      },
      {
        accessorKey: "position",
        header: "Position",
        meta: { className: "hidden md:table-cell" },
      },
      {
        accessorKey: "department",
        header: "Department",
        meta: { className: "hidden lg:table-cell" },
      },
      {
        accessorKey: "hireDate",
        header: "Hire Date",
        meta: { className: "hidden lg:table-cell" },
        cell: ({ row }) => formatDate(row.getValue("hireDate")),
      },
      {
        accessorKey: "attendanceRate",
        header: "Attendance",
        cell: ({ row }) => (
          <div className="flex items-center gap-2">
            <div className="text-sm font-medium">
              {row.getValue("attendanceRate") || 0}%
            </div>
            <div className="h-2 w-20 bg-muted rounded-full overflow-hidden">
              <div
                className="h-full bg-green-600"
                style={{ width: `${row.getValue("attendanceRate") || 0}%` }}
              />
            </div>
          </div>
        ),
      },
      {
        accessorKey: "status",
        header: "Status",
        cell: ({ row }) => {
          const status = row.getValue("status");
          const variant =
            status === "ACTIVE"
              ? "success"
              : status === "ON_LEAVE"
              ? "warning"
              : "default";
          return <Badge variant={variant}>{status}</Badge>;
        },
      },
    ],
    []
  );

  const stats = {
    totalEmployees: 0,
    activeEmployees: 0,
    onLeave: 0,
    avgAttendance: 0,
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title="Employee Report"
        description="Comprehensive employee statistics and performance"
      >
        <Button variant="outline">
          <Download className="mr-2 h-4 w-4" />
          Export Report
        </Button>
      </PageHeader>

      {/* Statistics */}
      <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Total Employees
            </CardTitle>
            <Users className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.totalEmployees}</div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">Active</CardTitle>
            <TrendingUp className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-green-600">
              {stats.activeEmployees}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">On Leave</CardTitle>
            <Calendar className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold text-orange-600">
              {stats.onLeave}
            </div>
          </CardContent>
        </Card>
        <Card>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-sm font-medium">
              Avg. Attendance
            </CardTitle>
            <Users className="h-4 w-4 text-muted-foreground" />
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{stats.avgAttendance}%</div>
          </CardContent>
        </Card>
      </div>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <div className="flex-1">
          <Input
            placeholder="Search by employee name..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="max-w-sm"
          />
        </div>
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="w-full sm:w-[180px]">
            <SelectValue placeholder="Filter by status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="ACTIVE">Active</SelectItem>
            <SelectItem value="ON_LEAVE">On Leave</SelectItem>
            <SelectItem value="INACTIVE">Inactive</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={mockData.content}
        isLoading={false}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          total: mockData.total,
          pageCount: mockData.pageCount,
        }}
        onPaginationChange={setPagination}
        emptyMessage="No employee records found."
      />
    </div>
  );
};

export default EmployeeReportPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\reports\FinancialReportPage.jsx"   & echo.. 
/**
 * Financial Report Page
 * Revenue, expenses, and cash flow analysis
 */

import { useState } from "react";
import { format, subDays } from "date-fns";
import {
  DollarSign,
  TrendingUp,
  TrendingDown,
  CreditCard,
  Banknote,
} from "lucide-react";

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { PageHeader, LoadingSpinner } from "@/components/common";
import { ReportFilters, ReportSummaryCard } from "@/features/reports";
import { useFinancialReport } from "@/features/reports";
import { useActiveBranches } from "@/features/branches";
import { formatCurrency } from "@/utils/formatters";

const FinancialReportPage = () => {
  const [filters, setFilters] = useState({
    startDate: format(subDays(new Date(), 30), "yyyy-MM-dd"),
    endDate: format(new Date(), "yyyy-MM-dd"),
    branchId: null,
  });

  const { data: branches } = useActiveBranches();
  const { data: report, isLoading } = useFinancialReport(filters);

  const handleDateChange = ({ startDate, endDate }) => {
    setFilters((prev) => ({ ...prev, startDate, endDate }));
  };

  const handleBranchChange = (branchId) => {
    setFilters((prev) => ({
      ...prev,
      branchId: branchId === "all" ? null : branchId,
    }));
  };

  const handleExport = (format) => {
    console.log("Exporting as", format);
  };

  // Summary metrics
  const summary = report?.summary || {};
  const transactions = report?.transactions || [];
  const paymentMethods = report?.paymentMethods || [];

  return (
    <div className="space-y-6">
      <PageHeader
        title="Financial Report"
        description="Revenue, expenses, and cash flow analysis"
        icon={DollarSign}
      />

      <ReportFilters
        startDate={filters.startDate}
        endDate={filters.endDate}
        onDateChange={handleDateChange}
        branchId={filters.branchId}
        onBranchChange={handleBranchChange}
        branches={branches || []}
        onExport={handleExport}
        isLoading={isLoading}
      />

      {isLoading ? (
        <div className="flex items-center justify-center h-64">
          <LoadingSpinner size="lg" />
        </div>
      ) : (
        <>
          {/* Summary Cards */}
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            <ReportSummaryCard
              title="Total Revenue"
              value={formatCurrency(summary.totalRevenue || 0)}
              description="Gross sales"
              icon={TrendingUp}
              trend="up"
            />
            <ReportSummaryCard
              title="Total Expenses"
              value={formatCurrency(summary.totalExpenses || 0)}
              description="Purchases & costs"
              icon={TrendingDown}
              trend="down"
            />
            <ReportSummaryCard
              title="Net Profit"
              value={formatCurrency(summary.netProfit || 0)}
              description="Revenue - Expenses"
              icon={DollarSign}
              trend={summary.netProfit > 0 ? "up" : "down"}
            />
            <ReportSummaryCard
              title="Profit Margin"
              value={`${summary.profitMargin?.toFixed(1) || 0}%`}
              description="Net profit ratio"
              icon={TrendingUp}
            />
          </div>

          {/* Payment Methods Breakdown */}
          <Card>
            <CardHeader>
              <CardTitle>Revenue by Payment Method</CardTitle>
            </CardHeader>
            <CardContent>
              {paymentMethods.length > 0 ? (
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead>Payment Method</TableHead>
                      <TableHead className="text-right">Transactions</TableHead>
                      <TableHead className="text-right">Amount</TableHead>
                      <TableHead className="text-right">% of Total</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {paymentMethods.map((method, index) => (
                      <TableRow key={method.method || index}>
                        <TableCell className="font-medium flex items-center gap-2">
                          {method.method === "CASH" ? (
                            <Banknote className="h-4 w-4 text-green-600" />
                          ) : (
                            <CreditCard className="h-4 w-4 text-blue-600" />
                          )}
                          {method.method}
                        </TableCell>
                        <TableCell className="text-right">
                          {method.transactionCount}
                        </TableCell>
                        <TableCell className="text-right">
                          {formatCurrency(method.amount)}
                        </TableCell>
                        <TableCell className="text-right">
                          {method.percentage?.toFixed(1)}%
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              ) : (
                <p className="text-center text-muted-foreground py-8">
                  No payment data for the selected period
                </p>
              )}
            </CardContent>
          </Card>

          {/* Recent Transactions */}
          <Card>
            <CardHeader>
              <CardTitle>Recent Transactions</CardTitle>
            </CardHeader>
            <CardContent>
              {transactions.length > 0 ? (
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead>Date</TableHead>
                      <TableHead>Reference</TableHead>
                      <TableHead>Type</TableHead>
                      <TableHead>Description</TableHead>
                      <TableHead className="text-right">Amount</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {transactions.slice(0, 20).map((tx, index) => (
                      <TableRow key={tx.id || index}>
                        <TableCell>
                          {format(new Date(tx.date), "MMM dd, yyyy")}
                        </TableCell>
                        <TableCell className="font-mono text-sm">
                          {tx.reference}
                        </TableCell>
                        <TableCell>{tx.type}</TableCell>
                        <TableCell>{tx.description}</TableCell>
                        <TableCell
                          className={`text-right font-medium ${
                            tx.type === "EXPENSE"
                              ? "text-red-600"
                              : "text-green-600"
                          }`}
                        >
                          {tx.type === "EXPENSE" ? "-" : "+"}
                          {formatCurrency(tx.amount)}
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              ) : (
                <p className="text-center text-muted-foreground py-8">
                  No transactions for the selected period
                </p>
              )}
            </CardContent>
          </Card>
        </>
      )}
    </div>
  );
};

export default FinancialReportPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\reports\InventoryReportPage.jsx"   & echo.. 
/**
 * Inventory Report Page
 * Stock levels, movements, and valuation
 */

import { useState } from "react";
import { Package, AlertTriangle, TrendingDown, DollarSign } from "lucide-react";

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Badge } from "@/components/ui/badge";
import { PageHeader, LoadingSpinner } from "@/components/common";
import { ReportSummaryCard } from "@/features/reports";
import { useInventoryReport } from "@/features/reports";
import { useActiveBranches } from "@/features/branches";
import { formatCurrency } from "@/utils/formatters";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Label } from "@/components/ui/label";

const InventoryReportPage = () => {
  const [branchId, setBranchId] = useState(null);

  const { data: branches } = useActiveBranches();
  const { data: report, isLoading } = useInventoryReport({ branchId });

  // Summary metrics
  const summary = report?.summary || {};
  const stockLevels = report?.stockLevels || [];
  const lowStockItems = report?.lowStockItems || [];
  const expiringItems = report?.expiringItems || [];

  return (
    <div className="space-y-6">
      <PageHeader
        title="Inventory Report"
        description="Stock levels, valuation, and alerts"
        icon={Package}
      />

      {/* Filters */}
      <Card>
        <CardContent className="pt-6">
          <div className="flex gap-4 items-end">
            <div className="space-y-2">
              <Label>Branch</Label>
              <Select
                value={branchId || "all"}
                onValueChange={(v) => setBranchId(v === "all" ? null : v)}
              >
                <SelectTrigger className="w-[200px]">
                  <SelectValue placeholder="All Branches" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="all">All Branches</SelectItem>
                  {(branches || []).map((branch) => (
                    <SelectItem key={branch.id} value={branch.id?.toString()}>
                      {branch.branchName}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>
          </div>
        </CardContent>
      </Card>

      {isLoading ? (
        <div className="flex items-center justify-center h-64">
          <LoadingSpinner size="lg" />
        </div>
      ) : (
        <>
          {/* Summary Cards */}
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            <ReportSummaryCard
              title="Total Stock Value"
              value={formatCurrency(summary.totalStockValue || 0)}
              description={`${summary.totalProducts || 0} products`}
              icon={DollarSign}
            />
            <ReportSummaryCard
              title="Low Stock Items"
              value={summary.lowStockCount || 0}
              description="Need reordering"
              icon={TrendingDown}
            />
            <ReportSummaryCard
              title="Out of Stock"
              value={summary.outOfStockCount || 0}
              description="Zero quantity"
              icon={AlertTriangle}
            />
            <ReportSummaryCard
              title="Expiring Soon"
              value={summary.expiringCount || 0}
              description="Within 30 days"
              icon={AlertTriangle}
            />
          </div>

          {/* Low Stock Items */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <TrendingDown className="h-5 w-5 text-orange-500" />
                Low Stock Items
              </CardTitle>
            </CardHeader>
            <CardContent>
              {lowStockItems.length > 0 ? (
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead>Product</TableHead>
                      <TableHead>SKU</TableHead>
                      <TableHead className="text-right">
                        Current Stock
                      </TableHead>
                      <TableHead className="text-right">
                        Reorder Level
                      </TableHead>
                      <TableHead>Status</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {lowStockItems.slice(0, 10).map((item, index) => (
                      <TableRow key={item.productId || index}>
                        <TableCell className="font-medium">
                          {item.productName}
                        </TableCell>
                        <TableCell className="font-mono text-sm">
                          {item.sku}
                        </TableCell>
                        <TableCell className="text-right">
                          {item.currentStock}
                        </TableCell>
                        <TableCell className="text-right">
                          {item.reorderLevel}
                        </TableCell>
                        <TableCell>
                          <Badge
                            variant={
                              item.currentStock === 0
                                ? "destructive"
                                : "warning"
                            }
                          >
                            {item.currentStock === 0
                              ? "Out of Stock"
                              : "Low Stock"}
                          </Badge>
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              ) : (
                <p className="text-center text-muted-foreground py-8">
                  No low stock items
                </p>
              )}
            </CardContent>
          </Card>

          {/* Expiring Items */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <AlertTriangle className="h-5 w-5 text-red-500" />
                Expiring Soon
              </CardTitle>
            </CardHeader>
            <CardContent>
              {expiringItems.length > 0 ? (
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead>Product</TableHead>
                      <TableHead>Batch No.</TableHead>
                      <TableHead className="text-right">Quantity</TableHead>
                      <TableHead>Expiry Date</TableHead>
                      <TableHead>Days Left</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {expiringItems.slice(0, 10).map((item, index) => (
                      <TableRow key={item.batchId || index}>
                        <TableCell className="font-medium">
                          {item.productName}
                        </TableCell>
                        <TableCell className="font-mono text-sm">
                          {item.batchNumber}
                        </TableCell>
                        <TableCell className="text-right">
                          {item.quantity}
                        </TableCell>
                        <TableCell>{item.expiryDate}</TableCell>
                        <TableCell>
                          <Badge
                            variant={
                              item.daysLeft <= 7 ? "destructive" : "warning"
                            }
                          >
                            {item.daysLeft} days
                          </Badge>
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              ) : (
                <p className="text-center text-muted-foreground py-8">
                  No items expiring soon
                </p>
              )}
            </CardContent>
          </Card>

          {/* Stock by Category */}
          <Card>
            <CardHeader>
              <CardTitle>Stock by Category</CardTitle>
            </CardHeader>
            <CardContent>
              {stockLevels.length > 0 ? (
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead>Category</TableHead>
                      <TableHead className="text-right">Products</TableHead>
                      <TableHead className="text-right">
                        Total Quantity
                      </TableHead>
                      <TableHead className="text-right">Stock Value</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {stockLevels.map((category, index) => (
                      <TableRow key={category.categoryId || index}>
                        <TableCell className="font-medium">
                          {category.categoryName}
                        </TableCell>
                        <TableCell className="text-right">
                          {category.productCount}
                        </TableCell>
                        <TableCell className="text-right">
                          {category.totalQuantity}
                        </TableCell>
                        <TableCell className="text-right">
                          {formatCurrency(category.stockValue)}
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              ) : (
                <p className="text-center text-muted-foreground py-8">
                  No inventory data available
                </p>
              )}
            </CardContent>
          </Card>
        </>
      )}
    </div>
  );
};

export default InventoryReportPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\reports\ReportsPage.jsx"   & echo.. 
/**
 * Reports Page
 * Main reports hub with links to different report types
 */

import { useNavigate } from "react-router-dom";
import {
  BarChart3,
  Package,
  DollarSign,
  ShoppingCart,
  AlertTriangle,
  TrendingUp,
} from "lucide-react";

import { ROUTES } from "@/config/routes.config";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { PageHeader } from "@/components/common";

const reportTypes = [
  {
    title: "Sales Report",
    description: "View sales performance, trends, and top products",
    icon: TrendingUp,
    route: ROUTES.REPORTS.SALES,
    color: "text-blue-600",
  },
  {
    title: "Inventory Report",
    description: "Stock levels, movements, and valuation",
    icon: Package,
    route: ROUTES.REPORTS.INVENTORY,
    color: "text-green-600",
  },
  {
    title: "Financial Report",
    description: "Revenue, expenses, and cash flow analysis",
    icon: DollarSign,
    route: ROUTES.REPORTS.FINANCIAL,
    color: "text-purple-600",
  },
  {
    title: "Purchase Report",
    description: "Purchase orders, supplier analysis",
    icon: ShoppingCart,
    route: ROUTES.REPORTS.PURCHASE,
    color: "text-orange-600",
  },
  {
    title: "Expiry Report",
    description: "Products nearing expiry or expired",
    icon: AlertTriangle,
    route: ROUTES.REPORTS.EXPIRY,
    color: "text-red-600",
  },
  {
    title: "Profit & Loss",
    description: "Comprehensive profit and loss statement",
    icon: BarChart3,
    route: ROUTES.REPORTS.PROFIT_LOSS,
    color: "text-teal-600",
  },
];

const ReportsPage = () => {
  const navigate = useNavigate();

  return (
    <div className="space-y-6">
      <PageHeader
        title="Reports"
        description="Generate and view business reports"
        icon={BarChart3}
      />

      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
        {reportTypes.map((report) => {
          const Icon = report.icon;
          return (
            <Card
              key={report.title}
              className="cursor-pointer hover:shadow-md transition-shadow"
              onClick={() => navigate(report.route)}
            >
              <CardHeader className="flex flex-row items-center gap-4 space-y-0">
                <div className={`p-2 rounded-lg bg-muted ${report.color}`}>
                  <Icon className="h-6 w-6" />
                </div>
                <div>
                  <CardTitle className="text-lg">{report.title}</CardTitle>
                  <CardDescription>{report.description}</CardDescription>
                </div>
              </CardHeader>
            </Card>
          );
        })}
      </div>
    </div>
  );
};

export default ReportsPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\reports\SalesReportPage.jsx"   & echo.. 
/**
 * Sales Report Page
 * Detailed sales analysis and trends
 */

import { useState, useMemo } from "react";
import { format, subDays } from "date-fns";
import {
  TrendingUp,
  DollarSign,
  ShoppingBag,
  Users,
  Package,
} from "lucide-react";

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { PageHeader, LoadingSpinner } from "@/components/common";
import { ReportFilters, ReportSummaryCard } from "@/features/reports";
import { useSalesReport } from "@/features/reports";
import { useActiveBranches } from "@/features/branches";
import { formatCurrency } from "@/utils/formatters";

const SalesReportPage = () => {
  const [filters, setFilters] = useState({
    startDate: format(subDays(new Date(), 30), "yyyy-MM-dd"),
    endDate: format(new Date(), "yyyy-MM-dd"),
    branchId: null,
  });

  const { data: branches } = useActiveBranches();
  const { data: report, isLoading } = useSalesReport(filters);

  const handleDateChange = ({ startDate, endDate }) => {
    setFilters((prev) => ({ ...prev, startDate, endDate }));
  };

  const handleBranchChange = (branchId) => {
    setFilters((prev) => ({
      ...prev,
      branchId: branchId === "all" ? null : branchId,
    }));
  };

  const handleExport = (format) => {
    try {
      // Generate CSV export
      if (format === "csv") {
        let csvContent = "data:text/csv;charset=utf-8,";
        
        // Summary Section
        csvContent += "Sales Report Summary\n";
        csvContent += `Period:,${filters.startDate} to ${filters.endDate}\n`;
        csvContent += `Total Sales:,${summary.totalSales || 0}\n`;
        csvContent += `Sales Count:,${summary.salesCount || 0}\n`;
        csvContent += `Average Sale:,${summary.averageSale || 0}\n\n`;
        
        // Top Products Section
        csvContent += "Top Selling Products\n";
        csvContent += "Product Name,Quantity Sold,Revenue\n";
        topProducts.forEach(product => {
          csvContent += `"${product.productName}",${product.quantity},${product.revenue}\n`;
        });
        
        csvContent += "\n";
        
        // Daily Sales Section
        csvContent += "Daily Sales\n";
        csvContent += "Date,Sales Amount,Transaction Count\n";
        dailySales.forEach(day => {
          csvContent += `${day.date},${day.amount},${day.count}\n`;
        });
        
        // Download file
        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", `sales_report_${new Date().toISOString().split('T')[0]}.csv`);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }
      
      // PDF export placeholder - would use a library like jsPDF
      if (format === "pdf") {
        console.log("PDF export requires jsPDF library implementation");
        alert("PDF export feature coming soon. Please use CSV for now.");
      }
    } catch (error) {
      console.error("Export error:", error);
      alert("Failed to export report");
    }
  };

  // Summary metrics
  const summary = report?.summary || {};
  const topProducts = report?.topProducts || [];
  const dailySales = report?.dailySales || [];

  return (
    <div className="space-y-6">
      <PageHeader
        title="Sales Report"
        description="Analyze sales performance and trends"
        icon={TrendingUp}
      />

      <ReportFilters
        startDate={filters.startDate}
        endDate={filters.endDate}
        onDateChange={handleDateChange}
        branchId={filters.branchId}
        onBranchChange={handleBranchChange}
        branches={branches || []}
        onExport={handleExport}
        isLoading={isLoading}
      />

      {isLoading ? (
        <div className="flex items-center justify-center h-64">
          <LoadingSpinner size="lg" />
        </div>
      ) : (
        <>
          {/* Summary Cards */}
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            <ReportSummaryCard
              title="Total Sales"
              value={formatCurrency(summary.totalSales || 0)}
              description={`${summary.salesCount || 0} transactions`}
              icon={DollarSign}
              trend={summary.salesTrend}
              trendValue={summary.salesTrendValue}
            />
            <ReportSummaryCard
              title="Average Sale"
              value={formatCurrency(summary.averageSale || 0)}
              description="Per transaction"
              icon={ShoppingBag}
            />
            <ReportSummaryCard
              title="Total Customers"
              value={summary.uniqueCustomers || 0}
              description="Unique customers"
              icon={Users}
            />
            <ReportSummaryCard
              title="Items Sold"
              value={summary.itemsSold || 0}
              description="Total quantity"
              icon={Package}
            />
          </div>

          {/* Top Products */}
          <Card>
            <CardHeader>
              <CardTitle>Top Selling Products</CardTitle>
            </CardHeader>
            <CardContent>
              {topProducts.length > 0 ? (
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead className="w-[40px]">#</TableHead>
                      <TableHead>Product</TableHead>
                      <TableHead className="text-right">
                        Quantity Sold
                      </TableHead>
                      <TableHead className="text-right">Revenue</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {topProducts.slice(0, 10).map((product, index) => (
                      <TableRow key={product.productId || index}>
                        <TableCell>{index + 1}</TableCell>
                        <TableCell className="font-medium">
                          {product.productName}
                        </TableCell>
                        <TableCell className="text-right">
                          {product.quantitySold}
                        </TableCell>
                        <TableCell className="text-right">
                          {formatCurrency(product.revenue)}
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              ) : (
                <p className="text-center text-muted-foreground py-8">
                  No sales data for the selected period
                </p>
              )}
            </CardContent>
          </Card>

          {/* Daily Sales Table */}
          <Card>
            <CardHeader>
              <CardTitle>Daily Sales</CardTitle>
            </CardHeader>
            <CardContent>
              {dailySales.length > 0 ? (
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead>Date</TableHead>
                      <TableHead className="text-right">Transactions</TableHead>
                      <TableHead className="text-right">Items Sold</TableHead>
                      <TableHead className="text-right">Revenue</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {dailySales.map((day, index) => (
                      <TableRow key={day.date || index}>
                        <TableCell>
                          {format(new Date(day.date), "MMM dd, yyyy")}
                        </TableCell>
                        <TableCell className="text-right">
                          {day.transactionCount}
                        </TableCell>
                        <TableCell className="text-right">
                          {day.itemsSold}
                        </TableCell>
                        <TableCell className="text-right font-medium">
                          {formatCurrency(day.revenue)}
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              ) : (
                <p className="text-center text-muted-foreground py-8">
                  No sales data for the selected period
                </p>
              )}
            </CardContent>
          </Card>
        </>
      )}
    </div>
  );
};

export default SalesReportPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\sales\SaleReturnFormPage.jsx"   & echo.. 
/**
 * Sale Return Form Page
 * Process a new return for a sale
 */

import { useState, useEffect } from "react";
import { useNavigate, useSearchParams } from "react-router-dom";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { ArrowLeft, Search, Undo2 } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import { Checkbox } from "@/components/ui/checkbox";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { PageHeader, ButtonSpinner } from "@/components/common";
import { useSale, useCreateSaleReturn } from "@/features/sales";
import { formatCurrency, formatDateTime } from "@/utils/formatters";
import { ROUTES } from "@/config";

const returnReasons = [
  "Defective Product",
  "Wrong Product",
  "Expired Product",
  "Customer Changed Mind",
  "Allergic Reaction",
  "Wrong Quantity",
  "Other",
];

const returnSchema = z.object({
  reason: z.string().min(1, "Reason is required"),
  notes: z.string().optional(),
  refundMethod: z.enum(["CASH", "CREDIT", "ORIGINAL_METHOD"]),
});

const SaleReturnFormPage = () => {
  const navigate = useNavigate();
  const [searchParams] = useSearchParams();
  const saleIdParam = searchParams.get("saleId");

  const [invoiceSearch, setInvoiceSearch] = useState("");
  const [saleId, setSaleId] = useState(saleIdParam);
  const [selectedItems, setSelectedItems] = useState({});
  const [returnQuantities, setReturnQuantities] = useState({});

  // Queries
  const { data: sale, isLoading: saleLoading } = useSale(saleId);
  const createReturnMutation = useCreateSaleReturn();

  const form = useForm({
    resolver: zodResolver(returnSchema),
    defaultValues: {
      reason: "",
      notes: "",
      refundMethod: "ORIGINAL_METHOD",
    },
  });

  // Initialize return quantities when sale loads
  useEffect(() => {
    if (sale?.items) {
      const quantities = {};
      const selected = {};
      sale.items.forEach((item) => {
        quantities[item.id] = item.quantity - (item.returnedQuantity || 0);
        selected[item.id] = false;
      });
      setReturnQuantities(quantities);
      setSelectedItems(selected);
    }
  }, [sale]);

  // Search for sale by invoice
  const handleSearch = () => {
    if (invoiceSearch.trim()) {
      // In a real app, this would search and return the sale ID
      // For now, we'll just set it directly if it looks like an ID
      setSaleId(invoiceSearch);
    }
  };

  // Calculate refund total
  const calculateRefundTotal = () => {
    if (!sale?.items) return 0;
    return sale.items.reduce((total, item) => {
      if (selectedItems[item.id]) {
        return total + item.unitPrice * returnQuantities[item.id];
      }
      return total;
    }, 0);
  };

  // Handle submit
  const onSubmit = (data) => {
    const returnItems = sale.items
      .filter((item) => selectedItems[item.id] && returnQuantities[item.id] > 0)
      .map((item) => ({
        saleItemId: item.id,
        quantity: returnQuantities[item.id],
      }));

    if (returnItems.length === 0) {
      return;
    }

    createReturnMutation.mutate(
      {
        saleId: sale.id,
        items: returnItems,
        reason: data.reason,
        notes: data.notes,
        refundMethod: data.refundMethod,
      },
      {
        onSuccess: () => {
          navigate(ROUTES.SALE_RETURNS.LIST);
        },
      }
    );
  };

  return (
    <div className="container mx-auto py-6 space-y-6">
      <Button variant="ghost" onClick={() => navigate(-1)} className="gap-2">
        <ArrowLeft className="h-4 w-4" />
        Back
      </Button>

      <PageHeader
        title="Process Sale Return"
        description="Select items to return and process refund"
      />

      {/* Sale Search */}
      {!sale && (
        <Card>
          <CardHeader>
            <CardTitle>Find Sale</CardTitle>
            <CardDescription>
              Enter the invoice number to find the original sale
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="flex gap-2">
              <Input
                placeholder="Enter invoice number..."
                value={invoiceSearch}
                onChange={(e) => setInvoiceSearch(e.target.value)}
                className="max-w-md"
              />
              <Button onClick={handleSearch}>
                <Search className="h-4 w-4 mr-2" />
                Search
              </Button>
            </div>
          </CardContent>
        </Card>
      )}

      {/* Sale Details */}
      {sale && (
        <Form {...form}>
          <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
            <Card>
              <CardHeader>
                <CardTitle>Original Sale Details</CardTitle>
              </CardHeader>
              <CardContent className="grid gap-4 md:grid-cols-4">
                <div>
                  <Label className="text-muted-foreground">Invoice #</Label>
                  <p className="font-medium">{sale.invoiceNumber}</p>
                </div>
                <div>
                  <Label className="text-muted-foreground">Date</Label>
                  <p className="font-medium">
                    {formatDateTime(sale.createdAt)}
                  </p>
                </div>
                <div>
                  <Label className="text-muted-foreground">Customer</Label>
                  <p className="font-medium">
                    {sale.customerName || "Walk-in"}
                  </p>
                </div>
                <div>
                  <Label className="text-muted-foreground">
                    Original Total
                  </Label>
                  <p className="font-medium">
                    {formatCurrency(sale.totalAmount)}
                  </p>
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle>Select Items to Return</CardTitle>
                <CardDescription>
                  Check the items you want to return and specify quantities
                </CardDescription>
              </CardHeader>
              <CardContent>
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead className="w-12">Return</TableHead>
                      <TableHead>Product</TableHead>
                      <TableHead>Original Qty</TableHead>
                      <TableHead>Already Returned</TableHead>
                      <TableHead>Return Qty</TableHead>
                      <TableHead className="text-right">Unit Price</TableHead>
                      <TableHead className="text-right">Refund</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {sale.items?.map((item) => {
                      const maxReturn =
                        item.quantity - (item.returnedQuantity || 0);
                      const isSelected = selectedItems[item.id];

                      return (
                        <TableRow key={item.id}>
                          <TableCell>
                            <Checkbox
                              checked={isSelected}
                              onCheckedChange={(checked) =>
                                setSelectedItems({
                                  ...selectedItems,
                                  [item.id]: checked,
                                })
                              }
                              disabled={maxReturn <= 0}
                            />
                          </TableCell>
                          <TableCell>
                            <p className="font-medium">{item.productName}</p>
                            <p className="text-sm text-muted-foreground">
                              {item.sku}
                            </p>
                          </TableCell>
                          <TableCell>{item.quantity}</TableCell>
                          <TableCell>{item.returnedQuantity || 0}</TableCell>
                          <TableCell>
                            <Input
                              type="number"
                              value={returnQuantities[item.id] || 0}
                              onChange={(e) =>
                                setReturnQuantities({
                                  ...returnQuantities,
                                  [item.id]: Math.min(
                                    Math.max(0, parseInt(e.target.value) || 0),
                                    maxReturn
                                  ),
                                })
                              }
                              disabled={!isSelected || maxReturn <= 0}
                              className="w-20"
                              min={0}
                              max={maxReturn}
                            />
                          </TableCell>
                          <TableCell className="text-right">
                            {formatCurrency(item.unitPrice)}
                          </TableCell>
                          <TableCell className="text-right font-bold">
                            {isSelected
                              ? formatCurrency(
                                  item.unitPrice * returnQuantities[item.id]
                                )
                              : "-"}
                          </TableCell>
                        </TableRow>
                      );
                    })}
                  </TableBody>
                </Table>

                <Separator className="my-4" />

                <div className="flex justify-end">
                  <div className="text-right">
                    <p className="text-sm text-muted-foreground">
                      Total Refund
                    </p>
                    <p className="text-2xl font-bold">
                      {formatCurrency(calculateRefundTotal())}
                    </p>
                  </div>
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle>Return Details</CardTitle>
              </CardHeader>
              <CardContent className="grid gap-6 md:grid-cols-2">
                <FormField
                  control={form.control}
                  name="reason"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Return Reason *</FormLabel>
                      <Select
                        onValueChange={field.onChange}
                        value={field.value}
                      >
                        <FormControl>
                          <SelectTrigger>
                            <SelectValue placeholder="Select reason" />
                          </SelectTrigger>
                        </FormControl>
                        <SelectContent>
                          {returnReasons.map((reason) => (
                            <SelectItem key={reason} value={reason}>
                              {reason}
                            </SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                <FormField
                  control={form.control}
                  name="refundMethod"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>Refund Method *</FormLabel>
                      <Select
                        onValueChange={field.onChange}
                        value={field.value}
                      >
                        <FormControl>
                          <SelectTrigger>
                            <SelectValue />
                          </SelectTrigger>
                        </FormControl>
                        <SelectContent>
                          <SelectItem value="ORIGINAL_METHOD">
                            Original Payment Method
                          </SelectItem>
                          <SelectItem value="CASH">Cash</SelectItem>
                          <SelectItem value="CREDIT">Store Credit</SelectItem>
                        </SelectContent>
                      </Select>
                      <FormMessage />
                    </FormItem>
                  )}
                />

                <div className="md:col-span-2">
                  <FormField
                    control={form.control}
                    name="notes"
                    render={({ field }) => (
                      <FormItem>
                        <FormLabel>Additional Notes</FormLabel>
                        <FormControl>
                          <Textarea
                            placeholder="Enter any additional notes about this return..."
                            {...field}
                            rows={3}
                          />
                        </FormControl>
                        <FormMessage />
                      </FormItem>
                    )}
                  />
                </div>
              </CardContent>
            </Card>

            <div className="flex justify-end gap-4">
              <Button
                type="button"
                variant="outline"
                onClick={() => navigate(-1)}
              >
                Cancel
              </Button>
              <Button
                type="submit"
                disabled={
                  createReturnMutation.isPending || calculateRefundTotal() === 0
                }
              >
                {createReturnMutation.isPending && <ButtonSpinner />}
                <Undo2 className="h-4 w-4 mr-2" />
                Process Return
              </Button>
            </div>
          </form>
        </Form>
      )}
    </div>
  );
};

export default SaleReturnFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\sales\SaleReturnsPage.jsx"   & echo.. 
/**
 * Sale Returns Page
 * Process and manage sale returns
 */

import { useState } from "react";
import { useNavigate, useSearchParams } from "react-router-dom";
import { Eye, CheckCircle, XCircle } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { PageHeader, DataTable } from "@/components/common";
import { useSaleReturns, useApproveSaleReturn } from "@/features/sales";
import { formatCurrency, formatDateTime } from "@/utils/formatters";
import { ROUTES } from "@/config";

// Status badge variants
const statusConfig = {
  PENDING: { label: "Pending", variant: "warning" },
  APPROVED: { label: "Approved", variant: "success" },
  REJECTED: { label: "Rejected", variant: "destructive" },
  COMPLETED: { label: "Completed", variant: "default" },
};

const SaleReturnsPage = () => {
  const navigate = useNavigate();
  const [searchParams] = useSearchParams();
  const [filters, setFilters] = useState({
    search: "",
    status: "all",
    page: 0,
    size: 20,
  });

  // Query
  const { data, isLoading } = useSaleReturns({
    ...filters,
    status: filters.status === "all" ? undefined : filters.status,
  });
  const approveMutation = useApproveSaleReturn();

  const returns = data?.content || data || [];
  const totalPages = data?.totalPages || 1;

  // Columns
  const columns = [
    {
      accessorKey: "returnNumber",
      header: "Return #",
      cell: ({ row }) => (
        <span className="font-medium">{row.getValue("returnNumber")}</span>
      ),
    },
    {
      accessorKey: "originalInvoiceNumber",
      header: "Original Invoice",
    },
    {
      accessorKey: "createdAt",
      header: "Date",
      cell: ({ row }) => formatDateTime(row.getValue("createdAt")),
    },
    {
      accessorKey: "customerName",
      header: "Customer",
      cell: ({ row }) => row.getValue("customerName") || "Walk-in",
    },
    {
      accessorKey: "reason",
      header: "Reason",
      cell: ({ row }) => (
        <span className="truncate max-w-[200px] block">
          {row.getValue("reason")}
        </span>
      ),
    },
    {
      accessorKey: "refundAmount",
      header: "Refund Amount",
      cell: ({ row }) => (
        <span className="font-bold">
          {formatCurrency(row.getValue("refundAmount"))}
        </span>
      ),
    },
    {
      accessorKey: "status",
      header: "Status",
      cell: ({ row }) => {
        const status = row.getValue("status") || "PENDING";
        const config = statusConfig[status] || statusConfig.PENDING;
        return <Badge variant={config.variant}>{config.label}</Badge>;
      },
    },
    {
      id: "actions",
      header: "Actions",
      cell: ({ row }) => {
        const returnItem = row.original;
        const isPending = returnItem.status === "PENDING";

        return (
          <div className="flex gap-1">
            <Button
              variant="ghost"
              size="icon"
              onClick={() => navigate(ROUTES.SALE_RETURNS.VIEW(returnItem.id))}
              title="View Details"
            >
              <Eye className="h-4 w-4" />
            </Button>
            {isPending && (
              <>
                <Button
                  variant="ghost"
                  size="icon"
                  onClick={() => approveMutation.mutate(returnItem.id)}
                  title="Approve"
                >
                  <CheckCircle className="h-4 w-4 text-green-600" />
                </Button>
                <Button variant="ghost" size="icon" title="Reject">
                  <XCircle className="h-4 w-4 text-destructive" />
                </Button>
              </>
            )}
          </div>
        );
      },
    },
  ];

  return (
    <div className="container mx-auto py-6 space-y-6">
      <PageHeader
        title="Sale Returns"
        description="View and manage sale returns"
      >
        <Button onClick={() => navigate(ROUTES.SALE_RETURNS.CREATE)}>
          Process Return
        </Button>
      </PageHeader>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-4">
        <Input
          placeholder="Search by return or invoice number..."
          value={filters.search}
          onChange={(e) =>
            setFilters({ ...filters, search: e.target.value, page: 0 })
          }
          className="sm:w-80"
        />
        <Select
          value={filters.status}
          onValueChange={(value) =>
            setFilters({ ...filters, status: value, page: 0 })
          }
        >
          <SelectTrigger className="w-40">
            <SelectValue placeholder="All Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="PENDING">Pending</SelectItem>
            <SelectItem value="APPROVED">Approved</SelectItem>
            <SelectItem value="REJECTED">Rejected</SelectItem>
            <SelectItem value="COMPLETED">Completed</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={returns}
        isLoading={isLoading}
        pagination={{
          pageIndex: filters.page,
          pageSize: filters.size,
          pageCount: totalPages,
          onPageChange: (page) => setFilters({ ...filters, page }),
        }}
      />
    </div>
  );
};

export default SaleReturnsPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\sales\SalesHistoryPage.jsx"   & echo.. 
/**
 * Sales History Page
 * View and manage past sales
 */

import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { Eye, Undo2, Ban, FileText, Download } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import { PageHeader, DataTable } from "@/components/common";
import { useSales, useVoidSale } from "@/features/sales";
import { formatCurrency, formatDateTime } from "@/utils/formatters";
import { ROUTES } from "@/config";

// Status badge variants
const statusConfig = {
  COMPLETED: { label: "Completed", variant: "success" },
  VOIDED: { label: "Voided", variant: "destructive" },
  PARTIALLY_RETURNED: { label: "Partially Returned", variant: "warning" },
  RETURNED: { label: "Returned", variant: "secondary" },
};

const SalesHistoryPage = () => {
  const navigate = useNavigate();
  const [filters, setFilters] = useState({
    search: "",
    status: "all",
    page: 0,
    size: 20,
  });
  const [voidDialog, setVoidDialog] = useState({ open: false, sale: null });
  const [voidReason, setVoidReason] = useState("");

  // Query
  const { data, isLoading } = useSales({
    ...filters,
    status: filters.status === "all" ? undefined : filters.status,
  });
  const voidMutation = useVoidSale();

  const sales = data?.content || data || [];
  const totalPages = data?.totalPages || 1;

  // Handle void
  const handleVoid = () => {
    if (voidDialog.sale && voidReason.trim()) {
      voidMutation.mutate(
        { id: voidDialog.sale.id, reason: voidReason },
        {
          onSuccess: () => {
            setVoidDialog({ open: false, sale: null });
            setVoidReason("");
          },
        }
      );
    }
  };

  // Columns
  const columns = [
    {
      accessorKey: "invoiceNumber",
      header: "Invoice #",
      cell: ({ row }) => (
        <span className="font-medium text-xs sm:text-sm">
          {row.getValue("invoiceNumber")}
        </span>
      ),
    },
    {
      accessorKey: "createdAt",
      header: "Date",
      meta: { className: "hidden md:table-cell" },
      cell: ({ row }) => formatDateTime(row.getValue("createdAt")),
    },
    {
      accessorKey: "customerName",
      header: "Customer",
      meta: { className: "hidden sm:table-cell" },
      cell: ({ row }) => row.getValue("customerName") || "Walk-in",
    },
    {
      accessorKey: "itemCount",
      header: "Items",
      meta: { className: "hidden lg:table-cell" },
      cell: ({ row }) =>
        row.original.items?.length || row.getValue("itemCount") || 0,
    },
    {
      accessorKey: "paymentMethod",
      header: "Payment",
      meta: { className: "hidden sm:table-cell" },
      cell: ({ row }) => (
        <Badge variant="outline">{row.getValue("paymentMethod")}</Badge>
      ),
    },
    {
      accessorKey: "totalAmount",
      header: "Total",
      cell: ({ row }) => (
        <span className="font-bold text-xs sm:text-sm">
          {formatCurrency(row.getValue("totalAmount"))}
        </span>
      ),
    },
    {
      accessorKey: "status",
      header: "Status",
      cell: ({ row }) => {
        const status = row.getValue("status") || "COMPLETED";
        const config = statusConfig[status] || statusConfig.COMPLETED;
        return (
          <Badge variant={config.variant} className="text-xs">
            {config.label}
          </Badge>
        );
      },
    },
    {
      id: "actions",
      header: "Actions",
      cell: ({ row }) => {
        const sale = row.original;
        const isVoided = sale.status === "VOIDED";

        return (
          <div className="flex gap-0.5 sm:gap-1">
            <Button
              variant="ghost"
              size="icon"
              className="h-7 w-7 sm:h-8 sm:w-8"
              onClick={() => navigate(`${ROUTES.SALES.ROOT}/${sale.id}`)}
              title="View Details"
            >
              <Eye className="h-3.5 w-3.5 sm:h-4 sm:w-4" />
            </Button>
            {!isVoided && (
              <>
                <Button
                  variant="ghost"
                  size="icon"
                  className="h-7 w-7 sm:h-8 sm:w-8 hidden sm:inline-flex"
                  onClick={() =>
                    navigate(`${ROUTES.SALE_RETURNS.CREATE}?saleId=${sale.id}`)
                  }
                  title="Process Return"
                >
                  <Undo2 className="h-3.5 w-3.5 sm:h-4 sm:w-4" />
                </Button>
                <Button
                  variant="ghost"
                  size="icon"
                  className="h-7 w-7 sm:h-8 sm:w-8 hidden sm:inline-flex"
                  onClick={() => setVoidDialog({ open: true, sale })}
                  title="Void Sale"
                >
                  <Ban className="h-3.5 w-3.5 sm:h-4 sm:w-4 text-destructive" />
                </Button>
              </>
            )}
            <Button
              variant="ghost"
              size="icon"
              className="h-7 w-7 sm:h-8 sm:w-8 hidden md:inline-flex"
              title="Download Invoice"
            >
              <Download className="h-3.5 w-3.5 sm:h-4 sm:w-4" />
            </Button>
          </div>
        );
      },
    },
  ];

  return (
    <div className="space-y-4 sm:space-y-6">
      <PageHeader
        title="Sales History"
        description="View and manage all sales transactions"
      >
        <Button
          onClick={() => navigate(ROUTES.POS.ROOT)}
          size="sm"
          className="w-full sm:w-auto"
        >
          <FileText className="h-4 w-4 mr-2" />
          New Sale
        </Button>
      </PageHeader>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-3 sm:gap-4">
        <Input
          placeholder="Search by invoice..."
          value={filters.search}
          onChange={(e) =>
            setFilters({ ...filters, search: e.target.value, page: 0 })
          }
          className="w-full sm:w-64 md:w-80"
        />
        <Select
          value={filters.status}
          onValueChange={(value) =>
            setFilters({ ...filters, status: value, page: 0 })
          }
        >
          <SelectTrigger className="w-40">
            <SelectValue placeholder="All Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="COMPLETED">Completed</SelectItem>
            <SelectItem value="VOIDED">Voided</SelectItem>
            <SelectItem value="PARTIALLY_RETURNED">
              Partially Returned
            </SelectItem>
            <SelectItem value="RETURNED">Returned</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={sales}
        isLoading={isLoading}
        pagination={{
          pageIndex: filters.page,
          pageSize: filters.size,
          pageCount: totalPages,
          onPageChange: (page) => setFilters({ ...filters, page }),
        }}
      />

      {/* Void Dialog */}
      <Dialog
        open={voidDialog.open}
        onOpenChange={(open) => {
          if (!open) {
            setVoidDialog({ open: false, sale: null });
            setVoidReason("");
          }
        }}
      >
        <DialogContent>
          <DialogHeader>
            <DialogTitle>Void Sale</DialogTitle>
            <DialogDescription>
              This action cannot be undone. The sale will be marked as voided
              and inventory will be restored.
            </DialogDescription>
          </DialogHeader>
          {voidDialog.sale && (
            <div className="py-4">
              <div className="rounded-lg border p-4 mb-4">
                <p className="font-medium">{voidDialog.sale.invoiceNumber}</p>
                <p className="text-sm text-muted-foreground">
                  {formatDateTime(voidDialog.sale.createdAt)}
                </p>
                <p className="font-bold mt-2">
                  {formatCurrency(voidDialog.sale.totalAmount)}
                </p>
              </div>
              <div className="space-y-2">
                <Label>Reason for Voiding *</Label>
                <Textarea
                  value={voidReason}
                  onChange={(e) => setVoidReason(e.target.value)}
                  placeholder="Enter the reason for voiding this sale..."
                  rows={3}
                />
              </div>
            </div>
          )}
          <DialogFooter>
            <Button
              variant="outline"
              onClick={() => setVoidDialog({ open: false, sale: null })}
            >
              Cancel
            </Button>
            <Button
              variant="destructive"
              onClick={handleVoid}
              disabled={!voidReason.trim() || voidMutation.isPending}
            >
              Void Sale
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default SalesHistoryPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\sales\SaleViewPage.jsx"   & echo.. 
/**
 * Sale View Page
 * Detailed view of a single sale
 */

import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft, Download, Printer, Undo2, Ban } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { PageHeader, LoadingScreen } from "@/components/common";
import { useSale } from "@/features/sales";
import { formatCurrency, formatDateTime } from "@/utils/formatters";
import { ROUTES } from "@/config";

// Status badge variants
const statusConfig = {
  COMPLETED: { label: "Completed", variant: "success" },
  VOIDED: { label: "Voided", variant: "destructive" },
  PARTIALLY_RETURNED: { label: "Partially Returned", variant: "warning" },
  RETURNED: { label: "Returned", variant: "secondary" },
};

const SaleViewPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const { data: sale, isLoading } = useSale(id);

  if (isLoading) {
    return <LoadingScreen />;
  }

  if (!sale) {
    return (
      <div className="container mx-auto py-6">
        <p>Sale not found</p>
      </div>
    );
  }

  const status = sale.status || "COMPLETED";
  const statusConfig1 = statusConfig[status] || statusConfig.COMPLETED;
  const isVoided = status === "VOIDED";

  return (
    <div className="container mx-auto py-6 space-y-6">
      <Button variant="ghost" onClick={() => navigate(-1)} className="gap-2">
        <ArrowLeft className="h-4 w-4" />
        Back
      </Button>

      <PageHeader
        title={`Invoice: ${sale.invoiceNumber}`}
        description={`Sale completed on ${formatDateTime(sale.createdAt)}`}
      >
        <div className="flex gap-2">
          {!isVoided && (
            <>
              <Button
                variant="outline"
                onClick={() =>
                  navigate(`${ROUTES.SALE_RETURNS.CREATE}?saleId=${sale.id}`)
                }
              >
                <Undo2 className="h-4 w-4 mr-2" />
                Return
              </Button>
              <Button variant="outline">
                <Ban className="h-4 w-4 mr-2" />
                Void
              </Button>
            </>
          )}
          <Button variant="outline" onClick={() => window.print()}>
            <Printer className="h-4 w-4 mr-2" />
            Print
          </Button>
          <Button>
            <Download className="h-4 w-4 mr-2" />
            Download
          </Button>
        </div>
      </PageHeader>

      <div className="grid gap-6 lg:grid-cols-3">
        {/* Sale Info */}
        <Card className="lg:col-span-2">
          <CardHeader className="flex flex-row items-center justify-between">
            <CardTitle>Sale Details</CardTitle>
            <Badge variant={statusConfig1.variant}>{statusConfig1.label}</Badge>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-3">
            <div>
              <p className="text-sm text-muted-foreground">Invoice Number</p>
              <p className="font-medium">{sale.invoiceNumber}</p>
            </div>
            <div>
              <p className="text-sm text-muted-foreground">Date & Time</p>
              <p className="font-medium">{formatDateTime(sale.createdAt)}</p>
            </div>
            <div>
              <p className="text-sm text-muted-foreground">Cashier</p>
              <p className="font-medium">{sale.createdBy || "System"}</p>
            </div>
            <div>
              <p className="text-sm text-muted-foreground">Customer</p>
              <p className="font-medium">{sale.customerName || "Walk-in"}</p>
            </div>
            <div>
              <p className="text-sm text-muted-foreground">Payment Method</p>
              <Badge variant="outline">{sale.paymentMethod}</Badge>
            </div>
            <div>
              <p className="text-sm text-muted-foreground">Branch</p>
              <p className="font-medium">{sale.branchName || "Main"}</p>
            </div>
          </CardContent>
        </Card>

        {/* Payment Summary */}
        <Card>
          <CardHeader>
            <CardTitle>Payment Summary</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex justify-between">
              <span className="text-muted-foreground">Subtotal</span>
              <span>{formatCurrency(sale.subtotal || sale.totalAmount)}</span>
            </div>
            {sale.discountAmount > 0 && (
              <div className="flex justify-between text-green-600">
                <span>Discount</span>
                <span>-{formatCurrency(sale.discountAmount)}</span>
              </div>
            )}
            {sale.taxAmount > 0 && (
              <div className="flex justify-between">
                <span className="text-muted-foreground">Tax</span>
                <span>{formatCurrency(sale.taxAmount)}</span>
              </div>
            )}
            <Separator />
            <div className="flex justify-between text-xl font-bold">
              <span>Total</span>
              <span>{formatCurrency(sale.totalAmount)}</span>
            </div>
            {sale.amountTendered > 0 && (
              <>
                <Separator />
                <div className="flex justify-between">
                  <span className="text-muted-foreground">Tendered</span>
                  <span>{formatCurrency(sale.amountTendered)}</span>
                </div>
                <div className="flex justify-between text-green-600 font-medium">
                  <span>Change</span>
                  <span>{formatCurrency(sale.changeGiven)}</span>
                </div>
              </>
            )}
          </CardContent>
        </Card>
      </div>

      {/* Items */}
      <Card>
        <CardHeader>
          <CardTitle>Sale Items</CardTitle>
        </CardHeader>
        <CardContent>
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>Product</TableHead>
                <TableHead>SKU</TableHead>
                <TableHead>Batch</TableHead>
                <TableHead className="text-center">Quantity</TableHead>
                <TableHead className="text-right">Unit Price</TableHead>
                <TableHead className="text-right">Discount</TableHead>
                <TableHead className="text-right">Total</TableHead>
                <TableHead className="text-center">Returned</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {sale.items?.map((item, index) => (
                <TableRow key={item.id || index}>
                  <TableCell className="font-medium">
                    {item.productName}
                  </TableCell>
                  <TableCell>{item.sku}</TableCell>
                  <TableCell>{item.batchNumber || "-"}</TableCell>
                  <TableCell className="text-center">{item.quantity}</TableCell>
                  <TableCell className="text-right">
                    {formatCurrency(item.unitPrice)}
                  </TableCell>
                  <TableCell className="text-right">
                    {item.discountPercent > 0
                      ? `${item.discountPercent}%`
                      : "-"}
                  </TableCell>
                  <TableCell className="text-right font-bold">
                    {formatCurrency(
                      item.totalPrice || item.unitPrice * item.quantity
                    )}
                  </TableCell>
                  <TableCell className="text-center">
                    {item.returnedQuantity > 0 ? (
                      <Badge variant="warning">{item.returnedQuantity}</Badge>
                    ) : (
                      "-"
                    )}
                  </TableCell>
                </TableRow>
              ))}
            </TableBody>
          </Table>
        </CardContent>
      </Card>

      {/* Void Info */}
      {isVoided && sale.voidReason && (
        <Card className="border-destructive">
          <CardHeader>
            <CardTitle className="text-destructive">Void Information</CardTitle>
          </CardHeader>
          <CardContent className="grid gap-4 md:grid-cols-3">
            <div>
              <p className="text-sm text-muted-foreground">Voided By</p>
              <p className="font-medium">{sale.voidedBy || "System"}</p>
            </div>
            <div>
              <p className="text-sm text-muted-foreground">Voided At</p>
              <p className="font-medium">{formatDateTime(sale.voidedAt)}</p>
            </div>
            <div className="md:col-span-3">
              <p className="text-sm text-muted-foreground">Reason</p>
              <p className="font-medium">{sale.voidReason}</p>
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  );
};

export default SaleViewPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\settings\SettingsPage.jsx"   & echo.. 
/**
 * Settings Page
 * Tabbed settings interface for profile, system, and notifications
 */

import { useState, useEffect } from "react";
import { useNavigate, useLocation } from "react-router-dom";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import {
  Settings,
  User,
  Bell,
  Building2,
  Palette,
  Shield,
  Database,
  Receipt,
  MapPin,
} from "lucide-react";

import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Switch } from "@/components/ui/switch";
import { Separator } from "@/components/ui/separator";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { PageHeader, ButtonSpinner } from "@/components/common";
import { useAuthStore, useBranchStore, useUiStore } from "@/store";
import {
  authService,
  userService,
  systemConfigService,
  branchService,
} from "@/services";
import { toast } from "sonner";
import { ROLE_LABELS } from "@/constants";

// Profile schema - matches UpdateUserRequest backend
const profileSchema = z.object({
  fullName: z.string().min(1, "Full name is required").max(200),
  email: z.string().email("Invalid email"),
  phoneNumber: z.string().optional().or(z.literal("")),
});

// Password schema - matches ChangePasswordRequest backend
const passwordSchema = z
  .object({
    currentPassword: z.string().min(1, "Current password is required"),
    newPassword: z.string().min(6, "Password must be at least 6 characters"),
    confirmPassword: z.string().min(1, "Please confirm password"),
  })
  .refine((data) => data.newPassword === data.confirmPassword, {
    message: "Passwords don't match",
    path: ["confirmPassword"],
  });

const SettingsPage = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const { user, setUser } = useAuthStore();
  const { setSelectedBranch, selectedBranch: currentBranch } = useBranchStore();
  const { preferences, updatePreference } = useUiStore();
  const [isUpdating, setIsUpdating] = useState(false);

  // Determine active tab from URL
  const getTabFromPath = (pathname) => {
    if (pathname.includes("/profile")) return "profile";
    if (pathname.includes("/general")) return "profile";
    if (pathname.includes("/branch")) return "branch";
    if (pathname.includes("/tax")) return "tax";
    if (pathname.includes("/notifications")) return "notifications";
    if (pathname.includes("/preferences")) return "preferences";
    return "profile";
  };

  const [activeTab, setActiveTab] = useState(getTabFromPath(location.pathname));

  // Branch and Tax settings state
  const [branches, setBranches] = useState([]);
  const [viewBranch, setViewBranch] = useState("");
  const [branchSettings, setBranchSettings] = useState(() => {
    const saved = localStorage.getItem("branch-settings");
    return saved
      ? JSON.parse(saved)
      : {
          defaultBranch: "",
          allowTransfers: true,
          autoSync: true,
        };
  });
  const [taxSettings, setTaxSettings] = useState(() => {
    const saved = localStorage.getItem("tax-settings");
    return saved
      ? JSON.parse(saved)
      : {
          enableTax: true,
          defaultTaxRate: "0",
          taxInclusive: false,
          multipleTaxRates: false,
        };
  });
  const [isLoadingSettings, setIsLoadingSettings] = useState(false);

  // Update tab when URL changes
  useEffect(() => {
    setActiveTab(getTabFromPath(location.pathname));
  }, [location.pathname]);

  // Load branches
  useEffect(() => {
    const loadBranches = async () => {
      try {
        const response = await branchService.getActive();
        // Extract data from ApiResponse wrapper (response.data.data)
        const branchData = response.data?.data || response.data?.content || [];
        setBranches(Array.isArray(branchData) ? branchData : []);
        console.log("Loaded branches:", branchData);
      } catch (error) {
        console.error("Failed to load branches:", error);
        setBranches([]);
      }
    };
    loadBranches();
  }, []);

  // Sync branch settings with currently selected branch
  useEffect(() => {
    if (currentBranch && currentBranch.id) {
      setBranchSettings((prev) => ({
        ...prev,
        defaultBranch: String(currentBranch.id),
      }));
    }
  }, [currentBranch]);

  // Profile form
  const profileForm = useForm({
    resolver: zodResolver(profileSchema),
    defaultValues: {
      fullName: user?.fullName || "",
      email: user?.email || "",
      phoneNumber: user?.phoneNumber || "",
    },
  });

  // Update form when user changes
  useEffect(() => {
    if (user) {
      profileForm.reset({
        fullName: user.fullName || "",
        email: user.email || "",
        phoneNumber: user.phoneNumber || "",
      });
    }
  }, [user, profileForm]);

  // Password form
  const passwordForm = useForm({
    resolver: zodResolver(passwordSchema),
    defaultValues: {
      currentPassword: "",
      newPassword: "",
      confirmPassword: "",
    },
  });

  const handleProfileUpdate = async (data) => {
    setIsUpdating(true);
    try {
      const response = await userService.update(user.id, {
        fullName: data.fullName,
        email: data.email,
        phoneNumber: data.phoneNumber || null,
        role: user.role, // Keep existing role
        isActive: user.isActive, // Keep existing status
      });

      // Update user in store
      setUser(response.data.data);
      toast.success("Profile updated successfully");
    } catch (error) {
      console.error("Profile update error:", error);
      toast.error(error.response?.data?.message || "Failed to update profile");
    } finally {
      setIsUpdating(false);
    }
  };

  const handlePasswordChange = async (data) => {
    setIsUpdating(true);
    try {
      await authService.changePassword({
        currentPassword: data.currentPassword,
        newPassword: data.newPassword,
        confirmPassword: data.confirmPassword,
      });
      toast.success("Password changed successfully");
      passwordForm.reset();
    } catch (error) {
      console.error("Password change error:", error);
      toast.error(error.response?.data?.message || "Failed to change password");
    } finally {
      setIsUpdating(false);
    }
  };

  // Branch settings handlers
  const handleBranchSettingChange = (key, value) => {
    setBranchSettings((prev) => ({ ...prev, [key]: value }));
  };

  const handleSaveBranchSettings = async () => {
    setIsLoadingSettings(true);
    try {
      // Save to localStorage
      localStorage.setItem("branch-settings", JSON.stringify(branchSettings));
      
      // If a default branch is selected, set it as the active branch
      if (branchSettings.defaultBranch) {
        const selectedBranchId = parseInt(branchSettings.defaultBranch);
        const branch = branches.find((b) => b.id === selectedBranchId);
        
        if (branch) {
          setSelectedBranch(branch);
          toast.success("Branch settings saved and default branch set");
        } else {
          toast.success("Branch settings saved");
        }
      } else {
        toast.success("Branch settings saved");
      }
    } catch (error) {
      console.error("Failed to save branch settings:", error);
      toast.error("Failed to save branch settings");
    } finally {
      setIsLoadingSettings(false);
    }
  };

  // Tax settings handlers
  const handleTaxSettingChange = (key, value) => {
    setTaxSettings((prev) => ({ ...prev, [key]: value }));
  };

  const handleSaveTaxSettings = async () => {
    setIsLoadingSettings(true);
    try {
      // Save to localStorage (backend endpoint not implemented yet)
      localStorage.setItem("tax-settings", JSON.stringify(taxSettings));
      toast.success("Tax settings saved successfully");
    } catch (error) {
      console.error("Failed to save tax settings:", error);
      toast.error("Failed to save tax settings");
    } finally {
      setIsLoadingSettings(false);
    }
  };

  return (
    <div className="space-y-6">
      <PageHeader
        title="Settings"
        description="Manage your account and application preferences"
        icon={Settings}
      />

      <Tabs
        value={activeTab}
        onValueChange={(value) => {
          setActiveTab(value);
          // Update URL when tab changes
          const pathMap = {
            profile: "/settings",
            security: "/settings",
            branch: "/settings/branch",
            tax: "/settings/tax",
            notifications: "/settings/notifications",
            preferences: "/settings/preferences",
          };
          if (pathMap[value] && location.pathname !== pathMap[value]) {
            navigate(pathMap[value], { replace: true });
          }
        }}
        className="space-y-6"
      >
        <TabsList className="grid w-full grid-cols-6 lg:w-[700px]">
          <TabsTrigger value="profile" className="gap-2">
            <User className="h-4 w-4" />
            Profile
          </TabsTrigger>
          <TabsTrigger value="security" className="gap-2">
            <Shield className="h-4 w-4" />
            Security
          </TabsTrigger>
          <TabsTrigger value="branch" className="gap-2">
            <MapPin className="h-4 w-4" />
            Branch
          </TabsTrigger>
          <TabsTrigger value="tax" className="gap-2">
            <Receipt className="h-4 w-4" />
            Tax
          </TabsTrigger>
          <TabsTrigger value="notifications" className="gap-2">
            <Bell className="h-4 w-4" />
            Notifications
          </TabsTrigger>
          <TabsTrigger value="preferences" className="gap-2">
            <Palette className="h-4 w-4" />
            Preferences
          </TabsTrigger>
        </TabsList>

        {/* Profile Tab */}
        <TabsContent value="profile" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle>Profile Information</CardTitle>
              <CardDescription>
                Update your personal information and contact details
              </CardDescription>
            </CardHeader>
            <CardContent>
              <Form {...profileForm}>
                <form
                  onSubmit={profileForm.handleSubmit(handleProfileUpdate)}
                  className="space-y-4"
                >
                  <FormField
                    control={profileForm.control}
                    name="fullName"
                    render={({ field }) => (
                      <FormItem>
                        <FormLabel>Full Name</FormLabel>
                        <FormControl>
                          <Input placeholder="John Doe" {...field} />
                        </FormControl>
                        <FormMessage />
                      </FormItem>
                    )}
                  />
                  <FormField
                    control={profileForm.control}
                    name="email"
                    render={({ field }) => (
                      <FormItem>
                        <FormLabel>Email</FormLabel>
                        <FormControl>
                          <Input
                            type="email"
                            placeholder="john@example.com"
                            {...field}
                          />
                        </FormControl>
                        <FormMessage />
                      </FormItem>
                    )}
                  />
                  <FormField
                    control={profileForm.control}
                    name="phoneNumber"
                    render={({ field }) => (
                      <FormItem>
                        <FormLabel>Phone Number</FormLabel>
                        <FormControl>
                          <Input placeholder="+94 77 123 4567" {...field} />
                        </FormControl>
                        <FormMessage />
                      </FormItem>
                    )}
                  />
                  <Button type="submit" disabled={isUpdating}>
                    {isUpdating && <ButtonSpinner />}
                    Save Changes
                  </Button>
                </form>
              </Form>
            </CardContent>
          </Card>

          {/* Account Info */}
          <Card>
            <CardHeader>
              <CardTitle>Account Information</CardTitle>
              <CardDescription>Your account details and role</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid gap-4 md:grid-cols-2">
                <div>
                  <p className="text-sm text-muted-foreground">Username</p>
                  <p className="font-medium">{user?.username || "-"}</p>
                </div>
                <div>
                  <p className="text-sm text-muted-foreground">Role</p>
                  <p className="font-medium">
                    {ROLE_LABELS[user?.role] || user?.role || "-"}
                  </p>
                </div>
                <div>
                  <p className="text-sm text-muted-foreground">Branch</p>
                  <p className="font-medium">
                    {user?.branch?.branchName || "All Branches"}
                  </p>
                  {user?.branch?.branchCode && (
                    <p className="text-xs text-muted-foreground">
                      Code: {user.branch.branchCode}
                    </p>
                  )}
                </div>
                <div>
                  <p className="text-sm text-muted-foreground">Employee Code</p>
                  <p className="font-medium">{user?.employeeCode || "-"}</p>
                </div>
                <div>
                  <p className="text-sm text-muted-foreground">Status</p>
                  <p className="font-medium">
                    {user?.isActive ? "Active" : "Inactive"}
                  </p>
                </div>
                <div>
                  <p className="text-sm text-muted-foreground">Member Since</p>
                  <p className="font-medium">
                    {user?.createdAt
                      ? new Date(user.createdAt).toLocaleDateString()
                      : "-"}
                  </p>
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Security Tab */}
        <TabsContent value="security" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle>Change Password</CardTitle>
              <CardDescription>
                Update your password to keep your account secure
              </CardDescription>
            </CardHeader>
            <CardContent>
              <Form {...passwordForm}>
                <form
                  onSubmit={passwordForm.handleSubmit(handlePasswordChange)}
                  className="space-y-4 max-w-md"
                >
                  <FormField
                    control={passwordForm.control}
                    name="currentPassword"
                    render={({ field }) => (
                      <FormItem>
                        <FormLabel>Current Password</FormLabel>
                        <FormControl>
                          <Input type="password" {...field} />
                        </FormControl>
                        <FormMessage />
                      </FormItem>
                    )}
                  />
                  <FormField
                    control={passwordForm.control}
                    name="newPassword"
                    render={({ field }) => (
                      <FormItem>
                        <FormLabel>New Password</FormLabel>
                        <FormControl>
                          <Input type="password" {...field} />
                        </FormControl>
                        <FormDescription>
                          Must be at least 8 characters
                        </FormDescription>
                        <FormMessage />
                      </FormItem>
                    )}
                  />
                  <FormField
                    control={passwordForm.control}
                    name="confirmPassword"
                    render={({ field }) => (
                      <FormItem>
                        <FormLabel>Confirm New Password</FormLabel>
                        <FormControl>
                          <Input type="password" {...field} />
                        </FormControl>
                        <FormMessage />
                      </FormItem>
                    )}
                  />
                  <Button type="submit" disabled={isUpdating}>
                    {isUpdating && <ButtonSpinner />}
                    Change Password
                  </Button>
                </form>
              </Form>
            </CardContent>
          </Card>

          {/* Two-Factor Authentication */}
          <Card>
            <CardHeader>
              <CardTitle>Two-Factor Authentication</CardTitle>
              <CardDescription>
                Add an extra layer of security to your account
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Enable 2FA</p>
                  <p className="text-sm text-muted-foreground">
                    Use an authenticator app to generate verification codes
                  </p>
                </div>
                <Switch disabled />
              </div>
              <p className="text-sm text-muted-foreground mt-2">Coming soon</p>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Notifications Tab */}
        <TabsContent value="notifications" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle>Notification Preferences</CardTitle>
              <CardDescription>
                Choose what notifications you want to receive
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Low Stock Alerts</p>
                  <p className="text-sm text-muted-foreground">
                    Get notified when products are running low
                  </p>
                </div>
                <Switch defaultChecked />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Expiry Alerts</p>
                  <p className="text-sm text-muted-foreground">
                    Get notified about products nearing expiry
                  </p>
                </div>
                <Switch defaultChecked />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Order Updates</p>
                  <p className="text-sm text-muted-foreground">
                    Notifications for purchase order status changes
                  </p>
                </div>
                <Switch defaultChecked />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Daily Summary</p>
                  <p className="text-sm text-muted-foreground">
                    Receive a daily summary of sales and activities
                  </p>
                </div>
                <Switch />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Email Notifications</p>
                  <p className="text-sm text-muted-foreground">
                    Receive notifications via email
                  </p>
                </div>
                <Switch />
              </div>
            </CardContent>
          </Card>
        </TabsContent>
        {/* Branch Settings Tab */}
        <TabsContent value="branch" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle>Branch Configuration</CardTitle>
              <CardDescription>
                Configure branch settings and preferences
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="space-y-2">
                <Label>Default Branch</Label>
                <Select
                  value={branchSettings.defaultBranch}
                  onValueChange={(value) =>
                    handleBranchSettingChange("defaultBranch", value)
                  }
                >
                  <SelectTrigger>
                    <SelectValue placeholder="Select default branch" />
                  </SelectTrigger>
                  <SelectContent>
                    {Array.isArray(branches) && branches.length > 0 ? (
                      branches.map((branch) => (
                        <SelectItem key={branch.id} value={String(branch.id)}>
                          {branch.branchName || branch.name} - {branch.branchCode || branch.code}
                        </SelectItem>
                      ))
                    ) : (
                      <SelectItem value="none" disabled>
                        No branches available
                      </SelectItem>
                    )}
                  </SelectContent>
                </Select>
                <p className="text-xs text-muted-foreground">
                  The default branch for operations and reporting
                </p>
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Allow Branch Transfers</p>
                  <p className="text-sm text-muted-foreground">
                    Enable inventory transfers between branches
                  </p>
                </div>
                <Switch
                  checked={branchSettings.allowTransfers}
                  onCheckedChange={(checked) =>
                    handleBranchSettingChange("allowTransfers", checked)
                  }
                />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Auto Sync</p>
                  <p className="text-sm text-muted-foreground">
                    Automatically sync data across branches
                  </p>
                </div>
                <Switch
                  checked={branchSettings.autoSync}
                  onCheckedChange={(checked) =>
                    handleBranchSettingChange("autoSync", checked)
                  }
                />
              </div>
              <Separator />
              <Button
                onClick={handleSaveBranchSettings}
                disabled={isLoadingSettings}
              >
                {isLoadingSettings && <ButtonSpinner />}
                Save Branch Settings
              </Button>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle>Branch Selection</CardTitle>
              <CardDescription>
                View and manage branch information
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="space-y-2">
                <Label>Select Branch to View</Label>
                <Select
                  value={viewBranch}
                  onValueChange={setViewBranch}
                >
                  <SelectTrigger>
                    <SelectValue placeholder="Select a branch" />
                  </SelectTrigger>
                  <SelectContent>
                    {Array.isArray(branches) && branches.length > 0 ? (
                      branches.map((branch) => (
                        <SelectItem key={branch.id} value={String(branch.id)}>
                          {branch.branchName}
                        </SelectItem>
                      ))
                    ) : (
                      <SelectItem value="none" disabled>
                        No branches available
                      </SelectItem>
                    )}
                  </SelectContent>
                </Select>
              </div>
              {viewBranch && (
                <div className="space-y-2 pt-4">
                  {branches
                    .filter((b) => String(b.id) === viewBranch)
                    .map((branch) => (
                      <div key={branch.id} className="space-y-3">
                        <div className="grid grid-cols-2 gap-4">
                          <div>
                            <Label className="text-muted-foreground">
                              Branch Code
                            </Label>
                            <p className="font-medium">{branch.branchCode}</p>
                          </div>
                          <div>
                            <Label className="text-muted-foreground">
                              Contact
                            </Label>
                            <p className="font-medium">
                              {branch.contactNumber || "N/A"}
                            </p>
                          </div>
                          <div className="col-span-2">
                            <Label className="text-muted-foreground">
                              Address
                            </Label>
                            <p className="font-medium">
                              {branch.address || "N/A"}
                            </p>
                          </div>
                        </div>
                      </div>
                    ))}
                </div>
              )}
            </CardContent>
          </Card>
        </TabsContent>

        {/* Tax Settings Tab */}
        <TabsContent value="tax" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle>Tax Configuration</CardTitle>
              <CardDescription>
                Configure tax rates and tax-related settings
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Enable Tax</p>
                  <p className="text-sm text-muted-foreground">
                    Apply tax to sales and purchases
                  </p>
                </div>
                <Switch
                  checked={taxSettings.enableTax}
                  onCheckedChange={(checked) =>
                    handleTaxSettingChange("enableTax", checked)
                  }
                />
              </div>
              <Separator />
              <div className="space-y-2">
                <Label>Default Tax Rate (%)</Label>
                <Input
                  type="number"
                  min="0"
                  max="100"
                  step="0.01"
                  value={taxSettings.defaultTaxRate}
                  onChange={(e) =>
                    handleTaxSettingChange("defaultTaxRate", e.target.value)
                  }
                  placeholder="0.00"
                />
                <p className="text-xs text-muted-foreground">
                  The default tax rate applied to transactions
                </p>
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Tax Inclusive Pricing</p>
                  <p className="text-sm text-muted-foreground">
                    Product prices include tax
                  </p>
                </div>
                <Switch
                  checked={taxSettings.taxInclusive}
                  onCheckedChange={(checked) =>
                    handleTaxSettingChange("taxInclusive", checked)
                  }
                />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Multiple Tax Rates</p>
                  <p className="text-sm text-muted-foreground">
                    Allow different tax rates for different products
                  </p>
                </div>
                <Switch
                  checked={taxSettings.multipleTaxRates}
                  onCheckedChange={(checked) =>
                    handleTaxSettingChange("multipleTaxRates", checked)
                  }
                />
              </div>
              <Separator />
              <Button
                onClick={handleSaveTaxSettings}
                disabled={isLoadingSettings}
              >
                {isLoadingSettings && <ButtonSpinner />}
                Save Tax Settings
              </Button>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle>Tax Information</CardTitle>
              <CardDescription>
                Additional tax configuration details
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="rounded-lg border p-4 space-y-2">
                <div className="flex items-center justify-between">
                  <span className="text-sm font-medium">Current Tax Rate</span>
                  <span className="text-sm text-muted-foreground">
                    {taxSettings.defaultTaxRate}%
                  </span>
                </div>
                <div className="flex items-center justify-between">
                  <span className="text-sm font-medium">Tax Status</span>
                  <span
                    className={`text-sm ${
                      taxSettings.enableTax
                        ? "text-green-600"
                        : "text-muted-foreground"
                    }`}
                  >
                    {taxSettings.enableTax ? "Enabled" : "Disabled"}
                  </span>
                </div>
                <div className="flex items-center justify-between">
                  <span className="text-sm font-medium">Pricing Model</span>
                  <span className="text-sm text-muted-foreground">
                    {taxSettings.taxInclusive
                      ? "Tax Inclusive"
                      : "Tax Exclusive"}
                  </span>
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>
        {/* Preferences Tab */}
        <TabsContent value="preferences" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle>Display Preferences</CardTitle>
              <CardDescription>
                Customize how the application looks
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="grid gap-4 max-w-md">
                <div className="space-y-2">
                  <Label>Theme Mode</Label>
                  <Select
                    value={preferences.themeMode}
                    onValueChange={(value) => {
                      updatePreference("themeMode", value);
                      toast.success("Theme updated");
                    }}
                  >
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="light">Light</SelectItem>
                      <SelectItem value="dark">Dark</SelectItem>
                      <SelectItem value="system">System</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
                <div className="space-y-2">
                  <Label>Color Theme</Label>
                  <Select
                    value={preferences.colorTheme}
                    onValueChange={(value) => {
                      updatePreference("colorTheme", value);
                      toast.success("Color theme updated");
                    }}
                  >
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="blue">Blue (Default)</SelectItem>
                      <SelectItem value="green">Green</SelectItem>
                      <SelectItem value="purple">Purple</SelectItem>
                      <SelectItem value="orange">Orange</SelectItem>
                      <SelectItem value="red">Red</SelectItem>
                      <SelectItem value="slate">Slate</SelectItem>
                    </SelectContent>
                  </Select>
                  <p className="text-xs text-muted-foreground">
                    Choose your preferred accent color
                  </p>
                </div>
                <div className="space-y-2">
                  <Label>Date Format</Label>
                  <Select
                    value={preferences.dateFormat}
                    onValueChange={(value) => {
                      updatePreference("dateFormat", value);
                      toast.success("Date format updated");
                    }}
                  >
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="DD/MM/YYYY">DD/MM/YYYY</SelectItem>
                      <SelectItem value="MM/DD/YYYY">MM/DD/YYYY</SelectItem>
                      <SelectItem value="YYYY-MM-DD">YYYY-MM-DD</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
                <div className="space-y-2">
                  <Label>Currency</Label>
                  <Select
                    value={preferences.currency}
                    onValueChange={(value) => {
                      updatePreference("currency", value);
                      toast.success("Currency updated");
                    }}
                  >
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="LKR">LKR (Rs.)</SelectItem>
                      <SelectItem value="USD">USD ($)</SelectItem>
                      <SelectItem value="EUR">EUR ()</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle>Accessibility</CardTitle>
              <CardDescription>
                Adjust settings to improve accessibility
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">High Contrast Mode</p>
                  <p className="text-sm text-muted-foreground">
                    Increase contrast for better visibility
                  </p>
                </div>
                <Switch
                  checked={preferences.highContrast}
                  onCheckedChange={(checked) => {
                    updatePreference("highContrast", checked);
                    toast.success(checked ? "High contrast enabled" : "High contrast disabled");
                  }}
                />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Reduce Motion</p>
                  <p className="text-sm text-muted-foreground">
                    Minimize animations and transitions
                  </p>
                </div>
                <Switch
                  checked={preferences.reduceMotion}
                  onCheckedChange={(checked) => {
                    updatePreference("reduceMotion", checked);
                    toast.success(checked ? "Reduce motion enabled" : "Reduce motion disabled");
                  }}
                />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Large Text</p>
                  <p className="text-sm text-muted-foreground">
                    Increase font size throughout the app
                  </p>
                </div>
                <Switch
                  checked={preferences.largeText}
                  onCheckedChange={(checked) => {
                    updatePreference("largeText", checked);
                    toast.success(checked ? "Large text enabled" : "Large text disabled");
                  }}
                />
              </div>
              <Separator />
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-medium">Screen Reader Support</p>
                  <p className="text-sm text-muted-foreground">
                    Enable enhanced screen reader compatibility
                  </p>
                </div>
                <Switch
                  checked={preferences.screenReader}
                  onCheckedChange={(checked) => {
                    updatePreference("screenReader", checked);
                    toast.success(checked ? "Screen reader support enabled" : "Screen reader support disabled");
                  }}
                />
              </div>
              <Separator />
              <div className="space-y-2">
                <Label>Keyboard Navigation</Label>
                <Select
                  value={preferences.keyboardNav}
                  onValueChange={(value) =>
                    updatePreference("keyboardNav", value)
                  }
                >
                  <SelectTrigger>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="standard">Standard</SelectItem>
                    <SelectItem value="enhanced">Enhanced</SelectItem>
                    <SelectItem value="vim">Vim-style</SelectItem>
                  </SelectContent>
                </Select>
                <p className="text-xs text-muted-foreground">
                  Choose keyboard navigation style
                </p>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle>Table Preferences</CardTitle>
              <CardDescription>
                Default settings for data tables
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid gap-4 max-w-md">
                <div className="space-y-2">
                  <Label>Default Page Size</Label>
                  <Select
                    value={preferences.tablePageSize}
                    onValueChange={(value) =>
                      updatePreference("tablePageSize", value)
                    }
                  >
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="10">10 rows</SelectItem>
                      <SelectItem value="25">25 rows</SelectItem>
                      <SelectItem value="50">50 rows</SelectItem>
                      <SelectItem value="100">100 rows</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
              </div>
              <div className="flex items-center justify-between max-w-md">
                <div>
                  <p className="font-medium">Compact Tables</p>
                  <p className="text-sm text-muted-foreground">
                    Use smaller row height in tables
                  </p>
                </div>
                <Switch
                  checked={preferences.compactTables}
                  onCheckedChange={(checked) =>
                    updatePreference("compactTables", checked)
                  }
                />
              </div>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>
    </div>
  );
};

export default SettingsPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\suppliers\SupplierFormPage.jsx"   & echo.. 
/**
 * Supplier Form Page
 * Create or edit a supplier
 */

import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useSupplier,
  useCreateSupplier,
  useUpdateSupplier,
  SupplierForm,
} from "@/features/suppliers";
import { PageHeader, PageLoader } from "@/components/common";
import { Button } from "@/components/ui/button";

/**
 * SupplierFormPage component
 */
const SupplierFormPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const isEditing = Boolean(id);

  // Fetch supplier if editing
  const { data: supplier, isLoading } = useSupplier(id);

  // Mutations
  const createSupplier = useCreateSupplier();
  const updateSupplier = useUpdateSupplier();

  const handleSubmit = (data) => {
    if (isEditing) {
      updateSupplier.mutate(
        { id, data },
        {
          onSuccess: () => navigate(ROUTES.SUPPLIERS.LIST),
        }
      );
    } else {
      createSupplier.mutate(data, {
        onSuccess: () => navigate(ROUTES.SUPPLIERS.LIST),
      });
    }
  };

  const handleCancel = () => {
    navigate(-1);
  };

  if (isEditing && isLoading) {
    return <PageLoader message="Loading supplier..." />;
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title={isEditing ? "Edit Supplier" : "Add New Supplier"}
        description={
          isEditing
            ? `Editing: ${supplier?.supplierName}`
            : "Create a new supplier record"
        }
        actions={
          <Button variant="ghost" onClick={() => navigate(-1)}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back
          </Button>
        }
      />

      <div className="max-w-4xl">
        <SupplierForm
          supplier={supplier}
          onSubmit={handleSubmit}
          onCancel={handleCancel}
          isSubmitting={createSupplier.isPending || updateSupplier.isPending}
        />
      </div>
    </div>
  );
};

export default SupplierFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\suppliers\SuppliersPage.jsx"   & echo.. 
/**
 * Suppliers List Page
 * Displays all suppliers with filtering, sorting, and pagination
 */

import { useState, useMemo, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import { Plus, Download, Upload } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useSuppliers,
  useDeleteSupplier,
  useActivateSupplier,
  useDeactivateSupplier,
  getSupplierColumns,
} from "@/features/suppliers";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { useConfirm } from "@/components/common/ConfirmDialog";

/**
 * SuppliersPage component
 */
const SuppliersPage = () => {
  const navigate = useNavigate();
  const confirm = useConfirm();

  // Filters state
  const [searchQuery, setSearchQuery] = useState("");
  const [statusFilter, setStatusFilter] = useState("all");

  // Pagination state
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  // Sorting state
  const [sorting, setSorting] = useState([]);

  // Build query params
  const queryParams = useMemo(
    () => ({
      page: pagination.pageIndex,
      size: pagination.pageSize,
      sort:
        sorting.length > 0
          ? `${sorting[0].id},${sorting[0].desc ? "desc" : "asc"}`
          : "supplierName,asc",
      ...(searchQuery && { search: searchQuery }),
      ...(statusFilter &&
        statusFilter !== "all" && { isActive: statusFilter === "active" }),
    }),
    [pagination, sorting, searchQuery, statusFilter]
  );

  // Fetch suppliers
  const { data, isLoading, isFetching } = useSuppliers(queryParams);
  const deleteSupplier = useDeleteSupplier();
  const activateSupplier = useActivateSupplier();
  const deactivateSupplier = useDeactivateSupplier();

  // Debug: Log supplier data
  console.log('Suppliers Page - Raw data:', data);
  console.log('Suppliers Page - Is loading:', isLoading);

  // Handlers
  const handleView = useCallback(
    (supplier) => {
      navigate(ROUTES.SUPPLIERS.VIEW(supplier.id));
    },
    [navigate]
  );

  const handleEdit = useCallback(
    (supplier) => {
      navigate(ROUTES.SUPPLIERS.EDIT(supplier.id));
    },
    [navigate]
  );

  const handleDelete = useCallback(
    async (supplier) => {
      const confirmed = await confirm({
        title: "Delete Supplier",
        description: `Are you sure you want to delete "${supplier.supplierName}"? This action cannot be undone.`,
        confirmText: "Delete",
        cancelText: "Cancel",
        variant: "destructive",
      });

      if (confirmed) {
        deleteSupplier.mutate(supplier.id);
      }
    },
    [confirm, deleteSupplier]
  );

  const handleActivate = useCallback(
    async (supplier) => {
      activateSupplier.mutate(supplier.id);
    },
    [activateSupplier]
  );

  const handleDeactivate = useCallback(
    async (supplier) => {
      const confirmed = await confirm({
        title: "Deactivate Supplier",
        description: `Deactivate "${supplier.supplierName}"? They won't appear in purchase orders.`,
        confirmText: "Deactivate",
        cancelText: "Cancel",
      });

      if (confirmed) {
        deactivateSupplier.mutate(supplier.id);
      }
    },
    [confirm, deactivateSupplier]
  );

  const handleCreatePO = useCallback(
    (supplier) => {
      navigate(`${ROUTES.PURCHASE_ORDERS.NEW}?supplierId=${supplier.id}`);
    },
    [navigate]
  );

  // Get columns with handlers
  const columns = useMemo(
    () =>
      getSupplierColumns({
        onView: handleView,
        onEdit: handleEdit,
        onDelete: handleDelete,
        onActivate: handleActivate,
        onDeactivate: handleDeactivate,
        onCreatePO: handleCreatePO,
      }),
    [
      handleView,
      handleEdit,
      handleDelete,
      handleActivate,
      handleDeactivate,
      handleCreatePO,
    ]
  );

  return (
    <div className="space-y-6">
      <PageHeader
        title="Suppliers"
        description="Manage your supplier database"
        actions={
          <div className="flex gap-2">
            <Button variant="outline" size="sm">
              <Upload className="mr-2 h-4 w-4" />
              Import
            </Button>
            <Button variant="outline" size="sm">
              <Download className="mr-2 h-4 w-4" />
              Export
            </Button>
            <Button onClick={() => navigate(ROUTES.SUPPLIERS.NEW)}>
              <Plus className="mr-2 h-4 w-4" />
              Add Supplier
            </Button>
          </div>
        }
      />

      {/* Filters */}
      <div className="flex items-center gap-4">
        <Input
          placeholder="Search suppliers..."
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          className="max-w-sm"
        />
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="w-[150px]">
            <SelectValue placeholder="Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All</SelectItem>
            <SelectItem value="active">Active</SelectItem>
            <SelectItem value="inactive">Inactive</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={data?.content || []}
        isLoading={isLoading}
        isFetching={isFetching}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          pageCount: data?.totalPages || 0,
          total: data?.totalElements || 0,
        }}
        onPaginationChange={setPagination}
        sorting={sorting}
        onSortingChange={setSorting}
      />
    </div>
  );
};

export default SuppliersPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\users\UserFormPage.jsx"   & echo.. 
/**
 * User Form Page
 * Create or edit a user
 */

import { useNavigate, useParams } from "react-router-dom";
import { ArrowLeft } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useUser,
  useCreateUser,
  useUpdateUser,
  UserForm,
} from "@/features/users";
import { useBranches } from "@/features/branches";
import { PageHeader, PageLoader } from "@/components/common";
import { Button } from "@/components/ui/button";

/**
 * UserFormPage component
 */
const UserFormPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();
  const isEditing = Boolean(id);

  // Fetch user if editing
  const { data: user, isLoading } = useUser(id);

  // Fetch branches for selection
  const { data: branchesData } = useBranches({ isActive: true, size: 1000 });
  const branches = branchesData?.content || [];

  // Mutations
  const createUser = useCreateUser();
  const updateUser = useUpdateUser();

  const handleSubmit = (data) => {
    if (isEditing) {
      updateUser.mutate(
        { id, data },
        {
          onSuccess: () => navigate(ROUTES.USERS.LIST),
        }
      );
    } else {
      createUser.mutate(data, {
        onSuccess: () => navigate(ROUTES.USERS.LIST),
      });
    }
  };

  const handleCancel = () => {
    navigate(-1);
  };

  if (isEditing && isLoading) {
    return <PageLoader message="Loading user..." />;
  }

  return (
    <div className="space-y-6">
      <PageHeader
        title={isEditing ? "Edit User" : "Add New User"}
        description={
          isEditing
            ? `Editing: ${user?.fullName || user?.username}`
            : "Create a new user account"
        }
        actions={
          <Button variant="ghost" onClick={() => navigate(-1)}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back
          </Button>
        }
      />

      <div className="max-w-4xl">
        <UserForm
          user={user}
          branches={branches}
          onSubmit={handleSubmit}
          onCancel={handleCancel}
          isSubmitting={createUser.isPending || updateUser.isPending}
        />
      </div>
    </div>
  );
};

export default UserFormPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\users\UsersPage.jsx"   & echo.. 
/**
 * Users List Page
 * Displays all users with filtering, sorting, and pagination
 */

import { useState, useMemo, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import { Plus, Download } from "lucide-react";
import { ROUTES } from "@/config";
import {
  useUsers,
  useDeleteUser,
  useActivateUser,
  useDeactivateUser,
  useResetPassword,
  getUserColumns,
} from "@/features/users";
import { PageHeader, DataTable } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { useConfirm } from "@/components/common/ConfirmDialog";
import { ROLE_LABELS } from "@/constants";

/**
 * UsersPage component
 */
const UsersPage = () => {
  const navigate = useNavigate();
  const confirm = useConfirm();

  // Filters state
  const [searchQuery, setSearchQuery] = useState("");
  const [roleFilter, setRoleFilter] = useState("all");
  const [statusFilter, setStatusFilter] = useState("all");

  // Pagination state
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  });

  // Sorting state
  const [sorting, setSorting] = useState([]);

  // Build query params
  const queryParams = useMemo(
    () => ({
      page: pagination.pageIndex,
      size: pagination.pageSize,
      sort:
        sorting.length > 0
          ? `${sorting[0].id},${sorting[0].desc ? "desc" : "asc"}`
          : "firstName,asc",
      ...(searchQuery && { search: searchQuery }),
      ...(roleFilter &&
        roleFilter !== "all" &&
        roleFilter !== "" && { role: roleFilter }),
      ...(statusFilter &&
        statusFilter !== "all" && { isActive: statusFilter === "active" }),
    }),
    [pagination, sorting, searchQuery, roleFilter, statusFilter]
  );

  // Fetch users
  const { data, isLoading, isFetching } = useUsers(queryParams);
  const deleteUser = useDeleteUser();
  const activateUser = useActivateUser();
  const deactivateUser = useDeactivateUser();
  const resetPassword = useResetPassword();

  // Handlers
  const handleView = useCallback(
    (user) => {
      navigate(ROUTES.USERS.VIEW(user.id));
    },
    [navigate]
  );

  const handleEdit = useCallback(
    (user) => {
      navigate(ROUTES.USERS.EDIT(user.id));
    },
    [navigate]
  );

  const handleDelete = useCallback(
    async (user) => {
      const confirmed = await confirm({
        title: "Delete User",
        description: `Are you sure you want to delete "${
          user.fullName || user.username
        }"? This action cannot be undone.`,
        confirmText: "Delete",
        cancelText: "Cancel",
        variant: "destructive",
      });

      if (confirmed) {
        deleteUser.mutate(user.id);
      }
    },
    [confirm, deleteUser]
  );

  const handleActivate = useCallback(
    (user) => {
      activateUser.mutate(user.id);
    },
    [activateUser]
  );

  const handleDeactivate = useCallback(
    async (user) => {
      const confirmed = await confirm({
        title: "Deactivate User",
        description: `Deactivate "${
          user.fullName || user.username
        }"? They won't be able to log in.`,
        confirmText: "Deactivate",
        cancelText: "Cancel",
      });

      if (confirmed) {
        deactivateUser.mutate(user.id);
      }
    },
    [confirm, deactivateUser]
  );

  const handleResetPassword = useCallback(
    async (user) => {
      const confirmed = await confirm({
        title: "Reset Password",
        description: `Send password reset email to "${user.email}"?`,
        confirmText: "Send Reset Email",
        cancelText: "Cancel",
      });

      if (confirmed) {
        resetPassword.mutate(user.id);
      }
    },
    [confirm, resetPassword]
  );

  // Get columns with handlers
  const columns = useMemo(
    () =>
      getUserColumns({
        onView: handleView,
        onEdit: handleEdit,
        onDelete: handleDelete,
        onActivate: handleActivate,
        onDeactivate: handleDeactivate,
        onResetPassword: handleResetPassword,
      }),
    [
      handleView,
      handleEdit,
      handleDelete,
      handleActivate,
      handleDeactivate,
      handleResetPassword,
    ]
  );

  return (
    <div className="space-y-6">
      <PageHeader
        title="Users"
        description="Manage system users and their access"
        actions={
          <div className="flex gap-2">
            <Button variant="outline" size="sm">
              <Download className="mr-2 h-4 w-4" />
              Export
            </Button>
            <Button onClick={() => navigate(ROUTES.USERS.NEW)}>
              <Plus className="mr-2 h-4 w-4" />
              Add User
            </Button>
          </div>
        }
      />

      {/* Filters */}
      <div className="flex flex-wrap items-center gap-4">
        <Input
          placeholder="Search users..."
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          className="max-w-sm"
        />
        <Select value={roleFilter} onValueChange={setRoleFilter}>
          <SelectTrigger className="w-[180px]">
            <SelectValue placeholder="Filter by role" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Roles</SelectItem>
            {Object.entries(ROLE_LABELS).map(([value, label]) => (
              <SelectItem key={value} value={value}>
                {label}
              </SelectItem>
            ))}
          </SelectContent>
        </Select>
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="w-[150px]">
            <SelectValue placeholder="Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All</SelectItem>
            <SelectItem value="active">Active</SelectItem>
            <SelectItem value="inactive">Inactive</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Data Table */}
      <DataTable
        columns={columns}
        data={data?.content || []}
        isLoading={isLoading}
        isFetching={isFetching}
        pagination={{
          pageIndex: pagination.pageIndex,
          pageSize: pagination.pageSize,
          pageCount: data?.totalPages || 0,
          total: data?.totalElements || 0,
        }}
        onPaginationChange={setPagination}
        sorting={sorting}
        onSortingChange={setSorting}
      />
    </div>
  );
};

export default UsersPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\pages\users\UserViewPage.jsx"   & echo.. 
/**
 * User View Page
 * Display detailed information about a user
 */

import { useNavigate, useParams } from "react-router-dom";
import {
  ArrowLeft,
  Edit,
  Mail,
  Phone,
  Building,
  Calendar,
  User,
} from "lucide-react";
import { ROUTES } from "@/config";
import { useUser } from "@/features/users";
import { PageHeader, PageLoader } from "@/components/common";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import { ROLE_LABELS } from "@/constants";

const UserViewPage = () => {
  const navigate = useNavigate();
  const { id } = useParams();

  const { data: user, isLoading } = useUser(id);

  if (isLoading) {
    return <PageLoader message="Loading user details..." />;
  }

  if (!user) {
    return (
      <div className="container mx-auto py-6">
        <div className="text-center">
          <h2 className="text-2xl font-bold">User not found</h2>
          <Button onClick={() => navigate(ROUTES.USERS.LIST)} className="mt-4">
            Back to Users
          </Button>
        </div>
      </div>
    );
  }

  return (
    <div className="container mx-auto py-6 space-y-6">
      <PageHeader
        title="User Details"
        description={`View details for ${user.fullName}`}
      >
        <div className="flex gap-2">
          <Button variant="outline" onClick={() => navigate(ROUTES.USERS.LIST)}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Back to Users
          </Button>
          <Button onClick={() => navigate(ROUTES.USERS.EDIT(id))}>
            <Edit className="mr-2 h-4 w-4" />
            Edit User
          </Button>
        </div>
      </PageHeader>

      <div className="grid gap-6 md:grid-cols-2">
        {/* Basic Information */}
        <Card>
          <CardHeader>
            <CardTitle>Basic Information</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-start gap-3">
              <User className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Full Name
                </p>
                <p className="text-base">{user.fullName}</p>
              </div>
            </div>

            <Separator />

            <div className="flex items-start gap-3">
              <User className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Username
                </p>
                <p className="text-base">@{user.username}</p>
              </div>
            </div>

            <Separator />

            <div className="flex items-start gap-3">
              <Mail className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Email
                </p>
                <p className="text-base">{user.email || "-"}</p>
              </div>
            </div>

            <Separator />

            <div className="flex items-start gap-3">
              <Phone className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Phone Number
                </p>
                <p className="text-base">{user.phoneNumber || "-"}</p>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Account Information */}
        <Card>
          <CardHeader>
            <CardTitle>Account Information</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-start gap-3">
              <User className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Role
                </p>
                <Badge className="mt-1">
                  {ROLE_LABELS[user.role] || user.role}
                </Badge>
              </div>
            </div>

            <Separator />

            <div className="flex items-start gap-3">
              <Building className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Branch
                </p>
                <p className="text-base">
                  {user.branch?.branchName || "All Branches"}
                </p>
              </div>
            </div>

            <Separator />

            <div className="flex items-start gap-3">
              <User className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Employee Code
                </p>
                <p className="text-base">{user.employeeCode || "-"}</p>
              </div>
            </div>

            <Separator />

            <div className="flex items-start gap-3">
              <Calendar className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Status
                </p>
                <Badge
                  variant={user.isActive ? "default" : "secondary"}
                  className="mt-1"
                >
                  {user.isActive ? "Active" : "Inactive"}
                </Badge>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Permissions & Limits */}
        <Card>
          <CardHeader>
            <CardTitle>Permissions & Limits</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-start gap-3">
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Discount Limit
                </p>
                <p className="text-base">
                  {user.discountLimit ? `${user.discountLimit}%` : "No limit"}
                </p>
              </div>
            </div>

            <Separator />

            <div className="flex items-start gap-3">
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Credit Transaction Limit
                </p>
                <p className="text-base">
                  {user.creditTransactionLimit
                    ? `Rs. ${parseFloat(
                        user.creditTransactionLimit
                      ).toLocaleString()}`
                    : "No limit"}
                </p>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Timestamps */}
        <Card>
          <CardHeader>
            <CardTitle>System Information</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-start gap-3">
              <Calendar className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Created At
                </p>
                <p className="text-base">
                  {user.createdAt
                    ? new Date(user.createdAt).toLocaleString()
                    : "-"}
                </p>
              </div>
            </div>

            <Separator />

            <div className="flex items-start gap-3">
              <Calendar className="h-5 w-5 text-muted-foreground mt-0.5" />
              <div className="flex-1">
                <p className="text-sm font-medium text-muted-foreground">
                  Last Updated
                </p>
                <p className="text-base">
                  {user.updatedAt
                    ? new Date(user.updatedAt).toLocaleString()
                    : "-"}
                </p>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default UserViewPage;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\routes\index.jsx"   & echo.. 
/**
 * Application Router Configuration
 * Defines all routes with lazy loading and guards
 */

import { lazy, Suspense } from "react";
import { createBrowserRouter, Navigate } from "react-router-dom";
import { ROUTES } from "@/config";
import { ROLES } from "@/constants";
import { MainLayout, AuthLayout } from "@/components/layout";
import { PageLoader } from "@/components/common";
import ErrorBoundary from "@/components/common/ErrorBoundary";
import { AuthGuard, RoleGuard } from "./guards";

// Lazy load pages for code splitting
const LoginPage = lazy(() => import("@/pages/auth/LoginPage"));
const DashboardPage = lazy(() => import("@/pages/dashboard/DashboardPage"));

// Products Pages
const ProductsPage = lazy(() => import("@/pages/products/ProductsPage"));
const ProductFormPage = lazy(() => import("@/pages/products/ProductFormPage"));
const ProductViewPage = lazy(() => import("@/pages/products/ProductViewPage"));

// Categories Pages
const CategoriesPage = lazy(() => import("@/pages/categories/CategoriesPage"));

// Inventory Pages
const InventoryPage = lazy(() => import("@/pages/inventory/InventoryPage"));
const AvailableStockPage = lazy(() =>
  import("@/pages/inventory/AvailableStockPage")
);
const StockTransfersPage = lazy(() =>
  import("@/pages/inventory/StockTransfersPage")
);
const StockTransferFormPage = lazy(() =>
  import("@/pages/inventory/StockTransferFormPage")
);
const StockMovementsPage = lazy(() =>
  import("@/pages/inventory/StockMovementsPage")
);
const StockAdjustmentsPage = lazy(() =>
  import("@/pages/inventory/StockAdjustmentsPage")
);
const StockAdjustmentFormPage = lazy(() =>
  import("@/pages/inventory/StockAdjustmentFormPage")
);
const BatchTrackingPage = lazy(() =>
  import("@/pages/inventory/BatchTrackingPage")
);
const LowStockPage = lazy(() => import("@/pages/inventory/LowStockPage"));
const ExpiringPage = lazy(() => import("@/pages/inventory/ExpiringPage"));

// Customers Pages
const CustomersPage = lazy(() => import("@/pages/customers/CustomersPage"));
const CustomerFormPage = lazy(() =>
  import("@/pages/customers/CustomerFormPage")
);
const CreditAccountsPage = lazy(() =>
  import("@/pages/customers/CreditAccountsPage")
);

// Suppliers Pages
const SuppliersPage = lazy(() => import("@/pages/suppliers/SuppliersPage"));
const SupplierFormPage = lazy(() =>
  import("@/pages/suppliers/SupplierFormPage")
);

// Users Pages
const UsersPage = lazy(() => import("@/pages/users/UsersPage"));
const UserFormPage = lazy(() => import("@/pages/users/UserFormPage"));
const UserViewPage = lazy(() => import("@/pages/users/UserViewPage"));

// Branches Pages
const BranchesPage = lazy(() => import("@/pages/branches/BranchesPage"));
const BranchFormPage = lazy(() => import("@/pages/branches/BranchFormPage"));

// Purchase Orders Pages
const PurchaseOrdersPage = lazy(() =>
  import("@/pages/purchase-orders/PurchaseOrdersPage")
);
const PurchaseOrderFormPage = lazy(() =>
  import("@/pages/purchase-orders/PurchaseOrderFormPage")
);
const PurchaseOrderViewPage = lazy(() =>
  import("@/pages/purchase-orders/PurchaseOrderViewPage")
);

// GRN Pages
const GRNListPage = lazy(() => import("@/pages/grn/GRNListPage"));
const GRNFormPage = lazy(() => import("@/pages/grn/GRNFormPage"));
const DirectGRNFormPage = lazy(() => import("@/pages/grn/DirectGRNFormPage"));
const GRNViewPage = lazy(() => import("@/pages/grn/GRNViewPage"));
const GRNEditPage = lazy(() => import("@/pages/grn/GRNEditPage"));

// Reports Pages
const ReportsPage = lazy(() => import("@/pages/reports/ReportsPage"));
const SalesReportPage = lazy(() => import("@/pages/reports/SalesReportPage"));
const InventoryReportPage = lazy(() =>
  import("@/pages/reports/InventoryReportPage")
);
const FinancialReportPage = lazy(() =>
  import("@/pages/reports/FinancialReportPage")
);
const EmployeeReportPage = lazy(() =>
  import("@/pages/reports/EmployeeReportPage")
);
const AuditPage = lazy(() => import("@/pages/reports/AuditPage"));

// Settings Pages
const SettingsPage = lazy(() => import("@/pages/settings/SettingsPage"));

// POS/Sales Pages
const POSPage = lazy(() => import("@/pages/pos/POSPage"));
const SalesHistoryPage = lazy(() => import("@/pages/sales/SalesHistoryPage"));
const SaleViewPage = lazy(() => import("@/pages/sales/SaleViewPage"));
const SaleReturnsPage = lazy(() => import("@/pages/sales/SaleReturnsPage"));
const SaleReturnFormPage = lazy(() =>
  import("@/pages/sales/SaleReturnFormPage")
);

// Finance Pages
const FinancePage = lazy(() => import("@/pages/finance/FinancePage"));
const TransactionsPage = lazy(() => import("@/pages/finance/TransactionsPage"));
const InvoicesPage = lazy(() => import("@/pages/finance/InvoicesPage"));
const ChequesPage = lazy(() => import("@/pages/finance/ChequesPage"));
const BanksPage = lazy(() => import("@/pages/finance/BanksPage"));
const CashRegisterPage = lazy(() => import("@/pages/finance/CashRegisterPage"));
const CashBookPage = lazy(() => import("@/pages/finance/CashBookPage"));
const FinancialSummaryPage = lazy(() => import("@/pages/finance/FinancialSummaryPage"));

// Payroll Pages
const PayrollPage = lazy(() => import("@/pages/payroll/PayrollPage"));
const SalariesPage = lazy(() => import("@/pages/payroll/SalariesPage"));
const AttendancePage = lazy(() => import("@/pages/payroll/AttendancePage"));
const AdvancesPage = lazy(() => import("@/pages/payroll/AdvancesPage"));

// Employees Pages
const EmployeesPage = lazy(() => import("@/pages/employees/EmployeesPage"));
const EmployeeFormPage = lazy(() =>
  import("@/pages/employees/EmployeeFormPage")
);
const EmployeeViewPage = lazy(() =>
  import("@/pages/employees/EmployeeViewPage")
);
const EmployeeAttendancePage = lazy(() =>
  import("@/pages/employees/EmployeeAttendancePage")
);

// Placeholder for pages not yet implemented
const PlaceholderPage = ({ title }) => (
  <div className="flex flex-col items-center justify-center min-h-[400px] text-center">
    <div className="text-6xl mb-4"></div>
    <h2 className="text-2xl font-bold mb-2">{title}</h2>
    <p className="text-muted-foreground">This page is under construction.</p>
  </div>
);

// Suspense wrapper for lazy loaded pages
const SuspenseWrapper = ({ children }) => (
  <Suspense fallback={<PageLoader />}>{children}</Suspense>
);

/**
 * Create the application router
 */
const router = createBrowserRouter([
  // Auth routes (no auth required)
  {
    element: <AuthLayout />,
    children: [
      {
        path: ROUTES.AUTH.LOGIN,
        element: (
          <SuspenseWrapper>
            <LoginPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: "/forgot-password",
        element: <PlaceholderPage title="Forgot Password" />,
      },
    ],
  },

  // Protected routes (auth required)
  {
    element: (
      <AuthGuard>
        <MainLayout />
      </AuthGuard>
    ),
    errorElement: <ErrorBoundary />,
    children: [
      // Dashboard
      {
        path: ROUTES.DASHBOARD,
        element: (
          <SuspenseWrapper>
            <DashboardPage />
          </SuspenseWrapper>
        ),
      },

      // POS Routes
      {
        path: ROUTES.POS.ROOT,
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.ADMIN,
              ROLES.BRANCH_MANAGER,
              ROLES.PHARMACIST,
              ROLES.CASHIER,
            ]}
          >
            <SuspenseWrapper>
              <POSPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.POS.NEW_SALE,
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.ADMIN,
              ROLES.BRANCH_MANAGER,
              ROLES.PHARMACIST,
              ROLES.CASHIER,
            ]}
          >
            <SuspenseWrapper>
              <POSPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.POS.HELD_SALES,
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.ADMIN,
              ROLES.BRANCH_MANAGER,
              ROLES.PHARMACIST,
              ROLES.CASHIER,
            ]}
          >
            <SuspenseWrapper>
              <POSPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.POS.HISTORY,
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.ADMIN,
              ROLES.BRANCH_MANAGER,
              ROLES.PHARMACIST,
              ROLES.CASHIER,
            ]}
          >
            <SuspenseWrapper>
              <SalesHistoryPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.POS.RETURNS,
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.ADMIN,
              ROLES.BRANCH_MANAGER,
              ROLES.PHARMACIST,
            ]}
          >
            <SuspenseWrapper>
              <SaleReturnsPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Sales Routes
      {
        path: ROUTES.SALES.LIST,
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.OWNER,
              ROLES.BRANCH_ADMIN,
              ROLES.PHARMACIST,
              ROLES.CASHIER,
            ]}
          >
            <SuspenseWrapper>
              <SalesHistoryPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.SALES.VIEW(":id"),
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.OWNER,
              ROLES.BRANCH_ADMIN,
              ROLES.PHARMACIST,
              ROLES.CASHIER,
            ]}
          >
            <SuspenseWrapper>
              <SaleViewPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Sale Returns Routes
      {
        path: ROUTES.SALE_RETURNS.LIST,
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.ADMIN,
              ROLES.BRANCH_MANAGER,
              ROLES.PHARMACIST,
            ]}
          >
            <SuspenseWrapper>
              <SaleReturnsPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.SALE_RETURNS.CREATE,
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.ADMIN,
              ROLES.BRANCH_MANAGER,
              ROLES.PHARMACIST,
            ]}
          >
            <SuspenseWrapper>
              <SaleReturnFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.SALE_RETURNS.VIEW(":id"),
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.ADMIN,
              ROLES.BRANCH_MANAGER,
              ROLES.PHARMACIST,
            ]}
          >
            <SuspenseWrapper>
              <SaleReturnFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Products Routes
      {
        path: ROUTES.PRODUCTS.LIST,
        element: (
          <SuspenseWrapper>
            <ProductsPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.PRODUCTS.NEW,
        element: (
          <RoleGuard feature="products" action="create">
            <SuspenseWrapper>
              <ProductFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.PRODUCTS.EDIT(":id"),
        element: (
          <RoleGuard feature="products" action="update">
            <SuspenseWrapper>
              <ProductFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.PRODUCTS.VIEW(":id"),
        element: (
          <SuspenseWrapper>
            <ProductViewPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.PRODUCTS.LOW_STOCK,
        element: (
          <SuspenseWrapper>
            <LowStockPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.PRODUCTS.EXPIRING,
        element: (
          <SuspenseWrapper>
            <ExpiringPage />
          </SuspenseWrapper>
        ),
      },

      // Categories Routes
      {
        path: ROUTES.CATEGORIES.LIST,
        element: (
          <SuspenseWrapper>
            <CategoriesPage />
          </SuspenseWrapper>
        ),
      },

      // Inventory Routes
      {
        path: ROUTES.INVENTORY.LIST,
        element: (
          <SuspenseWrapper>
            <InventoryPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.INVENTORY.AVAILABLE,
        element: (
          <SuspenseWrapper>
            <AvailableStockPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.INVENTORY.TRANSFERS.LIST,
        element: (
          <SuspenseWrapper>
            <StockTransfersPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.INVENTORY.TRANSFERS.NEW,
        element: (
          <SuspenseWrapper>
            <StockTransferFormPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.INVENTORY.MOVEMENTS,
        element: (
          <SuspenseWrapper>
            <StockMovementsPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.INVENTORY.ADJUSTMENTS.LIST,
        element: (
          <SuspenseWrapper>
            <StockAdjustmentsPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.INVENTORY.LOW_STOCK,
        element: (
          <SuspenseWrapper>
            <LowStockPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.INVENTORY.EXPIRY,
        element: (
          <SuspenseWrapper>
            <ExpiringPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.INVENTORY.ADJUSTMENTS.NEW,
        element: (
          <SuspenseWrapper>
            <StockAdjustmentFormPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.INVENTORY.BATCHES,
        element: (
          <SuspenseWrapper>
            <BatchTrackingPage />
          </SuspenseWrapper>
        ),
      },

      // Suppliers Routes
      {
        path: ROUTES.SUPPLIERS.LIST,
        element: (
          <SuspenseWrapper>
            <SuppliersPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.SUPPLIERS.NEW,
        element: (
          <RoleGuard feature="suppliers" action="create">
            <SuspenseWrapper>
              <SupplierFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.SUPPLIERS.EDIT(":id"),
        element: (
          <RoleGuard feature="suppliers" action="update">
            <SuspenseWrapper>
              <SupplierFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Customers Routes
      {
        path: ROUTES.CUSTOMERS.LIST,
        element: (
          <SuspenseWrapper>
            <CustomersPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.CUSTOMERS.NEW,
        element: (
          <RoleGuard feature="customers" action="create">
            <SuspenseWrapper>
              <CustomerFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.CUSTOMERS.EDIT(":id"),
        element: (
          <RoleGuard feature="customers" action="update">
            <SuspenseWrapper>
              <CustomerFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.CUSTOMERS.CREDITS,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <CreditAccountsPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Finance Routes
      {
        path: ROUTES.FINANCE.ROOT,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.ACCOUNTANT]}
          >
            <SuspenseWrapper>
              <FinancePage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.FINANCE.TRANSACTIONS,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.ACCOUNTANT]}
          >
            <SuspenseWrapper>
              <TransactionsPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.FINANCE.INVOICES,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.ACCOUNTANT]}
          >
            <SuspenseWrapper>
              <InvoicesPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.FINANCE.CHEQUES,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.ACCOUNTANT]}
          >
            <SuspenseWrapper>
              <ChequesPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.FINANCE.BANKS,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.ACCOUNTANT]}
          >
            <SuspenseWrapper>
              <BanksPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.FINANCE.CASH_REGISTER,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.ACCOUNTANT]}
          >
            <SuspenseWrapper>
              <CashRegisterPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.FINANCE.CASH_BOOK,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.ACCOUNTANT]}
          >
            <SuspenseWrapper>
              <CashBookPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.FINANCE.SUMMARY,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.ACCOUNTANT]}
          >
            <SuspenseWrapper>
              <FinancialSummaryPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Payroll Routes
      {
        path: ROUTES.PAYROLL.ROOT,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <PayrollPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.PAYROLL.SALARIES,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <SalariesPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.PAYROLL.ATTENDANCE,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <AttendancePage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.PAYROLL.ADVANCES,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <AdvancesPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Reports Routes
      {
        path: ROUTES.REPORTS.ROOT,
        element: (
          <RoleGuard
            allowedRoles={[
              ROLES.SUPER_ADMIN,
              ROLES.OWNER,
              ROLES.BRANCH_ADMIN,
              ROLES.ACCOUNTANT,
            ]}
          >
            <SuspenseWrapper>
              <ReportsPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.REPORTS.SALES,
        element: (
          <RoleGuard feature="reports" action="view">
            <SuspenseWrapper>
              <SalesReportPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.REPORTS.INVENTORY,
        element: (
          <RoleGuard feature="reports" action="view">
            <SuspenseWrapper>
              <InventoryReportPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.REPORTS.FINANCIAL,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.ACCOUNTANT]}
          >
            <SuspenseWrapper>
              <FinancialReportPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.REPORTS.EMPLOYEES,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <EmployeeReportPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.REPORTS.AUDIT,
        element: (
          <RoleGuard allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER]}>
            <SuspenseWrapper>
              <AuditPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Employees Routes
      {
        path: ROUTES.EMPLOYEES.LIST,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <EmployeesPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.EMPLOYEES.NEW,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <EmployeeFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.EMPLOYEES.EDIT(":id"),
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <EmployeeFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.EMPLOYEES.VIEW(":id"),
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <EmployeeViewPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.EMPLOYEES.ATTENDANCE,
        element: (
          <RoleGuard
            allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER, ROLES.BRANCH_ADMIN]}
          >
            <SuspenseWrapper>
              <EmployeeAttendancePage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Branches Routes
      {
        path: ROUTES.BRANCHES.LIST,
        element: (
          <RoleGuard allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER]}>
            <SuspenseWrapper>
              <BranchesPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.BRANCHES.NEW,
        element: (
          <RoleGuard allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER]}>
            <SuspenseWrapper>
              <BranchFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.BRANCHES.EDIT(":id"),
        element: (
          <RoleGuard allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER]}>
            <SuspenseWrapper>
              <BranchFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Users Routes (Super Admin only)
      {
        path: ROUTES.USERS.LIST,
        element: (
          <RoleGuard allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER]}>
            <SuspenseWrapper>
              <UsersPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.USERS.NEW,
        element: (
          <RoleGuard allowedRoles={[ROLES.SUPER_ADMIN]}>
            <SuspenseWrapper>
              <UserFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.USERS.EDIT(":id"),
        element: (
          <RoleGuard allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER]}>
            <SuspenseWrapper>
              <UserFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.USERS.VIEW(":id"),
        element: (
          <RoleGuard allowedRoles={[ROLES.SUPER_ADMIN, ROLES.OWNER]}>
            <SuspenseWrapper>
              <UserViewPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Purchase Orders Routes
      {
        path: ROUTES.PURCHASE_ORDERS.LIST,
        element: (
          <RoleGuard feature="purchaseOrders" action="view">
            <SuspenseWrapper>
              <PurchaseOrdersPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.PURCHASE_ORDERS.NEW,
        element: (
          <RoleGuard feature="purchaseOrders" action="create">
            <SuspenseWrapper>
              <PurchaseOrderFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.PURCHASE_ORDERS.EDIT(":id"),
        element: (
          <RoleGuard feature="purchaseOrders" action="update">
            <SuspenseWrapper>
              <PurchaseOrderFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.PURCHASE_ORDERS.VIEW(":id"),
        element: (
          <RoleGuard feature="purchaseOrders" action="view">
            <SuspenseWrapper>
              <PurchaseOrderViewPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // GRN Routes
      {
        path: ROUTES.GRN.LIST,
        element: (
          <RoleGuard feature="grn" action="view">
            <SuspenseWrapper>
              <GRNListPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.GRN.CREATE,
        element: (
          <RoleGuard feature="grn" action="create">
            <SuspenseWrapper>
              <GRNFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.GRN.DIRECT,
        element: (
          <RoleGuard feature="grn" action="create">
            <SuspenseWrapper>
              <DirectGRNFormPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.GRN.EDIT(":id"),
        element: (
          <RoleGuard feature="grn" action="update">
            <SuspenseWrapper>
              <GRNEditPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },
      {
        path: ROUTES.GRN.VIEW(":id"),
        element: (
          <RoleGuard feature="grn" action="view">
            <SuspenseWrapper>
              <GRNViewPage />
            </SuspenseWrapper>
          </RoleGuard>
        ),
      },

      // Settings Routes
      {
        path: ROUTES.SETTINGS.ROOT,
        element: (
          <SuspenseWrapper>
            <SettingsPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.SETTINGS.GENERAL,
        element: (
          <SuspenseWrapper>
            <SettingsPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.SETTINGS.BRANCH,
        element: (
          <SuspenseWrapper>
            <SettingsPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.SETTINGS.TAX,
        element: (
          <SuspenseWrapper>
            <SettingsPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.SETTINGS.NOTIFICATIONS,
        element: (
          <SuspenseWrapper>
            <SettingsPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: ROUTES.SETTINGS.PROFILE,
        element: (
          <SuspenseWrapper>
            <SettingsPage />
          </SuspenseWrapper>
        ),
      },
      {
        path: "/settings/preferences",
        element: (
          <SuspenseWrapper>
            <SettingsPage />
          </SuspenseWrapper>
        ),
      },

      // Catch-all redirect to dashboard
      {
        path: "*",
        element: <Navigate to={ROUTES.DASHBOARD} replace />,
      },
    ],
  },

  // Root redirect
  {
    path: "/",
    element: <Navigate to={ROUTES.DASHBOARD} replace />,
  },
]);

export default router;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\routes\guards\AuthGuard.jsx"   & echo.. 
/**
 * AuthGuard Component
 * Protects routes requiring authentication
 */

import { Navigate, useLocation } from "react-router-dom";
import { useAuth } from "@/hooks";
import { ROUTES } from "@/config";
import { PageLoader } from "@/components/common";

/**
 * AuthGuard - Protects routes that require authentication
 */
const AuthGuard = ({ children }) => {
  const { isAuthenticated, isLoading } = useAuth();
  const location = useLocation();

  // Show loading while checking auth status
  if (isLoading) {
    return <PageLoader message="Checking authentication..." />;
  }

  // Redirect to login if not authenticated
  if (!isAuthenticated) {
    return (
      <Navigate
        to={ROUTES.AUTH.LOGIN}
        state={{ from: location.pathname }}
        replace
      />
    );
  }

  return children;
};

export default AuthGuard;
.

D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src>type "D:\PentX\Pharmarcy - Medlan\medlan\pharmacy-medlan\frontend\src\routes\guards\RoleGuard.jsx"   & echo.. 
/**
 * RoleGuard Component
 * Protects routes based on user roles
 */

import { Navigate } from "react-router-dom";
import { useAuth, usePermissions } from "@/hooks";
import { ROUTES } from "@/config";

/**
 * AccessDenied component
 */
const AccessDenied = () => (
  <div className="flex flex-col items-center justify-center min-h-[400px] text-center">
    <div className="text-6xl mb-4"></div>
    <h2 className="text-2xl font-bold mb-2">Access Denied</h2>
    <p className="text-muted-foreground mb-4">
      You don't have permission to access this page.
    </p>
    <a href={ROUTES.DASHBOARD} className="text-primary hover:underline">
      Go to Dashboard
    </a>
  </div>
);

/**
 * RoleGuard - Protects routes based on user roles
 * @param {Array<string>} allowedRoles - Roles allowed to access the route
 * @param {string} minimumRole - Minimum role level required
 * @param {string} feature - Feature to check permission for
 * @param {string} action - Action to check permission for
 * @param {string} redirectTo - Path to redirect if access denied
 * @param {React.ReactNode} children - Child components
 */
const RoleGuard = ({
  allowedRoles,
  minimumRole,
  feature,
  action = "view",
  redirectTo,
  fallback = <AccessDenied />,
  children,
}) => {
  const { isAuthenticated } = useAuth();
  const { role, hasAnyRole, hasMinimumRole, hasPermission } = usePermissions();

  // Must be authenticated
  if (!isAuthenticated) {
    return <Navigate to={ROUTES.AUTH.LOGIN} replace />;
  }

  // Check role-based access
  let hasAccess = false;

  // Check if user has any of the allowed roles
  if (allowedRoles && allowedRoles.length > 0) {
    hasAccess = hasAnyRole(allowedRoles);
  }
  // Check if user has minimum role level
  else if (minimumRole) {
    hasAccess = hasMinimumRole(minimumRole);
  }
  // Check feature permission
  else if (feature) {
    hasAccess = hasPermission(feature, action);
  }
  // No restriction specified, allow access
  else {
    hasAccess = true;
  }

  // Redirect or show fallback if access denied
  if (!hasAccess) {
    if (redirectTo) {
      return <Navigate to={redirectTo} replace />;
    }
    return fallback;
  }

  return children;
};

export default RoleGuard;
.
